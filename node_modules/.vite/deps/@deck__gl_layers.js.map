{"version":3,"file":"@deck__gl_layers.js","names":["isTypedArray","isNumberArray","count","isNumberArray","a","b","isNumberArray","i","uniformBlock","uniformBlock","e","t","n","s","r","a","i","l","o","c","u","h","f","i","WgslReflect","a","i","j","i","x","x","p","WebMercatorViewport","z","x","y","vec4.transformMat4","cache","i","deepEqual","a","b","i","a","b","module","x","i","module","getUniforms","vs","fs","deepEqual","n","i","j","v","typedArrayManager","copy","x","EMPTY_ARRAY","j","i","i","t","range.FULL","a","range.add","range.EMPTY","i","i","j","n","x","i","getTransform","t","vs","i","TRANSITION_TYPES","i","d","transition","validate","i","module","defaultProps","i","Component","defaultProps","count","EMPTY_ARRAY","defaultProps","Component","x","y","z","i","typedArrayManager","Layer","x","i","defaultTypedArrayManager","normalize","copy","uniformBlock","DEFAULT_COLOR","defaultProps","x","Layer","project32","picking","u","ut","v","p","i","uniformBlock","defaultProps","Layer","project32","picking","x","u","v","uniformBlock","DEFAULT_BUFFER","nextPowOfTwo","ctx","i","buildMapping","x","y","DEFAULT_COLOR","defaultProps","x","Layer","project32","picking","y","defaultProps","x","Layer","project32","color","picking","glslUniformBlock","DEFAULT_COLOR","defaultProps","x","Layer","project32","color","picking","i","DEFAULT_COLOR","defaultProps","x","Layer","project32","color","picking","area","i","j","i","t","a","b","i","p","a","b","i","p","x","y","normalize","i","p","v","i","j","a","k","uniformBlock","DEFAULT_COLOR","defaultProps","x","Layer","project32","picking","i","p","d","defaultProps","ColumnLayer","i","j","isCut","p","i","uniformBlock","DEFAULT_COLOR","defaultProps","ATTRIBUTE_TRANSITION","Layer","project32","picking","d","i","earcut","x","y","i","p","a","b","c","n","m","q","e","r","j","d","i","j","area","o","x","y","z","n","p","Polygon.normalize","Polygon.getPositions","Polygon.getHoleIndices","i","Polygon.getSurfaceIndices","j","x","y","z","uniformBlock","main","main","DEFAULT_COLOR","defaultProps","f","Layer","vsTop","vsSide","project32","picking","d","i","count","i","defaultProps","f","CompositeLayer","p","Polygon.normalize","i","SolidPolygonLayer","PathLayer","x","i","uniformBlock","defaultProps","x","IconLayer","ctx","canvas","y","x","a","j","d","i","f","v","z","q","k","s","r","x","i","y","j","i","canvas","ctx","defaultProps","x","Layer","project32","picking","defaultProps","x","CompositeLayer","i","y","MultiIconLayer","TextBackgroundLayer","ScatterplotLayer","IconLayer","TextLayer","PathLayer","SolidPolygonLayer","i","f","f","CompositeLayer","ft","d"],"sources":["../../@luma.gl/shadertools/dist/lib/glsl-utils/shader-utils.js","../../@luma.gl/core/dist/adapter/resources/compute-pipeline.js","../../@luma.gl/core/dist/utils/is-array.js","../../@luma.gl/core/dist/portable/uniform-buffer-layout.js","../../@luma.gl/core/dist/utils/array-equal.js","../../@luma.gl/core/dist/portable/uniform-block.js","../../@luma.gl/core/dist/portable/uniform-store.js","../../wgsl_reflect/wgsl_reflect.module.js","../../@luma.gl/shadertools/dist/lib/wgsl/get-shader-layout-wgsl.js","../../@luma.gl/shadertools/dist/modules/math/fp64/fp64-utils.js","../../@luma.gl/shadertools/dist/modules/math/fp64/fp64-arithmetic-glsl.js","../../@luma.gl/shadertools/dist/modules/math/fp64/fp64.js","../../@luma.gl/shadertools/dist/modules/lighting/lights/lighting-glsl.js","../../@luma.gl/shadertools/dist/modules/lighting/lights/lighting-wgsl.js","../../@luma.gl/shadertools/dist/modules/lighting/lights/lighting.js","../../@luma.gl/shadertools/dist/modules/lighting/phong-material/phong-shaders-glsl.js","../../@luma.gl/shadertools/dist/modules/lighting/phong-material/phong-shaders-wgsl.js","../../@luma.gl/shadertools/dist/modules/lighting/gouraud-material/gouraud-material.js","../../@luma.gl/shadertools/dist/modules/lighting/phong-material/phong-material.js","../../@deck.gl/core/dist/shaderlib/project/project-functions.js","../../@luma.gl/engine/dist/utils/uid.js","../../@luma.gl/engine/dist/geometry/gpu-geometry.js","../../@luma.gl/engine/dist/factories/pipeline-factory.js","../../@luma.gl/engine/dist/factories/shader-factory.js","../../@luma.gl/engine/dist/debug/debug-shader-layout.js","../../@luma.gl/engine/dist/debug/debug-framebuffer.js","../../@luma.gl/engine/dist/utils/deep-equal.js","../../@luma.gl/engine/dist/utils/buffer-layout-helper.js","../../@luma.gl/engine/dist/utils/buffer-layout-order.js","../../@math.gl/types/dist/is-array.js","../../@luma.gl/engine/dist/model/split-uniforms-and-bindings.js","../../@luma.gl/engine/dist/shader-inputs.js","../../@luma.gl/engine/dist/application-utils/load-file.js","../../@luma.gl/engine/dist/async-texture/async-texture.js","../../@luma.gl/engine/dist/model/model.js","../../@luma.gl/engine/dist/compute/buffer-transform.js","../../@luma.gl/engine/dist/geometry/geometry.js","../../@luma.gl/engine/dist/geometries/cube-geometry.js","../../@deck.gl/core/dist/lib/attribute/gl-utils.js","../../@deck.gl/core/dist/lib/attribute/data-column.js","../../@deck.gl/core/dist/utils/iterable-utils.js","../../@deck.gl/core/dist/utils/range.js","../../@deck.gl/core/dist/lib/attribute/transition-settings.js","../../@deck.gl/core/dist/lib/attribute/attribute.js","../../@deck.gl/core/dist/utils/array-utils.js","../../@deck.gl/core/dist/transitions/gpu-transition-utils.js","../../@deck.gl/core/dist/transitions/gpu-transition.js","../../@deck.gl/core/dist/transitions/gpu-interpolation-transition.js","../../@deck.gl/core/dist/transitions/gpu-spring-transition.js","../../@deck.gl/core/dist/lib/attribute/attribute-transition-manager.js","../../@deck.gl/core/dist/lib/attribute/attribute-manager.js","../../@deck.gl/core/dist/transitions/cpu-interpolation-transition.js","../../@deck.gl/core/dist/transitions/cpu-spring-transition.js","../../@deck.gl/core/dist/lib/uniform-transition-manager.js","../../@deck.gl/core/dist/lifecycle/props.js","../../@deck.gl/core/dist/utils/count.js","../../@deck.gl/core/dist/utils/shader.js","../../@deck.gl/core/dist/utils/texture.js","../../@deck.gl/core/dist/lifecycle/prop-types.js","../../@deck.gl/core/dist/lifecycle/create-props.js","../../@deck.gl/core/dist/lifecycle/component.js","../../@deck.gl/core/dist/lifecycle/component-state.js","../../@deck.gl/core/dist/lib/layer-state.js","../../@deck.gl/core/dist/lib/layer.js","../../@deck.gl/core/dist/lib/composite-layer.js","../../@deck.gl/core/dist/utils/tesselator.js","../../@deck.gl/layers/dist/arc-layer/arc-layer-uniforms.js","../../@deck.gl/layers/dist/arc-layer/arc-layer-vertex.glsl.js","../../@deck.gl/layers/dist/arc-layer/arc-layer-fragment.glsl.js","../../@deck.gl/layers/dist/arc-layer/arc-layer.js","../../@deck.gl/layers/dist/bitmap-layer/create-mesh.js","../../@deck.gl/layers/dist/bitmap-layer/bitmap-layer-uniforms.js","../../@deck.gl/layers/dist/bitmap-layer/bitmap-layer-vertex.js","../../@deck.gl/layers/dist/bitmap-layer/bitmap-layer-fragment.js","../../@deck.gl/layers/dist/bitmap-layer/bitmap-layer.js","../../@deck.gl/layers/dist/icon-layer/icon-layer-uniforms.js","../../@deck.gl/layers/dist/icon-layer/icon-layer-vertex.glsl.js","../../@deck.gl/layers/dist/icon-layer/icon-layer-fragment.glsl.js","../../@deck.gl/layers/dist/icon-layer/icon-manager.js","../../@deck.gl/layers/dist/icon-layer/icon-layer.js","../../@deck.gl/layers/dist/line-layer/line-layer-uniforms.js","../../@deck.gl/layers/dist/line-layer/line-layer.wgsl.js","../../@deck.gl/layers/dist/line-layer/line-layer-vertex.glsl.js","../../@deck.gl/layers/dist/line-layer/line-layer-fragment.glsl.js","../../@deck.gl/layers/dist/line-layer/line-layer.js","../../@deck.gl/layers/dist/point-cloud-layer/point-cloud-layer-uniforms.js","../../@deck.gl/layers/dist/point-cloud-layer/point-cloud-layer-vertex.glsl.js","../../@deck.gl/layers/dist/point-cloud-layer/point-cloud-layer-fragment.glsl.js","../../@deck.gl/layers/dist/point-cloud-layer/point-cloud-layer.wgsl.js","../../@deck.gl/layers/dist/point-cloud-layer/point-cloud-layer.js","../../@deck.gl/layers/dist/scatterplot-layer/scatterplot-layer-uniforms.js","../../@deck.gl/layers/dist/scatterplot-layer/scatterplot-layer-vertex.glsl.js","../../@deck.gl/layers/dist/scatterplot-layer/scatterplot-layer-fragment.glsl.js","../../@deck.gl/layers/dist/scatterplot-layer/scatterplot-layer.wgsl.js","../../@deck.gl/layers/dist/scatterplot-layer/scatterplot-layer.js","../../@math.gl/polygon/dist/polygon-utils.js","../../@math.gl/polygon/dist/utils.js","../../@math.gl/polygon/dist/lineclip.js","../../@math.gl/polygon/dist/cut-by-grid.js","../../@math.gl/polygon/dist/cut-by-mercator-bounds.js","../../@deck.gl/layers/dist/column-layer/column-geometry.js","../../@deck.gl/layers/dist/column-layer/column-layer-uniforms.js","../../@deck.gl/layers/dist/column-layer/column-layer-vertex.glsl.js","../../@deck.gl/layers/dist/column-layer/column-layer-fragment.glsl.js","../../@deck.gl/layers/dist/column-layer/column-layer.js","../../@deck.gl/layers/dist/column-layer/grid-cell-layer.js","../../@deck.gl/layers/dist/path-layer/path.js","../../@deck.gl/layers/dist/path-layer/path-tesselator.js","../../@deck.gl/layers/dist/path-layer/path-layer-uniforms.js","../../@deck.gl/layers/dist/path-layer/path-layer-vertex.glsl.js","../../@deck.gl/layers/dist/path-layer/path-layer-fragment.glsl.js","../../@deck.gl/layers/dist/path-layer/path-layer.js","../../@deck.gl/layers/node_modules/earcut/src/earcut.js","../../@deck.gl/layers/dist/solid-polygon-layer/polygon.js","../../@deck.gl/layers/dist/solid-polygon-layer/polygon-tesselator.js","../../@deck.gl/layers/dist/solid-polygon-layer/solid-polygon-layer-uniforms.js","../../@deck.gl/layers/dist/solid-polygon-layer/solid-polygon-layer-vertex-main.glsl.js","../../@deck.gl/layers/dist/solid-polygon-layer/solid-polygon-layer-vertex-top.glsl.js","../../@deck.gl/layers/dist/solid-polygon-layer/solid-polygon-layer-vertex-side.glsl.js","../../@deck.gl/layers/dist/solid-polygon-layer/solid-polygon-layer-fragment.glsl.js","../../@deck.gl/layers/dist/solid-polygon-layer/solid-polygon-layer.js","../../@deck.gl/layers/dist/utils.js","../../@deck.gl/layers/dist/polygon-layer/polygon-layer.js","../../@deck.gl/layers/dist/geojson-layer/geojson-binary.js","../../@deck.gl/layers/dist/text-layer/multi-icon-layer/sdf-uniforms.js","../../@deck.gl/layers/dist/text-layer/multi-icon-layer/multi-icon-layer-fragment.glsl.js","../../@deck.gl/layers/dist/text-layer/multi-icon-layer/multi-icon-layer.js","../../@mapbox/tiny-sdf/index.js","../../@deck.gl/layers/dist/text-layer/utils.js","../../@deck.gl/layers/dist/text-layer/lru-cache.js","../../@deck.gl/layers/dist/text-layer/font-atlas-manager.js","../../@deck.gl/layers/dist/text-layer/text-background-layer/text-background-layer-uniforms.js","../../@deck.gl/layers/dist/text-layer/text-background-layer/text-background-layer-vertex.glsl.js","../../@deck.gl/layers/dist/text-layer/text-background-layer/text-background-layer-fragment.glsl.js","../../@deck.gl/layers/dist/text-layer/text-background-layer/text-background-layer.js","../../@deck.gl/layers/dist/text-layer/text-layer.js","../../@deck.gl/layers/dist/geojson-layer/sub-layer-map.js","../../@deck.gl/layers/dist/geojson-layer/geojson.js","../../@deck.gl/layers/dist/geojson-layer/geojson-layer-props.js","../../@deck.gl/layers/dist/geojson-layer/geojson-layer.js"],"sourcesContent":["// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst FS_GLES = /* glsl */ `\\\nout vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}`;\nconst FS300 = `#version 300 es\\n${FS_GLES}`;\n// Prase given glsl line and return qualifier details or null\nexport function getQualifierDetails(line, qualifiers) {\n    qualifiers = Array.isArray(qualifiers) ? qualifiers : [qualifiers];\n    const words = line.replace(/^\\s+/, '').split(/\\s+/);\n    // TODO add support for precession qualifiers (highp, mediump and lowp)\n    const [qualifier, type, definition] = words;\n    if (!qualifiers.includes(qualifier) || !type || !definition) {\n        return null;\n    }\n    const name = definition.split(';')[0];\n    return { qualifier, type, name };\n}\n/**\n * Given the shader input and output variable names,\n * builds and return a pass through fragment shader.\n */\nexport function getPassthroughFS(options) {\n    const { input, inputChannels, output } = options || {};\n    if (!input) {\n        // Default shader\n        return FS300;\n    }\n    if (!inputChannels) {\n        throw new Error('inputChannels');\n    }\n    const inputType = channelCountToType(inputChannels);\n    const outputValue = convertToVec4(input, inputChannels);\n    return `\\\n#version 300 es\nin ${inputType} ${input};\nout vec4 ${output};\nvoid main() {\n  ${output} = ${outputValue};\n}`;\n}\n/** convert glsl type to suffix */\nexport function typeToChannelSuffix(type) {\n    // prettier-ignore\n    switch (type) {\n        case 'float': return 'x';\n        case 'vec2': return 'xy';\n        case 'vec3': return 'xyz';\n        case 'vec4': return 'xyzw';\n        default:\n            throw new Error(type);\n    }\n}\n/** convert glsl type to channel count */\nexport function typeToChannelCount(type) {\n    // prettier-ignore\n    switch (type) {\n        case 'float': return 1;\n        case 'vec2': return 2;\n        case 'vec3': return 3;\n        case 'vec4': return 4;\n        default:\n            throw new Error(type);\n    }\n}\nfunction channelCountToType(channels) {\n    // prettier-ignore\n    switch (channels) {\n        case 1: return 'float';\n        case 2: return 'vec2';\n        case 3: return 'vec3';\n        case 4: return 'vec4';\n        default:\n            throw new Error(`invalid channels: ${channels}`);\n    }\n}\n/** Returns glsl instruction for converting to vec4 */\nexport function convertToVec4(variable, channels) {\n    // prettier-ignore\n    switch (channels) {\n        case 1: return `vec4(${variable}, 0.0, 0.0, 1.0)`;\n        case 2: return `vec4(${variable}, 0.0, 1.0)`;\n        case 3: return `vec4(${variable}, 1.0)`;\n        case 4: return variable;\n        default:\n            throw new Error(`invalid channels: ${channels}`);\n    }\n}\n//# sourceMappingURL=shader-utils.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Resource } from \"./resource.js\";\n/**\n * A compiled and linked shader program for compute\n */\nexport class ComputePipeline extends Resource {\n    get [Symbol.toStringTag]() {\n        return 'ComputePipeline';\n    }\n    hash = '';\n    /** The merged shader layout */\n    shaderLayout;\n    constructor(device, props) {\n        super(device, props, ComputePipeline.defaultProps);\n        this.shaderLayout = props.shaderLayout;\n    }\n    static defaultProps = {\n        ...Resource.defaultProps,\n        shader: undefined,\n        entryPoint: undefined,\n        constants: {},\n        shaderLayout: undefined\n    };\n}\n//# sourceMappingURL=compute-pipeline.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/**\n * Check is an array is a typed array\n * @param value value to be tested\n * @returns input as TypedArray, or null\n * @todo this should be provided by @math.gl/types\n */\nexport function isTypedArray(value) {\n    return ArrayBuffer.isView(value) && !(value instanceof DataView);\n}\n/**\n * Check is an array is a numeric array (typed array or array of numbers)\n * @param value value to be tested\n * @returns input as NumberArray, or null\n * @todo this should be provided by @math.gl/types\n */\nexport function isNumberArray(value) {\n    if (Array.isArray(value)) {\n        return value.length === 0 || typeof value[0] === 'number';\n    }\n    return isTypedArray(value);\n}\n//# sourceMappingURL=is-array.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { alignTo } from \"../shadertypes/data-types/decode-data-types.js\";\nimport { getVariableShaderTypeInfo } from \"../shadertypes/data-types/decode-shader-types.js\";\nimport { getScratchArrayBuffer } from \"../utils/array-utils-flat.js\";\nimport { isNumberArray } from \"../utils/is-array.js\";\nimport { log } from \"../utils/log.js\";\n/**\n * Smallest buffer size that can be used for uniform buffers.\n * TODO - does this depend on device?\n */\nconst minBufferSize = 1024;\n/**\n * Std140 layout for uniform buffers\n * Supports manual listing of uniforms\n */\nexport class UniformBufferLayout {\n    layout = {};\n    /** number of bytes needed for buffer allocation */\n    byteLength;\n    /** Create a new UniformBufferLayout given a map of attributes. */\n    constructor(uniformTypes, uniformSizes = {}) {\n        /** number of 4 byte slots taken */\n        let size = 0;\n        // Add layout (type, size and offset) definitions for each uniform in the layout\n        for (const [key, uniformType] of Object.entries(uniformTypes)) {\n            const typeAndComponents = getVariableShaderTypeInfo(uniformType);\n            const { type, components } = typeAndComponents;\n            // Calculate total count for uniform arrays.\n            const count = components * (uniformSizes?.[key] ?? 1);\n            // First, align (bump) current offset to an even multiple of current object (1, 2, 4)\n            size = alignTo(size, count);\n            // Use the aligned size as the offset of the current uniform.\n            const offset = size;\n            // Then, add our object's padded size ((1, 2, multiple of 4) to the current offset\n            size += count;\n            this.layout[key] = { type, size: count, offset };\n        }\n        size += (4 - (size % 4)) % 4;\n        const actualByteLength = size * 4;\n        this.byteLength = Math.max(actualByteLength, minBufferSize);\n    }\n    /** Get the data for the complete buffer */\n    getData(uniformValues) {\n        // Allocate three typed arrays pointing at same memory\n        const arrayBuffer = getScratchArrayBuffer(this.byteLength);\n        const typedArrays = {\n            i32: new Int32Array(arrayBuffer),\n            u32: new Uint32Array(arrayBuffer),\n            f32: new Float32Array(arrayBuffer),\n            // TODO not implemented\n            f16: new Uint16Array(arrayBuffer)\n        };\n        for (const [name, value] of Object.entries(uniformValues)) {\n            const uniformLayout = this.layout[name];\n            if (!uniformLayout) {\n                log.warn(`Supplied uniform value ${name} not present in uniform block layout`)();\n                // eslint-disable-next-line no-continue\n                continue;\n            }\n            const { type, size, offset } = uniformLayout;\n            const typedArray = typedArrays[type];\n            if (size === 1) {\n                if (typeof value !== 'number' && typeof value !== 'boolean') {\n                    log.warn(`Supplied value for single component uniform ${name} is not a number: ${value}`)();\n                    // eslint-disable-next-line no-continue\n                    continue;\n                }\n                // single value -> just set it\n                typedArray[offset] = Number(value);\n            }\n            else {\n                if (!isNumberArray(value)) {\n                    log.warn(`Supplied value for multi component / array uniform ${name} is not a numeric array: ${value}`)();\n                    // eslint-disable-next-line no-continue\n                    continue;\n                }\n                // vector/matrix -> copy the supplied (typed) array, starting from offset\n                // TODO: we should limit or check size in case the supplied data overflows\n                typedArray.set(value, offset);\n            }\n        }\n        return new Uint8Array(arrayBuffer, 0, this.byteLength);\n    }\n    /** Does this layout have a field with specified name */\n    has(name) {\n        return Boolean(this.layout[name]);\n    }\n    /** Get offset and size for a field with specified name */\n    get(name) {\n        const layout = this.layout[name];\n        return layout;\n    }\n}\n//# sourceMappingURL=uniform-buffer-layout.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { isNumberArray } from \"./is-array.js\";\n/** Test if two arrays are deep equal, with a length limit that defaults to 16 */\nexport function arrayEqual(a, b, limit = 16) {\n    if (a !== b) {\n        return false;\n    }\n    const arrayA = a;\n    const arrayB = b;\n    if (!isNumberArray(arrayA)) {\n        return false;\n    }\n    if (isNumberArray(arrayB) && arrayA.length === arrayB.length) {\n        for (let i = 0; i < arrayA.length; ++i) {\n            if (arrayB[i] !== arrayA[i]) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n/** Copy a value */\nexport function arrayCopy(a) {\n    if (isNumberArray(a)) {\n        return a.slice();\n    }\n    return a;\n}\n//# sourceMappingURL=array-equal.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { arrayEqual, arrayCopy } from \"../utils/array-equal.js\";\n/**\n * A uniform block holds values of the of uniform values for one uniform block / buffer.\n * It also does some book keeping on what has changed, to minimize unnecessary writes to uniform buffers.\n */\nexport class UniformBlock {\n    name;\n    uniforms = {};\n    modifiedUniforms = {};\n    modified = true;\n    bindingLayout = {};\n    needsRedraw = 'initialized';\n    constructor(props) {\n        this.name = props?.name || 'unnamed';\n        // TODO - Extract uniform layout from the shaderLayout object\n        if (props?.name && props?.shaderLayout) {\n            const binding = props?.shaderLayout.bindings?.find(binding_ => binding_.type === 'uniform' && binding_.name === props?.name);\n            if (!binding) {\n                throw new Error(props?.name);\n            }\n            const uniformBlock = binding;\n            for (const uniform of uniformBlock.uniforms || []) {\n                this.bindingLayout[uniform.name] = uniform;\n            }\n        }\n    }\n    /** Set a map of uniforms */\n    setUniforms(uniforms) {\n        for (const [key, value] of Object.entries(uniforms)) {\n            this._setUniform(key, value);\n            if (!this.needsRedraw) {\n                this.setNeedsRedraw(`${this.name}.${key}=${value}`);\n            }\n        }\n    }\n    setNeedsRedraw(reason) {\n        this.needsRedraw = this.needsRedraw || reason;\n    }\n    /** Returns all uniforms */\n    getAllUniforms() {\n        // @ts-expect-error\n        this.modifiedUniforms = {};\n        this.needsRedraw = false;\n        return (this.uniforms || {});\n    }\n    /** Set a single uniform */\n    _setUniform(key, value) {\n        if (arrayEqual(this.uniforms[key], value)) {\n            return;\n        }\n        this.uniforms[key] = arrayCopy(value);\n        this.modifiedUniforms[key] = true;\n        this.modified = true;\n    }\n}\n//# sourceMappingURL=uniform-block.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Buffer } from \"../adapter/resources/buffer.js\";\nimport { log } from \"../utils/log.js\";\nimport { UniformBlock } from \"./uniform-block.js\";\nimport { UniformBufferLayout } from \"./uniform-buffer-layout.js\";\n/**\n * A uniform store holds a uniform values for one or more uniform blocks,\n * - It can generate binary data for any uniform buffer\n * - It can manage a uniform buffer for each block\n * - It can update managed uniform buffers with a single call\n * - It performs some book keeping on what has changed to minimize unnecessary writes to uniform buffers.\n */\nexport class UniformStore {\n    /** Stores the uniform values for each uniform block */\n    uniformBlocks = new Map();\n    /** Can generate data for a uniform buffer for each block from data */\n    uniformBufferLayouts = new Map();\n    /** Actual buffer for the blocks */\n    uniformBuffers = new Map();\n    /**\n     * Create a new UniformStore instance\n     * @param blocks\n     */\n    constructor(blocks) {\n        for (const [bufferName, block] of Object.entries(blocks)) {\n            const uniformBufferName = bufferName;\n            // Create a layout object to help us generate correctly formatted binary uniform buffers\n            const uniformBufferLayout = new UniformBufferLayout(block.uniformTypes ?? {}, block.uniformSizes ?? {});\n            this.uniformBufferLayouts.set(uniformBufferName, uniformBufferLayout);\n            // Create a Uniform block to store the uniforms for each buffer.\n            const uniformBlock = new UniformBlock({ name: bufferName });\n            uniformBlock.setUniforms(block.defaultUniforms || {});\n            this.uniformBlocks.set(uniformBufferName, uniformBlock);\n        }\n    }\n    /** Destroy any managed uniform buffers */\n    destroy() {\n        for (const uniformBuffer of this.uniformBuffers.values()) {\n            uniformBuffer.destroy();\n        }\n    }\n    /**\n     * Set uniforms\n     * Makes all properties partial\n     */\n    setUniforms(uniforms) {\n        for (const [blockName, uniformValues] of Object.entries(uniforms)) {\n            this.uniformBlocks.get(blockName)?.setUniforms(uniformValues);\n            // We leverage logging in updateUniformBuffers(), even though slightly less efficient\n            // this.updateUniformBuffer(blockName);\n        }\n        this.updateUniformBuffers();\n    }\n    /** Get the required minimum length of the uniform buffer */\n    getUniformBufferByteLength(uniformBufferName) {\n        return this.uniformBufferLayouts.get(uniformBufferName)?.byteLength || 0;\n    }\n    /** Get formatted binary memory that can be uploaded to a buffer */\n    getUniformBufferData(uniformBufferName) {\n        const uniformValues = this.uniformBlocks.get(uniformBufferName)?.getAllUniforms() || {};\n        // @ts-ignore\n        return this.uniformBufferLayouts.get(uniformBufferName)?.getData(uniformValues);\n    }\n    /**\n     * Creates an unmanaged uniform buffer (umnanaged means that application is responsible for destroying it)\n     * The new buffer is initialized with current / supplied values\n     */\n    createUniformBuffer(device, uniformBufferName, uniforms) {\n        if (uniforms) {\n            this.setUniforms(uniforms);\n        }\n        const byteLength = this.getUniformBufferByteLength(uniformBufferName);\n        const uniformBuffer = device.createBuffer({\n            usage: Buffer.UNIFORM | Buffer.COPY_DST,\n            byteLength\n        });\n        // Note that this clears the needs redraw flag\n        const uniformBufferData = this.getUniformBufferData(uniformBufferName);\n        uniformBuffer.write(uniformBufferData);\n        return uniformBuffer;\n    }\n    /** Get the managed uniform buffer. \"managed\" resources are destroyed when the uniformStore is destroyed. */\n    getManagedUniformBuffer(device, uniformBufferName) {\n        if (!this.uniformBuffers.get(uniformBufferName)) {\n            const byteLength = this.getUniformBufferByteLength(uniformBufferName);\n            const uniformBuffer = device.createBuffer({\n                usage: Buffer.UNIFORM | Buffer.COPY_DST,\n                byteLength\n            });\n            this.uniformBuffers.set(uniformBufferName, uniformBuffer);\n        }\n        // this.updateUniformBuffers();\n        // @ts-ignore\n        return this.uniformBuffers.get(uniformBufferName);\n    }\n    /** Updates all uniform buffers where values have changed */\n    updateUniformBuffers() {\n        let reason = false;\n        for (const uniformBufferName of this.uniformBlocks.keys()) {\n            const bufferReason = this.updateUniformBuffer(uniformBufferName);\n            reason ||= bufferReason;\n        }\n        if (reason) {\n            log.log(3, `UniformStore.updateUniformBuffers(): ${reason}`)();\n        }\n        return reason;\n    }\n    /** Update one uniform buffer. Only updates if values have changed */\n    updateUniformBuffer(uniformBufferName) {\n        const uniformBlock = this.uniformBlocks.get(uniformBufferName);\n        let uniformBuffer = this.uniformBuffers.get(uniformBufferName);\n        let reason = false;\n        if (uniformBuffer && uniformBlock?.needsRedraw) {\n            reason ||= uniformBlock.needsRedraw;\n            // This clears the needs redraw flag\n            const uniformBufferData = this.getUniformBufferData(uniformBufferName);\n            uniformBuffer = this.uniformBuffers.get(uniformBufferName);\n            uniformBuffer?.write(uniformBufferData);\n            // logging - TODO - don't query the values unnecessarily\n            const uniformValues = this.uniformBlocks.get(uniformBufferName)?.getAllUniforms();\n            log.log(4, `Writing to uniform buffer ${String(uniformBufferName)}`, uniformBufferData, uniformValues)();\n        }\n        return reason;\n    }\n}\n//# sourceMappingURL=uniform-store.js.map","class e{constructor(e,t){this.name=e,this.attributes=t,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}get isPointer(){return!1}getTypeName(){return this.name}}class t{constructor(e,t,n){this.name=e,this.type=t,this.attributes=n,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class n extends e{constructor(e,t){super(e,t),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class s extends e{constructor(e,t){super(e,t),this.count=0,this.stride=0}get isArray(){return!0}getTypeName(){return`array<${this.format.getTypeName()}, ${this.count}>`}}class r extends e{constructor(e,t,n){super(e,n),this.format=t}get isPointer(){return!0}getTypeName(){return`&${this.format.getTypeName()}`}}class a extends e{constructor(e,t,n,s){super(e,n),this.format=t,this.access=s}get isTemplate(){return!0}getTypeName(){let e=this.name;if(null!==this.format){if('vec2'===e||'vec3'===e||'vec4'===e||'mat2x2'===e||'mat2x3'===e||'mat2x4'===e||'mat3x2'===e||'mat3x3'===e||'mat3x4'===e||'mat4x2'===e||'mat4x3'===e||'mat4x4'===e){if('f32'===this.format.name)return e+='f',e;if('i32'===this.format.name)return e+='i',e;if('u32'===this.format.name)return e+='u',e;if('bool'===this.format.name)return e+='b',e;if('f16'===this.format.name)return e+='h',e}e+=`<${this.format.name}>`}else if('vec2'===e||'vec3'===e||'vec4'===e)return e;return e}}var i;(e=>{e[e.Uniform=0]='Uniform',e[e.Storage=1]='Storage',e[e.Texture=2]='Texture',e[e.Sampler=3]='Sampler',e[e.StorageTexture=4]='StorageTexture'})(i||(i={}));class o{constructor(e,t,n,s,r,a,i){this.name=e,this.type=t,this.group=n,this.binding=s,this.attributes=r,this.resourceType=a,this.access=i}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class c{constructor(e,t){this.name=e,this.type=t}}class l{constructor(e,t,n,s){this.name=e,this.type=t,this.locationType=n,this.location=s,this.interpolation=null}}class u{constructor(e,t,n,s){this.name=e,this.type=t,this.locationType=n,this.location=s}}class h{constructor(e,t,n,s){this.name=e,this.type=t,this.attributes=n,this.id=s}}class f{constructor(e,t,n){this.name=e,this.type=t,this.attributes=n}}class p{constructor(e,t=null,n){this.stage=null,this.inputs=[],this.outputs=[],this.arguments=[],this.returnType=null,this.resources=[],this.overrides=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=e,this.stage=t,this.attributes=n}}class d{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}function m(e){var t=(32768&e)>>15,n=(31744&e)>>10,s=1023&e;return 0==n?(t?-1:1)*Math.pow(2,-14)*(s/Math.pow(2,10)):31==n?s?NaN:1/0*(t?-1:1):(t?-1:1)*Math.pow(2,n-15)*(1+s/Math.pow(2,10))}const g=new Float32Array(1),_=new Int32Array(g.buffer),x=new Uint16Array(1);function y(e){g[0]=e;const t=_[0],n=t>>31&1;let s=t>>23&255,r=8388607&t;if(255===s)return x[0]=n<<15|31744|(0!==r?512:0),x[0];if(0===s){if(0===r)return x[0]=n<<15,x[0];r|=8388608;let e=113;for(;!(8388608&r);)r<<=1,e--;return s=127-e,r&=8388607,s>0?(r=(r>>126-s)+(r>>127-s&1),x[0]=n<<15|s<<10|r>>13,x[0]):(x[0]=n<<15,x[0])}return s=s-127+15,s>=31?(x[0]=n<<15|31744,x[0]):s<=0?s<-10?(x[0]=n<<15,x[0]):(r=(8388608|r)>>1-s,x[0]=n<<15|r>>13,x[0]):(r>>=13,x[0]=n<<15|s<<10|r,x[0])}const b=new Uint32Array(1),v=new Float32Array(b.buffer,0,1);function w(e){const t=112+(e>>6&31)<<23|(63&e)<<17;return b[0]=t,v[0]}function k(e,t,n,s,r,a,i,o,c){const l=s*(i>>=r)*(a>>=r)+n*i+t*o;switch(c){case'r8unorm':return[I(e,l,'8unorm',1)[0]];case'r8snorm':return[I(e,l,'8snorm',1)[0]];case'r8uint':return[I(e,l,'8uint',1)[0]];case'r8sint':return[I(e,l,'8sint',1)[0]];case'rg8unorm':{const t=I(e,l,'8unorm',2);return[t[0],t[1]]}case'rg8snorm':{const t=I(e,l,'8snorm',2);return[t[0],t[1]]}case'rg8uint':{const t=I(e,l,'8uint',2);return[t[0],t[1]]}case'rg8sint':{const t=I(e,l,'8sint',2);return[t[0],t[1]]}case'rgba8unorm-srgb':case'rgba8unorm':{const t=I(e,l,'8unorm',4);return[t[0],t[1],t[2],t[3]]}case'rgba8snorm':{const t=I(e,l,'8snorm',4);return[t[0],t[1],t[2],t[3]]}case'rgba8uint':{const t=I(e,l,'8uint',4);return[t[0],t[1],t[2],t[3]]}case'rgba8sint':{const t=I(e,l,'8sint',4);return[t[0],t[1],t[2],t[3]]}case'bgra8unorm-srgb':case'bgra8unorm':{const t=I(e,l,'8unorm',4);return[t[2],t[1],t[0],t[3]]}case'r16uint':return[I(e,l,'16uint',1)[0]];case'r16sint':return[I(e,l,'16sint',1)[0]];case'r16float':return[I(e,l,'16float',1)[0]];case'rg16uint':{const t=I(e,l,'16uint',2);return[t[0],t[1]]}case'rg16sint':{const t=I(e,l,'16sint',2);return[t[0],t[1]]}case'rg16float':{const t=I(e,l,'16float',2);return[t[0],t[1]]}case'rgba16uint':{const t=I(e,l,'16uint',4);return[t[0],t[1],t[2],t[3]]}case'rgba16sint':{const t=I(e,l,'16sint',4);return[t[0],t[1],t[2],t[3]]}case'rgba16float':{const t=I(e,l,'16float',4);return[t[0],t[1],t[2],t[3]]}case'r32uint':return[I(e,l,'32uint',1)[0]];case'r32sint':return[I(e,l,'32sint',1)[0]];case'depth16unorm':case'depth24plus':case'depth24plus-stencil8':case'depth32float':case'depth32float-stencil8':case'r32float':return[I(e,l,'32float',1)[0]];case'rg32uint':{const t=I(e,l,'32uint',2);return[t[0],t[1]]}case'rg32sint':{const t=I(e,l,'32sint',2);return[t[0],t[1]]}case'rg32float':{const t=I(e,l,'32float',2);return[t[0],t[1]]}case'rgba32uint':{const t=I(e,l,'32uint',4);return[t[0],t[1],t[2],t[3]]}case'rgba32sint':{const t=I(e,l,'32sint',4);return[t[0],t[1],t[2],t[3]]}case'rgba32float':{const t=I(e,l,'32float',4);return[t[0],t[1],t[2],t[3]]}case'rg11b10ufloat':{const t=new Uint32Array(e.buffer,l,1)[0],n=(4192256&t)>>11,s=(4290772992&t)>>22;return[w(2047&t),w(n),function(e){const t=112+(e>>5&31)<<23|(31&e)<<18;return b[0]=t,v[0]}(s),1]}}return null}function I(e,t,n,s){const r=[0,0,0,0];for(let a=0;a<s;++a)switch(n){case'8unorm':r[a]=e[t]/255,t++;break;case'8snorm':r[a]=e[t]/255*2-1,t++;break;case'8uint':r[a]=e[t],t++;break;case'8sint':r[a]=e[t]-127,t++;break;case'16uint':r[a]=e[t]|e[t+1]<<8,t+=2;break;case'16sint':r[a]=(e[t]|e[t+1]<<8)-32768,t+=2;break;case'16float':r[a]=m(e[t]|e[t+1]<<8),t+=2;break;case'32uint':case'32sint':r[a]=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,t+=4;break;case'32float':r[a]=new Float32Array(e.buffer,t,1)[0],t+=4}return r}function T(e,t,n,s,r){for(let a=0;a<s;++a)switch(n){case'8unorm':e[t]=255*r[a],t++;break;case'8snorm':e[t]=.5*(r[a]+1)*255,t++;break;case'8uint':e[t]=r[a],t++;break;case'8sint':e[t]=r[a]+127,t++;break;case'16uint':new Uint16Array(e.buffer,t,1)[0]=r[a],t+=2;break;case'16sint':new Int16Array(e.buffer,t,1)[0]=r[a],t+=2;break;case'16float':{const n=y(r[a]);new Uint16Array(e.buffer,t,1)[0]=n,t+=2;break}case'32uint':new Uint32Array(e.buffer,t,1)[0]=r[a],t+=4;break;case'32sint':new Int32Array(e.buffer,t,1)[0]=r[a],t+=4;break;case'32float':new Float32Array(e.buffer,t,1)[0]=r[a],t+=4}return r}const S={r8unorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8snorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8uint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8sint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg8unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8snorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},'rgba8unorm-srgb':{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8snorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},bgra8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},'bgra8unorm-srgb':{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r16uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16float:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg16uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba16uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r32uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg32uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba32uint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32sint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32float:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rg11b10ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},stencil8:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!1,hasStencil:!0,channels:1},depth16unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},depth24plus:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,depthOnlyFormat:'depth32float',channels:1},'depth24plus-stencil8':{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,depthOnlyFormat:'depth32float',channels:1},depth32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},'depth32float-stencil8':{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,stencilOnlyFormat:'depth32float',channels:1},rgb9e5ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},'bc1-rgba-unorm':{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'bc1-rgba-unorm-srgb':{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'bc2-rgba-unorm':{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'bc2-rgba-unorm-srgb':{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'bc3-rgba-unorm':{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'bc3-rgba-unorm-srgb':{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'bc4-r-unorm':{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},'bc4-r-snorm':{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},'bc5-rg-unorm':{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},'bc5-rg-snorm':{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},'bc6h-rgb-ufloat':{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'bc6h-rgb-float':{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'bc7-rgba-unorm':{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'bc7-rgba-unorm-srgb':{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'etc2-rgb8unorm':{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'etc2-rgb8unorm-srgb':{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'etc2-rgb8a1unorm':{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'etc2-rgb8a1unorm-srgb':{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'etc2-rgba8unorm':{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'etc2-rgba8unorm-srgb':{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'eac-r11unorm':{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},'eac-r11snorm':{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},'eac-rg11unorm':{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},'eac-rg11snorm':{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},'astc-4x4-unorm':{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'astc-4x4-unorm-srgb':{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},'astc-5x4-unorm':{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},'astc-5x4-unorm-srgb':{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},'astc-5x5-unorm':{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},'astc-5x5-unorm-srgb':{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},'astc-6x5-unorm':{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},'astc-6x5-unorm-srgb':{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},'astc-6x6-unorm':{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},'astc-6x6-unorm-srgb':{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},'astc-8x5-unorm':{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},'astc-8x5-unorm-srgb':{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},'astc-8x6-unorm':{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},'astc-8x6-unorm-srgb':{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},'astc-8x8-unorm':{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},'astc-8x8-unorm-srgb':{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},'astc-10x5-unorm':{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},'astc-10x5-unorm-srgb':{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},'astc-10x6-unorm':{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},'astc-10x6-unorm-srgb':{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},'astc-10x8-unorm':{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},'astc-10x8-unorm-srgb':{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},'astc-10x10-unorm':{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},'astc-10x10-unorm-srgb':{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},'astc-12x10-unorm':{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},'astc-12x10-unorm-srgb':{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},'astc-12x12-unorm':{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4},'astc-12x12-unorm-srgb':{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4}};class A{constructor(){this.id=A._id++,this.line=0}get isAstNode(){return!0}get astNodeType(){return''}search(e){e(this)}searchBlock(e,t){if(e){t(E.instance);for(const n of e)n instanceof Array?this.searchBlock(n,t):n.search(t);t($.instance)}}constEvaluate(e,t){throw new Error('Cannot evaluate node')}constEvaluateString(e){return this.constEvaluate(e).toString()}}A._id=0;class E extends A{}E.instance=new E;class $ extends A{}$.instance=new $;const L=new Set(['all','all','any','select','arrayLength','abs','acos','acosh','asin','asinh','atan','atanh','atan2','ceil','clamp','cos','cosh','countLeadingZeros','countOneBits','countTrailingZeros','cross','degrees','determinant','distance','dot','dot4U8Packed','dot4I8Packed','exp','exp2','extractBits','faceForward','firstLeadingBit','firstTrailingBit','floor','fma','fract','frexp','insertBits','inverseSqrt','ldexp','length','log','log2','max','min','mix','modf','normalize','pow','quantizeToF16','radians','reflect','refract','reverseBits','round','saturate','sign','sin','sinh','smoothStep','sqrt','step','tan','tanh','transpose','trunc','dpdx','dpdxCoarse','dpdxFine','dpdy','dpdyCoarse','dpdyFine','fwidth','fwidthCoarse','fwidthFine','textureDimensions','textureGather','textureGatherCompare','textureLoad','textureNumLayers','textureNumLevels','textureNumSamples','textureSample','textureSampleBias','textureSampleCompare','textureSampleCompareLevel','textureSampleGrad','textureSampleLevel','textureSampleBaseClampToEdge','textureStore','atomicLoad','atomicStore','atomicAdd','atomicSub','atomicMax','atomicMin','atomicAnd','atomicOr','atomicXor','atomicExchange','atomicCompareExchangeWeak','pack4x8snorm','pack4x8unorm','pack4xI8','pack4xU8','pack4x8Clamp','pack4xU8Clamp','pack2x16snorm','pack2x16unorm','pack2x16float','unpack4x8snorm','unpack4x8unorm','unpack4xI8','unpack4xU8','unpack2x16snorm','unpack2x16unorm','unpack2x16float','storageBarrier','textureBarrier','workgroupBarrier','workgroupUniformLoad','subgroupAdd','subgroupExclusiveAdd','subgroupInclusiveAdd','subgroupAll','subgroupAnd','subgroupAny','subgroupBallot','subgroupBroadcast','subgroupBroadcastFirst','subgroupElect','subgroupMax','subgroupMin','subgroupMul','subgroupExclusiveMul','subgroupInclusiveMul','subgroupOr','subgroupShuffle','subgroupShuffleDown','subgroupShuffleUp','subgroupShuffleXor','subgroupXor','quadBroadcast','quadSwapDiagonal','quadSwapX','quadSwapY']);class C extends A{constructor(){super()}}class D extends C{constructor(e,t,n,s,r,a){super(),this.calls=new Set,this.name=e,this.args=t,this.returnType=n,this.body=s,this.startLine=r,this.endLine=a}get astNodeType(){return'function'}search(e){if(this.attributes)for(const t of this.attributes)e(t);e(this);for(const t of this.args)e(t);this.searchBlock(this.body,e)}}class N extends C{constructor(e){super(),this.expression=e}get astNodeType(){return'staticAssert'}search(e){this.expression.search(e)}}class V extends C{constructor(e,t){super(),this.condition=e,this.body=t}get astNodeType(){return'while'}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class O extends C{constructor(e,t){super(),this.body=e,this.loopId=t}get astNodeType(){return'continuing'}search(e){this.searchBlock(this.body,e)}}class B extends C{constructor(e,t,n,s){super(),this.init=e,this.condition=t,this.increment=n,this.body=s}get astNodeType(){return'for'}search(e){var t,n,s;null===(t=this.init)||void 0===t||t.search(e),null===(n=this.condition)||void 0===n||n.search(e),null===(s=this.increment)||void 0===s||s.search(e),this.searchBlock(this.body,e)}}class F extends C{constructor(e,t,n,s,r){super(),this.attributes=null,this.name=e,this.type=t,this.storage=n,this.access=s,this.value=r}get astNodeType(){return'var'}search(e){var t;e(this),null===(t=this.value)||void 0===t||t.search(e)}}class M extends C{constructor(e,t,n){super(),this.attributes=null,this.name=e,this.type=t,this.value=n}get astNodeType(){return'override'}search(e){var t;null===(t=this.value)||void 0===t||t.search(e)}}class U extends C{constructor(e,t,n,s,r){super(),this.attributes=null,this.name=e,this.type=t,this.storage=n,this.access=s,this.value=r}get astNodeType(){return'let'}search(e){var t;e(this),null===(t=this.value)||void 0===t||t.search(e)}}class P extends C{constructor(e,t,n,s,r){super(),this.attributes=null,this.name=e,this.type=t,this.storage=n,this.access=s,this.value=r}get astNodeType(){return'const'}constEvaluate(e,t){return this.value.constEvaluate(e,t)}search(e){var t;e(this),null===(t=this.value)||void 0===t||t.search(e)}}var W,q,H,z;(e=>{e.increment='++',e.decrement='--'})(W||(W={})),(e=>{e.parse=function(t){const n=t;if('parse'==n)throw new Error('Invalid value for IncrementOperator');return e[n]}})(W||(W={}));class R extends C{constructor(e,t){super(),this.operator=e,this.variable=t}get astNodeType(){return'increment'}search(e){this.variable.search(e)}}(e=>{e.assign='=',e.addAssign='+=',e.subtractAssin='-=',e.multiplyAssign='*=',e.divideAssign='/=',e.moduloAssign='%=',e.andAssign='&=',e.orAssign='|=',e.xorAssign='^=',e.shiftLeftAssign='<<=',e.shiftRightAssign='>>='})(q||(q={})),(e=>{e.parse=function(e){const t=e;if('parse'==t)throw new Error('Invalid value for AssignOperator');return t}})(q||(q={}));class G extends C{constructor(e,t,n){super(),this.operator=e,this.variable=t,this.value=n}get astNodeType(){return'assign'}search(e){this.variable.search(e),this.value.search(e)}}class X extends C{constructor(e,t){super(),this.name=e,this.args=t}get astNodeType(){return'call'}isBuiltin(){return L.has(this.name)}search(e){for(const t of this.args)t.search(e);e(this)}}class j extends C{constructor(e,t){super(),this.body=e,this.continuing=t}get astNodeType(){return'loop'}search(e){var t;this.searchBlock(this.body,e),null===(t=this.continuing)||void 0===t||t.search(e)}}class Z extends C{constructor(e,t){super(),this.condition=e,this.cases=t}get astNodeType(){return'switch'}search(e){e(this);for(const t of this.cases)t.search(e)}}class Q extends C{constructor(e,t,n,s){super(),this.condition=e,this.body=t,this.elseif=n,this.else=s}get astNodeType(){return'if'}search(e){this.condition.search(e),this.searchBlock(this.body,e),this.searchBlock(this.elseif,e),this.searchBlock(this.else,e)}}class Y extends C{constructor(e){super(),this.value=e}get astNodeType(){return'return'}search(e){var t;null===(t=this.value)||void 0===t||t.search(e)}}class K extends C{constructor(e){super(),this.name=e}get astNodeType(){return'enable'}}class J extends C{constructor(e){super(),this.extensions=e}get astNodeType(){return'requires'}}class ee extends C{constructor(e,t){super(),this.severity=e,this.rule=t}get astNodeType(){return'diagnostic'}}class te extends C{constructor(e,t){super(),this.name=e,this.type=t}get astNodeType(){return'alias'}}class ne extends C{constructor(){super()}get astNodeType(){return'discard'}}class se extends C{constructor(){super(),this.condition=null,this.loopId=-1}get astNodeType(){return'break'}}class re extends C{constructor(){super(),this.loopId=-1}get astNodeType(){return'continue'}}class ae extends C{constructor(e){super(),this.attributes=null,this.name=e}get astNodeType(){return'type'}get isStruct(){return!1}get isArray(){return!1}static maxFormatType(e){let t=e[0];if('f32'===t.name)return t;for(let n=1;n<e.length;++n){const s=ae._priority.get(t.name);ae._priority.get(e[n].name)<s&&(t=e[n])}return'x32'===t.name?ae.i32:t}getTypeName(){return this.name}}ae.x32=new ae('x32'),ae.f32=new ae('f32'),ae.i32=new ae('i32'),ae.u32=new ae('u32'),ae.f16=new ae('f16'),ae.bool=new ae('bool'),ae.void=new ae('void'),ae._priority=new Map([['f32',0],['f16',1],['u32',2],['i32',3],['x32',3]]);class ie extends ae{constructor(e){super(e)}}class oe extends ae{constructor(e,t,n,s){super(e),this.members=t,this.startLine=n,this.endLine=s}get astNodeType(){return'struct'}get isStruct(){return!0}getMemberIndex(e){for(let t=0;t<this.members.length;t++)if(this.members[t].name==e)return t;return-1}search(e){for(const t of this.members)e(t)}}class ce extends ae{constructor(e,t,n){super(e),this.format=t,this.access=n}get astNodeType(){return'template'}getTypeName(){let e=this.name;if(null!==this.format){if('vec2'===e||'vec3'===e||'vec4'===e||'mat2x2'===e||'mat2x3'===e||'mat2x4'===e||'mat3x2'===e||'mat3x3'===e||'mat3x4'===e||'mat4x2'===e||'mat4x3'===e||'mat4x4'===e){if('f32'===this.format.name)return e+='f',e;if('i32'===this.format.name)return e+='i',e;if('u32'===this.format.name)return e+='u',e;if('bool'===this.format.name)return e+='b',e;if('f16'===this.format.name)return e+='h',e}e+=`<${this.format.name}>`}else if('vec2'===e||'vec3'===e||'vec4'===e)return e;return e}}ce.vec2f=new ce('vec2',ae.f32,null),ce.vec3f=new ce('vec3',ae.f32,null),ce.vec4f=new ce('vec4',ae.f32,null),ce.vec2i=new ce('vec2',ae.i32,null),ce.vec3i=new ce('vec3',ae.i32,null),ce.vec4i=new ce('vec4',ae.i32,null),ce.vec2u=new ce('vec2',ae.u32,null),ce.vec3u=new ce('vec3',ae.u32,null),ce.vec4u=new ce('vec4',ae.u32,null),ce.vec2h=new ce('vec2',ae.f16,null),ce.vec3h=new ce('vec3',ae.f16,null),ce.vec4h=new ce('vec4',ae.f16,null),ce.vec2b=new ce('vec2',ae.bool,null),ce.vec3b=new ce('vec3',ae.bool,null),ce.vec4b=new ce('vec4',ae.bool,null),ce.mat2x2f=new ce('mat2x2',ae.f32,null),ce.mat2x3f=new ce('mat2x3',ae.f32,null),ce.mat2x4f=new ce('mat2x4',ae.f32,null),ce.mat3x2f=new ce('mat3x2',ae.f32,null),ce.mat3x3f=new ce('mat3x3',ae.f32,null),ce.mat3x4f=new ce('mat3x4',ae.f32,null),ce.mat4x2f=new ce('mat4x2',ae.f32,null),ce.mat4x3f=new ce('mat4x3',ae.f32,null),ce.mat4x4f=new ce('mat4x4',ae.f32,null),ce.mat2x2h=new ce('mat2x2',ae.f16,null),ce.mat2x3h=new ce('mat2x3',ae.f16,null),ce.mat2x4h=new ce('mat2x4',ae.f16,null),ce.mat3x2h=new ce('mat3x2',ae.f16,null),ce.mat3x3h=new ce('mat3x3',ae.f16,null),ce.mat3x4h=new ce('mat3x4',ae.f16,null),ce.mat4x2h=new ce('mat4x2',ae.f16,null),ce.mat4x3h=new ce('mat4x3',ae.f16,null),ce.mat4x4h=new ce('mat4x4',ae.f16,null),ce.mat2x2i=new ce('mat2x2',ae.i32,null),ce.mat2x3i=new ce('mat2x3',ae.i32,null),ce.mat2x4i=new ce('mat2x4',ae.i32,null),ce.mat3x2i=new ce('mat3x2',ae.i32,null),ce.mat3x3i=new ce('mat3x3',ae.i32,null),ce.mat3x4i=new ce('mat3x4',ae.i32,null),ce.mat4x2i=new ce('mat4x2',ae.i32,null),ce.mat4x3i=new ce('mat4x3',ae.i32,null),ce.mat4x4i=new ce('mat4x4',ae.i32,null),ce.mat2x2u=new ce('mat2x2',ae.u32,null),ce.mat2x3u=new ce('mat2x3',ae.u32,null),ce.mat2x4u=new ce('mat2x4',ae.u32,null),ce.mat3x2u=new ce('mat3x2',ae.u32,null),ce.mat3x3u=new ce('mat3x3',ae.u32,null),ce.mat3x4u=new ce('mat3x4',ae.u32,null),ce.mat4x2u=new ce('mat4x2',ae.u32,null),ce.mat4x3u=new ce('mat4x3',ae.u32,null),ce.mat4x4u=new ce('mat4x4',ae.u32,null);class le extends ae{constructor(e,t,n,s){super(e),this.storage=t,this.type=n,this.access=s}get astNodeType(){return'pointer'}}class ue extends ae{constructor(e,t,n,s){super(e),this.attributes=t,this.format=n,this.count=s}get astNodeType(){return'array'}get isArray(){return!0}}class he extends ae{constructor(e,t,n){super(e),this.format=t,this.access=n}get astNodeType(){return'sampler'}}class fe extends A{constructor(){super(),this.postfix=null}}class pe extends fe{constructor(e){super(),this.value=e}get astNodeType(){return'stringExpr'}toString(){return this.value}constEvaluateString(){return this.value}}class de extends fe{constructor(e,t){super(),this.type=e,this.args=t}get astNodeType(){return'createExpr'}search(e){if(e(this),this.args)for(const t of this.args)t.search(e)}constEvaluate(e,t){return t&&(t[0]=this.type),e.evalExpression(this,e.context)}}class me extends fe{constructor(e,t){super(),this.cachedReturnValue=null,this.name=e,this.args=t}get astNodeType(){return'callExpr'}setCachedReturnValue(e){this.cachedReturnValue=e}get isBuiltin(){return L.has(this.name)}constEvaluate(e,t){return e.evalExpression(this,e.context)}search(e){for(const t of this.args)t.search(e);e(this)}}class ge extends fe{constructor(e){super(),this.name=e}get astNodeType(){return'varExpr'}search(e){e(this),this.postfix&&this.postfix.search(e)}constEvaluate(e,t){return e.evalExpression(this,e.context)}}class _e extends fe{constructor(e,t){super(),this.name=e,this.initializer=t}get astNodeType(){return'constExpr'}constEvaluate(e,t){if(this.initializer){const t=e.evalExpression(this.initializer,e.context);return null!==t&&this.postfix?t.getSubData(e,this.postfix,e.context):t}return null}search(e){this.initializer.search(e)}}class xe extends fe{constructor(e,t){super(),this.value=e,this.type=t}get astNodeType(){return'literalExpr'}constEvaluate(e,t){return void 0!==t&&(t[0]=this.type),this.value}get isScalar(){return this.value instanceof Be}get isVector(){return this.value instanceof Me||this.value instanceof Ue}get scalarValue(){return this.value instanceof Be?this.value.value:(console.error('Value is not scalar.'),0)}get vectorValue(){return this.value instanceof Me||this.value instanceof Ue?this.value.data:(console.error('Value is not a vector or matrix.'),new Float32Array(0))}}class ye extends fe{constructor(e,t){super(),this.type=e,this.value=t}get astNodeType(){return'bitcastExpr'}search(e){this.value.search(e)}}class be extends fe{constructor(e,t){super(),this.type=e,this.args=t}get astNodeType(){return'typecastExpr'}constEvaluate(e,t){return e.evalExpression(this,e.context)}search(e){this.searchBlock(this.args,e)}}class ve extends fe{constructor(e){super(),this.index=e}search(e){this.index.search(e)}}class we extends fe{constructor(){super()}}class ke extends we{constructor(e,t){super(),this.operator=e,this.right=t}get astNodeType(){return'unaryOp'}constEvaluate(e,t){return e.evalExpression(this,e.context)}search(e){this.right.search(e)}}class Ie extends we{constructor(e,t,n){super(),this.operator=e,this.left=t,this.right=n}get astNodeType(){return'binaryOp'}_getPromotedType(e,t){return e.name===t.name?e:'f32'===e.name||'f32'===t.name?ae.f32:'u32'===e.name||'u32'===t.name?ae.u32:ae.i32}constEvaluate(e,t){return e.evalExpression(this,e.context)}search(e){this.left.search(e),this.right.search(e)}}class Te extends A{constructor(e){super(),this.body=e}search(e){e(this),this.searchBlock(this.body,e)}}class Se extends fe{constructor(){super()}get astNodeType(){return'default'}}class Ae extends Te{constructor(e,t){super(t),this.selectors=e}get astNodeType(){return'case'}search(e){this.searchBlock(this.body,e)}}class Ee extends Te{constructor(e){super(e)}get astNodeType(){return'default'}search(e){this.searchBlock(this.body,e)}}class $e extends A{constructor(e,t,n){super(),this.name=e,this.type=t,this.attributes=n}get astNodeType(){return'argument'}}class Le extends A{constructor(e,t){super(),this.condition=e,this.body=t}get astNodeType(){return'elseif'}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class Ce extends A{constructor(e,t,n){super(),this.name=e,this.type=t,this.attributes=n}get astNodeType(){return'member'}}class De extends A{constructor(e,t){super(),this.name=e,this.value=t}get astNodeType(){return'attribute'}}class Ne{constructor(e,t){this.parent=null,this.typeInfo=e,this.parent=t,this.id=Ne._id++}clone(){throw`Clone: Not implemented for ${this.constructor.name}`}setDataValue(e,t,n,s){console.error(`SetDataValue: Not implemented for ${this.constructor.name}`)}getSubData(e,t,n){return console.error(`GetDataValue: Not implemented for ${this.constructor.name}`),null}toString(){return`<${this.typeInfo.getTypeName()}>`}}Ne._id=0;class Ve extends Ne{constructor(){super(new e('void',null),null)}toString(){return'void'}}Ve.void=new Ve;class Oe extends Ne{constructor(e){super(new r('pointer',e.typeInfo,null),null),this.reference=e}clone(){return this}setDataValue(e,t,n,s){this.reference.setDataValue(e,t,n,s)}getSubData(e,t,n){return t?this.reference.getSubData(e,t,n):this}toString(){return`&${this.reference.toString()}`}}class Be extends Ne{constructor(e,t,n=null){super(t,n),e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array?this.data=e:'x32'===this.typeInfo.name?e-Math.floor(e)!==0?this.data=new Float32Array([e]):this.data=e>=0?new Uint32Array([e]):new Int32Array([e]):'i32'===this.typeInfo.name||'bool'===this.typeInfo.name?this.data=new Int32Array([e]):'u32'===this.typeInfo.name?this.data=new Uint32Array([e]):'f32'===this.typeInfo.name||'f16'===this.typeInfo.name?this.data=new Float32Array([e]):console.error('ScalarData2: Invalid type',t)}clone(){if(this.data instanceof Float32Array)return new Be(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new Be(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new Be(new Uint32Array(this.data),this.typeInfo,null);throw'ScalarData: Invalid data type'}get value(){return this.data[0]}set value(e){this.data[0]=e}setDataValue(e,t,n,s){if(n)return void console.error('SetDataValue: Scalar data does not support postfix',n);if(!(t instanceof Be))return void console.error('SetDataValue: Invalid value',t);let r=t.data[0];'i32'===this.typeInfo.name||'u32'===this.typeInfo.name?r=Math.floor(r):'bool'===this.typeInfo.name&&(r=r?1:0),this.data[0]=r}getSubData(e,t,n){return t?(console.error('getSubData: Scalar data does not support postfix',t),null):this}toString(){return`${this.value}`}}function Fe(e,t,n){const s=t.length;return 2===s?'f32'===n?new Me(new Float32Array(t),e.getTypeInfo('vec2f')):'i32'===n||'bool'===n?new Me(new Int32Array(t),e.getTypeInfo('vec2i')):'u32'===n?new Me(new Uint32Array(t),e.getTypeInfo('vec2u')):'f16'===n?new Me(new Float32Array(t),e.getTypeInfo('vec2h')):(console.error(`getSubData: Unknown format ${n}`),null):3===s?'f32'===n?new Me(new Float32Array(t),e.getTypeInfo('vec3f')):'i32'===n||'bool'===n?new Me(new Int32Array(t),e.getTypeInfo('vec3i')):'u32'===n?new Me(new Uint32Array(t),e.getTypeInfo('vec3u')):'f16'===n?new Me(new Float32Array(t),e.getTypeInfo('vec3h')):(console.error(`getSubData: Unknown format ${n}`),null):4===s?'f32'===n?new Me(new Float32Array(t),e.getTypeInfo('vec4f')):'i32'===n||'bool'===n?new Me(new Int32Array(t),e.getTypeInfo('vec4i')):'u32'===n?new Me(new Uint32Array(t),e.getTypeInfo('vec4u')):'f16'===n?new Me(new Float32Array(t),e.getTypeInfo('vec4h')):(console.error(`getSubData: Unknown format ${n}`),null):(console.error(`getSubData: Invalid vector size ${t.length}`),null)}class Me extends Ne{constructor(e,t,n=null){if(super(t,n),e instanceof Float32Array||e instanceof Uint32Array||e instanceof Int32Array)this.data=e;else{const t=this.typeInfo.name;'vec2f'===t||'vec3f'===t||'vec4f'===t?this.data=new Float32Array(e):'vec2i'===t||'vec3i'===t||'vec4i'===t?this.data=new Int32Array(e):'vec2u'===t||'vec3u'===t||'vec4u'===t?this.data=new Uint32Array(e):'vec2h'===t||'vec3h'===t||'vec4h'===t?this.data=new Float32Array(e):'vec2b'===t||'vec3b'===t||'vec4b'===t?this.data=new Int32Array(e):'vec2'===t||'vec3'===t||'vec4'===t?this.data=new Float32Array(e):console.error(`VectorData: Invalid type ${t}`)}}clone(){if(this.data instanceof Float32Array)return new Me(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new Me(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new Me(new Uint32Array(this.data),this.typeInfo,null);throw'VectorData: Invalid data type'}setDataValue(e,t,n,s){n instanceof pe?console.error('TODO: Set vector postfix'):t instanceof Me?this.data=t.data:console.error('SetDataValue: Invalid value',t)}getSubData(e,t,n){if(null===t)return this;let s=e.getTypeInfo('f32');if(this.typeInfo instanceof a)s=this.typeInfo.format||s;else{const t=this.typeInfo.name;'vec2f'===t||'vec3f'===t||'vec4f'===t?s=e.getTypeInfo('f32'):'vec2i'===t||'vec3i'===t||'vec4i'===t?s=e.getTypeInfo('i32'):'vec2b'===t||'vec3b'===t||'vec4b'===t?s=e.getTypeInfo('bool'):'vec2u'===t||'vec3u'===t||'vec4u'===t?s=e.getTypeInfo('u32'):'vec2h'===t||'vec3h'===t||'vec4h'===t?s=e.getTypeInfo('f16'):console.error(`GetSubData: Unknown type ${t}`)}let r=this;for(;null!==t&&null!==r;){if(t instanceof ve){const a=t.index;let i=-1;if(a instanceof xe){if(!(a.value instanceof Be))return console.error(`GetSubData: Invalid array index ${a.value}`),null;i=a.value.value}else{const t=e.evalExpression(a,n);if(!(t instanceof Be))return console.error('GetSubData: Unknown index type',a),null;i=t.value}if(i<0||i>=r.data.length)return console.error('GetSubData: Index out of range',i),null;if(r.data instanceof Float32Array){const e=new Float32Array(r.data.buffer,r.data.byteOffset+4*i,1);return new Be(e,s)}if(r.data instanceof Int32Array){const e=new Int32Array(r.data.buffer,r.data.byteOffset+4*i,1);return new Be(e,s)}if(r.data instanceof Uint32Array){const e=new Uint32Array(r.data.buffer,r.data.byteOffset+4*i,1);return new Be(e,s)}throw'GetSubData: Invalid data type'}if(!(t instanceof pe))return console.error('GetSubData: Unknown postfix',t),null;{const n=t.value.toLowerCase();if(1===n.length){let e=0;if('x'===n||'r'===n)e=0;else if('y'===n||'g'===n)e=1;else if('z'===n||'b'===n)e=2;else{if('w'!==n&&'a'!==n)return console.error(`GetSubData: Unknown member ${n}`),null;e=3}if(this.data instanceof Float32Array){let t=new Float32Array(this.data.buffer,this.data.byteOffset+4*e,1);return new Be(t,s,this)}if(this.data instanceof Int32Array){let t=new Int32Array(this.data.buffer,this.data.byteOffset+4*e,1);return new Be(t,s,this)}if(this.data instanceof Uint32Array){let t=new Uint32Array(this.data.buffer,this.data.byteOffset+4*e,1);return new Be(t,s,this)}}const a=[];for(const e of n)'x'===e||'r'===e?a.push(this.data[0]):'y'===e||'g'===e?a.push(this.data[1]):'z'===e||'b'===e?a.push(this.data[2]):'w'===e||'a'===e?a.push(this.data[3]):console.error(`GetDataValue: Unknown member ${e}`);r=Fe(e,a,s.name)}t=t.postfix}return r}toString(){let e=`${this.data[0]}`;for(let t=1;t<this.data.length;++t)e+=`, ${this.data[t]}`;return e}}class Ue extends Ne{constructor(e,t,n=null){super(t,n),e instanceof Float32Array?this.data=e:this.data=new Float32Array(e)}clone(){return new Ue(new Float32Array(this.data),this.typeInfo,null)}setDataValue(e,t,n,s){n instanceof pe?console.error('TODO: Set matrix postfix'):t instanceof Ue?this.data=t.data:console.error('SetDataValue: Invalid value',t)}getSubData(e,t,n){if(null===t)return this;const s=this.typeInfo.name;if(e.getTypeInfo('f32'),this.typeInfo instanceof a)this.typeInfo.format;else if(s.endsWith('f'))e.getTypeInfo('f32');else if(s.endsWith('i'))e.getTypeInfo('i32');else if(s.endsWith('u'))e.getTypeInfo('u32');else{if(!s.endsWith('h'))return console.error(`GetDataValue: Unknown type ${s}`),null;e.getTypeInfo('f16')}if(t instanceof ve){const r=t.index;let a=-1;if(r instanceof xe){if(!(r.value instanceof Be))return console.error(`GetDataValue: Invalid array index ${r.value}`),null;a=r.value.value}else{const t=e.evalExpression(r,n);if(!(t instanceof Be))return console.error('GetDataValue: Unknown index type',r),null;a=t.value}if(a<0||a>=this.data.length)return console.error('GetDataValue: Index out of range',a),null;const i=s.endsWith('h')?'h':'f';let o;if('mat2x2'===s||'mat2x2f'===s||'mat2x2h'===s||'mat3x2'===s||'mat3x2f'===s||'mat3x2h'===s||'mat4x2'===s||'mat4x2f'===s||'mat4x2h'===s)o=new Me(new Float32Array(this.data.buffer,this.data.byteOffset+2*a*4,2),e.getTypeInfo(`vec2${i}`));else if('mat2x3'===s||'mat2x3f'===s||'mat2x3h'===s||'mat3x3'===s||'mat3x3f'===s||'mat3x3h'===s||'mat4x3'===s||'mat4x3f'===s||'mat4x3h'===s)o=new Me(new Float32Array(this.data.buffer,this.data.byteOffset+3*a*4,3),e.getTypeInfo(`vec3${i}`));else{if('mat2x4'!==s&&'mat2x4f'!==s&&'mat2x4h'!==s&&'mat3x4'!==s&&'mat3x4f'!==s&&'mat3x4h'!==s&&'mat4x4'!==s&&'mat4x4f'!==s&&'mat4x4h'!==s)return console.error(`GetDataValue: Unknown type ${s}`),null;o=new Me(new Float32Array(this.data.buffer,this.data.byteOffset+4*a*4,4),e.getTypeInfo(`vec4${i}`))}return t.postfix?o.getSubData(e,t.postfix,n):o}return console.error('GetDataValue: Invalid postfix',t),null}toString(){let e=`${this.data[0]}`;for(let t=1;t<this.data.length;++t)e+=`, ${this.data[t]}`;return e}}class Pe extends Ne{constructor(e,t,n=0,s=null){super(t,s),this.buffer=e instanceof ArrayBuffer?e:e.buffer,this.offset=n}clone(){const e=new Uint8Array(new Uint8Array(this.buffer,this.offset,this.typeInfo.size));return new Pe(e.buffer,this.typeInfo,0,null)}setDataValue(t,r,a,i){if(null===r)return void console.log('setDataValue: NULL data.');let o=this.offset,c=this.typeInfo;for(;a;){if(a instanceof ve)if(c instanceof s){const e=a.index;if(e instanceof xe){if(!(e.value instanceof Be))return void console.error(`SetDataValue: Invalid index type ${e.value}`);o+=e.value.value*c.stride}else{const n=t.evalExpression(e,i);if(!(n instanceof Be))return void console.error('SetDataValue: Unknown index type',e);o+=n.value*c.stride}c=c.format}else console.error(`SetDataValue: Type ${c.getTypeName()} is not an array`);else{if(!(a instanceof pe))return void console.error('SetDataValue: Unknown postfix type',a);{const t=a.value;if(c instanceof n){let e=!1;for(const n of c.members)if(n.name===t){o+=n.offset,c=n.type,e=!0;break}if(!e)return void console.error(`SetDataValue: Member ${t} not found`)}else if(c instanceof e){const e=c.getTypeName();let n=0;if('x'===t||'r'===t)n=0;else if('y'===t||'g'===t)n=1;else if('z'===t||'b'===t)n=2;else{if('w'!==t&&'a'!==t)return void console.error(`SetDataValue: Unknown member ${t}`);n=3}if(!(r instanceof Be))return void console.error('SetDataValue: Invalid value',r);const s=r.value;return'vec2f'===e?void(new Float32Array(this.buffer,o,2)[n]=s):'vec3f'===e?void(new Float32Array(this.buffer,o,3)[n]=s):'vec4f'===e?void(new Float32Array(this.buffer,o,4)[n]=s):'vec2i'===e?void(new Int32Array(this.buffer,o,2)[n]=s):'vec3i'===e?void(new Int32Array(this.buffer,o,3)[n]=s):'vec4i'===e?void(new Int32Array(this.buffer,o,4)[n]=s):'vec2u'===e?void(new Uint32Array(this.buffer,o,2)[n]=s):'vec3u'===e?void(new Uint32Array(this.buffer,o,3)[n]=s):'vec4u'===e?void(new Uint32Array(this.buffer,o,4)[n]=s):void console.error(`SetDataValue: Type ${e} is not a struct`)}}}a=a.postfix}this.setData(t,r,c,o,i)}setData(e,t,n,s,r){const a=n.getTypeName();if('f32'!==a&&'f16'!==a)if('i32'!==a&&'atomic<i32>'!==a&&'x32'!==a)if('u32'!==a&&'atomic<u32>'!==a)if('bool'!==a){if('vec2f'===a||'vec2h'===a){const e=new Float32Array(this.buffer,s,2);return void(t instanceof Me?(e[0]=t.data[0],e[1]=t.data[1]):(e[0]=t[0],e[1]=t[1]))}if('vec3f'===a||'vec3h'===a){const e=new Float32Array(this.buffer,s,3);return void(t instanceof Me?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2]):(e[0]=t[0],e[1]=t[1],e[2]=t[2]))}if('vec4f'===a||'vec4h'===a){const e=new Float32Array(this.buffer,s,4);return void(t instanceof Me?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]))}if('vec2i'===a){const e=new Int32Array(this.buffer,s,2);return void(t instanceof Me?(e[0]=t.data[0],e[1]=t.data[1]):(e[0]=t[0],e[1]=t[1]))}if('vec3i'===a){const e=new Int32Array(this.buffer,s,3);return void(t instanceof Me?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2]):(e[0]=t[0],e[1]=t[1],e[2]=t[2]))}if('vec4i'===a){const e=new Int32Array(this.buffer,s,4);return void(t instanceof Me?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]))}if('vec2u'===a){const e=new Uint32Array(this.buffer,s,2);return void(t instanceof Me?(e[0]=t.data[0],e[1]=t.data[1]):(e[0]=t[0],e[1]=t[1]))}if('vec3u'===a){const e=new Uint32Array(this.buffer,s,3);return void(t instanceof Me?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2]):(e[0]=t[0],e[1]=t[1],e[2]=t[2]))}if('vec4u'===a){const e=new Uint32Array(this.buffer,s,4);return void(t instanceof Me?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]))}if('vec2b'===a){const e=new Uint32Array(this.buffer,s,2);return void(t instanceof Me?(e[0]=t.data[0],e[1]=t.data[1]):(e[0]=t[0],e[1]=t[1]))}if('vec3b'===a){const e=new Uint32Array(this.buffer,s,3);return void(t instanceof Me?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2]):(e[0]=t[0],e[1]=t[1],e[2]=t[2]))}if('vec4b'===a){const e=new Uint32Array(this.buffer,s,4);return void(t instanceof Me?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]))}if('mat2x2f'===a||'mat2x2h'===a){const e=new Float32Array(this.buffer,s,4);return void(t instanceof Ue?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]))}if('mat2x3f'===a||'mat2x3h'===a){const e=new Float32Array(this.buffer,s,6);return void(t instanceof Ue?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5]))}if('mat2x4f'===a||'mat2x4h'===a){const e=new Float32Array(this.buffer,s,8);return void(t instanceof Ue?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7]))}if('mat3x2f'===a||'mat3x2h'===a){const e=new Float32Array(this.buffer,s,6);return void(t instanceof Ue?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5]))}if('mat3x3f'===a||'mat3x3h'===a){const e=new Float32Array(this.buffer,s,9);return void(t instanceof Ue?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7],e[8]=t.data[8]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8]))}if('mat3x4f'===a||'mat3x4h'===a){const e=new Float32Array(this.buffer,s,12);return void(t instanceof Ue?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7],e[8]=t.data[8],e[9]=t.data[9],e[10]=t.data[10],e[11]=t.data[11]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]))}if('mat4x2f'===a||'mat4x2h'===a){const e=new Float32Array(this.buffer,s,8);return void(t instanceof Ue?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7]))}if('mat4x3f'===a||'mat4x3h'===a){const e=new Float32Array(this.buffer,s,12);return void(t instanceof Ue?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7],e[8]=t.data[8],e[9]=t.data[9],e[10]=t.data[10],e[11]=t.data[11]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]))}if('mat4x4f'===a||'mat4x4h'===a){const e=new Float32Array(this.buffer,s,16);return void(t instanceof Ue?(e[0]=t.data[0],e[1]=t.data[1],e[2]=t.data[2],e[3]=t.data[3],e[4]=t.data[4],e[5]=t.data[5],e[6]=t.data[6],e[7]=t.data[7],e[8]=t.data[8],e[9]=t.data[9],e[10]=t.data[10],e[11]=t.data[11],e[12]=t.data[12],e[13]=t.data[13],e[14]=t.data[14],e[15]=t.data[15]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]))}if(t instanceof Pe){if(n===t.typeInfo){return void new Uint8Array(this.buffer,s,t.buffer.byteLength).set(new Uint8Array(t.buffer))}console.error('SetDataValue: Type mismatch',a,t.typeInfo.getTypeName())}else console.error(`SetData: Unknown type ${a}`)}else t instanceof Be&&(new Int32Array(this.buffer,s,1)[0]=t.value);else t instanceof Be&&(new Uint32Array(this.buffer,s,1)[0]=t.value);else t instanceof Be&&(new Int32Array(this.buffer,s,1)[0]=t.value);else t instanceof Be&&(new Float32Array(this.buffer,s,1)[0]=t.value)}getSubData(t,r,i){var o,c,l;if(null===r)return this;let u=this.offset,h=this.typeInfo;for(;r;){if(r instanceof ve){const e=r.index,n=e instanceof fe?t.evalExpression(e,i):e;let a=0;if(n instanceof Be?a=n.value:'number'==typeof n?a=n:console.error('GetDataValue: Invalid index type',e),h instanceof s)u+=a*h.stride,h=h.format;else{const e=h.getTypeName();'mat4x4'===e||'mat4x4f'===e||'mat4x4h'===e?(u+=16*a,h=t.getTypeInfo('vec4f')):console.error(`getDataValue: Type ${h.getTypeName()} is not an array`)}}else{if(!(r instanceof pe))return console.error('GetDataValue: Unknown postfix type',r),null;{const s=r.value;if(h instanceof n){let e=!1;for(const t of h.members)if(t.name===s){u+=t.offset,h=t.type,e=!0;break}if(!e)return console.error(`GetDataValue: Member ${s} not found`),null}else if(h instanceof e){const e=h.getTypeName();if('vec2f'===e||'vec3f'===e||'vec4f'===e||'vec2i'===e||'vec3i'===e||'vec4i'===e||'vec2u'===e||'vec3u'===e||'vec4u'===e||'vec2b'===e||'vec3b'===e||'vec4b'===e||'vec2h'===e||'vec3h'===e||'vec4h'===e||'vec2'===e||'vec3'===e||'vec4'===e){if(s.length>0&&s.length<5){let n='f';const r=[];for(let a=0;a<s.length;++a){const i=s[a].toLowerCase();let o=0;if('x'===i||'r'===i)o=0;else if('y'===i||'g'===i)o=1;else if('z'===i||'b'===i)o=2;else{if('w'!==i&&'a'!==i)return console.error(`Unknown member ${s}`),null;o=3}if(1===s.length){if(e.endsWith('f'))return this.buffer.byteLength<u+4*o+4?(console.log('Insufficient buffer data'),null):new Be(new Float32Array(this.buffer,u+4*o,1),t.getTypeInfo('f32'),this);if(e.endsWith('h'))return new Be(new Float32Array(this.buffer,u+4*o,1),t.getTypeInfo('f16'),this);if(e.endsWith('i'))return new Be(new Int32Array(this.buffer,u+4*o,1),t.getTypeInfo('i32'),this);if(e.endsWith('b'))return new Be(new Int32Array(this.buffer,u+4*o,1),t.getTypeInfo('bool'),this);if(e.endsWith('u'))return new Be(new Uint32Array(this.buffer,u+4*o,1),t.getTypeInfo('i32'),this)}if('vec2f'===e)r.push(new Float32Array(this.buffer,u,2)[o]);else if('vec3f'===e){if(u+12>=this.buffer.byteLength)return console.log('Insufficient buffer data'),null;const e=new Float32Array(this.buffer,u,3);r.push(e[o])}else if('vec4f'===e)r.push(new Float32Array(this.buffer,u,4)[o]);else if('vec2i'===e)n='i',r.push(new Int32Array(this.buffer,u,2)[o]);else if('vec3i'===e)n='i',r.push(new Int32Array(this.buffer,u,3)[o]);else if('vec4i'===e)n='i',r.push(new Int32Array(this.buffer,u,4)[o]);else if('vec2u'===e){n='u';const e=new Uint32Array(this.buffer,u,2);r.push(e[o])}else'vec3u'===e?(n='u',r.push(new Uint32Array(this.buffer,u,3)[o])):'vec4u'===e&&(n='u',r.push(new Uint32Array(this.buffer,u,4)[o]))}return 2===r.length?h=t.getTypeInfo(`vec2${n}`):3===r.length?h=t.getTypeInfo(`vec3${n}`):4===r.length?h=t.getTypeInfo(`vec4${n}`):console.error(`GetDataValue: Invalid vector length ${r.length}`),new Me(r,h,null)}return console.error(`GetDataValue: Unknown member ${s}`),null}return console.error(`GetDataValue: Type ${e} is not a struct`),null}}}r=r.postfix}const f=h.getTypeName();return'f32'===f?new Be(new Float32Array(this.buffer,u,1),h,this):'i32'===f?new Be(new Int32Array(this.buffer,u,1),h,this):'u32'===f?new Be(new Uint32Array(this.buffer,u,1),h,this):'vec2f'===f?new Me(new Float32Array(this.buffer,u,2),h,this):'vec3f'===f?new Me(new Float32Array(this.buffer,u,3),h,this):'vec4f'===f?new Me(new Float32Array(this.buffer,u,4),h,this):'vec2i'===f?new Me(new Int32Array(this.buffer,u,2),h,this):'vec3i'===f?new Me(new Int32Array(this.buffer,u,3),h,this):'vec4i'===f?new Me(new Int32Array(this.buffer,u,4),h,this):'vec2u'===f?new Me(new Uint32Array(this.buffer,u,2),h,this):'vec3u'===f?new Me(new Uint32Array(this.buffer,u,3),h,this):'vec4u'===f?new Me(new Uint32Array(this.buffer,u,4),h,this):h instanceof a&&'atomic'===h.name?'u32'===(null===(o=h.format)||void 0===o?void 0:o.name)?new Be(new Uint32Array(this.buffer,u,1)[0],h.format,this):'i32'===(null===(c=h.format)||void 0===c?void 0:c.name)?new Be(new Int32Array(this.buffer,u,1)[0],h.format,this):(console.error(`GetDataValue: Invalid atomic format ${null===(l=h.format)||void 0===l?void 0:l.name}`),null):new Pe(this.buffer,h,u,this)}toString(){let e='';if(this.typeInfo instanceof s)if('f32'===this.typeInfo.format.name){const t=new Float32Array(this.buffer,this.offset);e=`[${t[0]}`;for(let n=1;n<t.length;++n)e+=`, ${t[n]}`}else if('i32'===this.typeInfo.format.name){const t=new Int32Array(this.buffer,this.offset);e=`[${t[0]}`;for(let n=1;n<t.length;++n)e+=`, ${t[n]}`}else if('u32'===this.typeInfo.format.name){const t=new Uint32Array(this.buffer,this.offset);e=`[${t[0]}`;for(let n=1;n<t.length;++n)e+=`, ${t[n]}`}else if('vec2f'===this.typeInfo.format.name){const t=new Float32Array(this.buffer,this.offset);e=`[${t[0]}, ${t[1]}]`;for(let n=1;n<t.length/2;++n)e+=`, [${t[2*n]}, ${t[2*n+1]}]`}else if('vec3f'===this.typeInfo.format.name){const t=new Float32Array(this.buffer,this.offset);e=`[${t[0]}, ${t[1]}, ${t[2]}]`;for(let n=4;n<t.length;n+=4)e+=`, [${t[n]}, ${t[n+1]}, ${t[n+2]}]`}else if('vec4f'===this.typeInfo.format.name){const t=new Float32Array(this.buffer,this.offset);e=`[${t[0]}, ${t[1]}, ${t[2]}, ${t[3]}]`;for(let n=4;n<t.length;n+=4)e+=`, [${t[n]}, ${t[n+1]}, ${t[n+2]}, ${t[n+3]}]`}else e='[...]';else this.typeInfo instanceof n?e+='{...}':e='[...]';return e}}class We extends Ne{constructor(e,t,n,s){super(t,null),this.data=e,this.descriptor=n,this.view=s}clone(){return new We(this.data,this.typeInfo,this.descriptor,this.view)}get width(){var e,t;const n=this.descriptor.size;return n instanceof Array&&n.length>0?null!==(e=n[0])&&void 0!==e?e:0:n instanceof Object&&null!==(t=n.width)&&void 0!==t?t:0}get height(){var e,t;const n=this.descriptor.size;return n instanceof Array&&n.length>1?null!==(e=n[1])&&void 0!==e?e:0:n instanceof Object&&null!==(t=n.height)&&void 0!==t?t:0}get depthOrArrayLayers(){var e,t;const n=this.descriptor.size;return n instanceof Array&&n.length>2?null!==(e=n[2])&&void 0!==e?e:0:n instanceof Object&&null!==(t=n.depthOrArrayLayers)&&void 0!==t?t:0}get format(){var e;return this.descriptor&&null!==(e=this.descriptor.format)&&void 0!==e?e:'rgba8unorm'}get sampleCount(){var e;return this.descriptor&&null!==(e=this.descriptor.sampleCount)&&void 0!==e?e:1}get mipLevelCount(){var e;return this.descriptor&&null!==(e=this.descriptor.mipLevelCount)&&void 0!==e?e:1}get dimension(){var e;return this.descriptor&&null!==(e=this.descriptor.dimension)&&void 0!==e?e:'2d'}getMipLevelSize(e){if(e>=this.mipLevelCount)return[0,0,0];const t=[this.width,this.height,this.depthOrArrayLayers];for(let n=0;n<t.length;++n)t[n]=Math.max(1,t[n]>>e);return t}get texelByteSize(){const e=this.format,t=S[e];return t?t.isDepthStencil?4:t.bytesPerBlock:0}get bytesPerRow(){return this.width*this.texelByteSize}get isDepthStencil(){const e=this.format,t=S[e];return!!t&&t.isDepthStencil}getGpuSize(){const e=this.format,t=S[e],n=this.width;if(!e||n<=0||!t)return-1;const s=this.height,r=this.depthOrArrayLayers,a=this.dimension;return n/t.blockWidth*('1d'===a?1:s/t.blockHeight)*t.bytesPerBlock*r}getPixel(e,t,n=0,s=0){const r=this.texelByteSize,a=this.bytesPerRow,i=this.height,o=this.data[s];return k(new Uint8Array(o),e,t,n,s,i,a,r,this.format)}setPixel(e,t,n,s,r){const a=this.texelByteSize,i=this.bytesPerRow,o=this.height,c=this.data[s];!function(e,t,n,s,r,a,i,o,c,l){const u=s*(i>>=r)*(a>>=r)+n*i+t*o;switch(c){case'r8unorm':return void T(e,u,'8unorm',1,l);case'r8snorm':return void T(e,u,'8snorm',1,l);case'r8uint':return void T(e,u,'8uint',1,l);case'r8sint':return void T(e,u,'8sint',1,l);case'rg8unorm':return void T(e,u,'8unorm',2,l);case'rg8snorm':return void T(e,u,'8snorm',2,l);case'rg8uint':return void T(e,u,'8uint',2,l);case'rg8sint':return void T(e,u,'8sint',2,l);case'rgba8unorm-srgb':case'rgba8unorm':case'bgra8unorm-srgb':case'bgra8unorm':return void T(e,u,'8unorm',4,l);case'rgba8snorm':return void T(e,u,'8snorm',4,l);case'rgba8uint':return void T(e,u,'8uint',4,l);case'rgba8sint':return void T(e,u,'8sint',4,l);case'r16uint':return void T(e,u,'16uint',1,l);case'r16sint':return void T(e,u,'16sint',1,l);case'r16float':return void T(e,u,'16float',1,l);case'rg16uint':return void T(e,u,'16uint',2,l);case'rg16sint':return void T(e,u,'16sint',2,l);case'rg16float':return void T(e,u,'16float',2,l);case'rgba16uint':return void T(e,u,'16uint',4,l);case'rgba16sint':return void T(e,u,'16sint',4,l);case'rgba16float':return void T(e,u,'16float',4,l);case'r32uint':return void T(e,u,'32uint',1,l);case'r32sint':return void T(e,u,'32sint',1,l);case'depth16unorm':case'depth24plus':case'depth24plus-stencil8':case'depth32float':case'depth32float-stencil8':case'r32float':return void T(e,u,'32float',1,l);case'rg32uint':return void T(e,u,'32uint',2,l);case'rg32sint':return void T(e,u,'32sint',2,l);case'rg32float':return void T(e,u,'32float',2,l);case'rgba32uint':return void T(e,u,'32uint',4,l);case'rgba32sint':return void T(e,u,'32sint',4,l);case'rgba32float':return void T(e,u,'32float',4,l);case'rg11b10ufloat':console.error('TODO: rg11b10ufloat not supported for writing')}}(new Uint8Array(c),e,t,n,s,o,i,a,this.format,r)}}(e=>{e[e.token=0]='token',e[e.keyword=1]='keyword',e[e.reserved=2]='reserved'})(z||(z={}));class qe{constructor(e,t,n){this.name=e,this.type=t,this.rule=n}toString(){return this.name}}class He{}H=He,He.none=new qe('',z.reserved,''),He.eof=new qe('EOF',z.token,''),He.reserved={asm:new qe('asm',z.reserved,'asm'),bf16:new qe('bf16',z.reserved,'bf16'),do:new qe('do',z.reserved,'do'),enum:new qe('enum',z.reserved,'enum'),f16:new qe('f16',z.reserved,'f16'),f64:new qe('f64',z.reserved,'f64'),handle:new qe('handle',z.reserved,'handle'),i8:new qe('i8',z.reserved,'i8'),i16:new qe('i16',z.reserved,'i16'),i64:new qe('i64',z.reserved,'i64'),mat:new qe('mat',z.reserved,'mat'),premerge:new qe('premerge',z.reserved,'premerge'),regardless:new qe('regardless',z.reserved,'regardless'),typedef:new qe('typedef',z.reserved,'typedef'),u8:new qe('u8',z.reserved,'u8'),u16:new qe('u16',z.reserved,'u16'),u64:new qe('u64',z.reserved,'u64'),unless:new qe('unless',z.reserved,'unless'),using:new qe('using',z.reserved,'using'),vec:new qe('vec',z.reserved,'vec'),void:new qe('void',z.reserved,'void')},He.keywords={array:new qe('array',z.keyword,'array'),atomic:new qe('atomic',z.keyword,'atomic'),bool:new qe('bool',z.keyword,'bool'),f32:new qe('f32',z.keyword,'f32'),i32:new qe('i32',z.keyword,'i32'),mat2x2:new qe('mat2x2',z.keyword,'mat2x2'),mat2x3:new qe('mat2x3',z.keyword,'mat2x3'),mat2x4:new qe('mat2x4',z.keyword,'mat2x4'),mat3x2:new qe('mat3x2',z.keyword,'mat3x2'),mat3x3:new qe('mat3x3',z.keyword,'mat3x3'),mat3x4:new qe('mat3x4',z.keyword,'mat3x4'),mat4x2:new qe('mat4x2',z.keyword,'mat4x2'),mat4x3:new qe('mat4x3',z.keyword,'mat4x3'),mat4x4:new qe('mat4x4',z.keyword,'mat4x4'),ptr:new qe('ptr',z.keyword,'ptr'),sampler:new qe('sampler',z.keyword,'sampler'),sampler_comparison:new qe('sampler_comparison',z.keyword,'sampler_comparison'),struct:new qe('struct',z.keyword,'struct'),texture_1d:new qe('texture_1d',z.keyword,'texture_1d'),texture_2d:new qe('texture_2d',z.keyword,'texture_2d'),texture_2d_array:new qe('texture_2d_array',z.keyword,'texture_2d_array'),texture_3d:new qe('texture_3d',z.keyword,'texture_3d'),texture_cube:new qe('texture_cube',z.keyword,'texture_cube'),texture_cube_array:new qe('texture_cube_array',z.keyword,'texture_cube_array'),texture_multisampled_2d:new qe('texture_multisampled_2d',z.keyword,'texture_multisampled_2d'),texture_storage_1d:new qe('texture_storage_1d',z.keyword,'texture_storage_1d'),texture_storage_2d:new qe('texture_storage_2d',z.keyword,'texture_storage_2d'),texture_storage_2d_array:new qe('texture_storage_2d_array',z.keyword,'texture_storage_2d_array'),texture_storage_3d:new qe('texture_storage_3d',z.keyword,'texture_storage_3d'),texture_depth_2d:new qe('texture_depth_2d',z.keyword,'texture_depth_2d'),texture_depth_2d_array:new qe('texture_depth_2d_array',z.keyword,'texture_depth_2d_array'),texture_depth_cube:new qe('texture_depth_cube',z.keyword,'texture_depth_cube'),texture_depth_cube_array:new qe('texture_depth_cube_array',z.keyword,'texture_depth_cube_array'),texture_depth_multisampled_2d:new qe('texture_depth_multisampled_2d',z.keyword,'texture_depth_multisampled_2d'),texture_external:new qe('texture_external',z.keyword,'texture_external'),u32:new qe('u32',z.keyword,'u32'),vec2:new qe('vec2',z.keyword,'vec2'),vec3:new qe('vec3',z.keyword,'vec3'),vec4:new qe('vec4',z.keyword,'vec4'),bitcast:new qe('bitcast',z.keyword,'bitcast'),block:new qe('block',z.keyword,'block'),break:new qe('break',z.keyword,'break'),case:new qe('case',z.keyword,'case'),continue:new qe('continue',z.keyword,'continue'),continuing:new qe('continuing',z.keyword,'continuing'),default:new qe('default',z.keyword,'default'),diagnostic:new qe('diagnostic',z.keyword,'diagnostic'),discard:new qe('discard',z.keyword,'discard'),else:new qe('else',z.keyword,'else'),enable:new qe('enable',z.keyword,'enable'),fallthrough:new qe('fallthrough',z.keyword,'fallthrough'),false:new qe('false',z.keyword,'false'),fn:new qe('fn',z.keyword,'fn'),for:new qe('for',z.keyword,'for'),function:new qe('function',z.keyword,'function'),if:new qe('if',z.keyword,'if'),let:new qe('let',z.keyword,'let'),const:new qe('const',z.keyword,'const'),loop:new qe('loop',z.keyword,'loop'),while:new qe('while',z.keyword,'while'),private:new qe('private',z.keyword,'private'),read:new qe('read',z.keyword,'read'),read_write:new qe('read_write',z.keyword,'read_write'),return:new qe('return',z.keyword,'return'),requires:new qe('requires',z.keyword,'requires'),storage:new qe('storage',z.keyword,'storage'),switch:new qe('switch',z.keyword,'switch'),true:new qe('true',z.keyword,'true'),alias:new qe('alias',z.keyword,'alias'),type:new qe('type',z.keyword,'type'),uniform:new qe('uniform',z.keyword,'uniform'),var:new qe('var',z.keyword,'var'),override:new qe('override',z.keyword,'override'),workgroup:new qe('workgroup',z.keyword,'workgroup'),write:new qe('write',z.keyword,'write'),r8unorm:new qe('r8unorm',z.keyword,'r8unorm'),r8snorm:new qe('r8snorm',z.keyword,'r8snorm'),r8uint:new qe('r8uint',z.keyword,'r8uint'),r8sint:new qe('r8sint',z.keyword,'r8sint'),r16uint:new qe('r16uint',z.keyword,'r16uint'),r16sint:new qe('r16sint',z.keyword,'r16sint'),r16float:new qe('r16float',z.keyword,'r16float'),rg8unorm:new qe('rg8unorm',z.keyword,'rg8unorm'),rg8snorm:new qe('rg8snorm',z.keyword,'rg8snorm'),rg8uint:new qe('rg8uint',z.keyword,'rg8uint'),rg8sint:new qe('rg8sint',z.keyword,'rg8sint'),r32uint:new qe('r32uint',z.keyword,'r32uint'),r32sint:new qe('r32sint',z.keyword,'r32sint'),r32float:new qe('r32float',z.keyword,'r32float'),rg16uint:new qe('rg16uint',z.keyword,'rg16uint'),rg16sint:new qe('rg16sint',z.keyword,'rg16sint'),rg16float:new qe('rg16float',z.keyword,'rg16float'),rgba8unorm:new qe('rgba8unorm',z.keyword,'rgba8unorm'),rgba8unorm_srgb:new qe('rgba8unorm_srgb',z.keyword,'rgba8unorm_srgb'),rgba8snorm:new qe('rgba8snorm',z.keyword,'rgba8snorm'),rgba8uint:new qe('rgba8uint',z.keyword,'rgba8uint'),rgba8sint:new qe('rgba8sint',z.keyword,'rgba8sint'),bgra8unorm:new qe('bgra8unorm',z.keyword,'bgra8unorm'),bgra8unorm_srgb:new qe('bgra8unorm_srgb',z.keyword,'bgra8unorm_srgb'),rgb10a2unorm:new qe('rgb10a2unorm',z.keyword,'rgb10a2unorm'),rg11b10float:new qe('rg11b10float',z.keyword,'rg11b10float'),rg32uint:new qe('rg32uint',z.keyword,'rg32uint'),rg32sint:new qe('rg32sint',z.keyword,'rg32sint'),rg32float:new qe('rg32float',z.keyword,'rg32float'),rgba16uint:new qe('rgba16uint',z.keyword,'rgba16uint'),rgba16sint:new qe('rgba16sint',z.keyword,'rgba16sint'),rgba16float:new qe('rgba16float',z.keyword,'rgba16float'),rgba32uint:new qe('rgba32uint',z.keyword,'rgba32uint'),rgba32sint:new qe('rgba32sint',z.keyword,'rgba32sint'),rgba32float:new qe('rgba32float',z.keyword,'rgba32float'),static_assert:new qe('static_assert',z.keyword,'static_assert')},He.tokens={decimal_float_literal:new qe('decimal_float_literal',z.token,/((-?[0-9]*\\.[0-9]+|-?[0-9]+\\.[0-9]*)((e|E)(\\+|-)?[0-9]+)?[fh]?)|(-?[0-9]+(e|E)(\\+|-)?[0-9]+[fh]?)|(-?[0-9]+[fh])/),hex_float_literal:new qe('hex_float_literal',z.token,/-?0x((([0-9a-fA-F]*\\.[0-9a-fA-F]+|[0-9a-fA-F]+\\.[0-9a-fA-F]*)((p|P)(\\+|-)?[0-9]+[fh]?)?)|([0-9a-fA-F]+(p|P)(\\+|-)?[0-9]+[fh]?))/),int_literal:new qe('int_literal',z.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new qe('uint_literal',z.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),name:new qe('name',z.token,/([_\\p{XID_Start}][\\p{XID_Continue}]+)|([\\p{XID_Start}])/u),ident:new qe('ident',z.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new qe('and',z.token,'&'),and_and:new qe('and_and',z.token,'&&'),arrow:new qe('arrow ',z.token,'->'),attr:new qe('attr',z.token,'@'),forward_slash:new qe('forward_slash',z.token,'/'),bang:new qe('bang',z.token,'!'),bracket_left:new qe('bracket_left',z.token,'['),bracket_right:new qe('bracket_right',z.token,']'),brace_left:new qe('brace_left',z.token,'{'),brace_right:new qe('brace_right',z.token,'}'),colon:new qe('colon',z.token,':'),comma:new qe('comma',z.token,','),equal:new qe('equal',z.token,'='),equal_equal:new qe('equal_equal',z.token,'=='),not_equal:new qe('not_equal',z.token,'!='),greater_than:new qe('greater_than',z.token,'>'),greater_than_equal:new qe('greater_than_equal',z.token,'>='),shift_right:new qe('shift_right',z.token,'>>'),less_than:new qe('less_than',z.token,'<'),less_than_equal:new qe('less_than_equal',z.token,'<='),shift_left:new qe('shift_left',z.token,'<<'),modulo:new qe('modulo',z.token,'%'),minus:new qe('minus',z.token,'-'),minus_minus:new qe('minus_minus',z.token,'--'),period:new qe('period',z.token,'.'),plus:new qe('plus',z.token,'+'),plus_plus:new qe('plus_plus',z.token,'++'),or:new qe('or',z.token,'|'),or_or:new qe('or_or',z.token,'||'),paren_left:new qe('paren_left',z.token,'('),paren_right:new qe('paren_right',z.token,')'),semicolon:new qe('semicolon',z.token,';'),star:new qe('star',z.token,'*'),tilde:new qe('tilde',z.token,'~'),underscore:new qe('underscore',z.token,'_'),xor:new qe('xor',z.token,'^'),plus_equal:new qe('plus_equal',z.token,'+='),minus_equal:new qe('minus_equal',z.token,'-='),times_equal:new qe('times_equal',z.token,'*='),division_equal:new qe('division_equal',z.token,'/='),modulo_equal:new qe('modulo_equal',z.token,'%='),and_equal:new qe('and_equal',z.token,'&='),or_equal:new qe('or_equal',z.token,'|='),xor_equal:new qe('xor_equal',z.token,'^='),shift_right_equal:new qe('shift_right_equal',z.token,'>>='),shift_left_equal:new qe('shift_left_equal',z.token,'<<=')},He.simpleTokens={'@':H.tokens.attr,'{':H.tokens.brace_left,'}':H.tokens.brace_right,':':H.tokens.colon,',':H.tokens.comma,'(':H.tokens.paren_left,')':H.tokens.paren_right,';':H.tokens.semicolon},He.literalTokens={'&':H.tokens.and,'&&':H.tokens.and_and,'->':H.tokens.arrow,'/':H.tokens.forward_slash,'!':H.tokens.bang,'[':H.tokens.bracket_left,']':H.tokens.bracket_right,'=':H.tokens.equal,'==':H.tokens.equal_equal,'!=':H.tokens.not_equal,'>':H.tokens.greater_than,'>=':H.tokens.greater_than_equal,'>>':H.tokens.shift_right,'<':H.tokens.less_than,'<=':H.tokens.less_than_equal,'<<':H.tokens.shift_left,'%':H.tokens.modulo,'-':H.tokens.minus,'--':H.tokens.minus_minus,'.':H.tokens.period,'+':H.tokens.plus,'++':H.tokens.plus_plus,'|':H.tokens.or,'||':H.tokens.or_or,'*':H.tokens.star,'~':H.tokens.tilde,_:H.tokens.underscore,'^':H.tokens.xor,'+=':H.tokens.plus_equal,'-=':H.tokens.minus_equal,'*=':H.tokens.times_equal,'/=':H.tokens.division_equal,'%=':H.tokens.modulo_equal,'&=':H.tokens.and_equal,'|=':H.tokens.or_equal,'^=':H.tokens.xor_equal,'>>=':H.tokens.shift_right_equal,'<<=':H.tokens.shift_left_equal},He.regexTokens={decimal_float_literal:H.tokens.decimal_float_literal,hex_float_literal:H.tokens.hex_float_literal,int_literal:H.tokens.int_literal,uint_literal:H.tokens.uint_literal,ident:H.tokens.ident},He.storage_class=[H.keywords.function,H.keywords.private,H.keywords.workgroup,H.keywords.uniform,H.keywords.storage],He.access_mode=[H.keywords.read,H.keywords.write,H.keywords.read_write],He.sampler_type=[H.keywords.sampler,H.keywords.sampler_comparison],He.sampled_texture_type=[H.keywords.texture_1d,H.keywords.texture_2d,H.keywords.texture_2d_array,H.keywords.texture_3d,H.keywords.texture_cube,H.keywords.texture_cube_array],He.multisampled_texture_type=[H.keywords.texture_multisampled_2d],He.storage_texture_type=[H.keywords.texture_storage_1d,H.keywords.texture_storage_2d,H.keywords.texture_storage_2d_array,H.keywords.texture_storage_3d],He.depth_texture_type=[H.keywords.texture_depth_2d,H.keywords.texture_depth_2d_array,H.keywords.texture_depth_cube,H.keywords.texture_depth_cube_array,H.keywords.texture_depth_multisampled_2d],He.texture_external_type=[H.keywords.texture_external],He.any_texture_type=[...H.sampled_texture_type,...H.multisampled_texture_type,...H.storage_texture_type,...H.depth_texture_type,...H.texture_external_type],He.texel_format=[H.keywords.r8unorm,H.keywords.r8snorm,H.keywords.r8uint,H.keywords.r8sint,H.keywords.r16uint,H.keywords.r16sint,H.keywords.r16float,H.keywords.rg8unorm,H.keywords.rg8snorm,H.keywords.rg8uint,H.keywords.rg8sint,H.keywords.r32uint,H.keywords.r32sint,H.keywords.r32float,H.keywords.rg16uint,H.keywords.rg16sint,H.keywords.rg16float,H.keywords.rgba8unorm,H.keywords.rgba8unorm_srgb,H.keywords.rgba8snorm,H.keywords.rgba8uint,H.keywords.rgba8sint,H.keywords.bgra8unorm,H.keywords.bgra8unorm_srgb,H.keywords.rgb10a2unorm,H.keywords.rg11b10float,H.keywords.rg32uint,H.keywords.rg32sint,H.keywords.rg32float,H.keywords.rgba16uint,H.keywords.rgba16sint,H.keywords.rgba16float,H.keywords.rgba32uint,H.keywords.rgba32sint,H.keywords.rgba32float],He.const_literal=[H.tokens.int_literal,H.tokens.uint_literal,H.tokens.decimal_float_literal,H.tokens.hex_float_literal,H.keywords.true,H.keywords.false],He.literal_or_ident=[H.tokens.ident,H.tokens.int_literal,H.tokens.uint_literal,H.tokens.decimal_float_literal,H.tokens.hex_float_literal,H.tokens.name],He.element_count_expression=[H.tokens.int_literal,H.tokens.uint_literal,H.tokens.ident],He.template_types=[H.keywords.vec2,H.keywords.vec3,H.keywords.vec4,H.keywords.mat2x2,H.keywords.mat2x3,H.keywords.mat2x4,H.keywords.mat3x2,H.keywords.mat3x3,H.keywords.mat3x4,H.keywords.mat4x2,H.keywords.mat4x3,H.keywords.mat4x4,H.keywords.atomic,H.keywords.bitcast,...H.any_texture_type],He.attribute_name=[H.tokens.ident,H.keywords.block,H.keywords.diagnostic],He.assignment_operators=[H.tokens.equal,H.tokens.plus_equal,H.tokens.minus_equal,H.tokens.times_equal,H.tokens.division_equal,H.tokens.modulo_equal,H.tokens.and_equal,H.tokens.or_equal,H.tokens.xor_equal,H.tokens.shift_right_equal,H.tokens.shift_left_equal],He.increment_operators=[H.tokens.plus_plus,H.tokens.minus_minus];class ze{constructor(e,t,n,s,r){this.type=e,this.lexeme=t,this.line=n,this.start=s,this.end=r}toString(){return this.lexeme}isTemplateType(){return-1!=He.template_types.indexOf(this.type)}isArrayType(){return this.type==He.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class Re{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=null!=e?e:''}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new ze(He.eof,'',this._line,this._current,this._current)),this._tokens}scanToken(){let e=this._advance();if('\\n'==e)return this._line++,!0;if(this._isWhitespace(e))return!0;if('/'==e){if('/'==this._peekAhead()){for(;'\\n'!=e;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}if('*'==this._peekAhead()){this._advance();let t=1;for(;t>0;){if(this._isAtEnd())return!0;if(e=this._advance(),'\\n'==e)this._line++;else if('*'==e){if('/'==this._peekAhead()&&(this._advance(),t--,0==t))return!0}else'/'==e&&'*'==this._peekAhead()&&(this._advance(),t++)}return!0}}const t=He.simpleTokens[e];if(t)return this._addToken(t),!0;let n=He.none;const s=this._isAlpha(e),r='_'===e;if(this._isAlphaNumeric(e)){let t=this._peekAhead();for(;this._isAlphaNumeric(t);)e+=this._advance(),t=this._peekAhead()}if(s){const t=He.keywords[e];if(t)return this._addToken(t),!0}if(s||r)return this._addToken(He.tokens.ident),!0;for(;;){let t=this._findType(e);const s=this._peekAhead();if('-'==e&&this._tokens.length>0){if('='==s)return this._current++,e+=s,this._addToken(He.tokens.minus_equal),!0;if('-'==s)return this._current++,e+=s,this._addToken(He.tokens.minus_minus),!0;const n=this._tokens.length-1;if((-1!=He.literal_or_ident.indexOf(this._tokens[n].type)||this._tokens[n].type==He.tokens.paren_right)&&'>'!=s)return this._addToken(t),!0}if('>'==e&&('>'==s||'='==s)){let e=!1,n=this._tokens.length-1;for(let t=0;t<5&&n>=0&&-1===He.assignment_operators.indexOf(this._tokens[n].type);++t,--n)if(this._tokens[n].type===He.tokens.less_than){n>0&&this._tokens[n-1].isArrayOrTemplateType()&&(e=!0);break}if(e)return this._addToken(t),!0}if(t===He.none){let s=e,r=0;const a=2;for(let e=0;e<a;++e)if(s+=this._peekAhead(e),t=this._findType(s),t!==He.none){r=e;break}if(t===He.none)return n!==He.none&&(this._current--,this._addToken(n),!0);e=s,this._current+=r+1}if(n=t,this._isAtEnd())break;e+=this._advance()}return n!==He.none&&(this._addToken(n),!0)}_findType(e){for(const t in He.regexTokens){const n=He.regexTokens[t];if(this._match(e,n.rule))return n}const t=He.literalTokens[e];return t||He.none}_match(e,t){const n=t.exec(e);return n&&0==n.index&&n[0]==e}_isAtEnd(){return this._current>=this._source.length}_isAlpha(e){return!this._isNumeric(e)&&!this._isWhitespace(e)&&'_'!==e&&'.'!==e&&'('!==e&&')'!==e&&'['!==e&&']'!==e&&'{'!==e&&'}'!==e&&','!==e&&';'!==e&&':'!==e&&'='!==e&&'!'!==e&&'<'!==e&&'>'!==e&&'+'!==e&&'-'!==e&&'*'!==e&&'/'!==e&&'%'!==e&&'&'!==e&&'|'!==e&&'^'!==e&&'~'!==e&&'@'!==e&&'#'!==e&&'?'!==e&&'\\''!==e&&'`'!==e&&'\"'!==e&&'\\\\'!==e&&'\\n'!==e&&'\\r'!==e&&'\\t'!==e&&'\\0'!==e}_isNumeric(e){return e>='0'&&e<='9'}_isAlphaNumeric(e){return this._isAlpha(e)||this._isNumeric(e)||'_'===e}_isWhitespace(e){return' '==e||'\\t'==e||'\\r'==e}_advance(e=0){let t=this._source[this._current];return e=e||0,e++,this._current+=e,t}_peekAhead(e=0){return e=e||0,this._current+e>=this._source.length?'\\0':this._source[this._current+e]}_addToken(e){const t=this._source.substring(this._start,this._current);this._tokens.push(new ze(e,t,this._line,this._start,this._current))}}function Ge(e){return Array.isArray(e)||(null==e?void 0:e.buffer)instanceof ArrayBuffer}const Xe=new Float32Array(1),je=new Uint32Array(Xe.buffer),Ze=new Uint32Array(Xe.buffer),Qe=new Int32Array(1),Ye=new Float32Array(Qe.buffer),Ke=new Uint32Array(Qe.buffer),Je=new Uint32Array(1),et=new Float32Array(Je.buffer),tt=new Int32Array(Je.buffer);function nt(e,t,n){if(t===n)return e;if('f32'===t){if('i32'===n||'x32'===n)return Xe[0]=e,je[0];if('u32'===n)return Xe[0]=e,Ze[0]}else if('i32'===t||'x32'===t){if('f32'===n)return Qe[0]=e,Ye[0];if('u32'===n)return Qe[0]=e,Ke[0]}else if('u32'===t){if('f32'===n)return Je[0]=e,et[0];if('i32'===n||'x32'===n)return Je[0]=e,tt[0]}return console.error(`Unsupported cast from ${t} to ${n}`),e}class st{constructor(e){this.resources=null,this.inUse=!1,this.info=null,this.node=e}}class rt{constructor(e,t){this.align=e,this.size=t}}class at{constructor(){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new d,this.functions=[],this._types=new Map,this._functions=new Map}_isStorageTexture(e){return'texture_storage_1d'==e.name||'texture_storage_2d'==e.name||'texture_storage_2d_array'==e.name||'texture_storage_3d'==e.name}updateAST(e){for(const t of e)t instanceof D&&this._functions.set(t.name,new st(t));for(const t of e)if(t instanceof oe){const e=this.getTypeInfo(t,null);e instanceof n&&this.structs.push(e)}for(const t of e)if(t instanceof te)this.aliases.push(this._getAliasInfo(t));else{if(t instanceof M){const e=t,n=this._getAttributeNum(e.attributes,'id',0),s=null!=e.type?this.getTypeInfo(e.type,e.attributes):null;this.overrides.push(new h(e.name,s,e.attributes,n));continue}if(this._isUniformVar(t)){const e=t,n=this._getAttributeNum(e.attributes,'group',0),s=this._getAttributeNum(e.attributes,'binding',0),r=this.getTypeInfo(e.type,e.attributes),a=new o(e.name,r,n,s,e.attributes,i.Uniform,e.access);a.access||(a.access='read'),this.uniforms.push(a);continue}if(this._isStorageVar(t)){const e=t,n=this._getAttributeNum(e.attributes,'group',0),s=this._getAttributeNum(e.attributes,'binding',0),r=this.getTypeInfo(e.type,e.attributes),a=this._isStorageTexture(r),c=new o(e.name,r,n,s,e.attributes,a?i.StorageTexture:i.Storage,e.access);c.access||(c.access='read'),this.storage.push(c);continue}if(this._isTextureVar(t)){const e=t,n=this._getAttributeNum(e.attributes,'group',0),s=this._getAttributeNum(e.attributes,'binding',0),r=this.getTypeInfo(e.type,e.attributes),a=this._isStorageTexture(r),c=new o(e.name,r,n,s,e.attributes,a?i.StorageTexture:i.Texture,e.access);c.access||(c.access='read'),a?this.storage.push(c):this.textures.push(c);continue}if(this._isSamplerVar(t)){const e=t,n=this._getAttributeNum(e.attributes,'group',0),s=this._getAttributeNum(e.attributes,'binding',0),r=this.getTypeInfo(e.type,e.attributes),a=new o(e.name,r,n,s,e.attributes,i.Sampler,e.access);this.samplers.push(a);continue}}for(const t of e)if(t instanceof D){const e=this._getAttribute(t,'vertex'),n=this._getAttribute(t,'fragment'),s=this._getAttribute(t,'compute'),r=e||n||s,a=new p(t.name,null==r?void 0:r.name,t.attributes);a.attributes=t.attributes,a.startLine=t.startLine,a.endLine=t.endLine,this.functions.push(a),this._functions.get(t.name).info=a,r&&(this._functions.get(t.name).inUse=!0,a.inUse=!0,a.resources=this._findResources(t,!!r),a.inputs=this._getInputs(t.args),a.outputs=this._getOutputs(t.returnType),this.entry[r.name].push(a)),a.arguments=t.args.map(e=>new f(e.name,this.getTypeInfo(e.type,e.attributes),e.attributes)),a.returnType=t.returnType?this.getTypeInfo(t.returnType,t.attributes):null;continue}for(const e of this._functions.values())e.info&&(e.info.inUse=e.inUse,this._addCalls(e.node,e.info.calls));for(const e of this._functions.values())e.node.search(t=>{var n,s,r;if(t instanceof De){if(t.value)if(Ge(t.value))for(const s of t.value)for(const t of this.overrides)s===t.name&&(null===(n=e.info)||void 0===n||n.overrides.push(t));else for(const n of this.overrides)t.value===n.name&&(null===(s=e.info)||void 0===s||s.overrides.push(n))}else if(t instanceof ge)for(const n of this.overrides)t.name===n.name&&(null===(r=e.info)||void 0===r||r.overrides.push(n))});for(const e of this.uniforms)this._markStructsInUse(e.type);for(const e of this.storage)this._markStructsInUse(e.type)}getFunctionInfo(e){for(const t of this.functions)if(t.name==e)return t;return null}getStructInfo(e){for(const t of this.structs)if(t.name==e)return t;return null}getOverrideInfo(e){for(const t of this.overrides)if(t.name==e)return t;return null}_markStructsInUse(e){if(e)if(e.isStruct){if(e.inUse=!0,e.members)for(const t of e.members)this._markStructsInUse(t.type)}else if(e.isArray)this._markStructsInUse(e.format);else if(e.isTemplate)e.format&&this._markStructsInUse(e.format);else{const t=this._getAlias(e.name);t&&this._markStructsInUse(t)}}_addCalls(e,t){var n;for(const s of e.calls){const e=null===(n=this._functions.get(s.name))||void 0===n?void 0:n.info;e&&t.add(e)}}findResource(e,t,n){if(n){for(const s of this.entry.compute)if(s.name===n)for(const n of s.resources)if(n.group==e&&n.binding==t)return n;for(const s of this.entry.vertex)if(s.name===n)for(const n of s.resources)if(n.group==e&&n.binding==t)return n;for(const s of this.entry.fragment)if(s.name===n)for(const n of s.resources)if(n.group==e&&n.binding==t)return n}for(const n of this.uniforms)if(n.group==e&&n.binding==t)return n;for(const n of this.storage)if(n.group==e&&n.binding==t)return n;for(const n of this.textures)if(n.group==e&&n.binding==t)return n;for(const n of this.samplers)if(n.group==e&&n.binding==t)return n;return null}_findResource(e){for(const t of this.uniforms)if(t.name==e)return t;for(const t of this.storage)if(t.name==e)return t;for(const t of this.textures)if(t.name==e)return t;for(const t of this.samplers)if(t.name==e)return t;return null}_markStructsFromAST(e){const t=this.getTypeInfo(e,null);this._markStructsInUse(t)}_findResources(e,t){const n=[],s=this,r=[];return e.search(a=>{if(a instanceof E)r.push({});else if(a instanceof $)r.pop();else if(a instanceof F){const e=a;t&&null!==e.type&&this._markStructsFromAST(e.type),r.length>0&&(r[r.length-1][e.name]=e)}else if(a instanceof de){const e=a;t&&null!==e.type&&this._markStructsFromAST(e.type)}else if(a instanceof U){const e=a;t&&null!==e.type&&this._markStructsFromAST(e.type),r.length>0&&(r[r.length-1][e.name]=e)}else if(a instanceof ge){const e=a;if(r.length>0){if(r[r.length-1][e.name])return}const t=s._findResource(e.name);t&&n.push(t)}else if(a instanceof me){const r=a,i=s._functions.get(r.name);i&&(t&&(i.inUse=!0),e.calls.add(i.node),null===i.resources&&(i.resources=s._findResources(i.node,t)),n.push(...i.resources))}else if(a instanceof X){const r=a,i=s._functions.get(r.name);i&&(t&&(i.inUse=!0),e.calls.add(i.node),null===i.resources&&(i.resources=s._findResources(i.node,t)),n.push(...i.resources))}}),[...new Map(n.map(e=>[e.name,e])).values()]}getBindGroups(){const e=[];function t(t,n){t>=e.length&&(e.length=t+1),void 0===e[t]&&(e[t]=[]),n>=e[t].length&&(e[t].length=n+1)}for(const n of this.uniforms){t(n.group,n.binding);e[n.group][n.binding]=n}for(const n of this.storage){t(n.group,n.binding);e[n.group][n.binding]=n}for(const n of this.textures){t(n.group,n.binding);e[n.group][n.binding]=n}for(const n of this.samplers){t(n.group,n.binding);e[n.group][n.binding]=n}return e}_getOutputs(e,t=void 0){if(void 0===t&&(t=[]),e instanceof oe)this._getStructOutputs(e,t);else{const n=this._getOutputInfo(e);null!==n&&t.push(n)}return t}_getStructOutputs(e,t){for(const n of e.members)if(n.type instanceof oe)this._getStructOutputs(n.type,t);else{const e=this._getAttribute(n,'location')||this._getAttribute(n,'builtin');if(null!==e){const s=this.getTypeInfo(n.type,n.type.attributes),r=this._parseInt(e.value),a=new u(n.name,s,e.name,r);t.push(a)}}}_getOutputInfo(e){const t=this._getAttribute(e,'location')||this._getAttribute(e,'builtin');if(null!==t){const n=this.getTypeInfo(e,e.attributes),s=this._parseInt(t.value);return new u('',n,t.name,s)}return null}_getInputs(e,t=void 0){void 0===t&&(t=[]);for(const n of e)if(n.type instanceof oe)this._getStructInputs(n.type,t);else{const e=this._getInputInfo(n);null!==e&&t.push(e)}return t}_getStructInputs(e,t){for(const n of e.members)if(n.type instanceof oe)this._getStructInputs(n.type,t);else{const e=this._getInputInfo(n);null!==e&&t.push(e)}}_getInputInfo(e){const t=this._getAttribute(e,'location')||this._getAttribute(e,'builtin');if(null!==t){const n=this._getAttribute(e,'interpolation'),s=this.getTypeInfo(e.type,e.attributes),r=this._parseInt(t.value),a=new l(e.name,s,t.name,r);return null!==n&&(a.interpolation=this._parseString(n.value)),a}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);const t=parseInt(e);return isNaN(t)?e:t}_getAlias(e){for(const t of this.aliases)if(t.name==e)return t.type;return null}_getAliasInfo(e){return new c(e.name,this.getTypeInfo(e.type,null))}getTypeInfoByName(e){for(const t of this.structs)if(t.name==e)return t;for(const t of this.aliases)if(t.name==e)return t.type;return null}getTypeInfo(i,o=null){if(this._types.has(i))return this._types.get(i);if(i instanceof le){const e=i.type?this.getTypeInfo(i.type,i.attributes):null,t=new r(i.name,e,o);return this._types.set(i,t),this._updateTypeInfo(t),t}if(i instanceof ue){const e=i,t=e.format?this.getTypeInfo(e.format,e.attributes):null,n=new s(e.name,o);return n.format=t,n.count=e.count,this._types.set(i,n),this._updateTypeInfo(n),n}if(i instanceof oe){const e=i,s=new n(e.name,o);s.startLine=e.startLine,s.endLine=e.endLine;for(const n of e.members){const e=this.getTypeInfo(n.type,n.attributes);s.members.push(new t(n.name,e,n.attributes))}return this._types.set(i,s),this._updateTypeInfo(s),s}if(i instanceof he){const t=i,n=t.format instanceof ae,s=t.format?n?this.getTypeInfo(t.format,null):new e(t.format,null):null,r=new a(t.name,s,o,t.access);return this._types.set(i,r),this._updateTypeInfo(r),r}if(i instanceof ce){const e=i,t=e.format?this.getTypeInfo(e.format,null):null,n=new a(e.name,t,o,e.access);return this._types.set(i,n),this._updateTypeInfo(n),n}const c=new e(i.name,o);return this._types.set(i,c),this._updateTypeInfo(c),c}_updateTypeInfo(e){var t,a,i;const o=this._getTypeSize(e);if(e.size=null!==(t=null==o?void 0:o.size)&&void 0!==t?t:0,e instanceof s&&e.format){const t=this._getTypeSize(e.format);e.stride=Math.max(null!==(a=null==t?void 0:t.size)&&void 0!==a?a:0,null!==(i=null==t?void 0:t.align)&&void 0!==i?i:0),this._updateTypeInfo(e.format)}e instanceof r&&this._updateTypeInfo(e.format),e instanceof n&&this._updateStructInfo(e)}_updateStructInfo(e){var t;let n=0,s=0,r=0,a=0;for(let i=0,o=e.members.length;i<o;++i){const o=e.members[i],c=this._getTypeSize(o);if(!c)continue;null!==(t=this._getAlias(o.type.name))&&void 0!==t||o.type;const l=c.align,u=c.size;n=this._roundUp(l,n+s),s=u,r=n,a=Math.max(a,l),o.offset=n,o.size=u,this._updateTypeInfo(o.type)}e.size=this._roundUp(a,r+s),e.align=a}_getTypeSize(r){var a,i;if(null==r)return null;const o=this._getAttributeNum(r.attributes,'size',0),c=this._getAttributeNum(r.attributes,'align',0);if(r instanceof t&&(r=r.type),r instanceof e){const e=this._getAlias(r.name);null!==e&&(r=e)}{const e=at._typeInfo[r.name];if(void 0!==e){const t='f16'===(null===(a=r.format)||void 0===a?void 0:a.name)?2:1;return new rt(Math.max(c,e.align/t),Math.max(o,e.size/t))}}{const e=at._typeInfo[r.name.substring(0,r.name.length-1)];if(e){const t='h'===r.name[r.name.length-1]?2:1;return new rt(Math.max(c,e.align/t),Math.max(o,e.size/t))}}if(r instanceof s){let e=r,t=8,n=8;const s=this._getTypeSize(e.format);null!==s&&(n=s.size,t=s.align);return n=e.count*this._getAttributeNum(null!==(i=null==r?void 0:r.attributes)&&void 0!==i?i:null,'stride',this._roundUp(t,n)),o&&(n=o),new rt(Math.max(c,t),Math.max(o,n))}if(r instanceof n){let e=0,t=0,n=0,s=0,a=0;for(const t of r.members){const r=this._getTypeSize(t.type);null!==r&&(e=Math.max(r.align,e),n=this._roundUp(r.align,n+s),s=r.size,a=n)}return t=this._roundUp(e,a+s),new rt(Math.max(c,e),Math.max(o,t))}return null}_isUniformVar(e){return e instanceof F&&'uniform'==e.storage}_isStorageVar(e){return e instanceof F&&'storage'==e.storage}_isTextureVar(e){return e instanceof F&&null!==e.type&&-1!=at._textureTypes.indexOf(e.type.name)}_isSamplerVar(e){return e instanceof F&&null!==e.type&&-1!=at._samplerTypes.indexOf(e.type.name)}_getAttribute(e,t){const n=e;if(!n||!n.attributes)return null;const s=n.attributes;for(let e of s)if(e.name==t)return e;return null}_getAttributeNum(e,t,n){if(null===e)return n;for(let s of e)if(s.name==t){let e=null!==s&&null!==s.value?s.value:n;return e instanceof Array&&(e=e[0]),'number'==typeof e?e:'string'==typeof e?parseInt(e):n}return n}_roundUp(e,t){return Math.ceil(t/e)*e}}at._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}},at._textureTypes=He.any_texture_type.map(e=>e.name),at._samplerTypes=He.sampler_type.map(e=>e.name);let it=0;class ot{constructor(e,t,n){this.id=it++,this.name=e,this.value=t,this.node=n}clone(){return new ot(this.name,this.value,this.node)}}class ct{constructor(e){this.id=it++,this.name=e.name,this.node=e}clone(){return new ct(this.node)}}class lt{constructor(e){this.parent=null,this.variables=new Map,this.functions=new Map,this.currentFunctionName='',this.id=it++,e&&(this.parent=e,this.currentFunctionName=e.currentFunctionName)}getVariable(e){var t;return this.variables.has(e)?null!==(t=this.variables.get(e))&&void 0!==t?t:null:this.parent?this.parent.getVariable(e):null}getFunction(e){var t;return this.functions.has(e)?null!==(t=this.functions.get(e))&&void 0!==t?t:null:this.parent?this.parent.getFunction(e):null}createVariable(e,t,n){this.variables.set(e,new ot(e,t,null!=n?n:null))}setVariable(e,t,n){const s=this.getVariable(e);null!==s?s.value=t:this.createVariable(e,t,n)}getVariableValue(e){var t;const n=this.getVariable(e);return null!==(t=null==n?void 0:n.value)&&void 0!==t?t:null}clone(){return new lt(this)}}class ut{evalExpression(e,t){return null}getTypeInfo(e){return null}getVariableName(e,t){return''}}class ht{constructor(e){this.exec=e}getTypeInfo(e){return this.exec.getTypeInfo(e)}All(e,t){const n=this.exec.evalExpression(e.args[0],t);let s=!0;if(n instanceof Me)return n.data.forEach(e=>{e||(s=!1)}),new Be(s?1:0,this.getTypeInfo('bool'));throw new Error(`All() expects a vector argument. Line ${e.line}`)}Any(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me){const e=n.data.some(e=>e);return new Be(e?1:0,this.getTypeInfo('bool'))}throw new Error(`Any() expects a vector argument. Line ${e.line}`)}Select(e,t){const n=this.exec.evalExpression(e.args[2],t);if(!(n instanceof Be))throw new Error(`Select() expects a bool condition. Line ${e.line}`);return n.value?this.exec.evalExpression(e.args[1],t):this.exec.evalExpression(e.args[0],t)}ArrayLength(e,t){let n=e.args[0];n instanceof ke&&(n=n.right);const s=this.exec.evalExpression(n,t);if(s instanceof Pe&&0===s.typeInfo.size){const e=s.typeInfo,t=s.buffer.byteLength/e.stride;return new Be(t,this.getTypeInfo('u32'))}return new Be(s.typeInfo.size,this.getTypeInfo('u32'))}Abs(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.abs(e)),n.typeInfo);const s=n;return new Be(Math.abs(s.value),s.typeInfo)}Acos(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.acos(e)),n.typeInfo);const s=n;return new Be(Math.acos(s.value),n.typeInfo)}Acosh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.acosh(e)),n.typeInfo);const s=n;return new Be(Math.acosh(s.value),n.typeInfo)}Asin(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.asin(e)),n.typeInfo);const s=n;return new Be(Math.asin(s.value),n.typeInfo)}Asinh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.asinh(e)),n.typeInfo);const s=n;return new Be(Math.asinh(s.value),n.typeInfo)}Atan(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.atan(e)),n.typeInfo);const s=n;return new Be(Math.atan(s.value),n.typeInfo)}Atanh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.atanh(e)),n.typeInfo);const s=n;return new Be(Math.atanh(s.value),n.typeInfo)}Atan2(e,t){const n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t);if(n instanceof Me&&s instanceof Me)return new Me(n.data.map((e,t)=>Math.atan2(e,s.data[t])),n.typeInfo);const r=n,a=s;return new Be(Math.atan2(r.value,a.value),n.typeInfo)}Ceil(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.ceil(e)),n.typeInfo);const s=n;return new Be(Math.ceil(s.value),n.typeInfo)}_clamp(e,t,n){return Math.min(Math.max(e,t),n)}Clamp(e,t){const n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t),r=this.exec.evalExpression(e.args[2],t);if(n instanceof Me&&s instanceof Me&&r instanceof Me)return new Me(n.data.map((e,t)=>this._clamp(e,s.data[t],r.data[t])),n.typeInfo);const a=n,i=s,o=r;return new Be(this._clamp(a.value,i.value,o.value),n.typeInfo)}Cos(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.cos(e)),n.typeInfo);const s=n;return new Be(Math.cos(s.value),n.typeInfo)}Cosh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.cosh(e)),n.typeInfo);const s=n;return new Be(Math.cos(s.value),n.typeInfo)}CountLeadingZeros(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.clz32(e)),n.typeInfo);const s=n;return new Be(Math.clz32(s.value),n.typeInfo)}_countOneBits(e){let t=0;for(;0!==e;)1&e&&t++,e>>=1;return t}CountOneBits(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>this._countOneBits(e)),n.typeInfo);const s=n;return new Be(this._countOneBits(s.value),n.typeInfo)}_countTrailingZeros(e){if(0===e)return 32;let t=0;for(;!(1&e);)e>>=1,t++;return t}CountTrailingZeros(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>this._countTrailingZeros(e)),n.typeInfo);const s=n;return new Be(this._countTrailingZeros(s.value),n.typeInfo)}Cross(e,t){const n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t);if(n instanceof Me&&s instanceof Me){if(3!==n.data.length||3!==s.data.length)return console.error(`Cross() expects 3D vectors. Line ${e.line}`),null;const t=n.data,r=s.data;return new Me([t[1]*r[2]-r[1]*t[2],t[2]*r[0]-r[2]*t[0],t[0]*r[1]-r[0]*t[1]],n.typeInfo)}return console.error(`Cross() expects vector arguments. Line ${e.line}`),null}Degrees(e,t){const n=this.exec.evalExpression(e.args[0],t),s=180/Math.PI;if(n instanceof Me)return new Me(n.data.map(e=>e*s),n.typeInfo);return new Be(n.value*s,this.getTypeInfo('f32'))}Determinant(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Ue){const e=n.data,t=n.typeInfo.getTypeName(),s=t.endsWith('h')?this.getTypeInfo('f16'):this.getTypeInfo('f32');if('mat2x2'===t||'mat2x2f'===t||'mat2x2h'===t)return new Be(e[0]*e[3]-e[1]*e[2],s);if('mat2x3'===t||'mat2x3f'===t||'mat2x3h'===t)return new Be(e[0]*(e[4]*e[8]-e[5]*e[7])-e[1]*(e[3]*e[8]-e[5]*e[6])+e[2]*(e[3]*e[7]-e[4]*e[6]),s);if('mat2x4'===t||'mat2x4f'===t||'mat2x4h'===t)console.error(`TODO: Determinant for ${t}`);else if('mat3x2'===t||'mat3x2f'===t||'mat3x2h'===t)console.error(`TODO: Determinant for ${t}`);else{if('mat3x3'===t||'mat3x3f'===t||'mat3x3h'===t)return new Be(e[0]*(e[4]*e[8]-e[5]*e[7])-e[1]*(e[3]*e[8]-e[5]*e[6])+e[2]*(e[3]*e[7]-e[4]*e[6]),s);'mat3x4'===t||'mat3x4f'===t||'mat3x4h'===t||'mat4x2'===t||'mat4x2f'===t||'mat4x2h'===t||'mat4x3'===t||'mat4x3f'===t||'mat4x3h'===t?console.error(`TODO: Determinant for ${t}`):'mat4x4'!==t&&'mat4x4f'!==t&&'mat4x4h'!==t||console.error(`TODO: Determinant for ${t}`)}}return console.error(`Determinant expects a matrix argument. Line ${e.line}`),null}Distance(e,t){const n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t);if(n instanceof Me&&s instanceof Me){let e=0;for(let t=0;t<n.data.length;++t)e+=(n.data[t]-s.data[t])*(n.data[t]-s.data[t]);return new Be(Math.sqrt(e),this.getTypeInfo('f32'))}const r=n,a=s;return new Be(Math.abs(r.value-a.value),n.typeInfo)}_dot(e,t){let n=0;for(let s=0;s<e.length;++s)n+=t[s]*e[s];return n}Dot(e,t){const n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t);return n instanceof Me&&s instanceof Me?new Be(this._dot(n.data,s.data),this.getTypeInfo('f32')):(console.error(`Dot() expects vector arguments. Line ${e.line}`),null)}Dot4U8Packed(e,t){return console.error(`TODO: dot4U8Packed. Line ${e.line}`),null}Dot4I8Packed(e,t){return console.error(`TODO: dot4I8Packed. Line ${e.line}`),null}Exp(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.exp(e)),n.typeInfo);const s=n;return new Be(Math.exp(s.value),n.typeInfo)}Exp2(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.pow(2,e)),n.typeInfo);const s=n;return new Be(Math.pow(2,s.value),n.typeInfo)}ExtractBits(e,t){const n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t),r=this.exec.evalExpression(e.args[2],t);if('u32'!==s.typeInfo.name&&'x32'!==s.typeInfo.name)return console.error(`ExtractBits() expects an i32 offset argument. Line ${e.line}`),null;if('u32'!==r.typeInfo.name&&'x32'!==r.typeInfo.name)return console.error(`ExtractBits() expects an i32 count argument. Line ${e.line}`),null;const a=s.value,i=r.value;if(n instanceof Me)return new Me(n.data.map(e=>e>>a&(1<<i)-1),n.typeInfo);if('i32'!==n.typeInfo.name&&'x32'!==n.typeInfo.name)return console.error(`ExtractBits() expects an i32 argument. Line ${e.line}`),null;const o=n.value;return new Be(o>>a&(1<<i)-1,this.getTypeInfo('i32'))}FaceForward(e,t){const n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t),r=this.exec.evalExpression(e.args[2],t);if(n instanceof Me&&s instanceof Me&&r instanceof Me){const e=this._dot(s.data,r.data);return new Me(e<0?Array.from(n.data):n.data.map(e=>-e),n.typeInfo)}return console.error(`FaceForward() expects vector arguments. Line ${e.line}`),null}_firstLeadingBit(e){return 0===e?-1:31-Math.clz32(e)}FirstLeadingBit(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>this._firstLeadingBit(e)),n.typeInfo);const s=n;return new Be(this._firstLeadingBit(s.value),n.typeInfo)}_firstTrailingBit(e){return 0===e?-1:Math.log2(e&-e)}FirstTrailingBit(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>this._firstTrailingBit(e)),n.typeInfo);const s=n;return new Be(this._firstTrailingBit(s.value),n.typeInfo)}Floor(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.floor(e)),n.typeInfo);const s=n;return new Be(Math.floor(s.value),n.typeInfo)}Fma(e,t){const n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t),r=this.exec.evalExpression(e.args[2],t);if(n instanceof Me&&s instanceof Me&&r instanceof Me)return n.data.length!==s.data.length||n.data.length!==r.data.length?(console.error(`Fma() expects vectors of the same length. Line ${e.line}`),null):new Me(n.data.map((e,t)=>e*s.data[t]+r.data[t]),n.typeInfo);const a=n,i=s,o=r;return new Be(a.value*i.value+o.value,a.typeInfo)}Fract(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>e-Math.floor(e)),n.typeInfo);const s=n;return new Be(s.value-Math.floor(s.value),n.typeInfo)}Frexp(e,t){return console.error(`TODO: frexp. Line ${e.line}`),null}InsertBits(e,t){const n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t),r=this.exec.evalExpression(e.args[2],t),a=this.exec.evalExpression(e.args[3],t);if('u32'!==r.typeInfo.name&&'x32'!==r.typeInfo.name)return console.error(`InsertBits() expects an i32 offset argument. Line ${e.line}`),null;const i=r.value,o=(1<<a.value)-1<<i,c=~o;if(n instanceof Me&&s instanceof Me)return new Me(n.data.map((e,t)=>e&c|s.data[t]<<i&o),n.typeInfo);const l=n.value,u=s.value;return new Be(l&c|u<<i&o,n.typeInfo)}InverseSqrt(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>1/Math.sqrt(e)),n.typeInfo);const s=n;return new Be(1/Math.sqrt(s.value),n.typeInfo)}Ldexp(e,t){return console.error(`TODO: ldexp. Line ${e.line}`),null}Length(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me){let e=0;return n.data.forEach(t=>{e+=t*t}),new Be(Math.sqrt(e),this.getTypeInfo('f32'))}const s=n;return new Be(Math.abs(s.value),n.typeInfo)}Log(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.log(e)),n.typeInfo);const s=n;return new Be(Math.log(s.value),n.typeInfo)}Log2(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.log2(e)),n.typeInfo);const s=n;return new Be(Math.log2(s.value),n.typeInfo)}Max(e,t){const n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t);if(n instanceof Me&&s instanceof Me)return new Me(n.data.map((e,t)=>Math.max(e,s.data[t])),n.typeInfo);const r=n,a=s;return new Be(Math.max(r.value,a.value),n.typeInfo)}Min(e,t){const n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t);if(n instanceof Me&&s instanceof Me)return new Me(n.data.map((e,t)=>Math.min(e,s.data[t])),n.typeInfo);const r=n,a=s;return new Be(Math.min(r.value,a.value),n.typeInfo)}Mix(e,t){const n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t),r=this.exec.evalExpression(e.args[2],t);if(n instanceof Me&&s instanceof Me&&r instanceof Me)return new Me(n.data.map((e,t)=>n.data[t]*(1-r.data[t])+s.data[t]*r.data[t]),n.typeInfo);const a=s,i=r;return new Be(n.value*(1-i.value)+a.value*i.value,n.typeInfo)}Modf(e,t){const n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t);if(n instanceof Me&&s instanceof Me)return new Me(n.data.map((e,t)=>e%s.data[t]),n.typeInfo);const r=s;return new Be(n.value%r.value,n.typeInfo)}Normalize(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me){const s=this.Length(e,t).value;return new Me(n.data.map(e=>e/s),n.typeInfo)}return console.error(`Normalize() expects a vector argument. Line ${e.line}`),null}Pow(e,t){const n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t);if(n instanceof Me&&s instanceof Me)return new Me(n.data.map((e,t)=>Math.pow(e,s.data[t])),n.typeInfo);const r=n,a=s;return new Be(Math.pow(r.value,a.value),n.typeInfo)}QuantizeToF16(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>e),n.typeInfo);return new Be(n.value,n.typeInfo)}Radians(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>e*Math.PI/180),n.typeInfo);return new Be(n.value*Math.PI/180,this.getTypeInfo('f32'))}Reflect(e,t){let n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t);if(n instanceof Me&&s instanceof Me){const e=this._dot(n.data,s.data);return new Me(n.data.map((t,n)=>t-2*e*s.data[n]),n.typeInfo)}return console.error(`Reflect() expects vector arguments. Line ${e.line}`),null}Refract(e,t){let n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t),r=this.exec.evalExpression(e.args[2],t);if(n instanceof Me&&s instanceof Me&&r instanceof Be){const e=this._dot(s.data,n.data);return new Me(n.data.map((t,n)=>{const a=1-r.value*r.value*(1-e*e);if(a<0)return 0;const i=Math.sqrt(a);return r.value*t-(r.value*e+i)*s.data[n]}),n.typeInfo)}return console.error(`Refract() expects vector arguments and a scalar argument. Line ${e.line}`),null}ReverseBits(e,t){return console.error(`TODO: reverseBits. Line ${e.line}`),null}Round(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.round(e)),n.typeInfo);const s=n;return new Be(Math.round(s.value),n.typeInfo)}Saturate(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.min(Math.max(e,0),1)),n.typeInfo);const s=n;return new Be(Math.min(Math.max(s.value,0),1),n.typeInfo)}Sign(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.sign(e)),n.typeInfo);const s=n;return new Be(Math.sign(s.value),n.typeInfo)}Sin(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.sin(e)),n.typeInfo);const s=n;return new Be(Math.sin(s.value),n.typeInfo)}Sinh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.sinh(e)),n.typeInfo);const s=n;return new Be(Math.sinh(s.value),n.typeInfo)}_smoothstep(e,t,n){const s=Math.min(Math.max((n-e)/(t-e),0),1);return s*s*(3-2*s)}SmoothStep(e,t){const n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t),r=this.exec.evalExpression(e.args[2],t);if(r instanceof Me&&n instanceof Me&&s instanceof Me)return new Me(r.data.map((e,t)=>this._smoothstep(n.data[t],s.data[t],e)),r.typeInfo);const a=n,i=s,o=r;return new Be(this._smoothstep(a.value,i.value,o.value),r.typeInfo)}Sqrt(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.sqrt(e)),n.typeInfo);const s=n;return new Be(Math.sqrt(s.value),n.typeInfo)}Step(e,t){const n=this.exec.evalExpression(e.args[0],t),s=this.exec.evalExpression(e.args[1],t);if(s instanceof Me&&n instanceof Me)return new Me(s.data.map((e,t)=>e<n.data[t]?0:1),s.typeInfo);const r=n;return new Be(s.value<r.value?0:1,r.typeInfo)}Tan(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.tan(e)),n.typeInfo);const s=n;return new Be(Math.tan(s.value),n.typeInfo)}Tanh(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.tanh(e)),n.typeInfo);const s=n;return new Be(Math.tanh(s.value),n.typeInfo)}_getTransposeType(e){const t=e.getTypeName();return'mat2x2f'===t||'mat2x2h'===t?e:'mat2x3f'===t?this.getTypeInfo('mat3x2f'):'mat2x3h'===t?this.getTypeInfo('mat3x2h'):'mat2x4f'===t?this.getTypeInfo('mat4x2f'):'mat2x4h'===t?this.getTypeInfo('mat4x2h'):'mat3x2f'===t?this.getTypeInfo('mat2x3f'):'mat3x2h'===t?this.getTypeInfo('mat2x3h'):'mat3x3f'===t||'mat3x3h'===t?e:'mat3x4f'===t?this.getTypeInfo('mat4x3f'):'mat3x4h'===t?this.getTypeInfo('mat4x3h'):'mat4x2f'===t?this.getTypeInfo('mat2x4f'):'mat4x2h'===t?this.getTypeInfo('mat2x4h'):'mat4x3f'===t?this.getTypeInfo('mat3x4f'):'mat4x3h'===t?this.getTypeInfo('mat3x4h'):('mat4x4f'===t||'mat4x4h'===t||console.error(`Invalid matrix type ${t}`),e)}Transpose(e,t){const n=this.exec.evalExpression(e.args[0],t);if(!(n instanceof Ue))return console.error(`Transpose() expects a matrix argument. Line ${e.line}`),null;const s=this._getTransposeType(n.typeInfo);if('mat2x2'===n.typeInfo.name||'mat2x2f'===n.typeInfo.name||'mat2x2h'===n.typeInfo.name){const e=n.data;return new Ue([e[0],e[2],e[1],e[3]],s)}if('mat2x3'===n.typeInfo.name||'mat2x3f'===n.typeInfo.name||'mat2x3h'===n.typeInfo.name){const e=n.data;return new Ue([e[0],e[3],e[6],e[1],e[4],e[7]],s)}if('mat2x4'===n.typeInfo.name||'mat2x4f'===n.typeInfo.name||'mat2x4h'===n.typeInfo.name){const e=n.data;return new Ue([e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13]],s)}if('mat3x2'===n.typeInfo.name||'mat3x2f'===n.typeInfo.name||'mat3x2h'===n.typeInfo.name){const e=n.data;return new Ue([e[0],e[3],e[1],e[4],e[2],e[5]],s)}if('mat3x3'===n.typeInfo.name||'mat3x3f'===n.typeInfo.name||'mat3x3h'===n.typeInfo.name){const e=n.data;return new Ue([e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]],s)}if('mat3x4'===n.typeInfo.name||'mat3x4f'===n.typeInfo.name||'mat3x4h'===n.typeInfo.name){const e=n.data;return new Ue([e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14]],s)}if('mat4x2'===n.typeInfo.name||'mat4x2f'===n.typeInfo.name||'mat4x2h'===n.typeInfo.name){const e=n.data;return new Ue([e[0],e[4],e[1],e[5],e[2],e[6]],s)}if('mat4x3'===n.typeInfo.name||'mat4x3f'===n.typeInfo.name||'mat4x3h'===n.typeInfo.name){const e=n.data;return new Ue([e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]],s)}if('mat4x4'===n.typeInfo.name||'mat4x4f'===n.typeInfo.name||'mat4x4h'===n.typeInfo.name){const e=n.data;return new Ue([e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]],s)}return console.error(`Invalid matrix type ${n.typeInfo.name}`),null}Trunc(e,t){const n=this.exec.evalExpression(e.args[0],t);if(n instanceof Me)return new Me(n.data.map(e=>Math.trunc(e)),n.typeInfo);const s=n;return new Be(Math.trunc(s.value),n.typeInfo)}Dpdx(e,t){return console.error(`TODO: dpdx. Line ${e.line}`),null}DpdxCoarse(e,t){return console.error(`TODO: dpdxCoarse. Line ${e.line}`),null}DpdxFine(e,t){return console.error('TODO: dpdxFine'),null}Dpdy(e,t){return console.error('TODO: dpdy'),null}DpdyCoarse(e,t){return console.error('TODO: dpdyCoarse'),null}DpdyFine(e,t){return console.error('TODO: dpdyFine'),null}Fwidth(e,t){return console.error('TODO: fwidth'),null}FwidthCoarse(e,t){return console.error('TODO: fwidthCoarse'),null}FwidthFine(e,t){return console.error('TODO: fwidthFine'),null}TextureDimensions(e,t){const n=e.args[0],s=e.args.length>1?this.exec.evalExpression(e.args[1],t).value:0;if(n instanceof ge){const r=n.name,a=t.getVariableValue(r);if(a instanceof We){if(s<0||s>=a.mipLevelCount)return console.error(`Invalid mip level for textureDimensions. Line ${e.line}`),null;const t=a.getMipLevelSize(s),n=a.dimension;return'1d'===n?new Be(t[0],this.getTypeInfo('u32')):'3d'===n?new Me(t,this.getTypeInfo('vec3u')):'2d'===n?new Me(t.slice(0,2),this.getTypeInfo('vec2u')):(console.error(`Invalid texture dimension ${n} not found. Line ${e.line}`),null)}return console.error(`Texture ${r} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureDimensions. Line ${e.line}`),null}TextureGather(e,t){return console.error('TODO: textureGather'),null}TextureGatherCompare(e,t){return console.error('TODO: textureGatherCompare'),null}TextureLoad(e,t){const n=e.args[0],s=this.exec.evalExpression(e.args[1],t),r=e.args.length>2?this.exec.evalExpression(e.args[2],t).value:0;if(!(s instanceof Me)||2!==s.data.length)return console.error(`Invalid UV argument for textureLoad. Line ${e.line}`),null;if(n instanceof ge){const a=n.name,i=t.getVariableValue(a);if(i instanceof We){const t=Math.floor(s.data[0]),n=Math.floor(s.data[1]);if(t<0||t>=i.width||n<0||n>=i.height)return console.error(`Texture ${a} out of bounds. Line ${e.line}`),null;const o=i.getPixel(t,n,0,r);return null===o?(console.error(`Invalid texture format for textureLoad. Line ${e.line}`),null):new Me(o,this.getTypeInfo('vec4f'))}return console.error(`Texture ${a} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureLoad. Line ${e.line}`),null}TextureNumLayers(e,t){const n=e.args[0];if(n instanceof ge){const s=n.name,r=t.getVariableValue(s);return r instanceof We?new Be(r.depthOrArrayLayers,this.getTypeInfo('u32')):(console.error(`Texture ${s} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLayers. Line ${e.line}`),null}TextureNumLevels(e,t){const n=e.args[0];if(n instanceof ge){const s=n.name,r=t.getVariableValue(s);return r instanceof We?new Be(r.mipLevelCount,this.getTypeInfo('u32')):(console.error(`Texture ${s} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLevels. Line ${e.line}`),null}TextureNumSamples(e,t){const n=e.args[0];if(n instanceof ge){const s=n.name,r=t.getVariableValue(s);return r instanceof We?new Be(r.sampleCount,this.getTypeInfo('u32')):(console.error(`Texture ${s} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumSamples. Line ${e.line}`),null}TextureSample(e,t){return console.error('TODO: textureSample'),null}TextureSampleBias(e,t){return console.error('TODO: textureSampleBias'),null}TextureSampleCompare(e,t){return console.error('TODO: textureSampleCompare'),null}TextureSampleCompareLevel(e,t){return console.error('TODO: textureSampleCompareLevel'),null}TextureSampleGrad(e,t){return console.error('TODO: textureSampleGrad'),null}TextureSampleLevel(e,t){return console.error('TODO: textureSampleLevel'),null}TextureSampleBaseClampToEdge(e,t){return console.error('TODO: textureSampleBaseClampToEdge'),null}TextureStore(e,t){const n=e.args[0],s=this.exec.evalExpression(e.args[1],t),r=4===e.args.length?this.exec.evalExpression(e.args[2],t).value:0,a=4===e.args.length?this.exec.evalExpression(e.args[3],t).data:this.exec.evalExpression(e.args[2],t).data;if(4!==a.length)return console.error(`Invalid value argument for textureStore. Line ${e.line}`),null;if(!(s instanceof Me)||2!==s.data.length)return console.error(`Invalid UV argument for textureStore. Line ${e.line}`),null;if(n instanceof ge){const i=n.name,o=t.getVariableValue(i);if(o instanceof We){const t=o.getMipLevelSize(0),n=Math.floor(s.data[0]),c=Math.floor(s.data[1]);return n<0||n>=t[0]||c<0||c>=t[1]?(console.error(`Texture ${i} out of bounds. Line ${e.line}`),null):(o.setPixel(n,c,0,r,Array.from(a)),null)}return console.error(`Texture ${i} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureStore. Line ${e.line}`),null}AtomicLoad(e,t){let n=e.args[0];n instanceof ke&&(n=n.right);const s=this.exec.getVariableName(n,t);return t.getVariable(s).value.getSubData(this.exec,n.postfix,t)}AtomicStore(e,t){let n=e.args[0];n instanceof ke&&(n=n.right);const s=this.exec.getVariableName(n,t),r=t.getVariable(s);let a=e.args[1];const i=this.exec.evalExpression(a,t),o=r.value.getSubData(this.exec,n.postfix,t);return o instanceof Be&&i instanceof Be&&(o.value=i.value),r.value instanceof Pe&&r.value.setDataValue(this.exec,o,n.postfix,t),null}AtomicAdd(e,t){let n=e.args[0];n instanceof ke&&(n=n.right);const s=this.exec.getVariableName(n,t),r=t.getVariable(s);let a=e.args[1];const i=this.exec.evalExpression(a,t),o=r.value.getSubData(this.exec,n.postfix,t),c=new Be(o.value,o.typeInfo);return o instanceof Be&&i instanceof Be&&(o.value+=i.value),r.value instanceof Pe&&r.value.setDataValue(this.exec,o,n.postfix,t),c}AtomicSub(e,t){let n=e.args[0];n instanceof ke&&(n=n.right);const s=this.exec.getVariableName(n,t),r=t.getVariable(s);let a=e.args[1];const i=this.exec.evalExpression(a,t),o=r.value.getSubData(this.exec,n.postfix,t),c=new Be(o.value,o.typeInfo);return o instanceof Be&&i instanceof Be&&(o.value-=i.value),r.value instanceof Pe&&r.value.setDataValue(this.exec,o,n.postfix,t),c}AtomicMax(e,t){let n=e.args[0];n instanceof ke&&(n=n.right);const s=this.exec.getVariableName(n,t),r=t.getVariable(s);let a=e.args[1];const i=this.exec.evalExpression(a,t),o=r.value.getSubData(this.exec,n.postfix,t),c=new Be(o.value,o.typeInfo);return o instanceof Be&&i instanceof Be&&(o.value=Math.max(o.value,i.value)),r.value instanceof Pe&&r.value.setDataValue(this.exec,o,n.postfix,t),c}AtomicMin(e,t){let n=e.args[0];n instanceof ke&&(n=n.right);const s=this.exec.getVariableName(n,t),r=t.getVariable(s);let a=e.args[1];const i=this.exec.evalExpression(a,t),o=r.value.getSubData(this.exec,n.postfix,t),c=new Be(o.value,o.typeInfo);return o instanceof Be&&i instanceof Be&&(o.value=Math.min(o.value,i.value)),r.value instanceof Pe&&r.value.setDataValue(this.exec,o,n.postfix,t),c}AtomicAnd(e,t){let n=e.args[0];n instanceof ke&&(n=n.right);const s=this.exec.getVariableName(n,t),r=t.getVariable(s);let a=e.args[1];const i=this.exec.evalExpression(a,t),o=r.value.getSubData(this.exec,n.postfix,t),c=new Be(o.value,o.typeInfo);return o instanceof Be&&i instanceof Be&&(o.value=o.value&i.value),r.value instanceof Pe&&r.value.setDataValue(this.exec,o,n.postfix,t),c}AtomicOr(e,t){let n=e.args[0];n instanceof ke&&(n=n.right);const s=this.exec.getVariableName(n,t),r=t.getVariable(s);let a=e.args[1];const i=this.exec.evalExpression(a,t),o=r.value.getSubData(this.exec,n.postfix,t),c=new Be(o.value,o.typeInfo);return o instanceof Be&&i instanceof Be&&(o.value=o.value|i.value),r.value instanceof Pe&&r.value.setDataValue(this.exec,o,n.postfix,t),c}AtomicXor(e,t){let n=e.args[0];n instanceof ke&&(n=n.right);const s=this.exec.getVariableName(n,t),r=t.getVariable(s);let a=e.args[1];const i=this.exec.evalExpression(a,t),o=r.value.getSubData(this.exec,n.postfix,t),c=new Be(o.value,o.typeInfo);return o instanceof Be&&i instanceof Be&&(o.value=o.value^i.value),r.value instanceof Pe&&r.value.setDataValue(this.exec,o,n.postfix,t),c}AtomicExchange(e,t){let n=e.args[0];n instanceof ke&&(n=n.right);const s=this.exec.getVariableName(n,t),r=t.getVariable(s);let a=e.args[1];const i=this.exec.evalExpression(a,t),o=r.value.getSubData(this.exec,n.postfix,t),c=new Be(o.value,o.typeInfo);return o instanceof Be&&i instanceof Be&&(o.value=i.value),r.value instanceof Pe&&r.value.setDataValue(this.exec,o,n.postfix,t),c}AtomicCompareExchangeWeak(e,t){return console.error('TODO: atomicCompareExchangeWeak'),null}Pack4x8snorm(e,t){return console.error('TODO: pack4x8snorm'),null}Pack4x8unorm(e,t){return console.error('TODO: pack4x8unorm'),null}Pack4xI8(e,t){return console.error('TODO: pack4xI8'),null}Pack4xU8(e,t){return console.error('TODO: pack4xU8'),null}Pack4x8Clamp(e,t){return console.error('TODO: pack4x8Clamp'),null}Pack4xU8Clamp(e,t){return console.error('TODO: pack4xU8Clamp'),null}Pack2x16snorm(e,t){return console.error('TODO: pack2x16snorm'),null}Pack2x16unorm(e,t){return console.error('TODO: pack2x16unorm'),null}Pack2x16float(e,t){return console.error('TODO: pack2x16float'),null}Unpack4x8snorm(e,t){return console.error('TODO: unpack4x8snorm'),null}Unpack4x8unorm(e,t){return console.error('TODO: unpack4x8unorm'),null}Unpack4xI8(e,t){return console.error('TODO: unpack4xI8'),null}Unpack4xU8(e,t){return console.error('TODO: unpack4xU8'),null}Unpack2x16snorm(e,t){return console.error('TODO: unpack2x16snorm'),null}Unpack2x16unorm(e,t){return console.error('TODO: unpack2x16unorm'),null}Unpack2x16float(e,t){return console.error('TODO: unpack2x16float'),null}StorageBarrier(e,t){return null}TextureBarrier(e,t){return null}WorkgroupBarrier(e,t){return null}WorkgroupUniformLoad(e,t){return null}SubgroupAdd(e,t){return console.error('TODO: subgroupAdd'),null}SubgroupExclusiveAdd(e,t){return console.error('TODO: subgroupExclusiveAdd'),null}SubgroupInclusiveAdd(e,t){return console.error('TODO: subgroupInclusiveAdd'),null}SubgroupAll(e,t){return console.error('TODO: subgroupAll'),null}SubgroupAnd(e,t){return console.error('TODO: subgroupAnd'),null}SubgroupAny(e,t){return console.error('TODO: subgroupAny'),null}SubgroupBallot(e,t){return console.error('TODO: subgroupBallot'),null}SubgroupBroadcast(e,t){return console.error('TODO: subgroupBroadcast'),null}SubgroupBroadcastFirst(e,t){return console.error('TODO: subgroupBroadcastFirst'),null}SubgroupElect(e,t){return console.error('TODO: subgroupElect'),null}SubgroupMax(e,t){return console.error('TODO: subgroupMax'),null}SubgroupMin(e,t){return console.error('TODO: subgroupMin'),null}SubgroupMul(e,t){return console.error('TODO: subgroupMul'),null}SubgroupExclusiveMul(e,t){return console.error('TODO: subgroupExclusiveMul'),null}SubgroupInclusiveMul(e,t){return console.error('TODO: subgroupInclusiveMul'),null}SubgroupOr(e,t){return console.error('TODO: subgroupOr'),null}SubgroupShuffle(e,t){return console.error('TODO: subgroupShuffle'),null}SubgroupShuffleDown(e,t){return console.error('TODO: subgroupShuffleDown'),null}SubgroupShuffleUp(e,t){return console.error('TODO: subgroupShuffleUp'),null}SubgroupShuffleXor(e,t){return console.error('TODO: subgroupShuffleXor'),null}SubgroupXor(e,t){return console.error('TODO: subgroupXor'),null}QuadBroadcast(e,t){return console.error('TODO: quadBroadcast'),null}QuadSwapDiagonal(e,t){return console.error('TODO: quadSwapDiagonal'),null}QuadSwapX(e,t){return console.error('TODO: quadSwapX'),null}QuadSwapY(e,t){return console.error('TODO: quadSwapY'),null}}const ft={vec2:2,vec2f:2,vec2i:2,vec2u:2,vec2b:2,vec2h:2,vec3:3,vec3f:3,vec3i:3,vec3u:3,vec3b:3,vec3h:3,vec4:4,vec4f:4,vec4i:4,vec4u:4,vec4b:4,vec4h:4},pt={mat2x2:[2,2,4],mat2x2f:[2,2,4],mat2x2h:[2,2,4],mat2x3:[2,3,6],mat2x3f:[2,3,6],mat2x3h:[2,3,6],mat2x4:[2,4,8],mat2x4f:[2,4,8],mat2x4h:[2,4,8],mat3x2:[3,2,6],mat3x2f:[3,2,6],mat3x2h:[3,2,6],mat3x3:[3,3,9],mat3x3f:[3,3,9],mat3x3h:[3,3,9],mat3x4:[3,4,12],mat3x4f:[3,4,12],mat3x4h:[3,4,12],mat4x2:[4,2,8],mat4x2f:[4,2,8],mat4x2h:[4,2,8],mat4x3:[4,3,12],mat4x3f:[4,3,12],mat4x3h:[4,3,12],mat4x4:[4,4,16],mat4x4f:[4,4,16],mat4x4h:[4,4,16]};class dt extends ut{constructor(e,t){var n;super(),this.ast=null!=e?e:[],this.reflection=new at,this.reflection.updateAST(this.ast),this.context=null!==(n=null==t?void 0:t.clone())&&void 0!==n?n:new lt,this.builtins=new ht(this),this.typeInfo={bool:this.getTypeInfo(ae.bool),i32:this.getTypeInfo(ae.i32),u32:this.getTypeInfo(ae.u32),f32:this.getTypeInfo(ae.f32),f16:this.getTypeInfo(ae.f16),vec2f:this.getTypeInfo(ce.vec2f),vec2u:this.getTypeInfo(ce.vec2u),vec2i:this.getTypeInfo(ce.vec2i),vec2h:this.getTypeInfo(ce.vec2h),vec3f:this.getTypeInfo(ce.vec3f),vec3u:this.getTypeInfo(ce.vec3u),vec3i:this.getTypeInfo(ce.vec3i),vec3h:this.getTypeInfo(ce.vec3h),vec4f:this.getTypeInfo(ce.vec4f),vec4u:this.getTypeInfo(ce.vec4u),vec4i:this.getTypeInfo(ce.vec4i),vec4h:this.getTypeInfo(ce.vec4h),mat2x2f:this.getTypeInfo(ce.mat2x2f),mat2x3f:this.getTypeInfo(ce.mat2x3f),mat2x4f:this.getTypeInfo(ce.mat2x4f),mat3x2f:this.getTypeInfo(ce.mat3x2f),mat3x3f:this.getTypeInfo(ce.mat3x3f),mat3x4f:this.getTypeInfo(ce.mat3x4f),mat4x2f:this.getTypeInfo(ce.mat4x2f),mat4x3f:this.getTypeInfo(ce.mat4x3f),mat4x4f:this.getTypeInfo(ce.mat4x4f)}}getVariableValue(e){var t,n;const r=null!==(n=null===(t=this.context.getVariable(e))||void 0===t?void 0:t.value)&&void 0!==n?n:null;if(null===r)return null;if(r instanceof Be)return r.value;if(r instanceof Me)return Array.from(r.data);if(r instanceof Ue)return Array.from(r.data);if(r instanceof Pe&&r.typeInfo instanceof s){if('u32'===r.typeInfo.format.name)return Array.from(new Uint32Array(r.buffer,r.offset,r.typeInfo.count));if('i32'===r.typeInfo.format.name)return Array.from(new Int32Array(r.buffer,r.offset,r.typeInfo.count));if('f32'===r.typeInfo.format.name)return Array.from(new Float32Array(r.buffer,r.offset,r.typeInfo.count))}return console.error(`Unsupported return variable type ${r.typeInfo.name}`),null}execute(e){(e=null!=e?e:{}).constants&&this._setOverrides(e.constants,this.context),this._execStatements(this.ast,this.context)}dispatchWorkgroups(e,t,n,s){const r=this.context.clone();(s=null!=s?s:{}).constants&&this._setOverrides(s.constants,r),this._execStatements(this.ast,r);const a=r.getFunction(e);if(!a)return void console.error(`Function ${e} not found`);if('number'==typeof t)t=[t,1,1];else{if(0===t.length)return void console.error('Invalid dispatch count');1===t.length?t=[t[0],1,1]:2===t.length?t=[t[0],t[1],1]:t.length>3&&(t=[t[0],t[1],t[2]])}const i=t[0],o=t[1],c=t[2],l=this.getTypeInfo('vec3u');r.setVariable('@num_workgroups',new Me(t,l));const u=this.reflection.getFunctionInfo(e);null===u&&console.error(`Function ${e} not found in reflection data`);for(const e in n)for(const t in n[e]){const s=n[e][t];r.variables.forEach(n=>{var r;const a=n.node;if(null==a?void 0:a.attributes){let i=null,o=null;for(const e of a.attributes)'binding'===e.name?i=e.value:'group'===e.name&&(o=e.value);if(t==i&&e==o){let i=!1;for(const s of u.resources)if(s.name===n.name&&s.group===parseInt(e)&&s.binding===parseInt(t)){i=!0;break}if(i)if(void 0!==s.texture&&void 0!==s.descriptor){const e=new We(s.texture,this.getTypeInfo(a.type),s.descriptor,null!==(r=s.texture.view)&&void 0!==r?r:null);n.value=e}else void 0!==s.uniform?n.value=new Pe(s.uniform,this.getTypeInfo(a.type)):n.value=new Pe(s,this.getTypeInfo(a.type))}}})}for(let e=0;e<c;++e)for(let t=0;t<o;++t)for(let n=0;n<i;++n)r.setVariable('@workgroup_id',new Me([n,t,e],this.getTypeInfo('vec3u'))),this._dispatchWorkgroup(a,[n,t,e],r)}execStatement(e,t){if(e instanceof Y)return this.evalExpression(e.value,t);if(e instanceof se){if(e.condition){const n=this.evalExpression(e.condition,t);if(!(n instanceof Be))throw new Error('Invalid break-if condition');if(!n.value)return null}return dt._breakObj}if(e instanceof re)return dt._continueObj;if(e instanceof U)this._let(e,t);else if(e instanceof F)this._var(e,t);else if(e instanceof P)this._const(e,t);else if(e instanceof D)this._function(e,t);else{if(e instanceof Q)return this._if(e,t);if(e instanceof Z)return this._switch(e,t);if(e instanceof B)return this._for(e,t);if(e instanceof V)return this._while(e,t);if(e instanceof j)return this._loop(e,t);if(e instanceof O){const n=t.clone();return n.currentFunctionName=t.currentFunctionName,this._execStatements(e.body,n)}if(e instanceof G)this._assign(e,t);else if(e instanceof R)this._increment(e,t);else{if(e instanceof oe)return null;if(e instanceof M){const n=e.name;null===t.getVariable(n)&&t.setVariable(n,new Be(0,this.getTypeInfo('u32')))}else if(e instanceof X)this._call(e,t);else{if(e instanceof ee)return null;if(e instanceof te)return null;console.error('Invalid statement type.',e,`Line ${e.line}`)}}}return null}evalExpression(e,t){return e instanceof Ie?this._evalBinaryOp(e,t):e instanceof xe?this._evalLiteral(e,t):e instanceof ge?this._evalVariable(e,t):e instanceof me?this._evalCall(e,t):e instanceof de?this._evalCreate(e,t):e instanceof _e?this._evalConst(e,t):e instanceof ye?this._evalBitcast(e,t):e instanceof ke?this._evalUnaryOp(e,t):(console.error('Invalid expression type',e,`Line ${e.line}`),null)}getTypeInfo(e){var t;if(e instanceof ae){const t=this.reflection.getTypeInfo(e);if(null!==t)return t}let n=null!==(t=this.typeInfo[e])&&void 0!==t?t:null;return null!==n||(n=this.reflection.getTypeInfoByName(e)),n}_setOverrides(e,t){for(const n in e){const s=e[n],r=this.reflection.getOverrideInfo(n);null!==r?(null===r.type&&(r.type=this.getTypeInfo('u32')),'u32'===r.type.name||'i32'===r.type.name||'f32'===r.type.name||'f16'===r.type.name?t.setVariable(n,new Be(s,r.type)):'bool'===r.type.name?t.setVariable(n,new Be(s?1:0,r.type)):'vec2'===r.type.name||'vec3'===r.type.name||'vec4'===r.type.name||'vec2f'===r.type.name||'vec3f'===r.type.name||'vec4f'===r.type.name||'vec2i'===r.type.name||'vec3i'===r.type.name||'vec4i'===r.type.name||'vec2u'===r.type.name||'vec3u'===r.type.name||'vec4u'===r.type.name||'vec2h'===r.type.name||'vec3h'===r.type.name||'vec4h'===r.type.name?t.setVariable(n,new Me(s,r.type)):console.error(`Invalid constant type for ${n}`)):console.error(`Override ${n} does not exist in the shader.`)}}_dispatchWorkgroup(e,t,n){const s=[1,1,1];for(const t of e.node.attributes)if('workgroup_size'===t.name){if(t.value.length>0){const e=n.getVariableValue(t.value[0]);s[0]=e instanceof Be?e.value:parseInt(t.value[0])}if(t.value.length>1){const e=n.getVariableValue(t.value[1]);s[1]=e instanceof Be?e.value:parseInt(t.value[1])}if(t.value.length>2){const e=n.getVariableValue(t.value[2]);s[2]=e instanceof Be?e.value:parseInt(t.value[2])}}const r=this.getTypeInfo('vec3u'),a=this.getTypeInfo('u32');n.setVariable('@workgroup_size',new Me(s,r));const i=s[0],o=s[1],c=s[2];for(let l=0,u=0;l<c;++l)for(let c=0;c<o;++c)for(let o=0;o<i;++o,++u){const i=[o,c,l],h=[o+t[0]*s[0],c+t[1]*s[1],l+t[2]*s[2]];n.setVariable('@local_invocation_id',new Me(i,r)),n.setVariable('@global_invocation_id',new Me(h,r)),n.setVariable('@local_invocation_index',new Be(u,a)),this._dispatchExec(e,n)}}_dispatchExec(e,t){for(const n of e.node.args)for(const e of n.attributes)if('builtin'===e.name){const s=`@${e.value}`,r=t.getVariable(s);void 0!==r&&t.variables.set(n.name,r)}this._execStatements(e.node.body,t)}getVariableName(e,t){for(;e instanceof ke;)e=e.right;return e instanceof ge?e.name:(console.error('Unknown variable type',e,'Line',e.line),null)}_execStatements(e,t){for(const n of e){if(n instanceof Array){const e=t.clone(),s=this._execStatements(n,e);if(s)return s;continue}const e=this.execStatement(n,t);if(e)return e}return null}_call(e,t){const n=t.clone();n.currentFunctionName=e.name;const s=t.getFunction(e.name);if(s){for(let t=0;t<s.node.args.length;++t){const r=s.node.args[t],a=this.evalExpression(e.args[t],n);n.setVariable(r.name,a,r)}this._execStatements(s.node.body,n)}else if(e.isBuiltin)this._callBuiltinFunction(e,n);else{this.getTypeInfo(e.name)&&this._evalCreate(e,t)}}_increment(e,t){const n=this.getVariableName(e.variable,t),s=t.getVariable(n);s?'++'===e.operator?s.value instanceof Be?s.value.value++:console.error(`Variable ${n} is not a scalar. Line ${e.line}`):'--'===e.operator?s.value instanceof Be?s.value.value--:console.error(`Variable ${n} is not a scalar. Line ${e.line}`):console.error(`Unknown increment operator ${e.operator}. Line ${e.line}`):console.error(`Variable ${n} not found. Line ${e.line}`)}_getVariableData(e,t){if(e instanceof ge){const n=this.getVariableName(e,t),s=t.getVariable(n);return null===s?(console.error(`Variable ${n} not found. Line ${e.line}`),null):s.value.getSubData(this,e.postfix,t)}if(e instanceof ke){if('*'===e.operator){const n=this._getVariableData(e.right,t);return n instanceof Oe?n.reference.getSubData(this,e.postfix,t):(console.error(`Variable ${e.right} is not a pointer. Line ${e.line}`),null)}if('&'===e.operator){const n=this._getVariableData(e.right,t);return new Oe(n)}}return null}_assign(e,t){let n=null,s='<var>',r=null;if(e.variable instanceof ke){const n=this._getVariableData(e.variable,t),s=this.evalExpression(e.value,t),r=e.operator;if('='===r){if(n instanceof Be||n instanceof Me||n instanceof Ue){if(s instanceof Be||s instanceof Me||s instanceof Ue&&n.data.length===s.data.length)return void n.data.set(s.data);console.error(`Invalid assignment. Line ${e.line}`)}else if(n instanceof Pe&&s instanceof Pe&&n.buffer.byteLength-n.offset>=s.buffer.byteLength-s.offset)return void(n.buffer.byteLength%4==0?new Uint32Array(n.buffer,n.offset,n.typeInfo.size/4).set(new Uint32Array(s.buffer,s.offset,s.typeInfo.size/4)):new Uint8Array(n.buffer,n.offset,n.typeInfo.size).set(new Uint8Array(s.buffer,s.offset,s.typeInfo.size)));return console.error(`Invalid assignment. Line ${e.line}`),null}if('+='===r)return n instanceof Be||n instanceof Me||n instanceof Ue?s instanceof Be||s instanceof Me||s instanceof Ue?void n.data.set(s.data.map((e,t)=>n.data[t]+e)):void console.error(`Invalid assignment . Line ${e.line}`):void console.error(`Invalid assignment. Line ${e.line}`);if('-='===r)return(n instanceof Be||n instanceof Me||n instanceof Ue)&&(s instanceof Be||s instanceof Me||s instanceof Ue)?void n.data.set(s.data.map((e,t)=>n.data[t]-e)):void console.error(`Invalid assignment. Line ${e.line}`)}if(e.variable instanceof ke){if('*'===e.variable.operator){s=this.getVariableName(e.variable.right,t);const r=t.getVariable(s);if(!(r&&r.value instanceof Oe))return void console.error(`Variable ${s} is not a pointer. Line ${e.line}`);n=r.value.reference;let a=e.variable.postfix;if(!a){let t=e.variable.right;for(;t instanceof ke;){if(t.postfix){a=t.postfix;break}t=t.right}}a&&(n=n.getSubData(this,a,t))}}else{r=e.variable.postfix,s=this.getVariableName(e.variable,t);const a=t.getVariable(s);if(null===a)return void console.error(`Variable ${s} not found. Line ${e.line}`);n=a.value}if(n instanceof Oe&&(n=n.reference),null===n)return void console.error(`Variable ${s} not found. Line ${e.line}`);const a=this.evalExpression(e.value,t),i=e.operator;if('='!==i){const s=n.getSubData(this,r,t);if(s instanceof Me&&a instanceof Be){const t=s.data,n=a.value;if('+='===i)for(let e=0;e<t.length;++e)t[e]+=n;else if('-='===i)for(let e=0;e<t.length;++e)t[e]-=n;else if('*='===i)for(let e=0;e<t.length;++e)t[e]*=n;else if('/='===i)for(let e=0;e<t.length;++e)t[e]/=n;else if('%='===i)for(let e=0;e<t.length;++e)t[e]%=n;else if('&='===i)for(let e=0;e<t.length;++e)t[e]&=n;else if('|='===i)for(let e=0;e<t.length;++e)t[e]|=n;else if('^='===i)for(let e=0;e<t.length;++e)t[e]^=n;else if('<<='===i)for(let e=0;e<t.length;++e)t[e]<<=n;else if('>>='===i)for(let e=0;e<t.length;++e)t[e]>>=n;else console.error(`Invalid operator ${i}. Line ${e.line}`)}else if(s instanceof Me&&a instanceof Me){const t=s.data,n=a.data;if(t.length!==n.length)return void console.error(`Vector length mismatch. Line ${e.line}`);if('+='===i)for(let e=0;e<t.length;++e)t[e]+=n[e];else if('-='===i)for(let e=0;e<t.length;++e)t[e]-=n[e];else if('*='===i)for(let e=0;e<t.length;++e)t[e]*=n[e];else if('/='===i)for(let e=0;e<t.length;++e)t[e]/=n[e];else if('%='===i)for(let e=0;e<t.length;++e)t[e]%=n[e];else if('&='===i)for(let e=0;e<t.length;++e)t[e]&=n[e];else if('|='===i)for(let e=0;e<t.length;++e)t[e]|=n[e];else if('^='===i)for(let e=0;e<t.length;++e)t[e]^=n[e];else if('<<='===i)for(let e=0;e<t.length;++e)t[e]<<=n[e];else if('>>='===i)for(let e=0;e<t.length;++e)t[e]>>=n[e];else console.error(`Invalid operator ${i}. Line ${e.line}`)}else{if(!(s instanceof Be&&a instanceof Be))return void console.error(`Invalid type for ${e.operator} operator. Line ${e.line}`);'+='===i?s.value+=a.value:'-='===i?s.value-=a.value:'*='===i?s.value*=a.value:'/='===i?s.value/=a.value:'%='===i?s.value%=a.value:'&='===i?s.value&=a.value:'|='===i?s.value|=a.value:'^='===i?s.value^=a.value:'<<='===i?s.value<<=a.value:'>>='===i?s.value>>=a.value:console.error(`Invalid operator ${i}. Line ${e.line}`)}return void(n instanceof Pe&&n.setDataValue(this,s,r,t))}if(n instanceof Pe)n.setDataValue(this,a,r,t);else if(r){if(!(n instanceof Me||n instanceof Ue))return void console.error(`Variable ${s} is not a vector or matrix. Line ${e.line}`);if(r instanceof ve){const i=this.evalExpression(r.index,t).value;if(n instanceof Me){if(!(a instanceof Be))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);n.data[i]=a.value}else{if(!(n instanceof Ue))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);{const i=this.evalExpression(r.index,t).value;if(i<0)return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);if(!(a instanceof Me))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);{const t=n.typeInfo.getTypeName();if('mat2x2'===t||'mat2x2f'===t||'mat2x2h'===t){if(!(i<2&&2===a.data.length))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);n.data[2*i]=a.data[0],n.data[2*i+1]=a.data[1]}else if('mat2x3'===t||'mat2x3f'===t||'mat2x3h'===t){if(!(i<2&&3===a.data.length))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);n.data[3*i]=a.data[0],n.data[3*i+1]=a.data[1],n.data[3*i+2]=a.data[2]}else if('mat2x4'===t||'mat2x4f'===t||'mat2x4h'===t){if(!(i<2&&4===a.data.length))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);n.data[4*i]=a.data[0],n.data[4*i+1]=a.data[1],n.data[4*i+2]=a.data[2],n.data[4*i+3]=a.data[3]}else if('mat3x2'===t||'mat3x2f'===t||'mat3x2h'===t){if(!(i<3&&2===a.data.length))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);n.data[2*i]=a.data[0],n.data[2*i+1]=a.data[1]}else if('mat3x3'===t||'mat3x3f'===t||'mat3x3h'===t){if(!(i<3&&3===a.data.length))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);n.data[3*i]=a.data[0],n.data[3*i+1]=a.data[1],n.data[3*i+2]=a.data[2]}else if('mat3x4'===t||'mat3x4f'===t||'mat3x4h'===t){if(!(i<3&&4===a.data.length))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);n.data[4*i]=a.data[0],n.data[4*i+1]=a.data[1],n.data[4*i+2]=a.data[2],n.data[4*i+3]=a.data[3]}else if('mat4x2'===t||'mat4x2f'===t||'mat4x2h'===t){if(!(i<4&&2===a.data.length))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);n.data[2*i]=a.data[0],n.data[2*i+1]=a.data[1]}else if('mat4x3'===t||'mat4x3f'===t||'mat4x3h'===t){if(!(i<4&&3===a.data.length))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);n.data[3*i]=a.data[0],n.data[3*i+1]=a.data[1],n.data[3*i+2]=a.data[2]}else{if('mat4x4'!==t&&'mat4x4f'!==t&&'mat4x4h'!==t)return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);if(!(i<4&&4===a.data.length))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);n.data[4*i]=a.data[0],n.data[4*i+1]=a.data[1],n.data[4*i+2]=a.data[2],n.data[4*i+3]=a.data[3]}}}}}else if(r instanceof pe){const t=r.value;if(!(n instanceof Me))return void console.error(`Invalid assignment to ${t}. Variable ${s} is not a vector. Line ${e.line}`);if(a instanceof Be){if(t.length>1)return void console.error(`Invalid assignment to ${t} for variable ${s}. Line ${e.line}`);if('x'===t)n.data[0]=a.value;else if('y'===t){if(n.data.length<2)return void console.error(`Invalid assignment to ${t} for variable ${s}. Line ${e.line}`);n.data[1]=a.value}else if('z'===t){if(n.data.length<3)return void console.error(`Invalid assignment to ${t} for variable ${s}. Line ${e.line}`);n.data[2]=a.value}else if('w'===t){if(n.data.length<4)return void console.error(`Invalid assignment to ${t} for variable ${s}. Line ${e.line}`);n.data[3]=a.value}}else{if(!(a instanceof Me))return void console.error(`Invalid assignment to ${s}. Line ${e.line}`);if(t.length!==a.data.length)return void console.error(`Invalid assignment to ${t} for variable ${s}. Line ${e.line}`);for(let r=0;r<t.length;++r){const i=t[r];if('x'===i||'r'===i)n.data[0]=a.data[r];else if('y'===i||'g'===i){if(a.data.length<2)return void console.error(`Invalid assignment to ${i} for variable ${s}. Line ${e.line}`);n.data[1]=a.data[r]}else if('z'===i||'b'===i){if(a.data.length<3)return void console.error(`Invalid assignment to ${i} for variable ${s}. Line ${e.line}`);n.data[2]=a.data[r]}else{if('w'!==i&&'a'!==i)return void console.error(`Invalid assignment to ${i} for variable ${s}. Line ${e.line}`);if(a.data.length<4)return void console.error(`Invalid assignment to ${i} for variable ${s}. Line ${e.line}`);n.data[3]=a.data[r]}}}}}else n instanceof Be&&a instanceof Be?n.value=a.value:n instanceof Me&&a instanceof Me||n instanceof Ue&&a instanceof Ue?n.data.set(a.data):console.error(`Invalid assignment to ${s}. Line ${e.line}`)}_function(e,t){const n=new ct(e);t.functions.set(e.name,n)}_const(e,t){let n=null;null!==e.value&&(n=this.evalExpression(e.value,t)),t.createVariable(e.name,n,e)}_let(e,t){let n=null;if(null!==e.value){if(n=this.evalExpression(e.value,t),null===n)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof ke||(n=n.clone())}else{const s=e.type.name;if('f32'===s||'i32'===s||'u32'===s||'bool'===s||'f16'===s||'vec2'===s||'vec3'===s||'vec4'===s||'vec2f'===s||'vec3f'===s||'vec4f'===s||'vec2i'===s||'vec3i'===s||'vec4i'===s||'vec2u'===s||'vec3u'===s||'vec4u'===s||'vec2h'===s||'vec3h'===s||'vec4h'===s||'vec2b'===s||'vec3b'===s||'vec4b'===s||'mat2x2'===s||'mat2x3'===s||'mat2x4'===s||'mat3x2'===s||'mat3x3'===s||'mat3x4'===s||'mat4x2'===s||'mat4x3'===s||'mat4x4'===s||'mat2x2f'===s||'mat2x3f'===s||'mat2x4f'===s||'mat3x2f'===s||'mat3x3f'===s||'mat3x4f'===s||'mat4x2f'===s||'mat4x3f'===s||'mat4x4f'===s||'mat2x2h'===s||'mat2x3h'===s||'mat2x4h'===s||'mat3x2h'===s||'mat3x3h'===s||'mat3x4h'===s||'mat4x2h'===s||'mat4x3h'===s||'mat4x4h'===s||'array'===s){const s=new de(e.type,[]);n=this._evalCreate(s,t)}}t.createVariable(e.name,n,e)}_var(e,t){let n=null;if(null!==e.value){if(n=this.evalExpression(e.value,t),null===n)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof ke||(n=n.clone())}else{if(null===e.type)return void console.error(`Variable ${e.name} has no type. Line ${e.line}`);const s=e.type.name;if('f32'===s||'i32'===s||'u32'===s||'bool'===s||'f16'===s||'vec2'===s||'vec3'===s||'vec4'===s||'vec2f'===s||'vec3f'===s||'vec4f'===s||'vec2i'===s||'vec3i'===s||'vec4i'===s||'vec2u'===s||'vec3u'===s||'vec4u'===s||'vec2h'===s||'vec3h'===s||'vec4h'===s||'vec2b'===s||'vec3b'===s||'vec4b'===s||'mat2x2'===s||'mat2x3'===s||'mat2x4'===s||'mat3x2'===s||'mat3x3'===s||'mat3x4'===s||'mat4x2'===s||'mat4x3'===s||'mat4x4'===s||'mat2x2f'===s||'mat2x3f'===s||'mat2x4f'===s||'mat3x2f'===s||'mat3x3f'===s||'mat3x4f'===s||'mat4x2f'===s||'mat4x3f'===s||'mat4x4f'===s||'mat2x2h'===s||'mat2x3h'===s||'mat2x4h'===s||'mat3x2h'===s||'mat3x3h'===s||'mat3x4h'===s||'mat4x2h'===s||'mat4x3h'===s||'mat4x4h'===s||e.type instanceof ue||e.type instanceof oe||e.type instanceof ce){const s=new de(e.type,[]);n=this._evalCreate(s,t)}}t.createVariable(e.name,n,e)}_switch(e,t){t=t.clone();const n=this.evalExpression(e.condition,t);if(!(n instanceof Be))return console.error(`Invalid if condition. Line ${e.line}`),null;let s=null;for(const r of e.cases)if(r instanceof Ae)for(const a of r.selectors){if(a instanceof Se){s=r;continue}const i=this.evalExpression(a,t);if(!(i instanceof Be))return console.error(`Invalid case selector. Line ${e.line}`),null;if(i.value===n.value)return this._execStatements(r.body,t)}else r instanceof Ee&&(s=r);return s?this._execStatements(s.body,t):null}_if(e,t){t=t.clone();const n=this.evalExpression(e.condition,t);if(!(n instanceof Be))return console.error(`Invalid if condition. Line ${e.line}`),null;if(n.value)return this._execStatements(e.body,t);for(const n of e.elseif){const s=this.evalExpression(n.condition,t);if(!(s instanceof Be))return console.error(`Invalid if condition. Line ${e.line}`),null;if(s.value)return this._execStatements(n.body,t)}return e.else?this._execStatements(e.else,t):null}_getScalarValue(e){return e instanceof Be?e.value:(console.error('Expected scalar value.',e),0)}_for(e,t){for(t=t.clone(),this.execStatement(e.init,t);this._getScalarValue(this.evalExpression(e.condition,t));){const n=this._execStatements(e.body,t);if(n===dt._breakObj)break;if(null!==n&&n!==dt._continueObj)return n;this.execStatement(e.increment,t)}return null}_loop(e,t){for(t=t.clone();;){const n=this._execStatements(e.body,t);if(n===dt._breakObj)break;if(n===dt._continueObj){if(e.continuing){if(this._execStatements(e.continuing.body,t)===dt._breakObj)break}}else if(null!==n)return n}return null}_while(e,t){for(t=t.clone();this._getScalarValue(this.evalExpression(e.condition,t));){const n=this._execStatements(e.body,t);if(n===dt._breakObj)break;if(n!==dt._continueObj&&null!==n)return n}return null}_evalBitcast(e,t){const n=this.evalExpression(e.value,t),s=e.type;if(n instanceof Be){const e=nt(n.value,n.typeInfo.name,s.name);return new Be(e,this.getTypeInfo(s))}if(n instanceof Me){const t=n.typeInfo.getTypeName();let r='';if(t.endsWith('f'))r='f32';else if(t.endsWith('i'))r='i32';else if(t.endsWith('u'))r='u32';else if(t.endsWith('b'))r='bool';else{if(!t.endsWith('h'))return console.error(`Unknown vector type ${t}. Line ${e.line}`),null;r='f16'}const a=s.getTypeName();let i='';if(a.endsWith('f'))i='f32';else if(a.endsWith('i'))i='i32';else if(a.endsWith('u'))i='u32';else if(a.endsWith('b'))i='bool';else{if(!a.endsWith('h'))return console.error(`Unknown vector type ${i}. Line ${e.line}`),null;i='f16'}const o=function(e,t,n){if(t===n)return e;const s=new Array(e.length);for(let r=0;r<e.length;r++)s[r]=nt(e[r],t,n);return s}(Array.from(n.data),r,i);return new Me(o,this.getTypeInfo(s))}return console.error(`TODO: bitcast for ${n.typeInfo.name}. Line ${e.line}`),null}_evalConst(e,t){return t.getVariableValue(e.name).clone().getSubData(this,e.postfix,t)}_evalCreate(e,t){var r;if(e instanceof de){if(null===e.type)return Ve.void;switch(e.type.getTypeName()){case'bool':case'i32':case'u32':case'f32':case'f16':return this._callConstructorValue(e,t);case'vec2':case'vec3':case'vec4':case'vec2f':case'vec3f':case'vec4f':case'vec2h':case'vec3h':case'vec4h':case'vec2i':case'vec3i':case'vec4i':case'vec2u':case'vec3u':case'vec4u':case'vec2b':case'vec3b':case'vec4b':return this._callConstructorVec(e,t);case'mat2x2':case'mat2x2f':case'mat2x2h':case'mat2x3':case'mat2x3f':case'mat2x3h':case'mat2x4':case'mat2x4f':case'mat2x4h':case'mat3x2':case'mat3x2f':case'mat3x2h':case'mat3x3':case'mat3x3f':case'mat3x3h':case'mat3x4':case'mat3x4f':case'mat3x4h':case'mat4x2':case'mat4x2f':case'mat4x2h':case'mat4x3':case'mat4x3f':case'mat4x3h':case'mat4x4':case'mat4x4f':case'mat4x4h':return this._callConstructorMatrix(e,t)}}const a=e instanceof de?e.type.name:e.name,i=e instanceof de?this.getTypeInfo(e.type):this.getTypeInfo(e.name);if(null===i)return console.error(`Unknown type ${a}. Line ${e.line}`),null;if(0===i.size)return null;const o=new Pe(new ArrayBuffer(i.size),i,0);if(i instanceof n){if(e.args)for(let n=0;n<e.args.length;++n){const s=i.members[n],r=e.args[n],a=this.evalExpression(r,t);o.setData(this,a,s.type,s.offset,t)}}else if(i instanceof s){let n=0;if(e.args)for(let s=0;s<e.args.length;++s){const a=e.args[s],c=this.evalExpression(a,t);null===i.format&&('x32'===(null===(r=c.typeInfo)||void 0===r?void 0:r.name)?i.format=this.getTypeInfo('i32'):i.format=c.typeInfo),o.setData(this,c,i.format,n,t),n+=i.stride}}else console.error(`Unknown type \"${a}\". Line ${e.line}`);return e instanceof de?o.getSubData(this,e.postfix,t):o}_evalLiteral(e,t){const n=this.getTypeInfo(e.type),s=n.name;if('x32'===s||'u32'===s||'f32'===s||'f16'===s||'i32'===s||'bool'===s){return new Be(e.scalarValue,n)}return'vec2'===s||'vec3'===s||'vec4'===s||'vec2f'===s||'vec3f'===s||'vec4f'===s||'vec2h'===s||'vec3h'===s||'vec4h'===s||'vec2i'===s||'vec3i'===s||'vec4i'===s||'vec2u'===s||'vec3u'===s||'vec4u'===s?this._callConstructorVec(e,t):'mat2x2'===s||'mat2x3'===s||'mat2x4'===s||'mat3x2'===s||'mat3x3'===s||'mat3x4'===s||'mat4x2'===s||'mat4x3'===s||'mat4x4'===s||'mat2x2f'===s||'mat2x3f'===s||'mat2x4f'===s||'mat3x2f'===s||'mat3x3f'===s||'mat3x4f'===s||'mat4x2f'===s||'mat4x3f'===s||'mat4x4f'===s||'mat2x2h'===s||'mat2x3h'===s||'mat2x4h'===s||'mat3x2h'===s||'mat3x3h'===s||'mat3x4h'===s||'mat4x2h'===s||'mat4x3h'===s||'mat4x4h'===s?this._callConstructorMatrix(e,t):e.value}_evalVariable(e,t){const n=t.getVariableValue(e.name);return null===n?n:n.getSubData(this,e.postfix,t)}_maxFormatTypeInfo(e){let t=e[0];if('f32'===t.name)return t;for(let n=1;n<e.length;++n){const s=dt._priority.get(t.name);dt._priority.get(e[n].name)<s&&(t=e[n])}return'x32'===t.name?this.getTypeInfo('i32'):t}_evalUnaryOp(e,t){const n=this.evalExpression(e.right,t);if('&'===e.operator)return new Oe(n);if('*'===e.operator)return n instanceof Oe?n.reference.getSubData(this,e.postfix,t):(console.error(`Invalid dereference. Line ${e.line}`),null);const s=n instanceof Be?n.value:n instanceof Me?Array.from(n.data):null;switch(e.operator){case'+':{if(Ge(s)){const e=s.map((e,t)=>+e);return new Me(e,n.typeInfo)}const e=s,t=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new Be(+e,t)}case'-':{if(Ge(s)){const e=s.map((e,t)=>-e);return new Me(e,n.typeInfo)}const e=s,t=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new Be(-e,t)}case'!':{if(Ge(s)){const e=s.map((e,t)=>e?0:1);return new Me(e,n.typeInfo)}const e=s,t=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new Be(e?0:1,t)}case'~':{if(Ge(s)){const e=s.map((e,t)=>~e);return new Me(e,n.typeInfo)}const e=s,t=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new Be(~e,t)}}return console.error(`Invalid unary operator ${e.operator}. Line ${e.line}`),null}_evalBinaryOp(e,t){const n=this.evalExpression(e.left,t),s=this.evalExpression(e.right,t),r=n instanceof Be?n.value:n instanceof Me||n instanceof Ue?Array.from(n.data):null,a=s instanceof Be?s.value:s instanceof Me||s instanceof Ue?Array.from(s.data):null;switch(e.operator){case'+':{if(Ge(r)&&Ge(a)){const t=r,s=a;if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const i=t.map((e,t)=>e+s[t]);return new Me(i,n.typeInfo)}if(Ge(r)){const e=a,t=r.map((t,n)=>t+e);return new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e+t);return new Me(t,s.typeInfo)}const t=r,i=a,o=this._maxFormatTypeInfo([n.typeInfo,s.typeInfo]);return new Be(t+i,o)}case'-':{if(Ge(r)&&Ge(a)){const t=r,s=a;if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const i=t.map((e,t)=>e-s[t]);return new Me(i,n.typeInfo)}if(Ge(r)){const e=a,t=r.map((t,n)=>t-e);return new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e-t);return new Me(t,s.typeInfo)}const t=r,i=a,o=this._maxFormatTypeInfo([n.typeInfo,s.typeInfo]);return new Be(t-i,o)}case'*':{if(Ge(r)&&Ge(a)){const t=r,i=a;if(n instanceof Ue&&s instanceof Ue){const r=function(e,t,n,s){if(void 0===pt[t.name]||void 0===pt[s.name])return null;const r=pt[t.name][0],a=pt[t.name][1],i=pt[s.name][0];if(r!==pt[s.name][1])return null;const o=new Array(i*a);for(let t=0;t<a;t++)for(let s=0;s<i;s++){let c=0;for(let i=0;i<r;i++)c+=e[i*a+t]*n[s*r+i];o[t*i+s]=c}return o}(t,n.typeInfo,i,s.typeInfo);if(null===r)return console.error(`Matrix multiplication failed. Line ${e.line}.`),null;const a=pt[s.typeInfo.name][0],o=pt[n.typeInfo.name][1],c=this.getTypeInfo(`mat${a}x${o}f`);return new Ue(r,c)}if(n instanceof Ue&&s instanceof Me){const r=function(e,t,n,s){if(void 0===pt[t.name]||void 0===ft[s.name])return null;const r=pt[t.name][0],a=pt[t.name][1];if(r!==n.length)return null;const i=new Array(a);for(let t=0;t<a;t++){let s=0;for(let i=0;i<r;i++)s+=e[i*a+t]*n[i];i[t]=s}return i}(t,n.typeInfo,i,s.typeInfo);return null===r?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new Me(r,s.typeInfo)}if(n instanceof Me&&s instanceof Ue){const r=function(e,t,n,s){if(void 0===ft[t.name]||void 0===pt[s.name])return null;const r=pt[s.name][0],a=pt[s.name][1];if(a!==e.length)return null;const i=[];for(let t=0;t<r;t++){let s=0;for(let i=0;i<a;i++)s+=e[i]*n[i*r+t];i[t]=s}return i}(t,n.typeInfo,i,s.typeInfo);return null===r?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new Me(r,n.typeInfo)}{if(t.length!==i.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const s=t.map((e,t)=>e*i[t]);return new Me(s,n.typeInfo)}}if(Ge(r)){const e=a,t=r.map((t,n)=>t*e);return n instanceof Ue?new Ue(t,n.typeInfo):new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e*t);return s instanceof Ue?new Ue(t,s.typeInfo):new Me(t,s.typeInfo)}const t=r,i=a,o=this._maxFormatTypeInfo([n.typeInfo,s.typeInfo]);return new Be(t*i,o)}case'%':{if(Ge(r)&&Ge(a)){const t=r,s=a;if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const i=t.map((e,t)=>e%s[t]);return new Me(i,n.typeInfo)}if(Ge(r)){const e=a,t=r.map((t,n)=>t%e);return new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e%t);return new Me(t,s.typeInfo)}const t=r,i=a,o=this._maxFormatTypeInfo([n.typeInfo,s.typeInfo]);return new Be(t%i,o)}case'/':{if(Ge(r)&&Ge(a)){const t=r,s=a;if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const i=t.map((e,t)=>e/s[t]);return new Me(i,n.typeInfo)}if(Ge(r)){const e=a,t=r.map((t,n)=>t/e);return new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e/t);return new Me(t,s.typeInfo)}const t=r,i=a,o=this._maxFormatTypeInfo([n.typeInfo,s.typeInfo]);return new Be(t/i,o)}case'&':{if(Ge(r)&&Ge(a)){const t=r,s=a;if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const i=t.map((e,t)=>e&s[t]);return new Me(i,n.typeInfo)}if(Ge(r)){const e=a,t=r.map((t,n)=>t&e);return new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e&t);return new Me(t,s.typeInfo)}const t=r,i=a,o=this._maxFormatTypeInfo([n.typeInfo,s.typeInfo]);return new Be(t&i,o)}case'|':{if(Ge(r)&&Ge(a)){const t=r,s=a;if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const i=t.map((e,t)=>e|s[t]);return new Me(i,n.typeInfo)}if(Ge(r)){const e=a,t=r.map((t,n)=>t|e);return new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e|t);return new Me(t,s.typeInfo)}const t=r,i=a,o=this._maxFormatTypeInfo([n.typeInfo,s.typeInfo]);return new Be(t|i,o)}case'^':{if(Ge(r)&&Ge(a)){const t=r,s=a;if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const i=t.map((e,t)=>e^s[t]);return new Me(i,n.typeInfo)}if(Ge(r)){const e=a,t=r.map((t,n)=>t^e);return new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e^t);return new Me(t,s.typeInfo)}const t=r,i=a,o=this._maxFormatTypeInfo([n.typeInfo,s.typeInfo]);return new Be(t^i,o)}case'<<':{if(Ge(r)&&Ge(a)){const t=r,s=a;if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const i=t.map((e,t)=>e<<s[t]);return new Me(i,n.typeInfo)}if(Ge(r)){const e=a,t=r.map((t,n)=>t<<e);return new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e<<t);return new Me(t,s.typeInfo)}const t=r,i=a,o=this._maxFormatTypeInfo([n.typeInfo,s.typeInfo]);return new Be(t<<i,o)}case'>>':{if(Ge(r)&&Ge(a)){const t=r,s=a;if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const i=t.map((e,t)=>e>>s[t]);return new Me(i,n.typeInfo)}if(Ge(r)){const e=a,t=r.map((t,n)=>t>>e);return new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e>>t);return new Me(t,s.typeInfo)}const t=r,i=a,o=this._maxFormatTypeInfo([n.typeInfo,s.typeInfo]);return new Be(t>>i,o)}case'>':if(Ge(r)&&Ge(a)){const t=r,s=a;if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const i=t.map((e,t)=>e>s[t]?1:0);return new Me(i,n.typeInfo)}if(Ge(r)){const e=a,t=r.map((t,n)=>t>e?1:0);return new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e>t?1:0);return new Me(t,s.typeInfo)}return new Be(r>a?1:0,this.getTypeInfo('bool'));case'<':if(Ge(r)&&Ge(a)){const t=r,s=a;if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const i=t.map((e,t)=>e<s[t]?1:0);return new Me(i,n.typeInfo)}if(Ge(r)){const e=a,t=r.map((t,n)=>t<e?1:0);return new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e<t?1:0);return new Me(t,s.typeInfo)}return new Be(r<a?1:0,this.getTypeInfo('bool'));case'==':if(Ge(r)&&Ge(a)){const t=r,s=a;if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const i=t.map((e,t)=>e===s[t]?1:0);return new Me(i,n.typeInfo)}if(Ge(r)){const e=a,t=r.map((t,n)=>t==e?1:0);return new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e==t?1:0);return new Me(t,s.typeInfo)}return new Be(r===a?1:0,this.getTypeInfo('bool'));case'!=':if(Ge(r)&&Ge(a)){const t=r,s=a;if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const i=t.map((e,t)=>e!==s[t]?1:0);return new Me(i,n.typeInfo)}if(Ge(r)){const e=a,t=r.map((t,n)=>t!==e?1:0);return new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e!==t?1:0);return new Me(t,s.typeInfo)}return new Be(r!==a?1:0,this.getTypeInfo('bool'));case'>=':if(Ge(r)&&Ge(a)){const t=r,s=a;if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const i=t.map((e,t)=>e>=s[t]?1:0);return new Me(i,n.typeInfo)}if(Ge(r)){const e=a,t=r.map((t,n)=>t>=e?1:0);return new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e>=t?1:0);return new Me(t,s.typeInfo)}return new Be(r>=a?1:0,this.getTypeInfo('bool'));case'<=':if(Ge(r)&&Ge(a)){const t=r,s=a;if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const i=t.map((e,t)=>e<=s[t]?1:0);return new Me(i,n.typeInfo)}if(Ge(r)){const e=a,t=r.map((t,n)=>t<=e?1:0);return new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e<=t?1:0);return new Me(t,s.typeInfo)}return new Be(r<=a?1:0,this.getTypeInfo('bool'));case'&&':if(Ge(r)&&Ge(a)){const t=r,s=a;if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const i=t.map((e,t)=>e&&s[t]?1:0);return new Me(i,n.typeInfo)}if(Ge(r)){const e=a,t=r.map((t,n)=>t&&e?1:0);return new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e&&t?1:0);return new Me(t,s.typeInfo)}return new Be(r&&a?1:0,this.getTypeInfo('bool'));case'||':if(Ge(r)&&Ge(a)){const t=r,s=a;if(t.length!==s.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const i=t.map((e,t)=>e||s[t]?1:0);return new Me(i,n.typeInfo)}if(Ge(r)){const e=a,t=r.map((t,n)=>t||e?1:0);return new Me(t,n.typeInfo)}if(Ge(a)){const e=r,t=a.map((t,n)=>e||t?1:0);return new Me(t,s.typeInfo)}return new Be(r||a?1:0,this.getTypeInfo('bool'))}return console.error(`Unknown operator ${e.operator}. Line ${e.line}`),null}_evalCall(e,t){if(null!==e.cachedReturnValue)return e.cachedReturnValue;const n=t.clone();n.currentFunctionName=e.name;const s=t.getFunction(e.name);if(!s){if(e.isBuiltin)return this._callBuiltinFunction(e,n);return this.getTypeInfo(e.name)?this._evalCreate(e,t):(console.error(`Unknown function \"${e.name}\". Line ${e.line}`),null)}for(let t=0;t<s.node.args.length;++t){const r=s.node.args[t],a=this.evalExpression(e.args[t],n);n.createVariable(r.name,a,r)}return this._execStatements(s.node.body,n)}_callBuiltinFunction(e,t){switch(e.name){case'all':return this.builtins.All(e,t);case'any':return this.builtins.Any(e,t);case'select':return this.builtins.Select(e,t);case'arrayLength':return this.builtins.ArrayLength(e,t);case'abs':return this.builtins.Abs(e,t);case'acos':return this.builtins.Acos(e,t);case'acosh':return this.builtins.Acosh(e,t);case'asin':return this.builtins.Asin(e,t);case'asinh':return this.builtins.Asinh(e,t);case'atan':return this.builtins.Atan(e,t);case'atanh':return this.builtins.Atanh(e,t);case'atan2':return this.builtins.Atan2(e,t);case'ceil':return this.builtins.Ceil(e,t);case'clamp':return this.builtins.Clamp(e,t);case'cos':return this.builtins.Cos(e,t);case'cosh':return this.builtins.Cosh(e,t);case'countLeadingZeros':return this.builtins.CountLeadingZeros(e,t);case'countOneBits':return this.builtins.CountOneBits(e,t);case'countTrailingZeros':return this.builtins.CountTrailingZeros(e,t);case'cross':return this.builtins.Cross(e,t);case'degrees':return this.builtins.Degrees(e,t);case'determinant':return this.builtins.Determinant(e,t);case'distance':return this.builtins.Distance(e,t);case'dot':return this.builtins.Dot(e,t);case'dot4U8Packed':return this.builtins.Dot4U8Packed(e,t);case'dot4I8Packed':return this.builtins.Dot4I8Packed(e,t);case'exp':return this.builtins.Exp(e,t);case'exp2':return this.builtins.Exp2(e,t);case'extractBits':return this.builtins.ExtractBits(e,t);case'faceForward':return this.builtins.FaceForward(e,t);case'firstLeadingBit':return this.builtins.FirstLeadingBit(e,t);case'firstTrailingBit':return this.builtins.FirstTrailingBit(e,t);case'floor':return this.builtins.Floor(e,t);case'fma':return this.builtins.Fma(e,t);case'fract':return this.builtins.Fract(e,t);case'frexp':return this.builtins.Frexp(e,t);case'insertBits':return this.builtins.InsertBits(e,t);case'inverseSqrt':return this.builtins.InverseSqrt(e,t);case'ldexp':return this.builtins.Ldexp(e,t);case'length':return this.builtins.Length(e,t);case'log':return this.builtins.Log(e,t);case'log2':return this.builtins.Log2(e,t);case'max':return this.builtins.Max(e,t);case'min':return this.builtins.Min(e,t);case'mix':return this.builtins.Mix(e,t);case'modf':return this.builtins.Modf(e,t);case'normalize':return this.builtins.Normalize(e,t);case'pow':return this.builtins.Pow(e,t);case'quantizeToF16':return this.builtins.QuantizeToF16(e,t);case'radians':return this.builtins.Radians(e,t);case'reflect':return this.builtins.Reflect(e,t);case'refract':return this.builtins.Refract(e,t);case'reverseBits':return this.builtins.ReverseBits(e,t);case'round':return this.builtins.Round(e,t);case'saturate':return this.builtins.Saturate(e,t);case'sign':return this.builtins.Sign(e,t);case'sin':return this.builtins.Sin(e,t);case'sinh':return this.builtins.Sinh(e,t);case'smoothstep':return this.builtins.SmoothStep(e,t);case'sqrt':return this.builtins.Sqrt(e,t);case'step':return this.builtins.Step(e,t);case'tan':return this.builtins.Tan(e,t);case'tanh':return this.builtins.Tanh(e,t);case'transpose':return this.builtins.Transpose(e,t);case'trunc':return this.builtins.Trunc(e,t);case'dpdx':return this.builtins.Dpdx(e,t);case'dpdxCoarse':return this.builtins.DpdxCoarse(e,t);case'dpdxFine':return this.builtins.DpdxFine(e,t);case'dpdy':return this.builtins.Dpdy(e,t);case'dpdyCoarse':return this.builtins.DpdyCoarse(e,t);case'dpdyFine':return this.builtins.DpdyFine(e,t);case'fwidth':return this.builtins.Fwidth(e,t);case'fwidthCoarse':return this.builtins.FwidthCoarse(e,t);case'fwidthFine':return this.builtins.FwidthFine(e,t);case'textureDimensions':return this.builtins.TextureDimensions(e,t);case'textureGather':return this.builtins.TextureGather(e,t);case'textureGatherCompare':return this.builtins.TextureGatherCompare(e,t);case'textureLoad':return this.builtins.TextureLoad(e,t);case'textureNumLayers':return this.builtins.TextureNumLayers(e,t);case'textureNumLevels':return this.builtins.TextureNumLevels(e,t);case'textureNumSamples':return this.builtins.TextureNumSamples(e,t);case'textureSample':return this.builtins.TextureSample(e,t);case'textureSampleBias':return this.builtins.TextureSampleBias(e,t);case'textureSampleCompare':return this.builtins.TextureSampleCompare(e,t);case'textureSampleCompareLevel':return this.builtins.TextureSampleCompareLevel(e,t);case'textureSampleGrad':return this.builtins.TextureSampleGrad(e,t);case'textureSampleLevel':return this.builtins.TextureSampleLevel(e,t);case'textureSampleBaseClampToEdge':return this.builtins.TextureSampleBaseClampToEdge(e,t);case'textureStore':return this.builtins.TextureStore(e,t);case'atomicLoad':return this.builtins.AtomicLoad(e,t);case'atomicStore':return this.builtins.AtomicStore(e,t);case'atomicAdd':return this.builtins.AtomicAdd(e,t);case'atomicSub':return this.builtins.AtomicSub(e,t);case'atomicMax':return this.builtins.AtomicMax(e,t);case'atomicMin':return this.builtins.AtomicMin(e,t);case'atomicAnd':return this.builtins.AtomicAnd(e,t);case'atomicOr':return this.builtins.AtomicOr(e,t);case'atomicXor':return this.builtins.AtomicXor(e,t);case'atomicExchange':return this.builtins.AtomicExchange(e,t);case'atomicCompareExchangeWeak':return this.builtins.AtomicCompareExchangeWeak(e,t);case'pack4x8snorm':return this.builtins.Pack4x8snorm(e,t);case'pack4x8unorm':return this.builtins.Pack4x8unorm(e,t);case'pack4xI8':return this.builtins.Pack4xI8(e,t);case'pack4xU8':return this.builtins.Pack4xU8(e,t);case'pack4x8Clamp':return this.builtins.Pack4x8Clamp(e,t);case'pack4xU8Clamp':return this.builtins.Pack4xU8Clamp(e,t);case'pack2x16snorm':return this.builtins.Pack2x16snorm(e,t);case'pack2x16unorm':return this.builtins.Pack2x16unorm(e,t);case'pack2x16float':return this.builtins.Pack2x16float(e,t);case'unpack4x8snorm':return this.builtins.Unpack4x8snorm(e,t);case'unpack4x8unorm':return this.builtins.Unpack4x8unorm(e,t);case'unpack4xI8':return this.builtins.Unpack4xI8(e,t);case'unpack4xU8':return this.builtins.Unpack4xU8(e,t);case'unpack2x16snorm':return this.builtins.Unpack2x16snorm(e,t);case'unpack2x16unorm':return this.builtins.Unpack2x16unorm(e,t);case'unpack2x16float':return this.builtins.Unpack2x16float(e,t);case'storageBarrier':return this.builtins.StorageBarrier(e,t);case'textureBarrier':return this.builtins.TextureBarrier(e,t);case'workgroupBarrier':return this.builtins.WorkgroupBarrier(e,t);case'workgroupUniformLoad':return this.builtins.WorkgroupUniformLoad(e,t);case'subgroupAdd':return this.builtins.SubgroupAdd(e,t);case'subgroupExclusiveAdd':return this.builtins.SubgroupExclusiveAdd(e,t);case'subgroupInclusiveAdd':return this.builtins.SubgroupInclusiveAdd(e,t);case'subgroupAll':return this.builtins.SubgroupAll(e,t);case'subgroupAnd':return this.builtins.SubgroupAnd(e,t);case'subgroupAny':return this.builtins.SubgroupAny(e,t);case'subgroupBallot':return this.builtins.SubgroupBallot(e,t);case'subgroupBroadcast':return this.builtins.SubgroupBroadcast(e,t);case'subgroupBroadcastFirst':return this.builtins.SubgroupBroadcastFirst(e,t);case'subgroupElect':return this.builtins.SubgroupElect(e,t);case'subgroupMax':return this.builtins.SubgroupMax(e,t);case'subgroupMin':return this.builtins.SubgroupMin(e,t);case'subgroupMul':return this.builtins.SubgroupMul(e,t);case'subgroupExclusiveMul':return this.builtins.SubgroupExclusiveMul(e,t);case'subgroupInclusiveMul':return this.builtins.SubgroupInclusiveMul(e,t);case'subgroupOr':return this.builtins.SubgroupOr(e,t);case'subgroupShuffle':return this.builtins.SubgroupShuffle(e,t);case'subgroupShuffleDown':return this.builtins.SubgroupShuffleDown(e,t);case'subgroupShuffleUp':return this.builtins.SubgroupShuffleUp(e,t);case'subgroupShuffleXor':return this.builtins.SubgroupShuffleXor(e,t);case'subgroupXor':return this.builtins.SubgroupXor(e,t);case'quadBroadcast':return this.builtins.QuadBroadcast(e,t);case'quadSwapDiagonal':return this.builtins.QuadSwapDiagonal(e,t);case'quadSwapX':return this.builtins.QuadSwapX(e,t);case'quadSwapY':return this.builtins.QuadSwapY(e,t)}const n=t.getFunction(e.name);if(n){const s=t.clone();for(let t=0;t<n.node.args.length;++t){const r=n.node.args[t],a=this.evalExpression(e.args[t],s);s.setVariable(r.name,a,r)}return this._execStatements(n.node.body,s)}return null}_callConstructorValue(e,t){if(!e.args||0===e.args.length)return new Be(0,this.getTypeInfo(e.type));const n=this.evalExpression(e.args[0],t);return n.typeInfo=this.getTypeInfo(e.type),n.getSubData(this,e.postfix,t).clone()}_callConstructorVec(e,t){const n=this.getTypeInfo(e.type),s=e.type.getTypeName(),r=ft[s];if(void 0===r)return console.error(`Invalid vec constructor ${s}. Line ${e.line}`),null;const a=[];if(e instanceof xe)if(e.isVector){const t=e.vectorValue;for(const e of t)a.push(e)}else a.push(e.scalarValue);else if(e.args)for(const n of e.args){const e=this.evalExpression(n,t);if(e instanceof Me){const t=e.data;for(let e=0;e<t.length;++e){let n=t[e];a.push(n)}}else if(e instanceof Be){let t=e.value;a.push(t)}}if(e.type instanceof ce&&null===e.type.format&&(e.type.format=ce.f32),0===a.length){const s=new Array(r).fill(0);return new Me(s,n).getSubData(this,e.postfix,t)}if(1===a.length)for(;a.length<r;)a.push(a[0]);if(a.length<r)return console.error(`Invalid vec constructor. Line ${e.line}`),null;return new Me(a.length>r?a.slice(0,r):a,n).getSubData(this,e.postfix,t)}_callConstructorMatrix(e,t){const n=this.getTypeInfo(e.type),s=e.type.getTypeName(),r=pt[s];if(void 0===r)return console.error(`Invalid matrix constructor ${s}. Line ${e.line}`),null;const i=[];if(e instanceof xe)if(e.isVector){const t=e.vectorValue;for(const e of t)i.push(e)}else i.push(e.scalarValue);else if(e.args)for(const n of e.args){const e=this.evalExpression(n,t);e instanceof Me?i.push(...e.data):e instanceof Be?i.push(e.value):e instanceof Ue&&i.push(...e.data)}if(n instanceof a&&null===n.format&&(n.format=this.getTypeInfo('f32')),0===i.length){const s=new Array(r[2]).fill(0);return new Ue(s,n).getSubData(this,e.postfix,t)}return i.length!==r[2]?(console.error(`Invalid matrix constructor. Line ${e.line}`),null):new Ue(i,n).getSubData(this,e.postfix,t)}}dt._breakObj=new Ne(new e('BREAK',null),null),dt._continueObj=new Ne(new e('CONTINUE',null),null),dt._priority=new Map([['f32',0],['f16',1],['u32',2],['i32',3],['x32',3]]);class mt{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class gt{constructor(){this._tokens=[],this._current=0,this._currentLine=1,this._deferArrayCountEval=[],this._currentLoop=[],this._context=new mt,this._exec=new dt,this._forwardTypeCount=0}parse(e){this._initialize(e),this._deferArrayCountEval.length=0;const t=[];for(;!this._isAtEnd();){const e=this._global_decl_or_directive();if(!e)break;t.push(e)}if(this._deferArrayCountEval.length>0){for(const e of this._deferArrayCountEval){const t=e.arrayType,n=e.countNode;if(n instanceof ge){const e=n.name,s=this._context.constants.get(e);if(s)try{const e=s.constEvaluate(this._exec);t.count=e}catch(e){}}}this._deferArrayCountEval.length=0}if(this._forwardTypeCount>0)for(const e of t)e.search(e=>{e instanceof Ce||e instanceof le?e.type=this._forwardType(e.type):e instanceof ue?e.format=this._forwardType(e.format):e instanceof F||e instanceof U||e instanceof P?e.type=this._forwardType(e.type):e instanceof D?e.returnType=this._forwardType(e.returnType):e instanceof $e&&(e.type=this._forwardType(e.type))});return t}_forwardType(e){if(e instanceof ie){const t=this._getType(e.name);if(t)return t}else e instanceof le?e.type=this._forwardType(e.type):e instanceof ue&&(e.format=this._forwardType(e.format));return e}_initialize(e){if(e)if('string'==typeof e){const t=new Re(e);this._tokens=t.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_updateNode(e,t){return e.line=null!=t?t:this._currentLine,e}_error(e,t){return{token:e,message:t,toString:()=>`${t}`}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==He.eof}_match(e){if(e instanceof qe)return!!this._check(e)&&(this._advance(),!0);for(let t=0,n=e.length;t<n;++t){const n=e[t];if(this._check(n))return this._advance(),!0}return!1}_consume(e,t){if(this._check(e))return this._advance();throw this._error(this._peek(),`${t}. Line:${this._currentLine}`)}_check(e){if(this._isAtEnd())return!1;const t=this._peek();if(e instanceof Array){const n=t.type;let s=!1;for(const t of e){if(n===t)return!0;t===He.tokens.name&&(s=!0)}if(s){const e=He.tokens.name.rule.exec(t.lexeme);if(e&&0==e.index&&e[0]==t.lexeme)return!0}return!1}if(t.type===e)return!0;if(e===He.tokens.name){const e=He.tokens.name.rule.exec(t.lexeme);return e&&0==e.index&&e[0]==t.lexeme}return!1}_advance(){var e,t;return this._currentLine=null!==(t=null===(e=this._peek())||void 0===e?void 0:e.line)&&void 0!==t?t:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(He.tokens.semicolon)&&!this._isAtEnd(););if(this._match(He.keywords.alias)){const e=this._type_alias();return this._consume(He.tokens.semicolon,'Expected \\';\\''),this._exec.reflection.updateAST([e]),e}if(this._match(He.keywords.diagnostic)){const e=this._diagnostic();return this._consume(He.tokens.semicolon,'Expected \\';\\''),this._exec.reflection.updateAST([e]),e}if(this._match(He.keywords.requires)){const e=this._requires_directive();return this._consume(He.tokens.semicolon,'Expected \\';\\''),this._exec.reflection.updateAST([e]),e}if(this._match(He.keywords.enable)){const e=this._enable_directive();return this._consume(He.tokens.semicolon,'Expected \\';\\''),this._exec.reflection.updateAST([e]),e}const e=this._attribute();if(this._check(He.keywords.var)){const t=this._global_variable_decl();return null!=t&&(t.attributes=e),this._consume(He.tokens.semicolon,'Expected \\';\\'.'),this._exec.reflection.updateAST([t]),t}if(this._check(He.keywords.override)){const t=this._override_variable_decl();return null!=t&&(t.attributes=e),this._consume(He.tokens.semicolon,'Expected \\';\\'.'),this._exec.reflection.updateAST([t]),t}if(this._check(He.keywords.let)){const t=this._global_let_decl();return null!=t&&(t.attributes=e),this._consume(He.tokens.semicolon,'Expected \\';\\'.'),this._exec.reflection.updateAST([t]),t}if(this._check(He.keywords.const)){const t=this._global_const_decl();return null!=t&&(t.attributes=e),this._consume(He.tokens.semicolon,'Expected \\';\\'.'),this._exec.reflection.updateAST([t]),t}if(this._check(He.keywords.struct)){const t=this._struct_decl();return null!=t&&(t.attributes=e),this._exec.reflection.updateAST([t]),t}if(this._check(He.keywords.fn)){const t=this._function_decl();return null!=t&&(t.attributes=e),this._exec.reflection.updateAST([t]),t}return null}_function_decl(){if(!this._match(He.keywords.fn))return null;const e=this._currentLine,t=this._consume(He.tokens.ident,'Expected function name.').toString();this._consume(He.tokens.paren_left,'Expected \\'(\\' for function arguments.');const n=[];if(!this._check(He.tokens.paren_right))do{if(this._check(He.tokens.paren_right))break;const e=this._attribute(),t=this._consume(He.tokens.name,'Expected argument name.').toString();this._consume(He.tokens.colon,'Expected \\':\\' for argument type.');const s=this._attribute(),r=this._type_decl();null!=r&&(r.attributes=s,n.push(this._updateNode(new $e(t,r,e))))}while(this._match(He.tokens.comma));this._consume(He.tokens.paren_right,'Expected \\')\\' after function arguments.');let s=null;if(this._match(He.tokens.arrow)){const e=this._attribute();s=this._type_decl(),null!=s&&(s.attributes=e)}const r=this._compound_statement(),a=this._currentLine;return this._updateNode(new D(t,n,s,r,e,a),e)}_compound_statement(){const e=[];for(this._consume(He.tokens.brace_left,'Expected \\'{\\' for block.');!this._check(He.tokens.brace_right);){const t=this._statement();null!==t&&e.push(t)}return this._consume(He.tokens.brace_right,'Expected \\'}\\' for block.'),e}_statement(){for(;this._match(He.tokens.semicolon)&&!this._isAtEnd(););if(this._check(He.tokens.attr)&&this._attribute(),this._check(He.keywords.if))return this._if_statement();if(this._check(He.keywords.switch))return this._switch_statement();if(this._check(He.keywords.loop))return this._loop_statement();if(this._check(He.keywords.for))return this._for_statement();if(this._check(He.keywords.while))return this._while_statement();if(this._check(He.keywords.continuing))return this._continuing_statement();if(this._check(He.keywords.static_assert))return this._static_assert_statement();if(this._check(He.tokens.brace_left))return this._compound_statement();let e=null;if(this._check(He.keywords.return))e=this._return_statement();else if(this._check([He.keywords.var,He.keywords.let,He.keywords.const]))e=this._variable_statement();else if(this._match(He.keywords.discard))e=this._updateNode(new ne);else if(this._match(He.keywords.break)){const t=this._updateNode(new se);if(this._currentLoop.length>0){const e=this._currentLoop[this._currentLoop.length-1];t.loopId=e.id}e=t,this._check(He.keywords.if)&&(this._advance(),t.condition=this._optional_paren_expression())}else if(this._match(He.keywords.continue)){const t=this._updateNode(new re);if(!(this._currentLoop.length>0))throw this._error(this._peek(),`Continue statement must be inside a loop. Line: ${t.line}`);{const e=this._currentLoop[this._currentLoop.length-1];t.loopId=e.id}e=t}else e=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement();return null!=e&&this._consume(He.tokens.semicolon,'Expected \\';\\' after statement.'),e}_static_assert_statement(){if(!this._match(He.keywords.static_assert))return null;const e=this._currentLine,t=this._optional_paren_expression();return this._updateNode(new N(t),e)}_while_statement(){if(!this._match(He.keywords.while))return null;const e=this._updateNode(new V(null,null));return this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(He.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_continuing_statement(){const e=this._currentLoop.length>0?this._currentLoop[this._currentLoop.length-1].id:-1;if(!this._match(He.keywords.continuing))return null;const t=this._currentLine,n=this._compound_statement();return this._updateNode(new O(n,e),t)}_for_statement(){if(!this._match(He.keywords.for))return null;this._consume(He.tokens.paren_left,'Expected \\'(\\'.');const e=this._updateNode(new B(null,null,null,null));return this._currentLoop.push(e),e.init=this._check(He.tokens.semicolon)?null:this._for_init(),this._consume(He.tokens.semicolon,'Expected \\';\\'.'),e.condition=this._check(He.tokens.semicolon)?null:this._short_circuit_or_expression(),this._consume(He.tokens.semicolon,'Expected \\';\\'.'),e.increment=this._check(He.tokens.paren_right)?null:this._for_increment(),this._consume(He.tokens.paren_right,'Expected \\')\\'.'),this._check(He.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(He.keywords.var)){const e=this._variable_decl();if(null===e)throw this._error(this._peek(),'Variable declaration expected.');let t=null;return this._match(He.tokens.equal)&&(t=this._short_circuit_or_expression()),this._updateNode(new F(e.name,e.type,e.storage,e.access,t),e.line)}if(this._match(He.keywords.let)){const e=this._currentLine,t=this._consume(He.tokens.name,'Expected name for let.').toString();let n=null;if(this._match(He.tokens.colon)){const e=this._attribute();n=this._type_decl(),null!=n&&(n.attributes=e)}this._consume(He.tokens.equal,'Expected \\'=\\' for let.');const s=this._short_circuit_or_expression();return this._updateNode(new U(t,n,null,null,s),e)}if(this._match(He.keywords.const)){const e=this._currentLine,t=this._consume(He.tokens.name,'Expected name for const.').toString();let n=null;if(this._match(He.tokens.colon)){const e=this._attribute();n=this._type_decl(),null!=n&&(n.attributes=e)}this._consume(He.tokens.equal,'Expected \\'=\\' for const.');const s=this._short_circuit_or_expression();return null===n&&s instanceof xe&&(n=s.type),this._updateNode(new P(t,n,null,null,s),e)}return null}_increment_decrement_statement(){const e=this._current,t=this._unary_expression();if(null==t)return null;if(!this._check(He.increment_operators))return this._current=e,null;const n=this._consume(He.increment_operators,'Expected increment operator');return this._updateNode(new R(n.type===He.tokens.plus_plus?W.increment:W.decrement,t))}_assignment_statement(){let e=null;const t=this._currentLine;if(this._check(He.tokens.brace_right))return null;let n=this._match(He.tokens.underscore);if(n||(e=this._unary_expression()),!n&&null==e)return null;const s=this._consume(He.assignment_operators,'Expected assignment operator.'),r=this._short_circuit_or_expression();return this._updateNode(new G(q.parse(s.lexeme),e,r),t)}_func_call_statement(){if(!this._check(He.tokens.ident))return null;const e=this._currentLine,t=this._current,n=this._consume(He.tokens.ident,'Expected function name.'),s=this._argument_expression_list();return null===s?(this._current=t,null):this._updateNode(new X(n.lexeme,s),e)}_loop_statement(){if(!this._match(He.keywords.loop))return null;this._check(He.tokens.attr)&&this._attribute(),this._consume(He.tokens.brace_left,'Expected \\'{\\' for loop.');const e=this._updateNode(new j([],null));this._currentLoop.push(e);let t=this._statement();for(;null!==t;){if(Array.isArray(t))for(let n of t)e.body.push(n);else e.body.push(t);if(t instanceof O){e.continuing=t;break}t=this._statement()}return this._currentLoop.pop(),this._consume(He.tokens.brace_right,'Expected \\'}\\' for loop.'),e}_switch_statement(){if(!this._match(He.keywords.switch))return null;const e=this._updateNode(new Z(null,[]));if(this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(He.tokens.attr)&&this._attribute(),this._consume(He.tokens.brace_left,'Expected \\'{\\' for switch.'),e.cases=this._switch_body(),null==e.cases||0==e.cases.length)throw this._error(this._previous(),'Expected \\'case\\' or \\'default\\'.');return this._consume(He.tokens.brace_right,'Expected \\'}\\' for switch.'),this._currentLoop.pop(),e}_switch_body(){const e=[];let t=!1;for(;this._check([He.keywords.default,He.keywords.case]);){if(this._match(He.keywords.case)){const n=this._case_selectors();for(const e of n)if(e instanceof Se){if(t)throw this._error(this._previous(),'Multiple default cases in switch statement.');t=!0;break}this._match(He.tokens.colon),this._check(He.tokens.attr)&&this._attribute(),this._consume(He.tokens.brace_left,'Exected \\'{\\' for switch case.');const s=this._case_body();this._consume(He.tokens.brace_right,'Exected \\'}\\' for switch case.'),e.push(this._updateNode(new Ae(n,s)))}if(this._match(He.keywords.default)){if(t)throw this._error(this._previous(),'Multiple default cases in switch statement.');this._match(He.tokens.colon),this._check(He.tokens.attr)&&this._attribute(),this._consume(He.tokens.brace_left,'Exected \\'{\\' for switch default.');const n=this._case_body();this._consume(He.tokens.brace_right,'Exected \\'}\\' for switch default.'),e.push(this._updateNode(new Ee(n)))}}return e}_case_selectors(){const e=[];for(this._match(He.keywords.default)?e.push(this._updateNode(new Se)):e.push(this._shift_expression());this._match(He.tokens.comma);)this._match(He.keywords.default)?e.push(this._updateNode(new Se)):e.push(this._shift_expression());return e}_case_body(){if(this._match(He.keywords.fallthrough))return this._consume(He.tokens.semicolon,'Expected \\';\\''),[];let e=this._statement();if(null==e)return[];e instanceof Array||(e=[e]);const t=this._case_body();return 0==t.length?e:[...e,t[0]]}_if_statement(){if(!this._match(He.keywords.if))return null;const e=this._currentLine,t=this._optional_paren_expression();this._check(He.tokens.attr)&&this._attribute();const n=this._compound_statement();let s=[];this._match_elseif()&&(this._check(He.tokens.attr)&&this._attribute(),s=this._elseif_statement(s));let r=null;return this._match(He.keywords.else)&&(this._check(He.tokens.attr)&&this._attribute(),r=this._compound_statement()),this._updateNode(new Q(t,n,s,r),e)}_match_elseif(){return this._tokens[this._current].type===He.keywords.else&&this._tokens[this._current+1].type===He.keywords.if&&(this._advance(),this._advance(),!0)}_elseif_statement(e=[]){const t=this._optional_paren_expression(),n=this._compound_statement();return e.push(this._updateNode(new Le(t,n))),this._match_elseif()&&(this._check(He.tokens.attr)&&this._attribute(),this._elseif_statement(e)),e}_return_statement(){if(!this._match(He.keywords.return))return null;const e=this._short_circuit_or_expression();return this._updateNode(new Y(e))}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(He.tokens.or_or);)e=this._updateNode(new Ie(this._previous().toString(),e,this._short_circuit_and_expr()));return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(He.tokens.and_and);)e=this._updateNode(new Ie(this._previous().toString(),e,this._inclusive_or_expression()));return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(He.tokens.or);)e=this._updateNode(new Ie(this._previous().toString(),e,this._exclusive_or_expression()));return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(He.tokens.xor);)e=this._updateNode(new Ie(this._previous().toString(),e,this._and_expression()));return e}_and_expression(){let e=this._equality_expression();for(;this._match(He.tokens.and);)e=this._updateNode(new Ie(this._previous().toString(),e,this._equality_expression()));return e}_equality_expression(){const e=this._relational_expression();return this._match([He.tokens.equal_equal,He.tokens.not_equal])?this._updateNode(new Ie(this._previous().toString(),e,this._relational_expression())):e}_relational_expression(){let e=this._shift_expression();for(;this._match([He.tokens.less_than,He.tokens.greater_than,He.tokens.less_than_equal,He.tokens.greater_than_equal]);)e=this._updateNode(new Ie(this._previous().toString(),e,this._shift_expression()));return e}_shift_expression(){let e=this._additive_expression();for(;this._match([He.tokens.shift_left,He.tokens.shift_right]);)e=this._updateNode(new Ie(this._previous().toString(),e,this._additive_expression()));return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([He.tokens.plus,He.tokens.minus]);)e=this._updateNode(new Ie(this._previous().toString(),e,this._multiplicative_expression()));return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([He.tokens.star,He.tokens.forward_slash,He.tokens.modulo]);)e=this._updateNode(new Ie(this._previous().toString(),e,this._unary_expression()));return e}_unary_expression(){return this._match([He.tokens.minus,He.tokens.bang,He.tokens.tilde,He.tokens.star,He.tokens.and])?this._updateNode(new ke(this._previous().toString(),this._unary_expression())):this._singular_expression()}_singular_expression(){const e=this._primary_expression(),t=this._postfix_expression();return t&&(e.postfix=t),e}_postfix_expression(){if(this._match(He.tokens.bracket_left)){const e=this._short_circuit_or_expression();this._consume(He.tokens.bracket_right,'Expected \\']\\'.');const t=this._updateNode(new ve(e)),n=this._postfix_expression();return n&&(t.postfix=n),t}if(this._match(He.tokens.period)){const e=this._consume(He.tokens.name,'Expected member name.'),t=this._postfix_expression(),n=this._updateNode(new pe(e.lexeme));return t&&(n.postfix=t),n}return null}_getStruct(e){if(this._context.aliases.has(e)){return this._context.aliases.get(e).type}if(this._context.structs.has(e)){return this._context.structs.get(e)}return null}_getType(e){const t=this._getStruct(e);if(null!==t)return t;switch(e){case'void':return ae.void;case'bool':return ae.bool;case'i32':return ae.i32;case'u32':return ae.u32;case'f32':return ae.f32;case'f16':return ae.f16;case'vec2f':return ce.vec2f;case'vec3f':return ce.vec3f;case'vec4f':return ce.vec4f;case'vec2i':return ce.vec2i;case'vec3i':return ce.vec3i;case'vec4i':return ce.vec4i;case'vec2u':return ce.vec2u;case'vec3u':return ce.vec3u;case'vec4u':return ce.vec4u;case'vec2h':return ce.vec2h;case'vec3h':return ce.vec3h;case'vec4h':return ce.vec4h;case'mat2x2f':return ce.mat2x2f;case'mat2x3f':return ce.mat2x3f;case'mat2x4f':return ce.mat2x4f;case'mat3x2f':return ce.mat3x2f;case'mat3x3f':return ce.mat3x3f;case'mat3x4f':return ce.mat3x4f;case'mat4x2f':return ce.mat4x2f;case'mat4x3f':return ce.mat4x3f;case'mat4x4f':return ce.mat4x4f;case'mat2x2h':return ce.mat2x2h;case'mat2x3h':return ce.mat2x3h;case'mat2x4h':return ce.mat2x4h;case'mat3x2h':return ce.mat3x2h;case'mat3x3h':return ce.mat3x3h;case'mat3x4h':return ce.mat3x4h;case'mat4x2h':return ce.mat4x2h;case'mat4x3h':return ce.mat4x3h;case'mat4x4h':return ce.mat4x4h;case'mat2x2i':return ce.mat2x2i;case'mat2x3i':return ce.mat2x3i;case'mat2x4i':return ce.mat2x4i;case'mat3x2i':return ce.mat3x2i;case'mat3x3i':return ce.mat3x3i;case'mat3x4i':return ce.mat3x4i;case'mat4x2i':return ce.mat4x2i;case'mat4x3i':return ce.mat4x3i;case'mat4x4i':return ce.mat4x4i;case'mat2x2u':return ce.mat2x2u;case'mat2x3u':return ce.mat2x3u;case'mat2x4u':return ce.mat2x4u;case'mat3x2u':return ce.mat3x2u;case'mat3x3u':return ce.mat3x3u;case'mat3x4u':return ce.mat3x4u;case'mat4x2u':return ce.mat4x2u;case'mat4x3u':return ce.mat4x3u;case'mat4x4u':return ce.mat4x4u}return null}_validateTypeRange(e,t){if('i32'===t.name){if(e<-2147483648||e>2147483647)throw this._error(this._previous(),`Value out of range for i32: ${e}. Line: ${this._currentLine}.`)}else if('u32'===t.name&&(e<0||e>4294967295))throw this._error(this._previous(),`Value out of range for u32: ${e}. Line: ${this._currentLine}.`)}_primary_expression(){if(this._match(He.tokens.ident)){const e=this._previous().toString();if(this._check(He.tokens.paren_left)){const t=this._argument_expression_list(),n=this._getType(e);return null!==n?this._updateNode(new de(n,t)):this._updateNode(new me(e,t))}if(this._context.constants.has(e)){const t=this._context.constants.get(e);return this._updateNode(new _e(e,t.value))}return this._updateNode(new ge(e))}if(this._match(He.tokens.int_literal)){const e=this._previous().toString();let t=e.endsWith('i')||e.endsWith('i')?ae.i32:e.endsWith('u')||e.endsWith('U')?ae.u32:ae.x32;const n=parseInt(e);return this._validateTypeRange(n,t),this._updateNode(new xe(new Be(n,this._exec.getTypeInfo(t)),t))}if(this._match(He.tokens.uint_literal)){const e=parseInt(this._previous().toString());return this._validateTypeRange(e,ae.u32),this._updateNode(new xe(new Be(e,this._exec.getTypeInfo(ae.u32)),ae.u32))}if(this._match([He.tokens.decimal_float_literal,He.tokens.hex_float_literal])){let e=this._previous().toString(),t=e.endsWith('h');t&&(e=e.substring(0,e.length-1));const n=parseFloat(e);this._validateTypeRange(n,t?ae.f16:ae.f32);const s=t?ae.f16:ae.f32;return this._updateNode(new xe(new Be(n,this._exec.getTypeInfo(s)),s))}if(this._match([He.keywords.true,He.keywords.false])){let e=this._previous().toString()===He.keywords.true.rule;return this._updateNode(new xe(new Be(e?1:0,this._exec.getTypeInfo(ae.bool)),ae.bool))}if(this._check(He.tokens.paren_left))return this._paren_expression();if(this._match(He.keywords.bitcast)){this._consume(He.tokens.less_than,'Expected \\'<\\'.');const e=this._type_decl();this._consume(He.tokens.greater_than,'Expected \\'>\\'.');const t=this._paren_expression();return this._updateNode(new ye(e,t))}const e=this._type_decl(),t=this._argument_expression_list();return this._updateNode(new de(e,t))}_argument_expression_list(){if(!this._match(He.tokens.paren_left))return null;const e=[];do{if(this._check(He.tokens.paren_right))break;const t=this._short_circuit_or_expression();e.push(t)}while(this._match(He.tokens.comma));return this._consume(He.tokens.paren_right,'Expected \\')\\' for agument list'),e}_optional_paren_expression(){this._match(He.tokens.paren_left);const e=this._short_circuit_or_expression();return this._match(He.tokens.paren_right),e}_paren_expression(){this._consume(He.tokens.paren_left,'Expected \\'(\\'.');const e=this._short_circuit_or_expression();return this._consume(He.tokens.paren_right,'Expected \\')\\'.'),e}_struct_decl(){if(!this._match(He.keywords.struct))return null;const e=this._currentLine,t=this._consume(He.tokens.ident,'Expected name for struct.').toString();this._consume(He.tokens.brace_left,'Expected \\'{\\' for struct body.');const n=[];for(;!this._check(He.tokens.brace_right);){const e=this._attribute(),t=this._consume(He.tokens.name,'Expected variable name.').toString();this._consume(He.tokens.colon,'Expected \\':\\' for struct member type.');const s=this._attribute(),r=this._type_decl();null!=r&&(r.attributes=s),this._check(He.tokens.brace_right)?this._match(He.tokens.comma):this._consume(He.tokens.comma,'Expected \\',\\' for struct member.'),n.push(this._updateNode(new Ce(t,r,e)))}this._consume(He.tokens.brace_right,'Expected \\'}\\' after struct body.');const s=this._currentLine,r=this._updateNode(new oe(t,n,e,s),e);return this._context.structs.set(t,r),r}_global_variable_decl(){const e=this._variable_decl();if(!e)return null;if(this._match(He.tokens.equal)){const t=this._const_expression();e.value=t}if(null!==e.type&&e.value instanceof xe){if('x32'!==e.value.type.name){if(e.type.getTypeName()!==e.value.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${e.value.type.name} to ${e.type.name}. Line:${this._currentLine}`)}e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type),e.value.type=e.type}else null===e.type&&e.value instanceof xe&&(e.type='x32'===e.value.type.name?ae.i32:e.value.type,e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type));return e}_override_variable_decl(){const e=this._override_decl();return e&&this._match(He.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){var e;if(!this._match(He.keywords.const))return null;const t=this._consume(He.tokens.name,'Expected variable name'),n=this._currentLine;let s=null;if(this._match(He.tokens.colon)){const e=this._attribute();s=this._type_decl(),null!=s&&(s.attributes=e)}let r=null;this._consume(He.tokens.equal,'const declarations require an assignment');const i=this._short_circuit_or_expression();try{let e=[ae.f32],n=i.constEvaluate(this._exec,e);n instanceof Be&&this._validateTypeRange(n.value,e[0]),e[0]instanceof ce&&null===e[0].format&&n.typeInfo instanceof a&&null!==n.typeInfo.format&&('f16'===n.typeInfo.format.name?e[0].format=ae.f16:'f32'===n.typeInfo.format.name?e[0].format=ae.f32:'i32'===n.typeInfo.format.name?e[0].format=ae.i32:'u32'===n.typeInfo.format.name?e[0].format=ae.u32:'bool'===n.typeInfo.format.name?e[0].format=ae.bool:console.error(`TODO: impelement template format type ${n.typeInfo.format.name}`)),r=this._updateNode(new xe(n,e[0])),this._exec.context.setVariable(t.toString(),n)}catch(e){r=i}if(null!==s&&r instanceof xe){if('x32'!==r.type.name){if(s.getTypeName()!==r.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${r.type.name} to ${s.name}. Line:${this._currentLine}`)}r.type=s,r.isScalar&&this._validateTypeRange(r.scalarValue,r.type)}else null===s&&r instanceof xe&&(s=null!==(e=null==r?void 0:r.type)&&void 0!==e?e:ae.f32,s===ae.x32&&(s=ae.i32));const o=this._updateNode(new P(t.toString(),s,'','',r),n);return this._context.constants.set(o.name,o),o}_global_let_decl(){if(!this._match(He.keywords.let))return null;const e=this._currentLine,t=this._consume(He.tokens.name,'Expected variable name');let n=null;if(this._match(He.tokens.colon)){const e=this._attribute();n=this._type_decl(),null!=n&&(n.attributes=e)}let s=null;if(this._match(He.tokens.equal)&&(s=this._const_expression()),null!==n&&s instanceof xe){if('x32'!==s.type.name){if(n.getTypeName()!==s.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${s.type.name} to ${n.name}. Line:${this._currentLine}`)}s.type=n}else null===n&&s instanceof xe&&(n='x32'===s.type.name?ae.i32:s.type);return s instanceof xe&&s.isScalar&&this._validateTypeRange(s.scalarValue,n),this._updateNode(new U(t.toString(),n,'','',s),e)}_const_expression(){return this._short_circuit_or_expression()}_variable_decl(){if(!this._match(He.keywords.var))return null;const e=this._currentLine;let t='',n='';this._match(He.tokens.less_than)&&(t=this._consume(He.storage_class,'Expected storage_class.').toString(),this._match(He.tokens.comma)&&(n=this._consume(He.access_mode,'Expected access_mode.').toString()),this._consume(He.tokens.greater_than,'Expected \\'>\\'.'));const s=this._consume(He.tokens.name,'Expected variable name');let r=null;if(this._match(He.tokens.colon)){const e=this._attribute();r=this._type_decl(),null!=r&&(r.attributes=e)}return this._updateNode(new F(s.toString(),r,t,n,null),e)}_override_decl(){if(!this._match(He.keywords.override))return null;const e=this._consume(He.tokens.name,'Expected variable name');let t=null;if(this._match(He.tokens.colon)){const e=this._attribute();t=this._type_decl(),null!=t&&(t.attributes=e)}return this._updateNode(new M(e.toString(),t,null))}_diagnostic(){this._consume(He.tokens.paren_left,'Expected \\'(\\'');const e=this._consume(He.tokens.ident,'Expected severity control name.');this._consume(He.tokens.comma,'Expected \\',\\'');let t=this._consume(He.tokens.ident,'Expected diagnostic rule name.').toString();if(this._match(He.tokens.period)){t+=`.${this._consume(He.tokens.ident,'Expected diagnostic message.').toString()}`}return this._consume(He.tokens.paren_right,'Expected \\')\\''),this._updateNode(new ee(e.toString(),t))}_enable_directive(){const e=this._consume(He.tokens.ident,'identity expected.');return this._updateNode(new K(e.toString()))}_requires_directive(){const e=[this._consume(He.tokens.ident,'identity expected.').toString()];for(;this._match(He.tokens.comma);){const t=this._consume(He.tokens.ident,'identity expected.');e.push(t.toString())}return this._updateNode(new J(e))}_type_alias(){const e=this._consume(He.tokens.ident,'identity expected.');this._consume(He.tokens.equal,'Expected \\'=\\' for type alias.');let t=this._type_decl();if(null===t)throw this._error(this._peek(),'Expected Type for Alias.');this._context.aliases.has(t.name)&&(t=this._context.aliases.get(t.name).type);const n=this._updateNode(new te(e.toString(),t));return this._context.aliases.set(n.name,n),n}_type_decl(){if(this._check([He.tokens.ident,...He.texel_format,He.keywords.bool,He.keywords.f32,He.keywords.i32,He.keywords.u32])){const e=this._advance().toString();if(this._context.structs.has(e))return this._context.structs.get(e);if(this._context.aliases.has(e))return this._context.aliases.get(e).type;if(!this._getType(e)){const t=this._updateNode(new ie(e));return this._forwardTypeCount++,t}return this._updateNode(new ae(e))}let e=this._texture_sampler_types();if(e)return e;if(this._check(He.template_types)){let e=this._advance().toString(),t=null,n=null;this._match(He.tokens.less_than)&&(t=this._type_decl(),n=null,this._match(He.tokens.comma)&&(n=this._consume(He.access_mode,'Expected access_mode for pointer').toString()),this._consume(He.tokens.greater_than,'Expected \\'>\\' for type.'));return this._updateNode(new ce(e,t,n))}if(this._match(He.keywords.ptr)){let e=this._previous().toString();this._consume(He.tokens.less_than,'Expected \\'<\\' for pointer.');const t=this._consume(He.storage_class,'Expected storage_class for pointer');this._consume(He.tokens.comma,'Expected \\',\\' for pointer.');const n=this._type_decl();let s=null;this._match(He.tokens.comma)&&(s=this._consume(He.access_mode,'Expected access_mode for pointer').toString()),this._consume(He.tokens.greater_than,'Expected \\'>\\' for pointer.');return this._updateNode(new le(e,t.toString(),n,s))}const t=this._attribute();if(this._match(He.keywords.array)){let e=null,n=-1;const s=this._previous();let r=null;if(this._match(He.tokens.less_than)){e=this._type_decl(),this._context.aliases.has(e.name)&&(e=this._context.aliases.get(e.name).type);let t='';if(this._match(He.tokens.comma)){r=this._shift_expression();try{t=r.constEvaluate(this._exec).toString(),r=null}catch(e){t='1'}}this._consume(He.tokens.greater_than,'Expected \\'>\\' for array.'),n=t?parseInt(t):0}const a=this._updateNode(new ue(s.toString(),t,e,n));return r&&this._deferArrayCountEval.push({arrayType:a,countNode:r}),a}return null}_texture_sampler_types(){if(this._match(He.sampler_type))return this._updateNode(new he(this._previous().toString(),null,null));if(this._match(He.depth_texture_type))return this._updateNode(new he(this._previous().toString(),null,null));if(this._match(He.sampled_texture_type)||this._match(He.multisampled_texture_type)){const e=this._previous();this._consume(He.tokens.less_than,'Expected \\'<\\' for sampler type.');const t=this._type_decl();return this._consume(He.tokens.greater_than,'Expected \\'>\\' for sampler type.'),this._updateNode(new he(e.toString(),t,null))}if(this._match(He.storage_texture_type)){const e=this._previous();this._consume(He.tokens.less_than,'Expected \\'<\\' for sampler type.');const t=this._consume(He.texel_format,'Invalid texel format.').toString();this._consume(He.tokens.comma,'Expected \\',\\' after texel format.');const n=this._consume(He.access_mode,'Expected access mode for storage texture type.').toString();return this._consume(He.tokens.greater_than,'Expected \\'>\\' for sampler type.'),this._updateNode(new he(e.toString(),t,n))}return null}_attribute(){let e=[];for(;this._match(He.tokens.attr);){const t=this._consume(He.attribute_name,'Expected attribute name'),n=this._updateNode(new De(t.toString(),null));if(this._match(He.tokens.paren_left)){if(n.value=this._consume(He.literal_or_ident,'Expected attribute value').toString(),this._check(He.tokens.comma)){this._advance();do{const e=this._consume(He.literal_or_ident,'Expected attribute value').toString();n.value instanceof Array||(n.value=[n.value]),n.value.push(e)}while(this._match(He.tokens.comma))}this._consume(He.tokens.paren_right,'Expected \\')\\'')}e.push(n)}return 0==e.length?null:e}}class _t extends at{constructor(e){super(),e&&this.update(e)}update(e){const t=(new gt).parse(e);this.updateAST(t)}}class xt{get line(){return-1}}class yt extends xt{constructor(e){super(),this.node=e}get line(){return this.node.line}}class bt extends xt{constructor(e,t){super(),this.node=e,this.statement=t}get line(){return this.statement.line}}class vt extends xt{constructor(e){super(),this.id=e}}class wt extends xt{constructor(e){super(),this.id=e}}class kt extends xt{constructor(e,t){super(),this.id=e,this.node=t}get line(){return this.node.line}}class It extends xt{constructor(e,t,n){super(),this.id=e,this.condition=t,this.node=n}get line(){return this.node.line}}class Tt extends xt{constructor(e,t,n){super(),this.lineNo=-1,this.condition=e,this.position=t,this.lineNo=n}get line(){var e,t;return null!==(t=null===(e=this.condition)||void 0===e?void 0:e.line)&&void 0!==t?t:this.lineNo}}class St extends xt{constructor(e){super(),this.statements=[],this.statements=e}get line(){return this.statements.length>0?this.statements[0].line:-1}}class At{constructor(e,t){this.parent=null,this.commands=[],this.current=0,this.parentCallExpr=null,this.context=e,this.parent=null!=t?t:null}get isAtEnd(){return this.current>=this.commands.length}getNextCommand(){if(this.current>=this.commands.length)return null;const e=this.commands[this.current];return this.current++,e}getCurrentCommand(){return this.current>=this.commands.length?null:this.commands[this.current]}}class Et{constructor(){this.states=[]}get isEmpty(){return 0==this.states.length}get last(){var e;return null!==(e=this.states[this.states.length-1])&&void 0!==e?e:null}pop(){this.states.pop()}}class $t{constructor(e,t){this._runTimer=null,this.breakpoints=new Set,this.runStateCallback=null,this._code=e;const n=(new gt).parse(e);this._exec=new dt(n),this.runStateCallback=null!=t?t:null}getVariableValue(e){var t,n;const s=null!==(n=null===(t=this.context.getVariable(e))||void 0===t?void 0:t.value)&&void 0!==n?n:null;return null===s?null:s instanceof Be?s.value:s instanceof Me||s instanceof Ue?Array.from(s.data):(console.error(`Unsupported return variable type ${s.typeInfo.name}`),null)}reset(){this._exec=new dt(this._exec.ast),this.startDebug()}startDebug(){this._execStack=new Et;const e=this._createState(this._exec.ast,this._exec.context);this._execStack.states.push(e)}get context(){const e=this.currentState;return null===e?this._exec.context:e.context}get currentState(){for(;;){if(this._execStack.isEmpty)return null;let e=this._execStack.last;if(null===e)return null;if(e.isAtEnd){if(this._execStack.pop(),this._execStack.isEmpty)return null;e=this._execStack.last}return e}}get currentCommand(){for(;;){if(this._execStack.isEmpty)return null;let e=this._execStack.last;if(null===e)return null;if(e.isAtEnd){if(this._execStack.pop(),this._execStack.isEmpty)return null;e=this._execStack.last}const t=e.getCurrentCommand();if(null!==t)return t}}toggleBreakpoint(e){this.breakpoints.has(e)?this.breakpoints.delete(e):this.breakpoints.add(e)}clearBreakpoints(){this.breakpoints.clear()}get isRunning(){return null!==this._runTimer}run(){this.isRunning||(this._runTimer=setInterval(()=>{const e=this.currentCommand;if(e&&this.breakpoints.has(e.line))return clearInterval(this._runTimer),this._runTimer=null,void(null!==this.runStateCallback&&this.runStateCallback());this.stepNext(!0)||(clearInterval(this._runTimer),this._runTimer=null,null!==this.runStateCallback&&this.runStateCallback())},0),null!==this.runStateCallback&&this.runStateCallback())}pause(){null!==this._runTimer&&(clearInterval(this._runTimer),this._runTimer=null,null!==this.runStateCallback&&this.runStateCallback())}_setOverrides(e,t){for(const n in e){const s=e[n],r=this._exec.reflection.getOverrideInfo(n);null!==r?(null===r.type&&(r.type=this._exec.getTypeInfo('u32')),'u32'===r.type.name||'i32'===r.type.name||'f32'===r.type.name||'f16'===r.type.name?t.setVariable(n,new Be(s,r.type)):'bool'===r.type.name?t.setVariable(n,new Be(s?1:0,r.type)):'vec2'===r.type.name||'vec3'===r.type.name||'vec4'===r.type.name||'vec2f'===r.type.name||'vec3f'===r.type.name||'vec4f'===r.type.name||'vec2i'===r.type.name||'vec3i'===r.type.name||'vec4i'===r.type.name||'vec2u'===r.type.name||'vec3u'===r.type.name||'vec4u'===r.type.name||'vec2h'===r.type.name||'vec3h'===r.type.name||'vec4h'===r.type.name?t.setVariable(n,new Me(s,r.type)):console.error(`Invalid constant type for ${n}`)):console.error(`Override ${n} does not exist in the shader.`)}}debugWorkgroup(e,t,n,s,r){this._execStack=new Et;const a=this._exec.context;a.currentFunctionName=e,this._dispatchId=t,(r=null!=r?r:{}).constants&&this._setOverrides(r.constants,a),this._exec._execStatements(this._exec.ast,a);const i=a.getFunction(e);if(!i)return console.error(`Function ${e} not found`),!1;const o=this._exec.reflection.getFunctionInfo(e);if('number'==typeof n)n=[n,1,1];else{if(0===n.length)return console.error('Invalid dispatch count'),!1;1===n.length?n=[n[0],1,1]:2===n.length?n=[n[0],n[1],1]:n.length>3&&(n=[n[0],n[1],n[2]])}const c=n[2],l=n[1],u=n[0],h=this._exec.typeInfo.vec3u;a.setVariable('@num_workgroups',new Me(n,h));for(const e in s)for(const t in s[e]){const n=s[e][t];a.variables.forEach(s=>{var r;const a=s.node;if(null==a?void 0:a.attributes){let i=null,c=null;for(const e of a.attributes)'binding'===e.name?i=e.value:'group'===e.name&&(c=e.value);if(t==i&&e==c){let i=!1;for(const n of o.resources)if(n.name===s.name&&n.group===parseInt(e)&&n.binding===parseInt(t)){i=!0;break}if(i)if(void 0!==n.texture&&void 0!==n.descriptor){const e=new We(n.texture,this._exec.getTypeInfo(a.type),n.descriptor,null!==(r=n.texture.view)&&void 0!==r?r:null);s.value=e}else void 0!==n.uniform?s.value=new Pe(n.uniform,this._exec.getTypeInfo(a.type)):s.value=new Pe(n,this._exec.getTypeInfo(a.type))}}})}let f=!1;for(let e=0;e<c&&!f;++e)for(let t=0;t<l&&!f;++t)for(let n=0;n<u&&!f;++n)if(a.setVariable('@workgroup_id',new Me([n,t,e],h)),this._dispatchWorkgroup(i,[n,t,e],a)){f=!0;break}return f}_shouldExecuteNextCommand(){const e=this.currentCommand;if(null===e)return!1;if(e instanceof Tt){if(null===e.condition)return!0}else if(e instanceof vt||e instanceof wt)return!0;return!1}stepInto(){this.isRunning||this.stepNext(!0)}stepOver(){this.isRunning||this.stepNext(!1)}stepOut(){const e=this.currentState;if(null===e)return;const t=e.parent;this.isRunning&&(clearInterval(this._runTimer),this._runTimer=null),this._runTimer=setInterval(()=>{const e=this.currentCommand;if(e&&this.breakpoints.has(e.line))return clearInterval(this._runTimer),this._runTimer=null,void(null!==this.runStateCallback&&this.runStateCallback());this.stepNext(!0)||(clearInterval(this._runTimer),this._runTimer=null,null!==this.runStateCallback&&this.runStateCallback());this.currentState===t&&(clearInterval(this._runTimer),this._runTimer=null,null!==this.runStateCallback&&this.runStateCallback())},0),null!==this.runStateCallback&&this.runStateCallback()}stepNext(e=!0){if(!this._execStack){this._execStack=new Et;const e=this._createState(this._exec.ast,this._exec.context);this._execStack.states.push(e)}for(;;){if(this._execStack.isEmpty)return!1;let t=this._execStack.last;if(null===t)return!1;if(t.isAtEnd){if(this._execStack.pop(),this._execStack.isEmpty)return!1;t=this._execStack.last}const n=t.getNextCommand();if(null!==n){if(e&&n instanceof bt){const e=n.node,s=t.context.getFunction(e.name);if(!s)continue;const r=this._createState(s.node.body,t.context.clone(),t);for(let t=0;t<s.node.args.length;++t){const n=s.node.args[t],a=this._exec.evalExpression(e.args[t],r.context);r.context.createVariable(n.name,a,n)}if(r.parentCallExpr=e,this._execStack.states.push(r),r.context.currentFunctionName=s.name,this._shouldExecuteNextCommand())continue;return!0}if(n instanceof yt){const s=n.node;if(e&&s instanceof X){const e=t.context.getFunction(s.name);if(e){const n=this._createState(e.node.body,t.context.clone(),t);for(let t=0;t<e.node.args.length;++t){const r=e.node.args[t],a=this._exec.evalExpression(s.args[t],n.context);n.context.createVariable(r.name,a,r)}if(this._execStack.states.push(n),n.context.currentFunctionName=e.name,this._shouldExecuteNextCommand())continue;return!0}}const r=this._exec.execStatement(s,t.context);if(null!=r&&!(r instanceof Ve)){let e=t;for(;e;){if(e.parentCallExpr){e.parentCallExpr.setCachedReturnValue(r);break}e=e.parent}if(null===e&&console.error('Could not find CallExpr to store return value in'),this._shouldExecuteNextCommand())continue;return!0}}else{if(n instanceof vt)continue;if(n instanceof wt)continue;if(n instanceof kt){const e=n.id;for(;!this._execStack.isEmpty;){t=this._execStack.last;for(let n=t.commands.length-1;n>=0;--n){const s=t.commands[n];if(s instanceof vt&&s.id===e)return t.current=n+1,!0}this._execStack.pop()}return console.error('Continue statement used outside of a loop'),!1}if(n instanceof It){const e=n.id;if(n.condition){const e=this._exec.evalExpression(n.condition,t.context);if(!(e instanceof Be))return console.error('Condition must be a scalar'),!1;if(!e.value){if(this._shouldExecuteNextCommand())continue;return!0}}for(;!this._execStack.isEmpty;){t=this._execStack.last;for(let n=t.commands.length-1;n>=0;--n){const s=t.commands[n];if(s instanceof wt&&s.id===e)return t.current=n+1,!0}this._execStack.pop()}return console.error('Break statement used outside of a loop'),!1}if(n instanceof Tt){if(n.condition){const e=this._exec.evalExpression(n.condition,t.context);if(!(e instanceof Be))return console.error('Condition must be a scalar'),!1;if(e.value){if(this._shouldExecuteNextCommand())continue;return!0}}if(t.current=n.position,this._shouldExecuteNextCommand())continue;return!0}if(n instanceof St){const e=this._createState(n.statements,t.context.clone(),t);this._execStack.states.push(e);continue}}if(t.isAtEnd&&(this._execStack.pop(),this._execStack.isEmpty))return!1;if(!this._shouldExecuteNextCommand())return!0}}}_dispatchWorkgroup(e,t,n){const s=[1,1,1];for(const t of e.node.attributes)if('workgroup_size'===t.name)if(Array.isArray(t.value)){if(t.value.length>0){const e=n.getVariableValue(t.value[0]);s[0]=e instanceof Be?e.value:parseInt(t.value[0])}if(t.value.length>1){const e=n.getVariableValue(t.value[1]);s[1]=e instanceof Be?e.value:parseInt(t.value[1])}if(t.value.length>2){const e=n.getVariableValue(t.value[2]);s[2]=e instanceof Be?e.value:parseInt(t.value[2])}}else{const e=n.getVariableValue(t.value);e instanceof Be?s[0]=e.value:e instanceof Me?(s[0]=e.data[0],s[1]=e.data.length>1?e.data[1]:1,s[2]=e.data.length>2?e.data[2]:1):s[0]=parseInt(t.value)}const r=this._exec.typeInfo.vec3u,a=this._exec.typeInfo.u32;n.setVariable('@workgroup_size',new Me(s,r));const i=s[0],o=s[1],c=s[2];let l=!1;for(let e=0,u=0;e<c&&!l;++e)for(let c=0;c<o&&!l;++c)for(let o=0;o<i&&!l;++o,++u){const i=[o,c,e],h=[o+t[0]*s[0],c+t[1]*s[1],e+t[2]*s[2]];if(n.setVariable('@local_invocation_id',new Me(i,r)),n.setVariable('@global_invocation_id',new Me(h,r)),n.setVariable('@local_invocation_index',new Be(u,a)),h[0]===this._dispatchId[0]&&h[1]===this._dispatchId[1]&&h[2]===this._dispatchId[2]){l=!0;break}}return l&&this._dispatchExec(e,n),l}_dispatchExec(e,t){for(const n of e.node.args)for(const e of n.attributes)if('builtin'===e.name){const s=`@${e.value}`,r=t.getVariable(s);null!==r&&t.variables.set(n.name,r)}const n=this._createState(e.node.body,t);this._execStack.states.push(n)}_createState(e,t,n){const s=new At(t,null!=n?n:null);for(const t of e)if(t instanceof U||t instanceof F||t instanceof P||t instanceof G){const e=[];this._collectFunctionCalls(t.value,e);for(const n of e)s.commands.push(new bt(n,t));s.commands.push(new yt(t))}else if(t instanceof X){const e=[];for(const n of t.args)this._collectFunctionCalls(n,e);for(const n of e)s.commands.push(new bt(n,t));s.commands.push(new yt(t))}else if(t instanceof Y){const e=[];this._collectFunctionCalls(t.value,e);for(const n of e)s.commands.push(new bt(n,t));s.commands.push(new yt(t))}else if(t instanceof R)s.commands.push(new yt(t));else{if(t instanceof D){const e=new ct(t);s.context.functions.set(t.name,e);continue}if(t instanceof Q){const e=[];this._collectFunctionCalls(t.condition,e);for(const n of e)s.commands.push(new bt(n,t));let n=new Tt(t.condition,0,t.line);s.commands.push(n),t.body.length>0&&s.commands.push(new St(t.body));const r=new Tt(null,0,t.line);s.commands.push(r);for(const e of t.elseif){n.position=s.commands.length;const a=[];this._collectFunctionCalls(e.condition,a);for(const e of a)s.commands.push(new bt(e,t));n=new Tt(e.condition,0,e.line),s.commands.push(n),e.body.length>0&&s.commands.push(new St(e.body)),s.commands.push(r)}n.position=s.commands.length,t.else&&s.commands.push(new St(t.else)),r.position=s.commands.length}else if(t instanceof Z){const e=[];this._collectFunctionCalls(t.condition,e);for(const n of e)s.commands.push(new bt(n,t));let n=null;for(const e of t.cases){if(e instanceof Ee){n=e;break}if(e instanceof Ae)for(const t of e.selectors)if(t instanceof Se){n=e;break}}const r=[];for(const e of t.cases){if(e===n)continue;if(!(e instanceof Ae))continue;let a=null;for(const n of e.selectors){let e=new Ie('==',t.condition,n);a&&(e=new Ie('||',a,e)),a=e}const i=new Tt(a,0,e.line);s.commands.push(i),e.body.length>0&&s.commands.push(new St(e.body));const o=new Tt(null,0,e.line);r.push(o),s.commands.push(o),i.position=s.commands.length}n&&s.commands.push(new St(n.body)),s.commands.push(new wt(t.id));const a=s.commands.length;for(let e=0;e<r.length;++e)r[e].position=a}else if(t instanceof V){const e=[];s.commands.push(new vt(t.id)),this._collectFunctionCalls(t.condition,e);for(const n of e)s.commands.push(new bt(n,t));const n=new Tt(t.condition,0,t.line);s.commands.push(n);let r=t.line;t.body.length>0&&(s.commands.push(new St(t.body)),r=t.body[t.body.length-1].line),s.commands.push(new Tt(t.condition,0,r)),s.commands.push(new wt(t.id)),n.position=s.commands.length}else if(t instanceof B){t.init&&s.commands.push(new yt(t.init));let e=s.commands.length;null===t.increment&&s.commands.push(new vt(t.id));let n=null;if(t.condition){const e=[];this._collectFunctionCalls(t.condition,e);for(const n of e)s.commands.push(new bt(n,t));n=new Tt(t.condition,0,t.line),s.commands.push(n)}let r=t.line;t.body.length>0&&(s.commands.push(new St(t.body)),r=t.body[t.body.length-1].line),t.increment&&(s.commands.push(new vt(t.id)),s.commands.push(new yt(t.increment))),s.commands.push(new Tt(null,e,r)),s.commands.push(new wt(t.id)),n.position=s.commands.length}else if(t instanceof j){let e=s.commands.length;t.continuing||s.commands.push(new vt(t.id));let n=t.line;t.body.length>0&&(s.commands.push(new St(t.body)),n=t.body[t.body.length-1].line),s.commands.push(new Tt(null,e,n)),s.commands.push(new wt(t.id))}else t instanceof O?(s.commands.push(new vt(t.loopId)),s.commands.push(new St(t.body))):t instanceof re?s.commands.push(new kt(t.loopId,t)):t instanceof se?s.commands.push(new It(t.loopId,t.condition,t)):t instanceof N?s.commands.push(new yt(t)):t instanceof oe||console.error(`TODO: statement type ${t.constructor.name}`)}return s}_collectFunctionCalls(e,t){if(e instanceof me){if(e.args)for(const n of e.args)this._collectFunctionCalls(n,t);e.isBuiltin||t.push(e)}else if(e instanceof Ie)this._collectFunctionCalls(e.left,t),this._collectFunctionCalls(e.right,t);else if(e instanceof ke)this._collectFunctionCalls(e.right,t);else if(e instanceof de){if(e.args)for(const n of e.args)this._collectFunctionCalls(n,t)}else e instanceof ye?this._collectFunctionCalls(e.value,t):e instanceof ve?this._collectFunctionCalls(e.index,t):xe||console.error(`TODO: expression type ${e.constructor.name}`)}}export{te as Alias,c as AliasInfo,$e as Argument,f as ArgumentInfo,ve as ArrayIndex,s as ArrayInfo,ue as ArrayType,G as Assign,q as AssignOperator,De as Attribute,Ie as BinaryOperator,ye as BitcastExpr,se as Break,X as Call,me as CallExpr,Ae as Case,P as Const,_e as ConstExpr,re as Continue,O as Continuing,de as CreateExpr,Ne as Data,Ee as Default,Se as DefaultSelector,ee as Diagnostic,ne as Discard,Le as ElseIf,K as Enable,d as EntryFunctions,fe as Expression,B as For,ie as ForwardType,D as Function,p as FunctionInfo,Q as If,R as Increment,W as IncrementOperator,l as InputInfo,U as Let,xe as LiteralExpr,j as Loop,Ue as MatrixData,Ce as Member,t as MemberInfo,A as Node,we as Operator,u as OutputInfo,M as Override,h as OverrideInfo,Oe as PointerData,r as PointerInfo,le as PointerType,J as Requires,i as ResourceType,Y as Return,he as SamplerType,Be as ScalarData,C as Statement,N as StaticAssert,pe as StringExpr,oe as Struct,n as StructInfo,Z as Switch,Te as SwitchCase,a as TemplateInfo,ce as TemplateType,We as TextureData,ze as Token,z as TokenClass,qe as TokenType,He as TokenTypes,ae as Type,e as TypeInfo,be as TypecastExpr,Pe as TypedData,ke as UnaryOperator,F as Var,ge as VariableExpr,o as VariableInfo,Me as VectorData,Ve as VoidData,$t as WgslDebug,dt as WgslExec,gt as WgslParser,_t as WgslReflect,Re as WgslScanner,V as While,$ as _BlockEnd,E as _BlockStart};\n//# sourceMappingURL=wgsl_reflect.module.js.map\n","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { log } from '@luma.gl/core';\nimport { WgslReflect } from 'wgsl_reflect';\n/**\n * Parse a ShaderLayout from WGSL shader source code.\n * @param source WGSL source code (can contain both @vertex and @fragment entry points)\n * @returns\n */\nexport function getShaderLayoutFromWGSL(source) {\n    const shaderLayout = { attributes: [], bindings: [] };\n    let parsedWGSL;\n    try {\n        parsedWGSL = parseWGSL(source);\n    }\n    catch (error) {\n        log.error(error.message)();\n        return shaderLayout;\n    }\n    for (const uniform of parsedWGSL.uniforms) {\n        const members = [];\n        // @ts-expect-error\n        for (const attribute of uniform.type?.members || []) {\n            members.push({\n                name: attribute.name,\n                type: getType(attribute.type)\n            });\n        }\n        shaderLayout.bindings.push({\n            type: 'uniform',\n            name: uniform.name,\n            group: uniform.group,\n            location: uniform.binding,\n            // @ts-expect-error TODO - unused for now but needs fixing\n            members\n        });\n    }\n    for (const texture of parsedWGSL.textures) {\n        shaderLayout.bindings.push({\n            type: 'texture',\n            name: texture.name,\n            group: texture.group,\n            location: texture.binding\n        });\n    }\n    for (const sampler of parsedWGSL.samplers) {\n        shaderLayout.bindings.push({\n            type: 'sampler',\n            name: sampler.name,\n            group: sampler.group,\n            location: sampler.binding\n        });\n    }\n    const vertex = parsedWGSL.entry.vertex[0]; // \"main\"\n    // Vertex shader inputs\n    const attributeCount = vertex?.inputs.length || 0; // inputs to \"main\"\n    for (let i = 0; i < attributeCount; i++) {\n        const wgslAttribute = vertex.inputs[i];\n        // locationType can be \"builtin\"\n        if (wgslAttribute.locationType === 'location') {\n            const type = getType(wgslAttribute.type);\n            shaderLayout.attributes.push({\n                name: wgslAttribute.name,\n                location: Number(wgslAttribute.location),\n                type\n            });\n        }\n    }\n    return shaderLayout;\n}\n/** Get a valid shader attribute type string from a wgsl-reflect type */\nfunction getType(type) {\n    // @ts-expect-error WgslReflect type checks needed\n    return type?.format ? `${type.name}<${type.format.name}>` : type.name;\n}\nfunction parseWGSL(source) {\n    try {\n        return new WgslReflect(source);\n    }\n    catch (error) {\n        if (error instanceof Error) {\n            throw error;\n        }\n        let message = 'WGSL parse error';\n        if (typeof error === 'object' && error?.message) {\n            message += `: ${error.message} `;\n        }\n        if (typeof error === 'object' && error?.token) {\n            message += error.token.line || '';\n        }\n        throw new Error(message, { cause: error });\n    }\n}\n//# sourceMappingURL=get-shader-layout-wgsl.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/**\n * Calculate WebGL 64 bit float\n * @param a  - the input float number\n * @param out - the output array. If not supplied, a new array is created.\n * @param startIndex - the index in the output array to fill from. Default 0.\n * @returns - the fp64 representation of the input number\n */\nexport function fp64ify(a, out = [], startIndex = 0) {\n    const hiPart = Math.fround(a);\n    const loPart = a - hiPart;\n    out[startIndex] = hiPart;\n    out[startIndex + 1] = loPart;\n    return out;\n}\n/**\n * Calculate the low part of a WebGL 64 bit float\n * @param a the input float number\n * @returns the lower 32 bit of the number\n */\nexport function fp64LowPart(a) {\n    return a - Math.fround(a);\n}\n/**\n * Calculate WebGL 64 bit matrix (transposed \"Float64Array\")\n * @param matrix  the input matrix\n * @returns the fp64 representation of the input matrix\n */\nexport function fp64ifyMatrix4(matrix) {\n    // Transpose the projection matrix to column major for GLSL.\n    const matrixFP64 = new Float32Array(32);\n    for (let i = 0; i < 4; ++i) {\n        for (let j = 0; j < 4; ++j) {\n            const index = i * 4 + j;\n            fp64ify(matrix[j * 4 + i], matrixFP64, index * 2);\n        }\n    }\n    return matrixFP64;\n}\n//# sourceMappingURL=fp64-utils.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport const fp64arithmeticShader = /* glsl */ `\\\n\nuniform fp64arithmeticUniforms {\n  uniform float ONE;\n} fp64;\n\n/*\nAbout LUMA_FP64_CODE_ELIMINATION_WORKAROUND\n\nThe purpose of this workaround is to prevent shader compilers from\noptimizing away necessary arithmetic operations by swapping their sequences\nor transform the equation to some 'equivalent' form.\n\nThe method is to multiply an artifical variable, ONE, which will be known to\nthe compiler to be 1 only at runtime. The whole expression is then represented\nas a polynomial with respective to ONE. In the coefficients of all terms, only one a\nand one b should appear\n\nerr = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE\n*/\n\n// Divide float number to high and low floats to extend fraction bits\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float a_hi = t * fp64.ONE - (t - a);\n  float a_lo = a * fp64.ONE - a_hi;\n#else\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n#endif\n  return vec2(a_hi, a_lo);\n}\n\n// Divide float number again when high float uses too many fraction bits\nvec2 split2(vec2 a) {\n  vec2 b = split(a.x);\n  b.y += a.y;\n  return b;\n}\n\n// Special sum operation when a > b\nvec2 quickTwoSum(float a, float b) {\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float sum = (a + b) * fp64.ONE;\n  float err = b - (sum - a) * fp64.ONE;\n#else\n  float sum = a + b;\n  float err = b - (sum - a);\n#endif\n  return vec2(sum, err);\n}\n\n// General sum operation\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * fp64.ONE - a) * fp64.ONE;\n  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE + (b - v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float v = (s * fp64.ONE - a) * fp64.ONE;\n  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE - (b + v);\n#else\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n#endif\n  return vec2(s, err);\n}\n\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  float err = ((a_fp64.x * a_fp64.x - prod) * fp64.ONE + 2.0 * a_fp64.x *\n    a_fp64.y * fp64.ONE * fp64.ONE) + a_fp64.y * a_fp64.y * fp64.ONE * fp64.ONE * fp64.ONE;\n#else\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n#endif\n  return vec2(prod, err);\n}\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  // y component is for the error\n  prod.y += a.x * b.y;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  prod.y += a.y * b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  prod = split2(prod);\n#endif\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  vec2 yn = mul_fp64(a, vec2(xn, 0));\n#else\n  vec2 yn = a * xn;\n#endif\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * fp64.ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)\n  return sum_fp64(split(yn), prod);\n#else\n  return sum_fp64(vec2(yn, 0.0), prod);\n#endif\n}\n`;\n//# sourceMappingURL=fp64-arithmetic-glsl.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { fp64ify, fp64LowPart, fp64ifyMatrix4 } from \"../../../modules/math/fp64/fp64-utils.js\";\nimport { fp64arithmeticShader } from \"./fp64-arithmetic-glsl.js\";\nimport { fp64functionShader } from \"./fp64-functions-glsl.js\";\nconst defaultUniforms = {\n    // Used in LUMA_FP64_CODE_ELIMINATION_WORKAROUND\n    ONE: 1.0\n};\n/**\n * 64bit arithmetic: add, sub, mul, div (small subset of fp64 module)\n */\nexport const fp64arithmetic = {\n    name: 'fp64arithmetic',\n    vs: fp64arithmeticShader,\n    defaultUniforms,\n    uniformTypes: { ONE: 'f32' },\n    // Additional Functions\n    fp64ify,\n    fp64LowPart,\n    fp64ifyMatrix4\n};\n/**\n * Full 64 bit math library\n */\nexport const fp64 = {\n    name: 'fp64',\n    vs: fp64functionShader,\n    dependencies: [fp64arithmetic],\n    // Additional Functions\n    fp64ify,\n    fp64LowPart,\n    fp64ifyMatrix4\n};\nexport { fp64ify, fp64LowPart, fp64ifyMatrix4 };\n//# sourceMappingURL=fp64.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport const lightingUniformsGLSL = /* glsl */ `\\\nprecision highp int;\n\n// #if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\nstruct AmbientLight {\n  vec3 color;\n};\n\nstruct PointLight {\n  vec3 color;\n  vec3 position;\n  vec3 attenuation; // 2nd order x:Constant-y:Linear-z:Exponential\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform lightingUniforms {\n  int enabled;\n  int lightType;\n\n  int directionalLightCount;\n  int pointLightCount;\n\n  vec3 ambientColor;\n\n  vec3 lightColor0;\n  vec3 lightPosition0;\n  vec3 lightDirection0;\n  vec3 lightAttenuation0;\n\n  vec3 lightColor1;\n  vec3 lightPosition1;\n  vec3 lightDirection1;\n  vec3 lightAttenuation1;\n\n  vec3 lightColor2;\n  vec3 lightPosition2;\n  vec3 lightDirection2;\n  vec3 lightAttenuation2;\n} lighting;\n\nPointLight lighting_getPointLight(int index) {\n  switch (index) {\n    case 0:\n      return PointLight(lighting.lightColor0, lighting.lightPosition0, lighting.lightAttenuation0);\n    case 1:\n      return PointLight(lighting.lightColor1, lighting.lightPosition1, lighting.lightAttenuation1);\n    case 2:\n    default:  \n      return PointLight(lighting.lightColor2, lighting.lightPosition2, lighting.lightAttenuation2);\n  }\n}\n\nDirectionalLight lighting_getDirectionalLight(int index) {\n  switch (index) {\n    case 0:\n      return DirectionalLight(lighting.lightColor0, lighting.lightDirection0);\n    case 1:\n      return DirectionalLight(lighting.lightColor1, lighting.lightDirection1);\n    case 2:\n    default:   \n      return DirectionalLight(lighting.lightColor2, lighting.lightDirection2);\n  }\n} \n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n// #endif\n`;\n//# sourceMappingURL=lighting-glsl.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport const lightingUniformsWGSL = /* wgsl */ `\\\n// #if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\nstruct AmbientLight {\n  color: vec3<f32>,\n};\n\nstruct PointLight {\n  color: vec3<f32>,\n  position: vec3<f32>,\n  attenuation: vec3<f32>, // 2nd order x:Constant-y:Linear-z:Exponential\n};\n\nstruct DirectionalLight {\n  color: vec3<f32>,\n  direction: vec3<f32>,\n};\n\nstruct lightingUniforms {\n  enabled: i32,\n  pointLightCount: i32,\n  directionalLightCount: i32,\n\n  ambientColor: vec3<f32>,\n\n  // TODO - support multiple lights by uncommenting arrays below\n  lightType: i32,\n  lightColor: vec3<f32>,\n  lightDirection: vec3<f32>,\n  lightPosition: vec3<f32>,\n  lightAttenuation: vec3<f32>,\n\n  // AmbientLight ambientLight;\n  // PointLight pointLight[MAX_LIGHTS];\n  // DirectionalLight directionalLight[MAX_LIGHTS];\n};\n\n// Binding 0:1 is reserved for lighting (Note: could go into separate bind group as it is stable across draw calls)\n@binding(1) @group(0) var<uniform> lighting : lightingUniforms;\n\nfn lighting_getPointLight(index: i32) -> PointLight {\n  return PointLight(lighting.lightColor, lighting.lightPosition, lighting.lightAttenuation);\n}\n\nfn lighting_getDirectionalLight(index: i32) -> DirectionalLight {\n  return DirectionalLight(lighting.lightColor, lighting.lightDirection);\n} \n\nfn getPointLightAttenuation(pointLight: PointLight, distance: f32) -> f32 {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n`;\n//# sourceMappingURL=lighting-wgsl.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { log } from '@luma.gl/core';\nimport { lightingUniformsGLSL } from \"./lighting-glsl.js\";\nimport { lightingUniformsWGSL } from \"./lighting-wgsl.js\";\n/** Max number of supported lights (in addition to ambient light */\nconst MAX_LIGHTS = 5;\n/** Whether to divide */\nconst COLOR_FACTOR = 255.0;\n/** Shader type field for lights */\n// eslint-disable-next-line no-shadow\nexport var LIGHT_TYPE;\n(function (LIGHT_TYPE) {\n    LIGHT_TYPE[LIGHT_TYPE[\"POINT\"] = 0] = \"POINT\";\n    LIGHT_TYPE[LIGHT_TYPE[\"DIRECTIONAL\"] = 1] = \"DIRECTIONAL\";\n})(LIGHT_TYPE || (LIGHT_TYPE = {}));\n/** UBO ready lighting module */\nexport const lighting = {\n    props: {},\n    uniforms: {},\n    name: 'lighting',\n    defines: {\n    // MAX_LIGHTS\n    },\n    uniformTypes: {\n        enabled: 'i32',\n        lightType: 'i32',\n        directionalLightCount: 'i32',\n        pointLightCount: 'i32',\n        ambientColor: 'vec3<f32>',\n        // TODO define as arrays once we have appropriate uniformTypes\n        lightColor0: 'vec3<f32>',\n        lightPosition0: 'vec3<f32>',\n        // TODO - could combine direction and attenuation\n        lightDirection0: 'vec3<f32>',\n        lightAttenuation0: 'vec3<f32>',\n        lightColor1: 'vec3<f32>',\n        lightPosition1: 'vec3<f32>',\n        lightDirection1: 'vec3<f32>',\n        lightAttenuation1: 'vec3<f32>',\n        lightColor2: 'vec3<f32>',\n        lightPosition2: 'vec3<f32>',\n        lightDirection2: 'vec3<f32>',\n        lightAttenuation2: 'vec3<f32>'\n    },\n    defaultUniforms: {\n        enabled: 1,\n        lightType: LIGHT_TYPE.POINT,\n        directionalLightCount: 0,\n        pointLightCount: 0,\n        ambientColor: [0.1, 0.1, 0.1],\n        lightColor0: [1, 1, 1],\n        lightPosition0: [1, 1, 2],\n        // TODO - could combine direction and attenuation\n        lightDirection0: [1, 1, 1],\n        lightAttenuation0: [1, 0, 0],\n        lightColor1: [1, 1, 1],\n        lightPosition1: [1, 1, 2],\n        lightDirection1: [1, 1, 1],\n        lightAttenuation1: [1, 0, 0],\n        lightColor2: [1, 1, 1],\n        lightPosition2: [1, 1, 2],\n        lightDirection2: [1, 1, 1],\n        lightAttenuation2: [1, 0, 0]\n    },\n    source: lightingUniformsWGSL,\n    vs: lightingUniformsGLSL,\n    fs: lightingUniformsGLSL,\n    getUniforms\n};\nfunction getUniforms(props, prevUniforms = {}) {\n    // Copy props so we can modify\n    props = props ? { ...props } : props;\n    // TODO legacy\n    if (!props) {\n        return { ...lighting.defaultUniforms };\n    }\n    // Support for array of lights. Type of light is detected by type field\n    if (props.lights) {\n        props = { ...props, ...extractLightTypes(props.lights), lights: undefined };\n    }\n    // Specify lights separately\n    const { ambientLight, pointLights, directionalLights } = props || {};\n    const hasLights = ambientLight ||\n        (pointLights && pointLights.length > 0) ||\n        (directionalLights && directionalLights.length > 0);\n    // TODO - this may not be the correct decision\n    if (!hasLights) {\n        return { ...lighting.defaultUniforms, enabled: 0 };\n    }\n    const uniforms = {\n        ...lighting.defaultUniforms,\n        ...prevUniforms,\n        ...getLightSourceUniforms({ ambientLight, pointLights, directionalLights })\n    };\n    if (props.enabled !== undefined) {\n        uniforms.enabled = props.enabled ? 1 : 0;\n    }\n    return uniforms;\n}\nfunction getLightSourceUniforms({ ambientLight, pointLights = [], directionalLights = [] }) {\n    const lightSourceUniforms = {};\n    lightSourceUniforms.ambientColor = convertColor(ambientLight);\n    let currentLight = 0;\n    for (const pointLight of pointLights) {\n        lightSourceUniforms.lightType = LIGHT_TYPE.POINT;\n        const i = currentLight;\n        lightSourceUniforms[`lightColor${i}`] = convertColor(pointLight);\n        lightSourceUniforms[`lightPosition${i}`] = pointLight.position;\n        lightSourceUniforms[`lightAttenuation${i}`] = pointLight.attenuation || [1, 0, 0];\n        currentLight++;\n    }\n    for (const directionalLight of directionalLights) {\n        lightSourceUniforms.lightType = LIGHT_TYPE.DIRECTIONAL;\n        const i = currentLight;\n        lightSourceUniforms[`lightColor${i}`] = convertColor(directionalLight);\n        lightSourceUniforms[`lightDirection${i}`] = directionalLight.direction;\n        currentLight++;\n    }\n    if (currentLight > MAX_LIGHTS) {\n        log.warn('MAX_LIGHTS exceeded')();\n    }\n    lightSourceUniforms.directionalLightCount = directionalLights.length;\n    lightSourceUniforms.pointLightCount = pointLights.length;\n    return lightSourceUniforms;\n}\nfunction extractLightTypes(lights) {\n    const lightSources = { pointLights: [], directionalLights: [] };\n    for (const light of lights || []) {\n        switch (light.type) {\n            case 'ambient':\n                // Note: Only uses last ambient light\n                // TODO - add ambient light sources on CPU?\n                lightSources.ambientLight = light;\n                break;\n            case 'directional':\n                lightSources.directionalLights?.push(light);\n                break;\n            case 'point':\n                lightSources.pointLights?.push(light);\n                break;\n            default:\n            // eslint-disable-next-line\n            // console.warn(light.type);\n        }\n    }\n    return lightSources;\n}\n/** Take color 0-255 and intensity as input and output 0.0-1.0 range */\nfunction convertColor(colorDef = {}) {\n    const { color = [0, 0, 0], intensity = 1.0 } = colorDef;\n    return color.map(component => (component * intensity) / COLOR_FACTOR);\n}\n//# sourceMappingURL=lighting.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport const PHONG_VS = /* glsl */ `\\\nuniform phongMaterialUniforms {\n  uniform float ambient;\n  uniform float diffuse;\n  uniform float shininess;\n  uniform vec3  specularColor;\n} material;\n`;\nexport const PHONG_FS = /* glsl */ `\\\n#define MAX_LIGHTS 3\n\nuniform phongMaterialUniforms {\n  uniform float ambient;\n  uniform float diffuse;\n  uniform float shininess;\n  uniform vec3  specularColor;\n} material;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n  vec3 halfway_direction = normalize(light_direction + view_direction);\n  float lambertian = dot(light_direction, normal_worldspace);\n  float specular = 0.0;\n  if (lambertian > 0.0) {\n    float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n    specular = pow(specular_angle, material.shininess);\n  }\n  lambertian = max(lambertian, 0.0);\n  return (lambertian * material.diffuse * surfaceColor + specular * material.specularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting.enabled == 0) {\n    return lightColor;\n  }\n\n  vec3 view_direction = normalize(cameraPosition - position_worldspace);\n  lightColor = material.ambient * surfaceColor * lighting.ambientColor;\n\n  for (int i = 0; i < lighting.pointLightCount; i++) {\n    PointLight pointLight = lighting_getPointLight(i);\n    vec3 light_position_worldspace = pointLight.position;\n    vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n    float light_attenuation = getPointLightAttenuation(pointLight, distance(light_position_worldspace, position_worldspace));\n    lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color / light_attenuation);\n  }\n\n  int totalLights = min(MAX_LIGHTS, lighting.pointLightCount + lighting.directionalLightCount);\n  for (int i = lighting.pointLightCount; i < totalLights; i++) {\n    DirectionalLight directionalLight = lighting_getDirectionalLight(i);\n    lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n  }\n  \n  return lightColor;\n}\n`;\n//# sourceMappingURL=phong-shaders-glsl.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport const PHONG_WGSL = /* wgsl */ `\\\nstruct phongMaterialUniforms {\n  ambient: f32,\n  diffuse: f32,\n  shininess: f32,\n  specularColor: vec3<f32>,\n};\n\n@binding(2) @group(0) var<uniform> phongMaterial : phongMaterialUniforms;\n\nfn lighting_getLightColor(surfaceColor: vec3<f32>, light_direction: vec3<f32>, view_direction: vec3<f32>, normal_worldspace: vec3<f32>, color: vec3<f32>) -> vec3<f32> {\n  let halfway_direction: vec3<f32> = normalize(light_direction + view_direction);\n  var lambertian: f32 = dot(light_direction, normal_worldspace);\n  var specular: f32 = 0.0;\n  if (lambertian > 0.0) {\n    let specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n    specular = pow(specular_angle, phongMaterial.shininess);\n  }\n  lambertian = max(lambertian, 0.0);\n  return (lambertian * phongMaterial.diffuse * surfaceColor + specular * phongMaterial.specularColor) * color;\n}\n\nfn lighting_getLightColor2(surfaceColor: vec3<f32>, cameraPosition: vec3<f32>, position_worldspace: vec3<f32>, normal_worldspace: vec3<f32>) -> vec3<f32> {\n  var lightColor: vec3<f32> = surfaceColor;\n\n  if (lighting.enabled == 0) {\n    return lightColor;\n  }\n\n  let view_direction: vec3<f32> = normalize(cameraPosition - position_worldspace);\n  lightColor = phongMaterial.ambient * surfaceColor * lighting.ambientColor;\n\n  if (lighting.lightType == 0) {\n    let pointLight: PointLight  = lighting_getPointLight(0);\n    let light_position_worldspace: vec3<f32> = pointLight.position;\n    let light_direction: vec3<f32> = normalize(light_position_worldspace - position_worldspace);\n    lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n  } else if (lighting.lightType == 1) {\n    var directionalLight: DirectionalLight = lighting_getDirectionalLight(0);\n    lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n  }\n  \n  return lightColor;\n  /*\n  for (int i = 0; i < MAX_LIGHTS; i++) {\n    if (i >= lighting.pointLightCount) {\n      break;\n    }\n    PointLight pointLight = lighting.pointLight[i];\n    vec3 light_position_worldspace = pointLight.position;\n    vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n    lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n  }\n\n  for (int i = 0; i < MAX_LIGHTS; i++) {\n    if (i >= lighting.directionalLightCount) {\n      break;\n    }\n    DirectionalLight directionalLight = lighting.directionalLight[i];\n    lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n  }\n  */\n}\n\nfn lighting_getSpecularLightColor(cameraPosition: vec3<f32>, position_worldspace: vec3<f32>, normal_worldspace: vec3<f32>) -> vec3<f32>{\n  var lightColor = vec3<f32>(0, 0, 0);\n  let surfaceColor = vec3<f32>(0, 0, 0);\n\n  if (lighting.enabled == 0) {\n    let view_direction = normalize(cameraPosition - position_worldspace);\n\n    switch (lighting.lightType) {\n      case 0, default: {\n        let pointLight: PointLight = lighting_getPointLight(0);\n        let light_position_worldspace: vec3<f32> = pointLight.position;\n        let light_direction: vec3<f32> = normalize(light_position_worldspace - position_worldspace);\n        lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n      }\n      case 1: {\n        let directionalLight: DirectionalLight = lighting_getDirectionalLight(0);\n        lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n      }\n    }\n  }\n  return lightColor;\n}\n`;\n// TODO - handle multiple lights\n/**\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting.pointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_getPointLight(i);\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting.directionalLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_getDirectionalLight(i);\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n    /**\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting.pointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_getPointLight(i);\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting.directionalLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_getDirectionalLight(i);\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  */\n//# sourceMappingURL=phong-shaders-wgsl.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { lighting } from \"../lights/lighting.js\";\nimport { PHONG_VS, PHONG_FS } from \"../phong-material/phong-shaders-glsl.js\";\nimport { PHONG_WGSL } from \"../phong-material/phong-shaders-wgsl.js\";\n/** In Gouraud shading, color is calculated for each triangle vertex normal, and then color is interpolated colors across the triangle */\nexport const gouraudMaterial = {\n    props: {},\n    name: 'gouraudMaterial',\n    // Note these are switched between phong and gouraud\n    vs: PHONG_FS.replace('phongMaterial', 'gouraudMaterial'),\n    fs: PHONG_VS.replace('phongMaterial', 'gouraudMaterial'),\n    source: PHONG_WGSL.replaceAll('phongMaterial', 'gouraudMaterial'),\n    defines: {\n        LIGHTING_VERTEX: true\n    },\n    dependencies: [lighting],\n    uniformTypes: {\n        ambient: 'f32',\n        diffuse: 'f32',\n        shininess: 'f32',\n        specularColor: 'vec3<f32>'\n    },\n    defaultUniforms: {\n        ambient: 0.35,\n        diffuse: 0.6,\n        shininess: 32,\n        specularColor: [0.15, 0.15, 0.15]\n    },\n    getUniforms(props) {\n        const uniforms = { ...props };\n        if (uniforms.specularColor) {\n            uniforms.specularColor = uniforms.specularColor.map(x => x / 255);\n        }\n        return { ...gouraudMaterial.defaultUniforms, ...uniforms };\n    }\n};\n//# sourceMappingURL=gouraud-material.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { lighting } from \"../lights/lighting.js\";\nimport { PHONG_WGSL } from \"./phong-shaders-wgsl.js\";\nimport { PHONG_VS, PHONG_FS } from \"./phong-shaders-glsl.js\";\n/** In Phong shading, the normal vector is linearly interpolated across the surface of the polygon from the polygon's vertex normals. */\nexport const phongMaterial = {\n    name: 'phongMaterial',\n    dependencies: [lighting],\n    // Note these are switched between phong and gouraud\n    source: PHONG_WGSL,\n    vs: PHONG_VS,\n    fs: PHONG_FS,\n    defines: {\n        LIGHTING_FRAGMENT: true\n    },\n    uniformTypes: {\n        ambient: 'f32',\n        diffuse: 'f32',\n        shininess: 'f32',\n        specularColor: 'vec3<f32>'\n    },\n    defaultUniforms: {\n        ambient: 0.35,\n        diffuse: 0.6,\n        shininess: 32,\n        specularColor: [0.15, 0.15, 0.15]\n    },\n    getUniforms(props) {\n        const uniforms = { ...props };\n        if (uniforms.specularColor) {\n            uniforms.specularColor = uniforms.specularColor.map(x => x / 255);\n        }\n        return { ...phongMaterial.defaultUniforms, ...uniforms };\n    }\n};\n//# sourceMappingURL=phong-material.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/**\n * Projection utils\n * TODO: move to Viewport class?\n */\nimport { COORDINATE_SYSTEM } from \"../../lib/constants.js\";\nimport { getOffsetOrigin } from \"./viewport-uniforms.js\";\nimport WebMercatorViewport from \"../../viewports/web-mercator-viewport.js\";\nimport { vec3, vec4 } from '@math.gl/core';\nimport { addMetersToLngLat } from '@math.gl/web-mercator';\nconst DEFAULT_COORDINATE_ORIGIN = [0, 0, 0];\n// In project.glsl, offset modes calculate z differently from LNG_LAT mode.\n// offset modes apply the y adjustment (unitsPerMeter2) when projecting z\n// LNG_LAT mode only use the linear scale.\nfunction lngLatZToWorldPosition(lngLatZ, viewport, offsetMode = false) {\n    const p = viewport.projectPosition(lngLatZ);\n    // TODO - avoid using instanceof\n    if (offsetMode && viewport instanceof WebMercatorViewport) {\n        const [longitude, latitude, z = 0] = lngLatZ;\n        const distanceScales = viewport.getDistanceScales([longitude, latitude]);\n        p[2] = z * distanceScales.unitsPerMeter[2];\n    }\n    return p;\n}\nfunction normalizeParameters(opts) {\n    const { viewport, modelMatrix, coordinateOrigin } = opts;\n    let { coordinateSystem, fromCoordinateSystem, fromCoordinateOrigin } = opts;\n    if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n        coordinateSystem = viewport.isGeospatial\n            ? COORDINATE_SYSTEM.LNGLAT\n            : COORDINATE_SYSTEM.CARTESIAN;\n    }\n    if (fromCoordinateSystem === undefined) {\n        fromCoordinateSystem = coordinateSystem;\n    }\n    if (fromCoordinateOrigin === undefined) {\n        fromCoordinateOrigin = coordinateOrigin;\n    }\n    return {\n        viewport,\n        coordinateSystem,\n        coordinateOrigin,\n        modelMatrix,\n        fromCoordinateSystem,\n        fromCoordinateOrigin\n    };\n}\n/** Get the common space position from world coordinates in the given coordinate system */\nexport function getWorldPosition(position, { viewport, modelMatrix, coordinateSystem, coordinateOrigin, offsetMode }) {\n    let [x, y, z = 0] = position;\n    if (modelMatrix) {\n        [x, y, z] = vec4.transformMat4([], [x, y, z, 1.0], modelMatrix);\n    }\n    switch (coordinateSystem) {\n        case COORDINATE_SYSTEM.LNGLAT:\n            return lngLatZToWorldPosition([x, y, z], viewport, offsetMode);\n        case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n            return lngLatZToWorldPosition([x + coordinateOrigin[0], y + coordinateOrigin[1], z + (coordinateOrigin[2] || 0)], viewport, offsetMode);\n        case COORDINATE_SYSTEM.METER_OFFSETS:\n            return lngLatZToWorldPosition(addMetersToLngLat(coordinateOrigin, [x, y, z]), viewport, offsetMode);\n        case COORDINATE_SYSTEM.CARTESIAN:\n        default:\n            return viewport.isGeospatial\n                ? [x + coordinateOrigin[0], y + coordinateOrigin[1], z + coordinateOrigin[2]]\n                : viewport.projectPosition([x, y, z]);\n    }\n}\n/**\n * Equivalent to project_position in project.glsl\n * projects a user supplied position to world position directly with or without\n * a reference coordinate system\n */\nexport function projectPosition(position, params) {\n    const { viewport, coordinateSystem, coordinateOrigin, modelMatrix, fromCoordinateSystem, fromCoordinateOrigin } = normalizeParameters(params);\n    const { autoOffset = true } = params;\n    const { geospatialOrigin = DEFAULT_COORDINATE_ORIGIN, shaderCoordinateOrigin = DEFAULT_COORDINATE_ORIGIN, offsetMode = false } = autoOffset ? getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin) : {};\n    const worldPosition = getWorldPosition(position, {\n        viewport,\n        modelMatrix,\n        coordinateSystem: fromCoordinateSystem,\n        coordinateOrigin: fromCoordinateOrigin,\n        offsetMode\n    });\n    if (offsetMode) {\n        const positionCommonSpace = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n        vec3.sub(worldPosition, worldPosition, positionCommonSpace);\n    }\n    return worldPosition;\n}\n//# sourceMappingURL=project-functions.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst uidCounters = {};\n/**\n * Returns a UID.\n * @param id= - Identifier base name\n * @return uid\n **/\nexport function uid(id = 'id') {\n    uidCounters[id] = uidCounters[id] || 1;\n    const count = uidCounters[id]++;\n    return `${id}-${count}`;\n}\n//# sourceMappingURL=uid.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Buffer, getVertexFormatFromAttribute } from '@luma.gl/core';\nimport { uid } from \"../utils/uid.js\";\nexport class GPUGeometry {\n    id;\n    userData = {};\n    /** Determines how vertices are read from the 'vertex' attributes */\n    topology;\n    bufferLayout = [];\n    vertexCount;\n    indices;\n    attributes;\n    constructor(props) {\n        this.id = props.id || uid('geometry');\n        this.topology = props.topology;\n        this.indices = props.indices || null;\n        this.attributes = props.attributes;\n        this.vertexCount = props.vertexCount;\n        this.bufferLayout = props.bufferLayout || [];\n        if (this.indices) {\n            if (!(this.indices.usage & Buffer.INDEX)) {\n                throw new Error('Index buffer must have INDEX usage');\n            }\n        }\n    }\n    destroy() {\n        this.indices?.destroy();\n        for (const attribute of Object.values(this.attributes)) {\n            attribute.destroy();\n        }\n    }\n    getVertexCount() {\n        return this.vertexCount;\n    }\n    getAttributes() {\n        return this.attributes;\n    }\n    getIndexes() {\n        return this.indices || null;\n    }\n    _calculateVertexCount(positions) {\n        // Assume that positions is a fully packed float32x3 buffer\n        const vertexCount = positions.byteLength / 12;\n        return vertexCount;\n    }\n}\nexport function makeGPUGeometry(device, geometry) {\n    if (geometry instanceof GPUGeometry) {\n        return geometry;\n    }\n    const indices = getIndexBufferFromGeometry(device, geometry);\n    const { attributes, bufferLayout } = getAttributeBuffersFromGeometry(device, geometry);\n    return new GPUGeometry({\n        topology: geometry.topology || 'triangle-list',\n        bufferLayout,\n        vertexCount: geometry.vertexCount,\n        indices,\n        attributes\n    });\n}\nexport function getIndexBufferFromGeometry(device, geometry) {\n    if (!geometry.indices) {\n        return undefined;\n    }\n    const data = geometry.indices.value;\n    return device.createBuffer({ usage: Buffer.INDEX, data });\n}\nexport function getAttributeBuffersFromGeometry(device, geometry) {\n    const bufferLayout = [];\n    const attributes = {};\n    for (const [attributeName, attribute] of Object.entries(geometry.attributes)) {\n        let name = attributeName;\n        // TODO Map some GLTF attribute names (is this still needed?)\n        switch (attributeName) {\n            case 'POSITION':\n                name = 'positions';\n                break;\n            case 'NORMAL':\n                name = 'normals';\n                break;\n            case 'TEXCOORD_0':\n                name = 'texCoords';\n                break;\n            case 'COLOR_0':\n                name = 'colors';\n                break;\n        }\n        if (attribute) {\n            attributes[name] = device.createBuffer({\n                data: attribute.value,\n                id: `${attributeName}-buffer`\n            });\n            const { value, size, normalized } = attribute;\n            // @ts-expect-error\n            bufferLayout.push({ name, format: getVertexFormatFromAttribute(value, size, normalized) });\n        }\n    }\n    const vertexCount = geometry._calculateVertexCount(geometry.attributes, geometry.indices);\n    return { attributes, bufferLayout, vertexCount };\n}\n//# sourceMappingURL=gpu-geometry.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { RenderPipeline, ComputePipeline, log } from '@luma.gl/core';\nimport { uid } from \"../utils/uid.js\";\n/**\n * Efficiently creates / caches pipelines\n */\nexport class PipelineFactory {\n    static defaultProps = { ...RenderPipeline.defaultProps };\n    /** Get the singleton default pipeline factory for the specified device */\n    static getDefaultPipelineFactory(device) {\n        device._lumaData['defaultPipelineFactory'] =\n            device._lumaData['defaultPipelineFactory'] || new PipelineFactory(device);\n        return device._lumaData['defaultPipelineFactory'];\n    }\n    device;\n    cachingEnabled;\n    destroyPolicy;\n    debug;\n    _hashCounter = 0;\n    _hashes = {};\n    _renderPipelineCache = {};\n    _computePipelineCache = {};\n    get [Symbol.toStringTag]() {\n        return 'PipelineFactory';\n    }\n    toString() {\n        return `PipelineFactory(${this.device.id})`;\n    }\n    constructor(device) {\n        this.device = device;\n        this.cachingEnabled = device.props._cachePipelines;\n        this.destroyPolicy = device.props._cacheDestroyPolicy;\n        this.debug = device.props.debugFactories;\n    }\n    /** Return a RenderPipeline matching supplied props. Reuses an equivalent pipeline if already created. */\n    createRenderPipeline(props) {\n        if (!this.cachingEnabled) {\n            return this.device.createRenderPipeline(props);\n        }\n        const allProps = { ...RenderPipeline.defaultProps, ...props };\n        const cache = this._renderPipelineCache;\n        const hash = this._hashRenderPipeline(allProps);\n        let pipeline = cache[hash]?.pipeline;\n        if (!pipeline) {\n            pipeline = this.device.createRenderPipeline({\n                ...allProps,\n                id: allProps.id ? `${allProps.id}-cached` : uid('unnamed-cached')\n            });\n            pipeline.hash = hash;\n            cache[hash] = { pipeline, useCount: 1 };\n            if (this.debug) {\n                log.log(3, `${this}: ${pipeline} created, count=${cache[hash].useCount}`)();\n            }\n        }\n        else {\n            cache[hash].useCount++;\n            if (this.debug) {\n                log.log(3, `${this}: ${cache[hash].pipeline} reused, count=${cache[hash].useCount}, (id=${props.id})`)();\n            }\n        }\n        return pipeline;\n    }\n    /** Return a ComputePipeline matching supplied props. Reuses an equivalent pipeline if already created. */\n    createComputePipeline(props) {\n        if (!this.cachingEnabled) {\n            return this.device.createComputePipeline(props);\n        }\n        const allProps = { ...ComputePipeline.defaultProps, ...props };\n        const cache = this._computePipelineCache;\n        const hash = this._hashComputePipeline(allProps);\n        let pipeline = cache[hash]?.pipeline;\n        if (!pipeline) {\n            pipeline = this.device.createComputePipeline({\n                ...allProps,\n                id: allProps.id ? `${allProps.id}-cached` : undefined\n            });\n            pipeline.hash = hash;\n            cache[hash] = { pipeline, useCount: 1 };\n            if (this.debug) {\n                log.log(3, `${this}: ${pipeline} created, count=${cache[hash].useCount}`)();\n            }\n        }\n        else {\n            cache[hash].useCount++;\n            if (this.debug) {\n                log.log(3, `${this}: ${cache[hash].pipeline} reused, count=${cache[hash].useCount}, (id=${props.id})`)();\n            }\n        }\n        return pipeline;\n    }\n    release(pipeline) {\n        if (!this.cachingEnabled) {\n            pipeline.destroy();\n            return;\n        }\n        const cache = this._getCache(pipeline);\n        const hash = pipeline.hash;\n        cache[hash].useCount--;\n        if (cache[hash].useCount === 0) {\n            this._destroyPipeline(pipeline);\n            if (this.debug) {\n                log.log(3, `${this}: ${pipeline} released and destroyed`)();\n            }\n        }\n        else if (cache[hash].useCount < 0) {\n            log.error(`${this}: ${pipeline} released, useCount < 0, resetting`)();\n            cache[hash].useCount = 0;\n        }\n        else if (this.debug) {\n            log.log(3, `${this}: ${pipeline} released, count=${cache[hash].useCount}`)();\n        }\n    }\n    // PRIVATE\n    /** Destroy a cached pipeline, removing it from the cache (depending on destroy policy) */\n    _destroyPipeline(pipeline) {\n        const cache = this._getCache(pipeline);\n        switch (this.destroyPolicy) {\n            case 'never':\n                return false;\n            case 'unused':\n                delete cache[pipeline.hash];\n                pipeline.destroy();\n                return true;\n        }\n    }\n    /** Get the appropriate cache for the type of pipeline */\n    _getCache(pipeline) {\n        let cache;\n        if (pipeline instanceof ComputePipeline) {\n            cache = this._computePipelineCache;\n        }\n        if (pipeline instanceof RenderPipeline) {\n            cache = this._renderPipelineCache;\n        }\n        if (!cache) {\n            throw new Error(`${this}`);\n        }\n        if (!cache[pipeline.hash]) {\n            throw new Error(`${this}: ${pipeline} matched incorrect entry`);\n        }\n        return cache;\n    }\n    /** Calculate a hash based on all the inputs for a compute pipeline */\n    _hashComputePipeline(props) {\n        const { type } = this.device;\n        const shaderHash = this._getHash(props.shader.source);\n        return `${type}/C/${shaderHash}`;\n    }\n    /** Calculate a hash based on all the inputs for a render pipeline */\n    _hashRenderPipeline(props) {\n        const vsHash = props.vs ? this._getHash(props.vs.source) : 0;\n        const fsHash = props.fs ? this._getHash(props.fs.source) : 0;\n        // WebGL specific\n        // const {varyings = [], bufferMode = {}} = props;\n        // const varyingHashes = varyings.map((v) => this._getHash(v));\n        const varyingHash = '-'; // `${varyingHashes.join('/')}B${bufferMode}`\n        const bufferLayoutHash = this._getHash(JSON.stringify(props.bufferLayout));\n        const { type } = this.device;\n        switch (type) {\n            case 'webgl':\n                // WebGL is more dynamic\n                return `${type}/R/${vsHash}/${fsHash}V${varyingHash}BL${bufferLayoutHash}`;\n            case 'webgpu':\n            default:\n                // On WebGPU we need to rebuild the pipeline if topology, parameters or bufferLayout change\n                const parameterHash = this._getHash(JSON.stringify(props.parameters));\n                // TODO - Can json.stringify() generate different strings for equivalent objects if order of params is different?\n                // create a deepHash() to deduplicate?\n                return `${type}/R/${vsHash}/${fsHash}V${varyingHash}T${props.topology}P${parameterHash}BL${bufferLayoutHash}`;\n        }\n    }\n    _getHash(key) {\n        if (this._hashes[key] === undefined) {\n            this._hashes[key] = this._hashCounter++;\n        }\n        return this._hashes[key];\n    }\n}\n//# sourceMappingURL=pipeline-factory.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Shader, log } from '@luma.gl/core';\n/** Manages a cached pool of Shaders for reuse. */\nexport class ShaderFactory {\n    static defaultProps = { ...Shader.defaultProps };\n    /** Returns the default ShaderFactory for the given {@link Device}, creating one if necessary. */\n    static getDefaultShaderFactory(device) {\n        device._lumaData['defaultShaderFactory'] ||= new ShaderFactory(device);\n        return device._lumaData['defaultShaderFactory'];\n    }\n    device;\n    cachingEnabled;\n    destroyPolicy;\n    debug;\n    _cache = {};\n    get [Symbol.toStringTag]() {\n        return 'ShaderFactory';\n    }\n    toString() {\n        return `${this[Symbol.toStringTag]}(${this.device.id})`;\n    }\n    /** @internal */\n    constructor(device) {\n        this.device = device;\n        this.cachingEnabled = device.props._cacheShaders;\n        this.destroyPolicy = device.props._cacheDestroyPolicy;\n        this.debug = true; // device.props.debugFactories;\n    }\n    /** Requests a {@link Shader} from the cache, creating a new Shader only if necessary. */\n    createShader(props) {\n        if (!this.cachingEnabled) {\n            return this.device.createShader(props);\n        }\n        const key = this._hashShader(props);\n        let cacheEntry = this._cache[key];\n        if (!cacheEntry) {\n            const shader = this.device.createShader({\n                ...props,\n                id: props.id ? `${props.id}-cached` : undefined\n            });\n            this._cache[key] = cacheEntry = { shader, useCount: 1 };\n            if (this.debug) {\n                log.log(3, `${this}: Created new shader ${shader.id}`)();\n            }\n        }\n        else {\n            cacheEntry.useCount++;\n            if (this.debug) {\n                log.log(3, `${this}: Reusing shader ${cacheEntry.shader.id} count=${cacheEntry.useCount}`)();\n            }\n        }\n        return cacheEntry.shader;\n    }\n    /** Releases a previously-requested {@link Shader}, destroying it if no users remain. */\n    release(shader) {\n        if (!this.cachingEnabled) {\n            shader.destroy();\n            return;\n        }\n        const key = this._hashShader(shader);\n        const cacheEntry = this._cache[key];\n        if (cacheEntry) {\n            cacheEntry.useCount--;\n            if (cacheEntry.useCount === 0) {\n                if (this.destroyPolicy === 'unused') {\n                    delete this._cache[key];\n                    cacheEntry.shader.destroy();\n                    if (this.debug) {\n                        log.log(3, `${this}: Releasing shader ${shader.id}, destroyed`)();\n                    }\n                }\n            }\n            else if (cacheEntry.useCount < 0) {\n                throw new Error(`ShaderFactory: Shader ${shader.id} released too many times`);\n            }\n            else if (this.debug) {\n                log.log(3, `${this}: Releasing shader ${shader.id} count=${cacheEntry.useCount}`)();\n            }\n        }\n    }\n    // PRIVATE\n    _hashShader(value) {\n        return `${value.stage}:${value.source}`;\n    }\n}\n//# sourceMappingURL=shader-factory.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/**\n * Extracts a table suitable for `console.table()` from a shader layout to assist in debugging.\n * @param layout shader layout\n * @param name app should provide the most meaningful name, usually the model or pipeline name / id.\n * @returns\n */\nexport function getDebugTableForShaderLayout(layout, name) {\n    const table = {};\n    const header = 'Values'; // '`Shader Layout for ${name}`;\n    if (layout.attributes.length === 0 && !layout.varyings?.length) {\n        return { 'No attributes or varyings': { [header]: 'N/A' } };\n    }\n    for (const attributeDeclaration of layout.attributes) {\n        if (attributeDeclaration) {\n            const glslDeclaration = `${attributeDeclaration.location} ${attributeDeclaration.name}: ${attributeDeclaration.type}`;\n            table[`in ${glslDeclaration}`] = { [header]: attributeDeclaration.stepMode || 'vertex' };\n        }\n    }\n    for (const varyingDeclaration of layout.varyings || []) {\n        const glslDeclaration = `${varyingDeclaration.location} ${varyingDeclaration.name}`;\n        table[`out ${glslDeclaration}`] = { [header]: JSON.stringify(varyingDeclaration) };\n    }\n    return table;\n}\n//# sourceMappingURL=debug-shader-layout.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// import {copyTextureToImage} from '../debug/copy-texture-to-image';\n/** Only works with 1st device? */\nlet canvas = null;\nlet ctx = null;\n// let targetImage: HTMLImageElement | null = null;\n/** Debug utility to draw FBO contents onto screen */\n// eslint-disable-next-line\nexport function debugFramebuffer(fbo, { id, minimap, opaque, top = '0', left = '0', rgbaScale = 1 }) {\n    if (!canvas) {\n        canvas = document.createElement('canvas');\n        canvas.id = id;\n        canvas.title = id;\n        canvas.style.zIndex = '100';\n        canvas.style.position = 'absolute';\n        canvas.style.top = top; // \n        canvas.style.left = left; // \n        canvas.style.border = 'blue 5px solid';\n        canvas.style.transform = 'scaleY(-1)';\n        document.body.appendChild(canvas);\n        ctx = canvas.getContext('2d');\n        // targetImage = new Image();\n    }\n    // const canvasHeight = (minimap ? 2 : 1) * fbo.height;\n    if (canvas.width !== fbo.width || canvas.height !== fbo.height) {\n        canvas.width = fbo.width / 2;\n        canvas.height = fbo.height / 2;\n        canvas.style.width = '400px';\n        canvas.style.height = '400px';\n    }\n    // const image = copyTextureToImage(fbo, {targetMaxHeight: 100, targetImage});\n    // ctx.drawImage(image, 0, 0);\n    const color = fbo.device.readPixelsToArrayWebGL(fbo);\n    const imageData = ctx?.createImageData(fbo.width, fbo.height);\n    if (imageData) {\n        // Full map\n        const offset = 0;\n        // if (color.some((v) => v > 0)) {\n        //   console.error('THERE IS NON-ZERO DATA IN THE FBO!');\n        // }\n        for (let i = 0; i < color.length; i += 4) {\n            imageData.data[offset + i + 0] = color[i + 0] * rgbaScale;\n            imageData.data[offset + i + 1] = color[i + 1] * rgbaScale;\n            imageData.data[offset + i + 2] = color[i + 2] * rgbaScale;\n            imageData.data[offset + i + 3] = opaque ? 255 : color[i + 3] * rgbaScale;\n        }\n        ctx?.putImageData(imageData, 0, 0);\n    }\n}\n//# sourceMappingURL=debug-framebuffer.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/**\n * Fast partial deep equal for prop.\n *\n * @param a Prop\n * @param b Prop to compare against `a`\n * @param depth Depth to which to recurse in nested Objects/Arrays. Use 0 (default) for shallow comparison, -1 for infinite depth\n */\n/* eslint-disable complexity */\nexport function deepEqual(a, b, depth) {\n    if (a === b) {\n        return true;\n    }\n    if (!depth || !a || !b) {\n        return false;\n    }\n    if (Array.isArray(a)) {\n        if (!Array.isArray(b) || a.length !== b.length) {\n            return false;\n        }\n        for (let i = 0; i < a.length; i++) {\n            if (!deepEqual(a[i], b[i], depth - 1)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    if (Array.isArray(b)) {\n        return false;\n    }\n    if (typeof a === 'object' && typeof b === 'object') {\n        const aKeys = Object.keys(a);\n        const bKeys = Object.keys(b);\n        if (aKeys.length !== bKeys.length) {\n            return false;\n        }\n        for (const key of aKeys) {\n            if (!b.hasOwnProperty(key)) {\n                return false;\n            }\n            if (!deepEqual(a[key], b[key], depth - 1)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n}\n//# sourceMappingURL=deep-equal.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { log } from '@luma.gl/core';\n/** BufferLayoutHelper is a helper class that should not be used directly by applications */\nexport class BufferLayoutHelper {\n    bufferLayouts;\n    constructor(bufferLayouts) {\n        this.bufferLayouts = bufferLayouts;\n    }\n    getBufferLayout(name) {\n        return this.bufferLayouts.find(layout => layout.name === name) || null;\n    }\n    /** Get attribute names from a BufferLayout */\n    getAttributeNamesForBuffer(bufferLayout) {\n        return bufferLayout.attributes\n            ? bufferLayout.attributes?.map(layout => layout.attribute)\n            : [bufferLayout.name];\n    }\n    mergeBufferLayouts(bufferLayouts1, bufferLayouts2) {\n        const mergedLayouts = [...bufferLayouts1];\n        for (const attribute of bufferLayouts2) {\n            const index = mergedLayouts.findIndex(attribute2 => attribute2.name === attribute.name);\n            if (index < 0) {\n                mergedLayouts.push(attribute);\n            }\n            else {\n                mergedLayouts[index] = attribute;\n            }\n        }\n        return mergedLayouts;\n    }\n    getBufferIndex(bufferName) {\n        const bufferIndex = this.bufferLayouts.findIndex(layout => layout.name === bufferName);\n        if (bufferIndex === -1) {\n            log.warn(`BufferLayout: Missing buffer for \"${bufferName}\".`)();\n        }\n        return bufferIndex;\n    }\n}\n//# sourceMappingURL=buffer-layout-helper.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport function sortedBufferLayoutByShaderSourceLocations(shaderLayout, bufferLayout) {\n    const shaderLayoutMap = Object.fromEntries(shaderLayout.attributes.map(attr => [attr.name, attr.location]));\n    const sortedLayout = bufferLayout.slice();\n    sortedLayout.sort((a, b) => {\n        const attributeNamesA = a.attributes ? a.attributes.map(attr => attr.attribute) : [a.name];\n        const attributeNamesB = b.attributes ? b.attributes.map(attr => attr.attribute) : [b.name];\n        const minLocationA = Math.min(...attributeNamesA.map(name => shaderLayoutMap[name]));\n        const minLocationB = Math.min(...attributeNamesB.map(name => shaderLayoutMap[name]));\n        return minLocationA - minLocationB;\n    });\n    return sortedLayout;\n}\n//# sourceMappingURL=buffer-layout-order.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/**\n * Check is an array is a typed array\n * @param value value to be tested\n * @returns input with type narrowed to TypedArray, or null\n */\nexport function isTypedArray(value) {\n    return ArrayBuffer.isView(value) && !(value instanceof DataView);\n}\n/**\n * Check is an array is an array of numbers)\n * @param value value to be tested\n * @returns input with type narrowed to NumberArray, or null\n */\nexport function isNumberArray(value) {\n    if (Array.isArray(value)) {\n        return value.length === 0 || typeof value[0] === 'number';\n    }\n    return false;\n}\n/**\n * Check is an array is a numeric array (typed array or array of numbers)\n * @param value value to be tested\n * @returns input with type narrowed to NumericArray, or null\n */\nexport function isNumericArray(value) {\n    return isTypedArray(value) || isNumberArray(value);\n}\n//# sourceMappingURL=is-array.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { isNumericArray } from '@math.gl/types';\nexport function isUniformValue(value) {\n    return isNumericArray(value) || typeof value === 'number' || typeof value === 'boolean';\n}\nexport function splitUniformsAndBindings(uniforms) {\n    const result = { bindings: {}, uniforms: {} };\n    Object.keys(uniforms).forEach(name => {\n        const uniform = uniforms[name];\n        if (isUniformValue(uniform)) {\n            result.uniforms[name] = uniform;\n        }\n        else {\n            result.bindings[name] = uniform;\n        }\n    });\n    return result;\n}\n//# sourceMappingURL=split-uniforms-and-bindings.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { log } from '@luma.gl/core';\n// import type {VariableShaderType, UniformValue, UniformFormat, UniformInfoDevice, Texture, Sampler} from '@luma.gl/core';\nimport { getShaderModuleDependencies } from '@luma.gl/shadertools';\nimport { splitUniformsAndBindings } from \"./model/split-uniforms-and-bindings.js\";\n/**\n * ShaderInputs holds uniform and binding values for one or more shader modules,\n * - It can generate binary data for any uniform buffer\n * - It can manage a uniform buffer for each block\n * - It can update managed uniform buffers with a single call\n * - It performs some book keeping on what has changed to minimize unnecessary writes to uniform buffers.\n */\nexport class ShaderInputs {\n    options = {\n        disableWarnings: false\n    };\n    /**\n     * The map of modules\n     * @todo should should this include the resolved dependencies?\n     */\n    // @ts-ignore Fix typings\n    modules;\n    /** Stores the uniform values for each module */\n    moduleUniforms;\n    /** Stores the uniform bindings for each module  */\n    moduleBindings;\n    /** Tracks if uniforms have changed */\n    // moduleUniformsChanged: Record<keyof ShaderPropsT, false | string>;\n    /**\n     * Create a new UniformStore instance\n     * @param modules\n     */\n    constructor(\n    // @ts-ignore Fix typings\n    modules, options) {\n        Object.assign(this.options, options);\n        // Extract modules with dependencies\n        const resolvedModules = getShaderModuleDependencies(Object.values(modules).filter(module => module.dependencies));\n        for (const resolvedModule of resolvedModules) {\n            // @ts-ignore\n            modules[resolvedModule.name] = resolvedModule;\n        }\n        log.log(1, 'Creating ShaderInputs with modules', Object.keys(modules))();\n        // Store the module definitions and create storage for uniform values and binding values, per module\n        // @ts-ignore Fix typings\n        this.modules = modules;\n        this.moduleUniforms = {};\n        this.moduleBindings = {};\n        // Initialize the modules\n        for (const [name, module] of Object.entries(modules)) {\n            this._addModule(module);\n            if (module.name && name !== module.name && !this.options.disableWarnings) {\n                log.warn(`Module name: ${name} vs ${module.name}`)();\n            }\n        }\n    }\n    /** Destroy */\n    destroy() { }\n    /**\n     * Set module props\n     */\n    setProps(props) {\n        for (const name of Object.keys(props)) {\n            const moduleName = name;\n            const moduleProps = props[moduleName] || {};\n            const module = this.modules[moduleName];\n            if (!module) {\n                // Ignore props for unregistered modules\n                if (!this.options.disableWarnings) {\n                    log.warn(`Module ${name} not found`)();\n                }\n                continue; // eslint-disable-line no-continue\n            }\n            const oldUniforms = this.moduleUniforms[moduleName];\n            const oldBindings = this.moduleBindings[moduleName];\n            const uniformsAndBindings = module.getUniforms?.(moduleProps, oldUniforms) || moduleProps;\n            const { uniforms, bindings } = splitUniformsAndBindings(uniformsAndBindings);\n            this.moduleUniforms[moduleName] = { ...oldUniforms, ...uniforms };\n            this.moduleBindings[moduleName] = { ...oldBindings, ...bindings };\n            // this.moduleUniformsChanged ||= moduleName;\n            // console.log(`setProps(${String(moduleName)}`, moduleName, this.moduleUniforms[moduleName])\n        }\n    }\n    /**\n     * Return the map of modules\n     * @todo should should this include the resolved dependencies?\n     */\n    getModules() {\n        return Object.values(this.modules);\n    }\n    /** Get all uniform values for all modules */\n    getUniformValues() {\n        return this.moduleUniforms;\n    }\n    /** Merges all bindings for the shader (from the various modules) */\n    getBindingValues() {\n        const bindings = {};\n        for (const moduleBindings of Object.values(this.moduleBindings)) {\n            Object.assign(bindings, moduleBindings);\n        }\n        return bindings;\n    }\n    // INTERNAL\n    /** Return a debug table that can be used for console.table() or log.table() */\n    getDebugTable() {\n        const table = {};\n        for (const [moduleName, module] of Object.entries(this.moduleUniforms)) {\n            for (const [key, value] of Object.entries(module)) {\n                table[`${moduleName}.${key}`] = {\n                    type: this.modules[moduleName].uniformTypes?.[key],\n                    value: String(value)\n                };\n            }\n        }\n        return table;\n    }\n    _addModule(module) {\n        const moduleName = module.name;\n        // Get default uniforms from module\n        this.moduleUniforms[moduleName] = module.defaultUniforms || {};\n        this.moduleBindings[moduleName] = {};\n    }\n}\n//# sourceMappingURL=shader-inputs.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nlet pathPrefix = '';\n/**\n * Set a relative path prefix\n */\nexport function setPathPrefix(prefix) {\n    pathPrefix = prefix;\n}\n/**\n * Loads ImageBitmap asynchronously. Respects setPathPrefix.\n * image.crossOrigin can be set via opts.crossOrigin, default to 'anonymous'\n * @returns a promise tracking the load\n */\nexport async function loadImageBitmap(url, opts) {\n    const image = new Image();\n    image.crossOrigin = opts?.crossOrigin || 'anonymous';\n    image.src = url.startsWith('http') ? url : pathPrefix + url;\n    await image.decode();\n    return opts ? await createImageBitmap(image, opts) : await createImageBitmap(image);\n}\n/**\n * Loads image asynchronously. Respects setPathPrefix.\n * image.crossOrigin can be set via opts.crossOrigin, default to 'anonymous'\n * @returns a promise tracking the load\n * @deprecated Use `loadImageBitmap()` unless you are supporting old versions of Safari.\n */\nexport async function loadImage(url, opts) {\n    return await new Promise((resolve, reject) => {\n        try {\n            const image = new Image();\n            image.onload = () => resolve(image);\n            image.onerror = () => reject(new Error(`Could not load image ${url}.`));\n            image.crossOrigin = opts?.crossOrigin || 'anonymous';\n            image.src = url.startsWith('http') ? url : pathPrefix + url;\n        }\n        catch (error) {\n            reject(error);\n        }\n    });\n}\n//# sourceMappingURL=load-file.js.map","// luma.gl, MIT license\n// Copyright (c) vis.gl contributors\nimport { Texture, Sampler, log } from '@luma.gl/core';\nimport { loadImageBitmap } from \"../application-utils/load-file.js\";\nimport { uid } from \"../utils/uid.js\";\nexport const TextureCubeFaces = ['+X', '-X', '+Y', '-Y', '+Z', '-Z'];\n// prettier-ignore\nexport const TextureCubeFaceMap = { '+X': 0, '-X': 1, '+Y': 2, '-Y': 3, '+Z': 4, '-Z': 5 };\nexport const CubeFaces = ['+X', '-X', '+Y', '-Y', '+Z', '-Z'];\n/**\n * It is very convenient to be able to initialize textures with promises\n * This can add considerable complexity to the Texture class, and doesn't\n * fit with the immutable nature of WebGPU resources.\n * Instead, luma.gl offers async textures as a separate class.\n */\nexport class AsyncTexture {\n    device;\n    id;\n    props;\n    // TODO - should we type these as possibly `null`? It will make usage harder?\n    // @ts-expect-error\n    texture;\n    // @ts-expect-error\n    sampler;\n    // @ts-expect-error\n    view;\n    ready;\n    isReady = false;\n    destroyed = false;\n    resolveReady = () => { };\n    rejectReady = () => { };\n    get [Symbol.toStringTag]() {\n        return 'AsyncTexture';\n    }\n    toString() {\n        return `AsyncTexture:\"${this.id}\"(${this.isReady ? 'ready' : 'loading'})`;\n    }\n    constructor(device, props) {\n        this.device = device;\n        // TODO - if we support URL strings as data...\n        const id = uid('async-texture'); // typeof props?.data === 'string' ? props.data.slice(-20) : uid('async-texture');\n        this.props = { ...AsyncTexture.defaultProps, id, ...props };\n        this.id = this.props.id;\n        props = { ...props };\n        // Signature: new AsyncTexture(device, {data: url})\n        if (typeof props?.data === 'string' && props.dimension === '2d') {\n            props.data = loadImageBitmap(props.data);\n        }\n        // If mipmaps are requested, we need to allocate space for them\n        if (props.mipmaps) {\n            props.mipLevels = 'auto';\n        }\n        this.ready = new Promise((resolve, reject) => {\n            this.resolveReady = () => {\n                this.isReady = true;\n                resolve();\n            };\n            this.rejectReady = reject;\n        });\n        this.initAsync(props);\n    }\n    async initAsync(props) {\n        const asyncData = props.data;\n        // @ts-expect-error not clear how to convince TS that null will be returned\n        const data = await awaitAllPromises(asyncData).then(undefined, this.rejectReady);\n        // Check that we haven't been destroyed while waiting for texture data to load\n        if (this.destroyed) {\n            return;\n        }\n        // Now we can actually create the texture\n        // Auto-deduce width and height if not supplied\n        const size = this.props.width && this.props.height\n            ? { width: this.props.width, height: this.props.height }\n            : this.getTextureDataSize(data);\n        if (!size) {\n            throw new Error('Texture size could not be determined');\n        }\n        const syncProps = { ...size, ...props, data: undefined, mipLevels: 1 };\n        // Auto-calculate the number of mip levels as a convenience\n        // TODO - Should we clamp to 1-getMipLevelCount?\n        const maxMips = this.device.getMipLevelCount(syncProps.width, syncProps.height);\n        syncProps.mipLevels =\n            this.props.mipLevels === 'auto' ? maxMips : Math.min(maxMips, this.props.mipLevels);\n        this.texture = this.device.createTexture(syncProps);\n        this.sampler = this.texture.sampler;\n        this.view = this.texture.view;\n        if (props.data) {\n            switch (this.props.dimension) {\n                case '1d':\n                    this._setTexture1DData(this.texture, data);\n                    break;\n                case '2d':\n                    this._setTexture2DData(data);\n                    break;\n                case '3d':\n                    this._setTexture3DData(this.texture, data);\n                    break;\n                case '2d-array':\n                    this._setTextureArrayData(this.texture, data);\n                    break;\n                case 'cube':\n                    this._setTextureCubeData(this.texture, data);\n                    break;\n                case 'cube-array':\n                    this._setTextureCubeArrayData(this.texture, data);\n                    break;\n            }\n        }\n        // Do we need to generate mipmaps?\n        if (this.props.mipmaps) {\n            this.generateMipmaps();\n        }\n        log.info(1, `${this} loaded`);\n        this.resolveReady();\n    }\n    destroy() {\n        if (this.texture) {\n            this.texture.destroy();\n            // @ts-expect-error\n            this.texture = null;\n        }\n        this.destroyed = true;\n    }\n    generateMipmaps() {\n        // if (this.device.type === 'webgl') {\n        this.texture.generateMipmapsWebGL();\n        // }\n    }\n    /** Set sampler or create and set new Sampler from SamplerProps */\n    setSampler(sampler = {}) {\n        this.texture.setSampler(sampler instanceof Sampler ? sampler : this.device.createSampler(sampler));\n    }\n    /**\n     * Textures are immutable and cannot be resized after creation,\n     * but we can create a similar texture with the same parameters but a new size.\n     * @note Does not copy contents of the texture\n     * @note Mipmaps may need to be regenerated after resizing / setting new data\n     * @todo Abort pending promise and create a texture with the new size?\n     */\n    resize(size) {\n        if (!this.isReady) {\n            throw new Error('Cannot resize texture before it is ready');\n        }\n        if (size.width === this.texture.width && size.height === this.texture.height) {\n            return false;\n        }\n        if (this.texture) {\n            const texture = this.texture;\n            this.texture = texture.clone(size);\n            texture.destroy();\n        }\n        return true;\n    }\n    /** Check if texture data is a typed array */\n    isTextureLevelData(data) {\n        const typedArray = data?.data;\n        return ArrayBuffer.isView(typedArray);\n    }\n    /** Get the size of the texture described by the provided TextureData */\n    getTextureDataSize(data) {\n        if (!data) {\n            return null;\n        }\n        if (ArrayBuffer.isView(data)) {\n            return null;\n        }\n        // Recurse into arrays (array of miplevels)\n        if (Array.isArray(data)) {\n            return this.getTextureDataSize(data[0]);\n        }\n        if (this.device.isExternalImage(data)) {\n            return this.device.getExternalImageSize(data);\n        }\n        if (data && typeof data === 'object' && data.constructor === Object) {\n            const textureDataArray = Object.values(data);\n            const untypedData = textureDataArray[0];\n            return { width: untypedData.width, height: untypedData.height };\n        }\n        throw new Error('texture size deduction failed');\n    }\n    /** Convert luma.gl cubemap face constants to depth index */\n    getCubeFaceDepth(face) {\n        // prettier-ignore\n        switch (face) {\n            case '+X': return 0;\n            case '-X': return 1;\n            case '+Y': return 2;\n            case '-Y': return 3;\n            case '+Z': return 4;\n            case '-Z': return 5;\n            default: throw new Error(face);\n        }\n    }\n    // EXPERIMENTAL\n    setTextureData(data) { }\n    /** Experimental: Set multiple mip levels */\n    _setTexture1DData(texture, data) {\n        throw new Error('setTexture1DData not supported in WebGL.');\n    }\n    /** Experimental: Set multiple mip levels */\n    _setTexture2DData(lodData, depth = 0) {\n        if (!this.texture) {\n            throw new Error('Texture not initialized');\n        }\n        const lodArray = this._normalizeTextureData(lodData);\n        // If the user provides multiple LODs, then automatic mipmap\n        // generation generateMipmap() should be disabled to avoid overwriting them.\n        if (lodArray.length > 1 && this.props.mipmaps !== false) {\n            log.warn(`Texture ${this.id} mipmap and multiple LODs.`)();\n        }\n        for (let mipLevel = 0; mipLevel < lodArray.length; mipLevel++) {\n            const imageData = lodArray[mipLevel];\n            if (this.device.isExternalImage(imageData)) {\n                this.texture.copyExternalImage({ image: imageData, depth, mipLevel, flipY: true });\n            }\n            else {\n                this.texture.copyImageData({ data: imageData.data /* , depth */, mipLevel });\n            }\n        }\n    }\n    /**\n     * Experimental: Sets 3D texture data: multiple depth slices, multiple mip levels\n     * @param data\n     */\n    _setTexture3DData(texture, data) {\n        if (this.texture?.props.dimension !== '3d') {\n            throw new Error(this.id);\n        }\n        for (let depth = 0; depth < data.length; depth++) {\n            this._setTexture2DData(data[depth], depth);\n        }\n    }\n    /**\n     * Experimental: Set Cube texture data, multiple faces, multiple mip levels\n     * @todo - could support TextureCubeArray with depth\n     * @param data\n     * @param index\n     */\n    _setTextureCubeData(texture, data) {\n        if (this.texture?.props.dimension !== 'cube') {\n            throw new Error(this.id);\n        }\n        for (const [face, faceData] of Object.entries(data)) {\n            const faceDepth = CubeFaces.indexOf(face);\n            this._setTexture2DData(faceData, faceDepth);\n        }\n    }\n    /**\n     * Experimental: Sets texture array data, multiple levels, multiple depth slices\n     * @param data\n     */\n    _setTextureArrayData(texture, data) {\n        if (this.texture?.props.dimension !== '2d-array') {\n            throw new Error(this.id);\n        }\n        for (let depth = 0; depth < data.length; depth++) {\n            this._setTexture2DData(data[depth], depth);\n        }\n    }\n    /**\n     * Experimental: Sets texture cube array, multiple faces, multiple levels, multiple mip levels\n     * @param data\n     */\n    _setTextureCubeArrayData(texture, data) {\n        throw new Error('setTextureCubeArrayData not supported in WebGL2.');\n    }\n    /** Experimental */\n    _setTextureCubeFaceData(texture, lodData, face, depth = 0) {\n        // assert(this.props.dimension === 'cube');\n        // If the user provides multiple LODs, then automatic mipmap\n        // generation generateMipmap() should be disabled to avoid overwriting them.\n        if (Array.isArray(lodData) && lodData.length > 1 && this.props.mipmaps !== false) {\n            log.warn(`${this.id} has mipmap and multiple LODs.`)();\n        }\n        const faceDepth = TextureCubeFaces.indexOf(face);\n        this._setTexture2DData(lodData, faceDepth);\n    }\n    /**\n     * Normalize TextureData to an array of TextureImageData / ExternalImages\n     * @param data\n     * @param options\n     * @returns array of TextureImageData / ExternalImages\n     */\n    _normalizeTextureData(data) {\n        const options = this.texture;\n        let mipLevelArray;\n        if (ArrayBuffer.isView(data)) {\n            mipLevelArray = [\n                {\n                    // ts-expect-error does data really need to be Uint8ClampedArray?\n                    data,\n                    width: options.width,\n                    height: options.height\n                    // depth: options.depth\n                }\n            ];\n        }\n        else if (!Array.isArray(data)) {\n            mipLevelArray = [data];\n        }\n        else {\n            mipLevelArray = data;\n        }\n        return mipLevelArray;\n    }\n    static defaultProps = {\n        ...Texture.defaultProps,\n        data: null,\n        mipmaps: false\n    };\n}\n// TODO - Remove when texture refactor is complete\n/*\nsetCubeMapData(options: {\n  width: number;\n  height: number;\n  data: Record<GL, Texture2DData> | Record<TextureCubeFace, Texture2DData>;\n  format?: any;\n  type?: any;\n  /** @deprecated Use .data *\n  pixels: any;\n}): void {\n  const {gl} = this;\n\n  const {width, height, pixels, data, format = GL.RGBA, type = GL.UNSIGNED_BYTE} = options;\n\n  // pixel data (imageDataMap) is an Object from Face to Image or Promise.\n  // For example:\n  // {\n  // GL.TEXTURE_CUBE_MAP_POSITIVE_X : Image-or-Promise,\n  // GL.TEXTURE_CUBE_MAP_NEGATIVE_X : Image-or-Promise,\n  // ... }\n  // To provide multiple level-of-details (LODs) this can be Face to Array\n  // of Image or Promise, like this\n  // {\n  // GL.TEXTURE_CUBE_MAP_POSITIVE_X : [Image-or-Promise-LOD-0, Image-or-Promise-LOD-1],\n  // GL.TEXTURE_CUBE_MAP_NEGATIVE_X : [Image-or-Promise-LOD-0, Image-or-Promise-LOD-1],\n  // ... }\n\n  const imageDataMap = this._getImageDataMap(pixels || data);\n\n  const resolvedFaces = WEBGLTexture.FACES.map(face => {\n    const facePixels = imageDataMap[face];\n    return Array.isArray(facePixels) ? facePixels : [facePixels];\n  });\n  this.bind();\n\n  WEBGLTexture.FACES.forEach((face, index) => {\n    if (resolvedFaces[index].length > 1 && this.props.mipmaps !== false) {\n      // If the user provides multiple LODs, then automatic mipmap\n      // generation generateMipmaps() should be disabled to avoid overwritting them.\n      log.warn(`${this.id} has mipmap and multiple LODs.`)();\n    }\n    resolvedFaces[index].forEach((image, lodLevel) => {\n      // TODO: adjust width & height for LOD!\n      if (width && height) {\n        gl.texImage2D(face, lodLevel, format, width, height, 0 /* border*, format, type, image);\n      } else {\n        gl.texImage2D(face, lodLevel, format, format, type, image);\n      }\n    });\n  });\n\n  this.unbind();\n}\n*/\n// HELPERS\n/** Resolve all promises in a nested data structure */\nasync function awaitAllPromises(x) {\n    x = await x;\n    if (Array.isArray(x)) {\n        return await Promise.all(x.map(awaitAllPromises));\n    }\n    if (x && typeof x === 'object' && x.constructor === Object) {\n        const object = x;\n        const values = await Promise.all(Object.values(object));\n        const keys = Object.keys(object);\n        const resolvedObject = {};\n        for (let i = 0; i < keys.length; i++) {\n            resolvedObject[keys[i]] = values[i];\n        }\n        return resolvedObject;\n    }\n    return x;\n}\n//# sourceMappingURL=async-texture.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Buffer, Texture, TextureView, Sampler, RenderPipeline, UniformStore, log, getTypedArrayConstructor, getAttributeInfosFromLayouts } from '@luma.gl/core';\nimport { ShaderAssembler, getShaderLayoutFromWGSL } from '@luma.gl/shadertools';\nimport { makeGPUGeometry } from \"../geometry/gpu-geometry.js\";\nimport { PipelineFactory } from \"../factories/pipeline-factory.js\";\nimport { ShaderFactory } from \"../factories/shader-factory.js\";\nimport { getDebugTableForShaderLayout } from \"../debug/debug-shader-layout.js\";\nimport { debugFramebuffer } from \"../debug/debug-framebuffer.js\";\nimport { deepEqual } from \"../utils/deep-equal.js\";\nimport { BufferLayoutHelper } from \"../utils/buffer-layout-helper.js\";\nimport { sortedBufferLayoutByShaderSourceLocations } from \"../utils/buffer-layout-order.js\";\nimport { uid } from \"../utils/uid.js\";\nimport { ShaderInputs } from \"../shader-inputs.js\";\nimport { AsyncTexture } from \"../async-texture/async-texture.js\";\nconst LOG_DRAW_PRIORITY = 2;\nconst LOG_DRAW_TIMEOUT = 10000;\n/**\n * v9 Model API\n * A model\n * - automatically reuses pipelines (programs) when possible\n * - automatically rebuilds pipelines if necessary to accommodate changed settings\n * shadertools integration\n * - accepts modules and performs shader transpilation\n */\nexport class Model {\n    static defaultProps = {\n        ...RenderPipeline.defaultProps,\n        source: undefined,\n        vs: null,\n        fs: null,\n        id: 'unnamed',\n        handle: undefined,\n        userData: {},\n        defines: {},\n        modules: [],\n        geometry: null,\n        indexBuffer: null,\n        attributes: {},\n        constantAttributes: {},\n        varyings: [],\n        isInstanced: undefined,\n        instanceCount: 0,\n        vertexCount: 0,\n        shaderInputs: undefined,\n        pipelineFactory: undefined,\n        shaderFactory: undefined,\n        transformFeedback: undefined,\n        shaderAssembler: ShaderAssembler.getDefaultShaderAssembler(),\n        debugShaders: undefined,\n        disableWarnings: undefined\n    };\n    device;\n    id;\n    // @ts-expect-error assigned in function called from constructor\n    source;\n    // @ts-expect-error assigned in function called from constructor\n    vs;\n    // @ts-expect-error assigned in function called from constructor\n    fs;\n    pipelineFactory;\n    shaderFactory;\n    userData = {};\n    // Fixed properties (change can trigger pipeline rebuild)\n    /** The render pipeline GPU parameters, depth testing etc */\n    parameters;\n    /** The primitive topology */\n    topology;\n    /** Buffer layout */\n    bufferLayout;\n    // Dynamic properties\n    /** Use instanced rendering */\n    isInstanced = undefined;\n    /** instance count. `undefined` means not instanced */\n    instanceCount = 0;\n    /** Vertex count */\n    vertexCount;\n    /** Index buffer */\n    indexBuffer = null;\n    /** Buffer-valued attributes */\n    bufferAttributes = {};\n    /** Constant-valued attributes */\n    constantAttributes = {};\n    /** Bindings (textures, samplers, uniform buffers) */\n    bindings = {};\n    /**\n     * VertexArray\n     * @note not implemented: if bufferLayout is updated, vertex array has to be rebuilt!\n     * @todo - allow application to define multiple vertex arrays?\n     * */\n    vertexArray;\n    /** TransformFeedback, WebGL 2 only. */\n    transformFeedback = null;\n    /** The underlying GPU \"program\". @note May be recreated if parameters change */\n    pipeline;\n    /** ShaderInputs instance */\n    // @ts-expect-error Assigned in function called by constructor\n    shaderInputs;\n    // @ts-expect-error Assigned in function called by constructor\n    _uniformStore;\n    _attributeInfos = {};\n    _gpuGeometry = null;\n    props;\n    _pipelineNeedsUpdate = 'newly created';\n    _needsRedraw = 'initializing';\n    _destroyed = false;\n    /** \"Time\" of last draw. Monotonically increasing timestamp */\n    _lastDrawTimestamp = -1;\n    get [Symbol.toStringTag]() {\n        return 'Model';\n    }\n    toString() {\n        return `Model(${this.id})`;\n    }\n    constructor(device, props) {\n        this.props = { ...Model.defaultProps, ...props };\n        props = this.props;\n        this.id = props.id || uid('model');\n        this.device = device;\n        Object.assign(this.userData, props.userData);\n        // Setup shader module inputs\n        const moduleMap = Object.fromEntries(this.props.modules?.map(module => [module.name, module]) || []);\n        const shaderInputs = props.shaderInputs ||\n            new ShaderInputs(moduleMap, { disableWarnings: this.props.disableWarnings });\n        // @ts-ignore\n        this.setShaderInputs(shaderInputs);\n        // Setup shader assembler\n        const platformInfo = getPlatformInfo(device);\n        // Extract modules from shader inputs if not supplied\n        const modules = \n        // @ts-ignore shaderInputs is assigned in setShaderInputs above.\n        (this.props.modules?.length > 0 ? this.props.modules : this.shaderInputs?.getModules()) || [];\n        const isWebGPU = this.device.type === 'webgpu';\n        // WebGPU\n        // TODO - hack to support unified WGSL shader\n        // TODO - this is wrong, compile a single shader\n        if (isWebGPU && this.props.source) {\n            // WGSL\n            const { source, getUniforms } = this.props.shaderAssembler.assembleWGSLShader({\n                platformInfo,\n                ...this.props,\n                modules\n            });\n            this.source = source;\n            // @ts-expect-error\n            this._getModuleUniforms = getUniforms;\n            // Extract shader layout after modules have been added to WGSL source, to include any bindings added by modules\n            this.props.shaderLayout ||= getShaderLayoutFromWGSL(this.source);\n        }\n        else {\n            // GLSL\n            const { vs, fs, getUniforms } = this.props.shaderAssembler.assembleGLSLShaderPair({\n                platformInfo,\n                ...this.props,\n                modules\n            });\n            this.vs = vs;\n            this.fs = fs;\n            // @ts-expect-error\n            this._getModuleUniforms = getUniforms;\n        }\n        this.vertexCount = this.props.vertexCount;\n        this.instanceCount = this.props.instanceCount;\n        this.topology = this.props.topology;\n        this.bufferLayout = this.props.bufferLayout;\n        this.parameters = this.props.parameters;\n        // Geometry, if provided, sets topology and vertex cound\n        if (props.geometry) {\n            this.setGeometry(props.geometry);\n        }\n        this.pipelineFactory =\n            props.pipelineFactory || PipelineFactory.getDefaultPipelineFactory(this.device);\n        this.shaderFactory = props.shaderFactory || ShaderFactory.getDefaultShaderFactory(this.device);\n        // Create the pipeline\n        // @note order is important\n        this.pipeline = this._updatePipeline();\n        this.vertexArray = device.createVertexArray({\n            shaderLayout: this.pipeline.shaderLayout,\n            bufferLayout: this.pipeline.bufferLayout\n        });\n        // Now we can apply geometry attributes\n        if (this._gpuGeometry) {\n            this._setGeometryAttributes(this._gpuGeometry);\n        }\n        // Apply any dynamic settings that will not trigger pipeline change\n        if ('isInstanced' in props) {\n            this.isInstanced = props.isInstanced;\n        }\n        if (props.instanceCount) {\n            this.setInstanceCount(props.instanceCount);\n        }\n        if (props.vertexCount) {\n            this.setVertexCount(props.vertexCount);\n        }\n        if (props.indexBuffer) {\n            this.setIndexBuffer(props.indexBuffer);\n        }\n        if (props.attributes) {\n            this.setAttributes(props.attributes);\n        }\n        if (props.constantAttributes) {\n            this.setConstantAttributes(props.constantAttributes);\n        }\n        if (props.bindings) {\n            this.setBindings(props.bindings);\n        }\n        if (props.transformFeedback) {\n            this.transformFeedback = props.transformFeedback;\n        }\n        // Catch any access to non-standard props\n        Object.seal(this);\n    }\n    destroy() {\n        if (!this._destroyed) {\n            // Release pipeline before we destroy the shaders used by the pipeline\n            this.pipelineFactory.release(this.pipeline);\n            // Release the shaders\n            this.shaderFactory.release(this.pipeline.vs);\n            if (this.pipeline.fs) {\n                this.shaderFactory.release(this.pipeline.fs);\n            }\n            this._uniformStore.destroy();\n            // TODO - mark resource as managed and destroyIfManaged() ?\n            this._gpuGeometry?.destroy();\n            this._destroyed = true;\n        }\n    }\n    // Draw call\n    /** Query redraw status. Clears the status. */\n    needsRedraw() {\n        // Catch any writes to already bound resources\n        if (this._getBindingsUpdateTimestamp() > this._lastDrawTimestamp) {\n            this.setNeedsRedraw('contents of bound textures or buffers updated');\n        }\n        const needsRedraw = this._needsRedraw;\n        this._needsRedraw = false;\n        return needsRedraw;\n    }\n    /** Mark the model as needing a redraw */\n    setNeedsRedraw(reason) {\n        this._needsRedraw ||= reason;\n    }\n    predraw() {\n        // Update uniform buffers if needed\n        this.updateShaderInputs();\n        // Check if the pipeline is invalidated\n        this.pipeline = this._updatePipeline();\n    }\n    draw(renderPass) {\n        const loadingBinding = this._areBindingsLoading();\n        if (loadingBinding) {\n            log.info(LOG_DRAW_PRIORITY, `>>> DRAWING ABORTED ${this.id}: ${loadingBinding} not loaded`)();\n            return false;\n        }\n        try {\n            renderPass.pushDebugGroup(`${this}.predraw(${renderPass})`);\n            this.predraw();\n        }\n        finally {\n            renderPass.popDebugGroup();\n        }\n        let drawSuccess;\n        try {\n            renderPass.pushDebugGroup(`${this}.draw(${renderPass})`);\n            this._logDrawCallStart();\n            // Update the pipeline if invalidated\n            // TODO - inside RenderPass is likely the worst place to do this from performance perspective.\n            // Application can call Model.predraw() to avoid this.\n            this.pipeline = this._updatePipeline();\n            // Set pipeline state, we may be sharing a pipeline so we need to set all state on every draw\n            // Any caching needs to be done inside the pipeline functions\n            // TODO this is a busy initialized check for all bindings every frame\n            const syncBindings = this._getBindings();\n            this.pipeline.setBindings(syncBindings, {\n                disableWarnings: this.props.disableWarnings\n            });\n            const { indexBuffer } = this.vertexArray;\n            const indexCount = indexBuffer\n                ? indexBuffer.byteLength / (indexBuffer.indexType === 'uint32' ? 4 : 2)\n                : undefined;\n            drawSuccess = this.pipeline.draw({\n                renderPass,\n                vertexArray: this.vertexArray,\n                isInstanced: this.isInstanced,\n                vertexCount: this.vertexCount,\n                instanceCount: this.instanceCount,\n                indexCount,\n                transformFeedback: this.transformFeedback || undefined,\n                // WebGL shares underlying cached pipelines even for models that have different parameters and topology,\n                // so we must provide our unique parameters to each draw\n                // (In WebGPU most parameters are encoded in the pipeline and cannot be changed per draw call)\n                parameters: this.parameters,\n                topology: this.topology\n            });\n        }\n        finally {\n            renderPass.popDebugGroup();\n            this._logDrawCallEnd();\n        }\n        this._logFramebuffer(renderPass);\n        // Update needsRedraw flag\n        if (drawSuccess) {\n            this._lastDrawTimestamp = this.device.timestamp;\n            this._needsRedraw = false;\n        }\n        else {\n            this._needsRedraw = 'waiting for resource initialization';\n        }\n        return drawSuccess;\n    }\n    // Update fixed fields (can trigger pipeline rebuild)\n    /**\n     * Updates the optional geometry\n     * Geometry, set topology and bufferLayout\n     * @note Can trigger a pipeline rebuild / pipeline cache fetch on WebGPU\n     */\n    setGeometry(geometry) {\n        this._gpuGeometry?.destroy();\n        const gpuGeometry = geometry && makeGPUGeometry(this.device, geometry);\n        if (gpuGeometry) {\n            this.setTopology(gpuGeometry.topology || 'triangle-list');\n            const bufferLayoutHelper = new BufferLayoutHelper(this.bufferLayout);\n            this.bufferLayout = bufferLayoutHelper.mergeBufferLayouts(gpuGeometry.bufferLayout, this.bufferLayout);\n            if (this.vertexArray) {\n                this._setGeometryAttributes(gpuGeometry);\n            }\n        }\n        this._gpuGeometry = gpuGeometry;\n    }\n    /**\n     * Updates the primitive topology ('triangle-list', 'triangle-strip' etc).\n     * @note Triggers a pipeline rebuild / pipeline cache fetch on WebGPU\n     */\n    setTopology(topology) {\n        if (topology !== this.topology) {\n            this.topology = topology;\n            this._setPipelineNeedsUpdate('topology');\n        }\n    }\n    /**\n     * Updates the buffer layout.\n     * @note Triggers a pipeline rebuild / pipeline cache fetch\n     */\n    setBufferLayout(bufferLayout) {\n        const bufferLayoutHelper = new BufferLayoutHelper(this.bufferLayout);\n        this.bufferLayout = this._gpuGeometry\n            ? bufferLayoutHelper.mergeBufferLayouts(bufferLayout, this._gpuGeometry.bufferLayout)\n            : bufferLayout;\n        this._setPipelineNeedsUpdate('bufferLayout');\n        // Recreate the pipeline\n        this.pipeline = this._updatePipeline();\n        // vertex array needs to be updated if we update buffer layout,\n        // but not if we update parameters\n        this.vertexArray = this.device.createVertexArray({\n            shaderLayout: this.pipeline.shaderLayout,\n            bufferLayout: this.pipeline.bufferLayout\n        });\n        // Reapply geometry attributes to the new vertex array\n        if (this._gpuGeometry) {\n            this._setGeometryAttributes(this._gpuGeometry);\n        }\n    }\n    /**\n     * Set GPU parameters.\n     * @note Can trigger a pipeline rebuild / pipeline cache fetch.\n     * @param parameters\n     */\n    setParameters(parameters) {\n        if (!deepEqual(parameters, this.parameters, 2)) {\n            this.parameters = parameters;\n            this._setPipelineNeedsUpdate('parameters');\n        }\n    }\n    // Update dynamic fields\n    /**\n     * Updates the instance count (used in draw calls)\n     * @note Any attributes with stepMode=instance need to be at least this big\n     */\n    setInstanceCount(instanceCount) {\n        this.instanceCount = instanceCount;\n        // luma.gl examples don't set props.isInstanced and rely on auto-detection\n        // but deck.gl sets instanceCount even for models that are not instanced.\n        if (this.isInstanced === undefined && instanceCount > 0) {\n            this.isInstanced = true;\n        }\n        this.setNeedsRedraw('instanceCount');\n    }\n    /**\n     * Updates the vertex count (used in draw calls)\n     * @note Any attributes with stepMode=vertex need to be at least this big\n     */\n    setVertexCount(vertexCount) {\n        this.vertexCount = vertexCount;\n        this.setNeedsRedraw('vertexCount');\n    }\n    /** Set the shader inputs */\n    setShaderInputs(shaderInputs) {\n        this.shaderInputs = shaderInputs;\n        this._uniformStore = new UniformStore(this.shaderInputs.modules);\n        // Create uniform buffer bindings for all modules that actually have uniforms\n        for (const [moduleName, module] of Object.entries(this.shaderInputs.modules)) {\n            if (shaderModuleHasUniforms(module)) {\n                const uniformBuffer = this._uniformStore.getManagedUniformBuffer(this.device, moduleName);\n                this.bindings[`${moduleName}Uniforms`] = uniformBuffer;\n            }\n        }\n        this.setNeedsRedraw('shaderInputs');\n    }\n    /** Update uniform buffers from the model's shader inputs */\n    updateShaderInputs() {\n        this._uniformStore.setUniforms(this.shaderInputs.getUniformValues());\n        this.setBindings(this.shaderInputs.getBindingValues());\n        // TODO - this is already tracked through buffer/texture update times?\n        this.setNeedsRedraw('shaderInputs');\n    }\n    /**\n     * Sets bindings (textures, samplers, uniform buffers)\n     */\n    setBindings(bindings) {\n        Object.assign(this.bindings, bindings);\n        this.setNeedsRedraw('bindings');\n    }\n    /**\n     * Updates optional transform feedback. WebGL only.\n     */\n    setTransformFeedback(transformFeedback) {\n        this.transformFeedback = transformFeedback;\n        this.setNeedsRedraw('transformFeedback');\n    }\n    /**\n     * Sets the index buffer\n     * @todo - how to unset it if we change geometry?\n     */\n    setIndexBuffer(indexBuffer) {\n        this.vertexArray.setIndexBuffer(indexBuffer);\n        this.setNeedsRedraw('indexBuffer');\n    }\n    /**\n     * Sets attributes (buffers)\n     * @note Overrides any attributes previously set with the same name\n     */\n    setAttributes(buffers, options) {\n        const disableWarnings = options?.disableWarnings ?? this.props.disableWarnings;\n        if (buffers['indices']) {\n            log.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)();\n        }\n        // ensure bufferLayout order matches source layout so we bind\n        // the correct buffers to the correct indices in webgpu.\n        this.bufferLayout = sortedBufferLayoutByShaderSourceLocations(this.pipeline.shaderLayout, this.bufferLayout);\n        const bufferLayoutHelper = new BufferLayoutHelper(this.bufferLayout);\n        // Check if all buffers have a layout\n        for (const [bufferName, buffer] of Object.entries(buffers)) {\n            const bufferLayout = bufferLayoutHelper.getBufferLayout(bufferName);\n            if (!bufferLayout) {\n                if (!disableWarnings) {\n                    log.warn(`Model(${this.id}): Missing layout for buffer \"${bufferName}\".`)();\n                }\n                continue; // eslint-disable-line no-continue\n            }\n            // In WebGL, for an interleaved attribute we may need to set multiple attributes\n            // but in WebGPU, we set it according to the buffer's position in the vertexArray\n            const attributeNames = bufferLayoutHelper.getAttributeNamesForBuffer(bufferLayout);\n            let set = false;\n            for (const attributeName of attributeNames) {\n                const attributeInfo = this._attributeInfos[attributeName];\n                if (attributeInfo) {\n                    const location = this.device.type === 'webgpu'\n                        ? bufferLayoutHelper.getBufferIndex(attributeInfo.bufferName)\n                        : attributeInfo.location;\n                    this.vertexArray.setBuffer(location, buffer);\n                    set = true;\n                }\n            }\n            if (!set && !disableWarnings) {\n                log.warn(`Model(${this.id}): Ignoring buffer \"${buffer.id}\" for unknown attribute \"${bufferName}\"`)();\n            }\n        }\n        this.setNeedsRedraw('attributes');\n    }\n    /**\n     * Sets constant attributes\n     * @note Overrides any attributes previously set with the same name\n     * Constant attributes are only supported in WebGL, not in WebGPU\n     * Any attribute that is disabled in the current vertex array object\n     * is read from the context's global constant value for that attribute location.\n     * @param constantAttributes\n     */\n    setConstantAttributes(attributes, options) {\n        for (const [attributeName, value] of Object.entries(attributes)) {\n            const attributeInfo = this._attributeInfos[attributeName];\n            if (attributeInfo) {\n                this.vertexArray.setConstantWebGL(attributeInfo.location, value);\n            }\n            else if (!(options?.disableWarnings ?? this.props.disableWarnings)) {\n                log.warn(`Model \"${this.id}: Ignoring constant supplied for unknown attribute \"${attributeName}\"`)();\n            }\n        }\n        this.setNeedsRedraw('constants');\n    }\n    // INTERNAL METHODS\n    /** Check that bindings are loaded. Returns id of first binding that is still loading. */\n    _areBindingsLoading() {\n        for (const binding of Object.values(this.bindings)) {\n            if (binding instanceof AsyncTexture && !binding.isReady) {\n                return binding.id;\n            }\n        }\n        return false;\n    }\n    /** Extracts texture view from loaded async textures. Returns null if any textures have not yet been loaded. */\n    _getBindings() {\n        const validBindings = {};\n        for (const [name, binding] of Object.entries(this.bindings)) {\n            if (binding instanceof AsyncTexture) {\n                // Check that async textures are loaded\n                if (binding.isReady) {\n                    validBindings[name] = binding.texture;\n                }\n            }\n            else {\n                validBindings[name] = binding;\n            }\n        }\n        return validBindings;\n    }\n    /** Get the timestamp of the latest updated bound GPU memory resource (buffer/texture). */\n    _getBindingsUpdateTimestamp() {\n        let timestamp = 0;\n        for (const binding of Object.values(this.bindings)) {\n            if (binding instanceof TextureView) {\n                timestamp = Math.max(timestamp, binding.texture.updateTimestamp);\n            }\n            else if (binding instanceof Buffer || binding instanceof Texture) {\n                timestamp = Math.max(timestamp, binding.updateTimestamp);\n            }\n            else if (binding instanceof AsyncTexture) {\n                timestamp = binding.texture\n                    ? Math.max(timestamp, binding.texture.updateTimestamp)\n                    : // The texture will become available in the future\n                        Infinity;\n            }\n            else if (!(binding instanceof Sampler)) {\n                timestamp = Math.max(timestamp, binding.buffer.updateTimestamp);\n            }\n        }\n        return timestamp;\n    }\n    /**\n     * Updates the optional geometry attributes\n     * Geometry, sets several attributes, indexBuffer, and also vertex count\n     * @note Can trigger a pipeline rebuild / pipeline cache fetch on WebGPU\n     */\n    _setGeometryAttributes(gpuGeometry) {\n        // Filter geometry attribute so that we don't issue warnings for unused attributes\n        const attributes = { ...gpuGeometry.attributes };\n        for (const [attributeName] of Object.entries(attributes)) {\n            if (!this.pipeline.shaderLayout.attributes.find(layout => layout.name === attributeName) &&\n                attributeName !== 'positions') {\n                delete attributes[attributeName];\n            }\n        }\n        // TODO - delete previous geometry?\n        this.vertexCount = gpuGeometry.vertexCount;\n        this.setIndexBuffer(gpuGeometry.indices || null);\n        this.setAttributes(gpuGeometry.attributes, { disableWarnings: true });\n        this.setAttributes(attributes, { disableWarnings: this.props.disableWarnings });\n        this.setNeedsRedraw('geometry attributes');\n    }\n    /** Mark pipeline as needing update */\n    _setPipelineNeedsUpdate(reason) {\n        this._pipelineNeedsUpdate ||= reason;\n        this.setNeedsRedraw(reason);\n    }\n    /** Update pipeline if needed */\n    _updatePipeline() {\n        if (this._pipelineNeedsUpdate) {\n            let prevShaderVs = null;\n            let prevShaderFs = null;\n            if (this.pipeline) {\n                log.log(1, `Model ${this.id}: Recreating pipeline because \"${this._pipelineNeedsUpdate}\".`)();\n                prevShaderVs = this.pipeline.vs;\n                prevShaderFs = this.pipeline.fs;\n            }\n            this._pipelineNeedsUpdate = false;\n            const vs = this.shaderFactory.createShader({\n                id: `${this.id}-vertex`,\n                stage: 'vertex',\n                source: this.source || this.vs,\n                debugShaders: this.props.debugShaders\n            });\n            let fs = null;\n            if (this.source) {\n                fs = vs;\n            }\n            else if (this.fs) {\n                fs = this.shaderFactory.createShader({\n                    id: `${this.id}-fragment`,\n                    stage: 'fragment',\n                    source: this.source || this.fs,\n                    debugShaders: this.props.debugShaders\n                });\n            }\n            this.pipeline = this.pipelineFactory.createRenderPipeline({\n                ...this.props,\n                bufferLayout: this.bufferLayout,\n                topology: this.topology,\n                parameters: this.parameters,\n                // TODO - why set bindings here when we reset them every frame?\n                // Should we expose a BindGroup abstraction?\n                bindings: this._getBindings(),\n                vs,\n                fs\n            });\n            this._attributeInfos = getAttributeInfosFromLayouts(this.pipeline.shaderLayout, this.bufferLayout);\n            if (prevShaderVs)\n                this.shaderFactory.release(prevShaderVs);\n            if (prevShaderFs)\n                this.shaderFactory.release(prevShaderFs);\n        }\n        return this.pipeline;\n    }\n    /** Throttle draw call logging */\n    _lastLogTime = 0;\n    _logOpen = false;\n    _logDrawCallStart() {\n        // IF level is 4 or higher, log every frame.\n        const logDrawTimeout = log.level > 3 ? 0 : LOG_DRAW_TIMEOUT;\n        if (log.level < 2 || Date.now() - this._lastLogTime < logDrawTimeout) {\n            return;\n        }\n        this._lastLogTime = Date.now();\n        this._logOpen = true;\n        log.group(LOG_DRAW_PRIORITY, `>>> DRAWING MODEL ${this.id}`, { collapsed: log.level <= 2 })();\n    }\n    _logDrawCallEnd() {\n        if (this._logOpen) {\n            const shaderLayoutTable = getDebugTableForShaderLayout(this.pipeline.shaderLayout, this.id);\n            // log.table(logLevel, attributeTable)();\n            // log.table(logLevel, uniformTable)();\n            log.table(LOG_DRAW_PRIORITY, shaderLayoutTable)();\n            const uniformTable = this.shaderInputs.getDebugTable();\n            log.table(LOG_DRAW_PRIORITY, uniformTable)();\n            const attributeTable = this._getAttributeDebugTable();\n            log.table(LOG_DRAW_PRIORITY, this._attributeInfos)();\n            log.table(LOG_DRAW_PRIORITY, attributeTable)();\n            log.groupEnd(LOG_DRAW_PRIORITY)();\n            this._logOpen = false;\n        }\n    }\n    _drawCount = 0;\n    _logFramebuffer(renderPass) {\n        const debugFramebuffers = this.device.props.debugFramebuffers;\n        this._drawCount++;\n        // Update first 3 frames and then every 60 frames\n        if (!debugFramebuffers) {\n            // } || (this._drawCount++ > 3 && this._drawCount % 60)) {\n            return;\n        }\n        // TODO - display framebuffer output in debug window\n        const framebuffer = renderPass.props.framebuffer;\n        if (framebuffer) {\n            debugFramebuffer(framebuffer, { id: framebuffer.id, minimap: true });\n            // log.image({logLevel: LOG_DRAW_PRIORITY, message: `${framebuffer.id} %c sup?`, image})();\n        }\n    }\n    _getAttributeDebugTable() {\n        const table = {};\n        for (const [name, attributeInfo] of Object.entries(this._attributeInfos)) {\n            const values = this.vertexArray.attributes[attributeInfo.location];\n            table[attributeInfo.location] = {\n                name,\n                type: attributeInfo.shaderType,\n                values: values\n                    ? this._getBufferOrConstantValues(values, attributeInfo.bufferDataType)\n                    : 'null'\n            };\n        }\n        if (this.vertexArray.indexBuffer) {\n            const { indexBuffer } = this.vertexArray;\n            const values = indexBuffer.indexType === 'uint32'\n                ? new Uint32Array(indexBuffer.debugData)\n                : new Uint16Array(indexBuffer.debugData);\n            table['indices'] = {\n                name: 'indices',\n                type: indexBuffer.indexType,\n                values: values.toString()\n            };\n        }\n        return table;\n    }\n    // TODO - fix typing of luma data types\n    _getBufferOrConstantValues(attribute, dataType) {\n        const TypedArrayConstructor = getTypedArrayConstructor(dataType);\n        const typedArray = attribute instanceof Buffer ? new TypedArrayConstructor(attribute.debugData) : attribute;\n        return typedArray.toString();\n    }\n}\nfunction shaderModuleHasUniforms(module) {\n    return Boolean(module.uniformTypes && !isObjectEmpty(module.uniformTypes));\n}\n// HELPERS\n/** Create a shadertools platform info from the Device */\nexport function getPlatformInfo(device) {\n    return {\n        type: device.type,\n        shaderLanguage: device.info.shadingLanguage,\n        shaderLanguageVersion: device.info.shadingLanguageVersion,\n        gpu: device.info.gpu,\n        // HACK - we pretend that the DeviceFeatures is a Set, it has a similar API\n        features: device.features\n    };\n}\n/** Returns true if given object is empty, false otherwise. */\nfunction isObjectEmpty(obj) {\n    // @ts-ignore key is unused\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    for (const key in obj) {\n        return false;\n    }\n    return true;\n}\n//# sourceMappingURL=model.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Buffer } from '@luma.gl/core';\nimport { getPassthroughFS } from '@luma.gl/shadertools';\nimport { Model } from \"../model/model.js\";\n/**\n * Manages a WebGL program (pipeline) for bufferbuffer transforms.\n * @note Only works under WebGL2.\n */\nexport class BufferTransform {\n    device;\n    model;\n    transformFeedback;\n    static defaultProps = {\n        ...Model.defaultProps,\n        outputs: undefined,\n        feedbackBuffers: undefined\n    };\n    static isSupported(device) {\n        return device?.info?.type === 'webgl';\n    }\n    constructor(device, props = BufferTransform.defaultProps) {\n        if (!BufferTransform.isSupported(device)) {\n            throw new Error('BufferTransform not yet implemented on WebGPU');\n        }\n        this.device = device;\n        this.model = new Model(this.device, {\n            id: props.id || 'buffer-transform-model',\n            fs: props.fs || getPassthroughFS(),\n            topology: props.topology || 'point-list',\n            varyings: props.outputs || props.varyings,\n            ...props\n        });\n        this.transformFeedback = this.device.createTransformFeedback({\n            layout: this.model.pipeline.shaderLayout,\n            // @ts-expect-error TODO\n            buffers: props.feedbackBuffers\n        });\n        this.model.setTransformFeedback(this.transformFeedback);\n        Object.seal(this);\n    }\n    /** Destroy owned resources. */\n    destroy() {\n        if (this.model) {\n            this.model.destroy();\n        }\n    }\n    /** @deprecated Use {@link destroy}. */\n    delete() {\n        this.destroy();\n    }\n    /** Run one transform loop. */\n    run(options) {\n        if (options?.inputBuffers) {\n            this.model.setAttributes(options.inputBuffers);\n        }\n        if (options?.outputBuffers) {\n            this.transformFeedback.setBuffers(options.outputBuffers);\n        }\n        const renderPass = this.device.beginRenderPass(options);\n        this.model.draw(renderPass);\n        renderPass.end();\n    }\n    // DEPRECATED METHODS\n    /** @deprecated App knows what buffers it is passing in - Returns the {@link Buffer} or {@link BufferRange} for given varying name. */\n    getBuffer(varyingName) {\n        return this.transformFeedback.getBuffer(varyingName);\n    }\n    /** @deprecated App knows what buffers it is passing in - Reads the {@link Buffer} or {@link BufferRange} for given varying name. */\n    readAsync(varyingName) {\n        const result = this.getBuffer(varyingName);\n        if (!result) {\n            throw new Error('BufferTransform#getBuffer');\n        }\n        if (result instanceof Buffer) {\n            return result.readAsync();\n        }\n        const { buffer, byteOffset = 0, byteLength = buffer.byteLength } = result;\n        return buffer.readAsync(byteOffset, byteLength);\n    }\n}\n//# sourceMappingURL=buffer-transform.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { uid } from \"../utils/uid.js\";\nexport class Geometry {\n    id;\n    /** Determines how vertices are read from the 'vertex' attributes */\n    topology;\n    vertexCount;\n    indices;\n    attributes;\n    userData = {};\n    constructor(props) {\n        const { attributes = {}, indices = null, vertexCount = null } = props;\n        this.id = props.id || uid('geometry');\n        this.topology = props.topology;\n        if (indices) {\n            this.indices = ArrayBuffer.isView(indices) ? { value: indices, size: 1 } : indices;\n        }\n        // @ts-expect-error\n        this.attributes = {};\n        for (const [attributeName, attributeValue] of Object.entries(attributes)) {\n            // Wrap \"unwrapped\" arrays and try to autodetect their type\n            const attribute = ArrayBuffer.isView(attributeValue)\n                ? { value: attributeValue }\n                : attributeValue;\n            if (!ArrayBuffer.isView(attribute.value)) {\n                throw new Error(`${this._print(attributeName)}: must be typed array or object with value as typed array`);\n            }\n            if ((attributeName === 'POSITION' || attributeName === 'positions') && !attribute.size) {\n                attribute.size = 3;\n            }\n            // Move indices to separate field\n            if (attributeName === 'indices') {\n                if (this.indices) {\n                    throw new Error('Multiple indices detected');\n                }\n                this.indices = attribute;\n            }\n            else {\n                this.attributes[attributeName] = attribute;\n            }\n        }\n        if (this.indices && this.indices['isIndexed'] !== undefined) {\n            this.indices = Object.assign({}, this.indices);\n            delete this.indices['isIndexed'];\n        }\n        this.vertexCount = vertexCount || this._calculateVertexCount(this.attributes, this.indices);\n    }\n    getVertexCount() {\n        return this.vertexCount;\n    }\n    /**\n     * Return an object with all attributes plus indices added as a field.\n     * TODO Geometry types are a mess\n     */\n    getAttributes() {\n        // @ts-ignore\n        return this.indices ? { indices: this.indices, ...this.attributes } : this.attributes;\n    }\n    // PRIVATE\n    _print(attributeName) {\n        return `Geometry ${this.id} attribute ${attributeName}`;\n    }\n    /**\n     * GeometryAttribute\n     * value: typed array\n     * type: indices, vertices, uvs\n     * size: elements per vertex\n     * target: WebGL buffer type (string or constant)\n     *\n     * @param attributes\n     * @param indices\n     * @returns\n     */\n    _setAttributes(attributes, indices) {\n        return this;\n    }\n    _calculateVertexCount(attributes, indices) {\n        if (indices) {\n            return indices.value.length;\n        }\n        let vertexCount = Infinity;\n        for (const attribute of Object.values(attributes)) {\n            const { value, size, constant } = attribute;\n            if (!constant && value && size !== undefined && size >= 1) {\n                vertexCount = Math.min(vertexCount, value.length / size);\n            }\n        }\n        // assert(Number.isFinite(vertexCount));\n        return vertexCount;\n    }\n}\n//# sourceMappingURL=geometry.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Geometry } from \"../geometry/geometry.js\";\nimport { uid } from \"../utils/uid.js\";\nexport class CubeGeometry extends Geometry {\n    constructor(props = {}) {\n        const { id = uid('cube-geometry'), indices = true } = props;\n        super(indices\n            ? {\n                ...props,\n                id,\n                topology: 'triangle-list',\n                indices: { size: 1, value: CUBE_INDICES },\n                attributes: { ...ATTRIBUTES, ...props.attributes }\n            }\n            : {\n                ...props,\n                id,\n                topology: 'triangle-list',\n                indices: undefined,\n                attributes: { ...NON_INDEXED_ATTRIBUTES, ...props.attributes }\n            });\n    }\n}\n// prettier-ignore\nconst CUBE_INDICES = new Uint16Array([\n    0, 1, 2, 0, 2, 3, 4, 5, 6, 4, 6, 7, 8, 9, 10, 8, 10, 11, 12, 13,\n    14, 12, 14, 15, 16, 17, 18, 16, 18, 19, 20, 21, 22, 20, 22, 23\n]);\n// prettier-ignore\nconst CUBE_POSITIONS = new Float32Array([\n    -1, -1, 1, 1, -1, 1, 1, 1, 1, -1, 1, 1,\n    -1, -1, -1, -1, 1, -1, 1, 1, -1, 1, -1, -1,\n    -1, 1, -1, -1, 1, 1, 1, 1, 1, 1, 1, -1,\n    -1, -1, -1, 1, -1, -1, 1, -1, 1, -1, -1, 1,\n    1, -1, -1, 1, 1, -1, 1, 1, 1, 1, -1, 1,\n    -1, -1, -1, -1, -1, 1, -1, 1, 1, -1, 1, -1\n]);\n// TODO - could be Uint8\n// prettier-ignore\nconst CUBE_NORMALS = new Float32Array([\n    // Front face\n    0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1,\n    // Back face\n    0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1,\n    // Top face\n    0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0,\n    // Bottom face\n    0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0,\n    // Right face\n    1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0,\n    // Left face\n    -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0\n]);\n// prettier-ignore\nconst CUBE_TEX_COORDS = new Float32Array([\n    // Front face\n    0, 0, 1, 0, 1, 1, 0, 1,\n    // Back face\n    1, 0, 1, 1, 0, 1, 0, 0,\n    // Top face\n    0, 1, 0, 0, 1, 0, 1, 1,\n    // Bottom face\n    1, 1, 0, 1, 0, 0, 1, 0,\n    // Right face\n    1, 0, 1, 1, 0, 1, 0, 0,\n    // Left face\n    0, 0, 1, 0, 1, 1, 0, 1\n]);\n// float4 position\n// prettier-ignore\nexport const CUBE_NON_INDEXED_POSITIONS = new Float32Array([\n    1, -1, 1,\n    -1, -1, 1,\n    -1, -1, -1,\n    1, -1, -1,\n    1, -1, 1,\n    -1, -1, -1,\n    1, 1, 1,\n    1, -1, 1,\n    1, -1, -1,\n    1, 1, -1,\n    1, 1, 1,\n    1, -1, -1,\n    -1, 1, 1,\n    1, 1, 1,\n    1, 1, -1,\n    -1, 1, -1,\n    -1, 1, 1,\n    1, 1, -1,\n    -1, -1, 1,\n    -1, 1, 1,\n    -1, 1, -1,\n    -1, -1, -1,\n    -1, -1, 1,\n    -1, 1, -1,\n    1, 1, 1,\n    -1, 1, 1,\n    -1, -1, 1,\n    -1, -1, 1,\n    1, -1, 1,\n    1, 1, 1,\n    1, -1, -1,\n    -1, -1, -1,\n    -1, 1, -1,\n    1, 1, -1,\n    1, -1, -1,\n    -1, 1, -1,\n]);\n// float2 uv,\n// prettier-ignore\nexport const CUBE_NON_INDEXED_TEX_COORDS = new Float32Array([\n    1, 1,\n    0, 1,\n    0, 0,\n    1, 0,\n    1, 1,\n    0, 0,\n    1, 1,\n    0, 1,\n    0, 0,\n    1, 0,\n    1, 1,\n    0, 0,\n    1, 1,\n    0, 1,\n    0, 0,\n    1, 0,\n    1, 1,\n    0, 0,\n    1, 1,\n    0, 1,\n    0, 0,\n    1, 0,\n    1, 1,\n    0, 0,\n    1, 1,\n    0, 1,\n    0, 0,\n    0, 0,\n    1, 0,\n    1, 1,\n    1, 1,\n    0, 1,\n    0, 0,\n    1, 0,\n    1, 1,\n    0, 0,\n]);\n// float4 color\n// prettier-ignore\nexport const CUBE_NON_INDEXED_COLORS = new Float32Array([\n    1, 0, 1, 1,\n    0, 0, 1, 1,\n    0, 0, 0, 1,\n    1, 0, 0, 1,\n    1, 0, 1, 1,\n    0, 0, 0, 1,\n    1, 1, 1, 1,\n    1, 0, 1, 1,\n    1, 0, 0, 1,\n    1, 1, 0, 1,\n    1, 1, 1, 1,\n    1, 0, 0, 1,\n    0, 1, 1, 1,\n    1, 1, 1, 1,\n    1, 1, 0, 1,\n    0, 1, 0, 1,\n    0, 1, 1, 1,\n    1, 1, 0, 1,\n    0, 0, 1, 1,\n    0, 1, 1, 1,\n    0, 1, 0, 1,\n    0, 0, 0, 1,\n    0, 0, 1, 1,\n    0, 1, 0, 1,\n    1, 1, 1, 1,\n    0, 1, 1, 1,\n    0, 0, 1, 1,\n    0, 0, 1, 1,\n    1, 0, 1, 1,\n    1, 1, 1, 1,\n    1, 0, 0, 1,\n    0, 0, 0, 1,\n    0, 1, 0, 1,\n    1, 1, 0, 1,\n    1, 0, 0, 1,\n    0, 1, 0, 1,\n]);\nconst ATTRIBUTES = {\n    POSITION: { size: 3, value: CUBE_POSITIONS },\n    NORMAL: { size: 3, value: CUBE_NORMALS },\n    TEXCOORD_0: { size: 2, value: CUBE_TEX_COORDS }\n};\nconst NON_INDEXED_ATTRIBUTES = {\n    POSITION: { size: 3, value: CUBE_NON_INDEXED_POSITIONS },\n    // NORMAL: {size: 3, value: CUBE_NON_INDEXED_NORMALS},\n    TEXCOORD_0: { size: 2, value: CUBE_NON_INDEXED_TEX_COORDS },\n    COLOR_0: { size: 3, value: CUBE_NON_INDEXED_COLORS }\n};\n//# sourceMappingURL=cube-geometry.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { getTypedArrayConstructor, getDataType } from '@luma.gl/core';\nexport function typedArrayFromDataType(type) {\n    // Sorted in some order of likelihood to reduce amount of comparisons\n    switch (type) {\n        case 'float64':\n            return Float64Array;\n        case 'uint8':\n        case 'unorm8':\n            return Uint8ClampedArray;\n        default:\n            return getTypedArrayConstructor(type);\n    }\n}\nexport const dataTypeFromTypedArray = getDataType;\nexport function getBufferAttributeLayout(name, accessor, deviceType) {\n    // TODO(ibgreen): WebGPU change. Currently we always use normalized 8 bit integers\n    const type = deviceType === 'webgpu' && accessor.type === 'uint8' ? 'unorm8' : accessor.type;\n    return {\n        attribute: name,\n        // @ts-expect-error Not all combinations are valid vertex formats; it's up to DataColumn to ensure\n        format: accessor.size > 1 ? `${type}x${accessor.size}` : accessor.type,\n        byteOffset: accessor.offset || 0\n        // Note stride is set on the top level\n    };\n}\nexport function getStride(accessor) {\n    return accessor.stride || accessor.size * accessor.bytesPerElement;\n}\nexport function bufferLayoutEqual(accessor1, accessor2) {\n    return (accessor1.type === accessor2.type &&\n        accessor1.size === accessor2.size &&\n        getStride(accessor1) === getStride(accessor2) &&\n        (accessor1.offset || 0) === (accessor2.offset || 0));\n}\n//# sourceMappingURL=gl-utils.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Buffer } from '@luma.gl/core';\nimport { typedArrayFromDataType, getBufferAttributeLayout, getStride, dataTypeFromTypedArray } from \"./gl-utils.js\";\nimport typedArrayManager from \"../../utils/typed-array-manager.js\";\nimport { toDoublePrecisionArray } from \"../../utils/math-utils.js\";\nimport log from \"../../utils/log.js\";\nfunction resolveShaderAttribute(baseAccessor, shaderAttributeOptions) {\n    if (shaderAttributeOptions.offset) {\n        log.removed('shaderAttribute.offset', 'vertexOffset, elementOffset')();\n    }\n    // All shader attributes share the parent's stride\n    const stride = getStride(baseAccessor);\n    // `vertexOffset` is used to access the neighboring vertex's value\n    // e.g. `nextPositions` in polygon\n    const vertexOffset = shaderAttributeOptions.vertexOffset !== undefined\n        ? shaderAttributeOptions.vertexOffset\n        : baseAccessor.vertexOffset || 0;\n    // `elementOffset` is defined when shader attribute's size is smaller than the parent's\n    // e.g. `translations` in transform matrix\n    const elementOffset = shaderAttributeOptions.elementOffset || 0;\n    const offset = \n    // offsets defined by the attribute\n    vertexOffset * stride +\n        elementOffset * baseAccessor.bytesPerElement +\n        // offsets defined by external buffers if any\n        (baseAccessor.offset || 0);\n    return {\n        ...shaderAttributeOptions,\n        offset,\n        stride\n    };\n}\nfunction resolveDoublePrecisionShaderAttributes(baseAccessor, shaderAttributeOptions) {\n    const resolvedOptions = resolveShaderAttribute(baseAccessor, shaderAttributeOptions);\n    return {\n        high: resolvedOptions,\n        low: {\n            ...resolvedOptions,\n            offset: resolvedOptions.offset + baseAccessor.size * 4\n        }\n    };\n}\nexport default class DataColumn {\n    /* eslint-disable max-statements */\n    constructor(device, opts, state) {\n        this._buffer = null;\n        this.device = device;\n        this.id = opts.id || '';\n        this.size = opts.size || 1;\n        const logicalType = opts.logicalType || opts.type;\n        const doublePrecision = logicalType === 'float64';\n        let { defaultValue } = opts;\n        defaultValue = Number.isFinite(defaultValue)\n            ? [defaultValue]\n            : defaultValue || new Array(this.size).fill(0);\n        let bufferType;\n        if (doublePrecision) {\n            bufferType = 'float32';\n        }\n        else if (!logicalType && opts.isIndexed) {\n            bufferType = 'uint32';\n        }\n        else {\n            bufferType = logicalType || 'float32';\n        }\n        // This is the attribute type defined by the layer\n        // If an external buffer is provided, this.type may be overwritten\n        // But we always want to use defaultType for allocation\n        let defaultType = typedArrayFromDataType(logicalType || bufferType);\n        this.doublePrecision = doublePrecision;\n        // `fp64: false` tells a double-precision attribute to allocate Float32Arrays\n        // by default when using auto-packing. This is more efficient in use cases where\n        // high precision is unnecessary, but the `64Low` attribute is still required\n        // by the shader.\n        if (doublePrecision && opts.fp64 === false) {\n            defaultType = Float32Array;\n        }\n        this.value = null;\n        this.settings = {\n            ...opts,\n            defaultType,\n            defaultValue: defaultValue,\n            logicalType,\n            type: bufferType,\n            normalized: bufferType.includes('norm'),\n            size: this.size,\n            bytesPerElement: defaultType.BYTES_PER_ELEMENT\n        };\n        this.state = {\n            ...state,\n            externalBuffer: null,\n            bufferAccessor: this.settings,\n            allocatedValue: null,\n            numInstances: 0,\n            bounds: null,\n            constant: false\n        };\n    }\n    /* eslint-enable max-statements */\n    get isConstant() {\n        return this.state.constant;\n    }\n    get buffer() {\n        return this._buffer;\n    }\n    get byteOffset() {\n        const accessor = this.getAccessor();\n        if (accessor.vertexOffset) {\n            return accessor.vertexOffset * getStride(accessor);\n        }\n        return 0;\n    }\n    get numInstances() {\n        return this.state.numInstances;\n    }\n    set numInstances(n) {\n        this.state.numInstances = n;\n    }\n    delete() {\n        if (this._buffer) {\n            this._buffer.delete();\n            this._buffer = null;\n        }\n        typedArrayManager.release(this.state.allocatedValue);\n    }\n    getBuffer() {\n        if (this.state.constant) {\n            return null;\n        }\n        return this.state.externalBuffer || this._buffer;\n    }\n    getValue(attributeName = this.id, options = null) {\n        const result = {};\n        if (this.state.constant) {\n            const value = this.value;\n            if (options) {\n                const shaderAttributeDef = resolveShaderAttribute(this.getAccessor(), options);\n                const offset = shaderAttributeDef.offset / value.BYTES_PER_ELEMENT;\n                const size = shaderAttributeDef.size || this.size;\n                result[attributeName] = value.subarray(offset, offset + size);\n            }\n            else {\n                result[attributeName] = value;\n            }\n        }\n        else {\n            result[attributeName] = this.getBuffer();\n        }\n        if (this.doublePrecision) {\n            if (this.value instanceof Float64Array) {\n                result[`${attributeName}64Low`] = result[attributeName];\n            }\n            else {\n                // Disable fp64 low part\n                result[`${attributeName}64Low`] = new Float32Array(this.size);\n            }\n        }\n        return result;\n    }\n    _getBufferLayout(attributeName = this.id, options = null) {\n        const accessor = this.getAccessor();\n        const attributes = [];\n        const result = {\n            name: this.id,\n            byteStride: getStride(accessor),\n            attributes\n        };\n        if (this.doublePrecision) {\n            const doubleShaderAttributeDefs = resolveDoublePrecisionShaderAttributes(accessor, options || {});\n            attributes.push(getBufferAttributeLayout(attributeName, { ...accessor, ...doubleShaderAttributeDefs.high }, this.device.type), getBufferAttributeLayout(`${attributeName}64Low`, {\n                ...accessor,\n                ...doubleShaderAttributeDefs.low\n            }, this.device.type));\n        }\n        else if (options) {\n            const shaderAttributeDef = resolveShaderAttribute(accessor, options);\n            attributes.push(getBufferAttributeLayout(attributeName, { ...accessor, ...shaderAttributeDef }, this.device.type));\n        }\n        else {\n            attributes.push(getBufferAttributeLayout(attributeName, accessor, this.device.type));\n        }\n        return result;\n    }\n    setAccessor(accessor) {\n        this.state.bufferAccessor = accessor;\n    }\n    getAccessor() {\n        return this.state.bufferAccessor;\n    }\n    // Returns [min: Array(size), max: Array(size)]\n    /* eslint-disable max-depth */\n    getBounds() {\n        if (this.state.bounds) {\n            return this.state.bounds;\n        }\n        let result = null;\n        if (this.state.constant && this.value) {\n            const min = Array.from(this.value);\n            result = [min, min];\n        }\n        else {\n            const { value, numInstances, size } = this;\n            const len = numInstances * size;\n            if (value && len && value.length >= len) {\n                const min = new Array(size).fill(Infinity);\n                const max = new Array(size).fill(-Infinity);\n                for (let i = 0; i < len;) {\n                    for (let j = 0; j < size; j++) {\n                        const v = value[i++];\n                        if (v < min[j])\n                            min[j] = v;\n                        if (v > max[j])\n                            max[j] = v;\n                    }\n                }\n                result = [min, max];\n            }\n        }\n        this.state.bounds = result;\n        return result;\n    }\n    // returns true if success\n    // eslint-disable-next-line max-statements\n    setData(data) {\n        const { state } = this;\n        let opts;\n        if (ArrayBuffer.isView(data)) {\n            opts = { value: data };\n        }\n        else if (data instanceof Buffer) {\n            opts = { buffer: data };\n        }\n        else {\n            opts = data;\n        }\n        const accessor = { ...this.settings, ...opts };\n        if (ArrayBuffer.isView(opts.value)) {\n            if (!opts.type) {\n                // Deduce data type\n                const is64Bit = this.doublePrecision && opts.value instanceof Float64Array;\n                if (is64Bit) {\n                    accessor.type = 'float32';\n                }\n                else {\n                    const type = dataTypeFromTypedArray(opts.value);\n                    // (lint wants to remove the cast)\n                    // eslint-disable-next-line\n                    accessor.type = (accessor.normalized ? type.replace('int', 'norm') : type);\n                }\n            }\n            accessor.bytesPerElement = opts.value.BYTES_PER_ELEMENT;\n            accessor.stride = getStride(accessor);\n        }\n        state.bounds = null; // clear cached bounds\n        if (opts.constant) {\n            // set constant\n            let value = opts.value;\n            value = this._normalizeValue(value, [], 0);\n            if (this.settings.normalized) {\n                value = this.normalizeConstant(value);\n            }\n            const hasChanged = !state.constant || !this._areValuesEqual(value, this.value);\n            if (!hasChanged) {\n                return false;\n            }\n            state.externalBuffer = null;\n            state.constant = true;\n            this.value = ArrayBuffer.isView(value) ? value : new Float32Array(value);\n        }\n        else if (opts.buffer) {\n            const buffer = opts.buffer;\n            state.externalBuffer = buffer;\n            state.constant = false;\n            this.value = opts.value || null;\n        }\n        else if (opts.value) {\n            this._checkExternalBuffer(opts);\n            let value = opts.value;\n            state.externalBuffer = null;\n            state.constant = false;\n            this.value = value;\n            let { buffer } = this;\n            const stride = getStride(accessor);\n            const byteOffset = (accessor.vertexOffset || 0) * stride;\n            if (this.doublePrecision && value instanceof Float64Array) {\n                value = toDoublePrecisionArray(value, accessor);\n            }\n            if (this.settings.isIndexed) {\n                const ArrayType = this.settings.defaultType;\n                if (value.constructor !== ArrayType) {\n                    // Cast the index buffer to expected type\n                    value = new ArrayType(value);\n                }\n            }\n            // A small over allocation is used as safety margin\n            // Shader attributes may try to access this buffer with bigger offsets\n            const requiredBufferSize = value.byteLength + byteOffset + stride * 2;\n            if (!buffer || buffer.byteLength < requiredBufferSize) {\n                buffer = this._createBuffer(requiredBufferSize);\n            }\n            buffer.write(value, byteOffset);\n        }\n        this.setAccessor(accessor);\n        return true;\n    }\n    updateSubBuffer(opts = {}) {\n        this.state.bounds = null; // clear cached bounds\n        const value = this.value;\n        const { startOffset = 0, endOffset } = opts;\n        this.buffer.write(this.doublePrecision && value instanceof Float64Array\n            ? toDoublePrecisionArray(value, {\n                size: this.size,\n                startIndex: startOffset,\n                endIndex: endOffset\n            })\n            : value.subarray(startOffset, endOffset), startOffset * value.BYTES_PER_ELEMENT + this.byteOffset);\n    }\n    allocate(numInstances, copy = false) {\n        const { state } = this;\n        const oldValue = state.allocatedValue;\n        // Allocate at least one element to ensure a valid buffer\n        const value = typedArrayManager.allocate(oldValue, numInstances + 1, {\n            size: this.size,\n            type: this.settings.defaultType,\n            copy\n        });\n        this.value = value;\n        const { byteOffset } = this;\n        let { buffer } = this;\n        if (!buffer || buffer.byteLength < value.byteLength + byteOffset) {\n            buffer = this._createBuffer(value.byteLength + byteOffset);\n            if (copy && oldValue) {\n                // Upload the full existing attribute value to the GPU, so that updateBuffer\n                // can choose to only update a partial range.\n                // TODO - copy old buffer to new buffer on the GPU\n                buffer.write(oldValue instanceof Float64Array ? toDoublePrecisionArray(oldValue, this) : oldValue, byteOffset);\n            }\n        }\n        state.allocatedValue = value;\n        state.constant = false;\n        state.externalBuffer = null;\n        this.setAccessor(this.settings);\n        return true;\n    }\n    // PRIVATE HELPER METHODS\n    _checkExternalBuffer(opts) {\n        const { value } = opts;\n        if (!ArrayBuffer.isView(value)) {\n            throw new Error(`Attribute ${this.id} value is not TypedArray`);\n        }\n        const ArrayType = this.settings.defaultType;\n        let illegalArrayType = false;\n        if (this.doublePrecision) {\n            // not 32bit or 64bit\n            illegalArrayType = value.BYTES_PER_ELEMENT < 4;\n        }\n        if (illegalArrayType) {\n            throw new Error(`Attribute ${this.id} does not support ${value.constructor.name}`);\n        }\n        if (!(value instanceof ArrayType) && this.settings.normalized && !('normalized' in opts)) {\n            log.warn(`Attribute ${this.id} is normalized`)();\n        }\n    }\n    // https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/vertexAttribPointer\n    normalizeConstant(value) {\n        /* eslint-disable complexity */\n        switch (this.settings.type) {\n            case 'snorm8':\n                // normalize [-128, 127] to [-1, 1]\n                return new Float32Array(value).map(x => ((x + 128) / 255) * 2 - 1);\n            case 'snorm16':\n                // normalize [-32768, 32767] to [-1, 1]\n                return new Float32Array(value).map(x => ((x + 32768) / 65535) * 2 - 1);\n            case 'unorm8':\n                // normalize [0, 255] to [0, 1]\n                return new Float32Array(value).map(x => x / 255);\n            case 'unorm16':\n                // normalize [0, 65535] to [0, 1]\n                return new Float32Array(value).map(x => x / 65535);\n            default:\n                // No normalization for gl.FLOAT and gl.HALF_FLOAT\n                return value;\n        }\n    }\n    /* check user supplied values and apply fallback */\n    _normalizeValue(value, out, start) {\n        const { defaultValue, size } = this.settings;\n        if (Number.isFinite(value)) {\n            out[start] = value;\n            return out;\n        }\n        if (!value) {\n            let i = size;\n            while (--i >= 0) {\n                out[start + i] = defaultValue[i];\n            }\n            return out;\n        }\n        // Important - switch cases are 5x more performant than a for loop!\n        /* eslint-disable no-fallthrough, default-case */\n        switch (size) {\n            case 4:\n                out[start + 3] = Number.isFinite(value[3]) ? value[3] : defaultValue[3];\n            case 3:\n                out[start + 2] = Number.isFinite(value[2]) ? value[2] : defaultValue[2];\n            case 2:\n                out[start + 1] = Number.isFinite(value[1]) ? value[1] : defaultValue[1];\n            case 1:\n                out[start + 0] = Number.isFinite(value[0]) ? value[0] : defaultValue[0];\n                break;\n            default:\n                // In the rare case where the attribute size > 4, do it the slow way\n                // This is used for e.g. transform matrices\n                let i = size;\n                while (--i >= 0) {\n                    out[start + i] = Number.isFinite(value[i]) ? value[i] : defaultValue[i];\n                }\n        }\n        return out;\n    }\n    _areValuesEqual(value1, value2) {\n        if (!value1 || !value2) {\n            return false;\n        }\n        const { size } = this;\n        for (let i = 0; i < size; i++) {\n            if (value1[i] !== value2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    _createBuffer(byteLength) {\n        if (this._buffer) {\n            this._buffer.destroy();\n        }\n        const { isIndexed, type } = this.settings;\n        this._buffer = this.device.createBuffer({\n            ...this._buffer?.props,\n            id: this.id,\n            // TODO(ibgreen) - WebGPU requires COPY_DST and COPY_SRC to allow write / read\n            usage: (isIndexed ? Buffer.INDEX : Buffer.VERTEX) | Buffer.COPY_DST,\n            indexType: isIndexed ? type : undefined,\n            byteLength\n        });\n        return this._buffer;\n    }\n}\n//# sourceMappingURL=data-column.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst EMPTY_ARRAY = [];\nconst placeholderArray = [];\n/*\n * Create an Iterable\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols\n * and a \"context\" tracker from the given data\n */\nexport function createIterable(data, startRow = 0, endRow = Infinity) {\n    let iterable = EMPTY_ARRAY;\n    const objectInfo = {\n        index: -1,\n        data,\n        // visitor can optionally utilize this to avoid constructing a new array for every object\n        target: []\n    };\n    if (!data) {\n        iterable = EMPTY_ARRAY;\n    }\n    else if (typeof data[Symbol.iterator] === 'function') {\n        // data is already an iterable\n        iterable = data;\n    }\n    else if (data.length > 0) {\n        placeholderArray.length = data.length;\n        iterable = placeholderArray;\n    }\n    if (startRow > 0 || Number.isFinite(endRow)) {\n        iterable = (Array.isArray(iterable) ? iterable : Array.from(iterable)).slice(startRow, endRow);\n        objectInfo.index = startRow - 1;\n    }\n    return { iterable, objectInfo };\n}\n/*\n * Returns true if data is an async iterable object\n */\nexport function isAsyncIterable(data) {\n    return data && data[Symbol.asyncIterator];\n}\n/*\n * Create an accessor function from a flat buffer that yields the value at each object index\n */\nexport function getAccessorFromBuffer(typedArray, options) {\n    const { size, stride, offset, startIndices, nested } = options;\n    const bytesPerElement = typedArray.BYTES_PER_ELEMENT;\n    const elementStride = stride ? stride / bytesPerElement : size;\n    const elementOffset = offset ? offset / bytesPerElement : 0;\n    const vertexCount = Math.floor((typedArray.length - elementOffset) / elementStride);\n    return (_, { index, target }) => {\n        if (!startIndices) {\n            const sourceIndex = index * elementStride + elementOffset;\n            for (let j = 0; j < size; j++) {\n                target[j] = typedArray[sourceIndex + j];\n            }\n            return target;\n        }\n        const startIndex = startIndices[index];\n        const endIndex = startIndices[index + 1] || vertexCount;\n        let result;\n        if (nested) {\n            result = new Array(endIndex - startIndex);\n            for (let i = startIndex; i < endIndex; i++) {\n                const sourceIndex = i * elementStride + elementOffset;\n                target = new Array(size);\n                for (let j = 0; j < size; j++) {\n                    target[j] = typedArray[sourceIndex + j];\n                }\n                result[i - startIndex] = target;\n            }\n        }\n        else if (elementStride === size) {\n            result = typedArray.subarray(startIndex * size + elementOffset, endIndex * size + elementOffset);\n        }\n        else {\n            result = new typedArray.constructor((endIndex - startIndex) * size);\n            let targetIndex = 0;\n            for (let i = startIndex; i < endIndex; i++) {\n                const sourceIndex = i * elementStride + elementOffset;\n                for (let j = 0; j < size; j++) {\n                    result[targetIndex++] = typedArray[sourceIndex + j];\n                }\n            }\n        }\n        return result;\n    };\n}\n//# sourceMappingURL=iterable-utils.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/*\n * range (Array)\n *   + start (Number) - the start index (incl.)\n *   + end (Number) - the end index (excl.)\n * rangeList (Array) - array of sorted, combined ranges\n */\nexport const EMPTY = [];\nexport const FULL = [[0, Infinity]];\n// Insert a range into a range collection\nexport function add(rangeList, range) {\n    // Noop if range collection already covers all\n    if (rangeList === FULL) {\n        return rangeList;\n    }\n    // Validate the input range\n    if (range[0] < 0) {\n        range[0] = 0;\n    }\n    if (range[0] >= range[1]) {\n        return rangeList;\n    }\n    // TODO - split off to tree-shakable Range class\n    const newRangeList = [];\n    const len = rangeList.length;\n    let insertPosition = 0;\n    for (let i = 0; i < len; i++) {\n        const range0 = rangeList[i];\n        if (range0[1] < range[0]) {\n            // the current range is to the left of the new range\n            newRangeList.push(range0);\n            insertPosition = i + 1;\n        }\n        else if (range0[0] > range[1]) {\n            // the current range is to the right of the new range\n            newRangeList.push(range0);\n        }\n        else {\n            range = [Math.min(range0[0], range[0]), Math.max(range0[1], range[1])];\n        }\n    }\n    newRangeList.splice(insertPosition, 0, range);\n    return newRangeList;\n}\n//# sourceMappingURL=range.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst DEFAULT_TRANSITION_SETTINGS = {\n    interpolation: {\n        duration: 0,\n        easing: t => t\n    },\n    spring: {\n        stiffness: 0.05,\n        damping: 0.5\n    }\n};\nexport function normalizeTransitionSettings(userSettings, layerSettings) {\n    if (!userSettings) {\n        return null;\n    }\n    if (Number.isFinite(userSettings)) {\n        userSettings = { type: 'interpolation', duration: userSettings };\n    }\n    const type = userSettings.type || 'interpolation';\n    return {\n        ...DEFAULT_TRANSITION_SETTINGS[type],\n        ...layerSettings,\n        ...userSettings,\n        type\n    };\n}\n//# sourceMappingURL=transition-settings.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/* eslint-disable complexity */\nimport DataColumn from \"./data-column.js\";\nimport assert from \"../../utils/assert.js\";\nimport { createIterable, getAccessorFromBuffer } from \"../../utils/iterable-utils.js\";\nimport { fillArray } from \"../../utils/flatten.js\";\nimport * as range from \"../../utils/range.js\";\nimport { bufferLayoutEqual } from \"./gl-utils.js\";\nimport { normalizeTransitionSettings } from \"./transition-settings.js\";\nexport default class Attribute extends DataColumn {\n    constructor(device, opts) {\n        super(device, opts, {\n            startIndices: null,\n            lastExternalBuffer: null,\n            binaryValue: null,\n            binaryAccessor: null,\n            needsUpdate: true,\n            needsRedraw: false,\n            layoutChanged: false,\n            updateRanges: range.FULL\n        });\n        /** Legacy approach to set attribute value - read `isConstant` instead for attribute state */\n        this.constant = false;\n        // eslint-disable-next-line\n        this.settings.update = opts.update || (opts.accessor ? this._autoUpdater : undefined);\n        Object.seal(this.settings);\n        Object.seal(this.state);\n        // Check all fields and generate helpful error messages\n        this._validateAttributeUpdaters();\n    }\n    get startIndices() {\n        return this.state.startIndices;\n    }\n    set startIndices(layout) {\n        this.state.startIndices = layout;\n    }\n    needsUpdate() {\n        return this.state.needsUpdate;\n    }\n    needsRedraw({ clearChangedFlags = false } = {}) {\n        const needsRedraw = this.state.needsRedraw;\n        this.state.needsRedraw = needsRedraw && !clearChangedFlags;\n        return needsRedraw;\n    }\n    layoutChanged() {\n        return this.state.layoutChanged;\n    }\n    setAccessor(accessor) {\n        var _a;\n        (_a = this.state).layoutChanged || (_a.layoutChanged = !bufferLayoutEqual(accessor, this.getAccessor()));\n        super.setAccessor(accessor);\n    }\n    getUpdateTriggers() {\n        const { accessor } = this.settings;\n        // Backards compatibility: allow attribute name to be used as update trigger key\n        return [this.id].concat((typeof accessor !== 'function' && accessor) || []);\n    }\n    supportsTransition() {\n        return Boolean(this.settings.transition);\n    }\n    // Resolve transition settings object if transition is enabled, otherwise `null`\n    getTransitionSetting(opts) {\n        if (!opts || !this.supportsTransition()) {\n            return null;\n        }\n        const { accessor } = this.settings;\n        // TODO: have the layer resolve these transition settings itself?\n        const layerSettings = this.settings.transition;\n        // these are the transition settings passed in by the user\n        const userSettings = Array.isArray(accessor)\n            ? // @ts-ignore\n                opts[accessor.find(a => opts[a])]\n            : // @ts-ignore\n                opts[accessor];\n        // Shorthand: use duration instead of parameter object\n        return normalizeTransitionSettings(userSettings, layerSettings);\n    }\n    setNeedsUpdate(reason = this.id, dataRange) {\n        this.state.needsUpdate = this.state.needsUpdate || reason;\n        this.setNeedsRedraw(reason);\n        if (dataRange) {\n            const { startRow = 0, endRow = Infinity } = dataRange;\n            this.state.updateRanges = range.add(this.state.updateRanges, [startRow, endRow]);\n        }\n        else {\n            this.state.updateRanges = range.FULL;\n        }\n    }\n    clearNeedsUpdate() {\n        this.state.needsUpdate = false;\n        this.state.updateRanges = range.EMPTY;\n    }\n    setNeedsRedraw(reason = this.id) {\n        this.state.needsRedraw = this.state.needsRedraw || reason;\n    }\n    allocate(numInstances) {\n        const { state, settings } = this;\n        if (settings.noAlloc) {\n            // Data is provided through a Buffer object.\n            return false;\n        }\n        if (settings.update) {\n            super.allocate(numInstances, state.updateRanges !== range.FULL);\n            return true;\n        }\n        return false;\n    }\n    updateBuffer({ numInstances, data, props, context }) {\n        if (!this.needsUpdate()) {\n            return false;\n        }\n        const { state: { updateRanges }, settings: { update, noAlloc } } = this;\n        let updated = true;\n        if (update) {\n            // Custom updater - typically for non-instanced layers\n            for (const [startRow, endRow] of updateRanges) {\n                update.call(context, this, { data, startRow, endRow, props, numInstances });\n            }\n            if (!this.value) {\n                // no value was assigned during update\n            }\n            else if (this.constant ||\n                !this.buffer ||\n                this.buffer.byteLength < this.value.byteLength + this.byteOffset) {\n                this.setData({\n                    value: this.value,\n                    constant: this.constant\n                });\n                // Setting attribute.constant in updater is a legacy approach that interferes with allocation in the next cycle\n                // Respect it here but reset after use\n                this.constant = false;\n            }\n            else {\n                for (const [startRow, endRow] of updateRanges) {\n                    const startOffset = Number.isFinite(startRow) ? this.getVertexOffset(startRow) : 0;\n                    const endOffset = Number.isFinite(endRow)\n                        ? this.getVertexOffset(endRow)\n                        : noAlloc || !Number.isFinite(numInstances)\n                            ? this.value.length\n                            : numInstances * this.size;\n                    super.updateSubBuffer({ startOffset, endOffset });\n                }\n            }\n            this._checkAttributeArray();\n        }\n        else {\n            updated = false;\n        }\n        this.clearNeedsUpdate();\n        this.setNeedsRedraw();\n        return updated;\n    }\n    // Use generic value\n    // Returns true if successful\n    setConstantValue(context, value) {\n        // TODO(ibgreen): WebGPU does not support constant values,\n        // they will be emulated as buffers instead for now.\n        const isWebGPU = this.device.type === 'webgpu';\n        if (isWebGPU || value === undefined || typeof value === 'function') {\n            if (isWebGPU && typeof value !== 'function') {\n                const normalisedValue = this._normalizeValue(value, [], 0);\n                // ensure we trigger an update for the attribute's emulated buffer\n                // where webgl would perform the update here\n                if (!this._areValuesEqual(normalisedValue, this.value)) {\n                    this.setNeedsUpdate('WebGPU constant updated');\n                }\n            }\n            return false;\n        }\n        const transformedValue = this.settings.transform && context ? this.settings.transform.call(context, value) : value;\n        const hasChanged = this.setData({ constant: true, value: transformedValue });\n        if (hasChanged) {\n            this.setNeedsRedraw();\n        }\n        this.clearNeedsUpdate();\n        return true;\n    }\n    // Use external buffer\n    // Returns true if successful\n    // eslint-disable-next-line max-statements\n    setExternalBuffer(buffer) {\n        const { state } = this;\n        if (!buffer) {\n            state.lastExternalBuffer = null;\n            return false;\n        }\n        this.clearNeedsUpdate();\n        if (state.lastExternalBuffer === buffer) {\n            return true;\n        }\n        state.lastExternalBuffer = buffer;\n        this.setNeedsRedraw();\n        this.setData(buffer);\n        return true;\n    }\n    // Binary value is a typed array packed from mapping the source data with the accessor\n    // If the returned value from the accessor is the same as the attribute value, set it directly\n    // Otherwise use the auto updater for transform/normalization\n    setBinaryValue(buffer, startIndices = null) {\n        const { state, settings } = this;\n        if (!buffer) {\n            state.binaryValue = null;\n            state.binaryAccessor = null;\n            return false;\n        }\n        if (settings.noAlloc) {\n            // Let the layer handle this\n            return false;\n        }\n        if (state.binaryValue === buffer) {\n            this.clearNeedsUpdate();\n            return true;\n        }\n        state.binaryValue = buffer;\n        this.setNeedsRedraw();\n        const needsUpdate = settings.transform || startIndices !== this.startIndices;\n        if (needsUpdate) {\n            if (ArrayBuffer.isView(buffer)) {\n                buffer = { value: buffer };\n            }\n            const binaryValue = buffer;\n            assert(ArrayBuffer.isView(binaryValue.value), `invalid ${settings.accessor}`);\n            const needsNormalize = Boolean(binaryValue.size) && binaryValue.size !== this.size;\n            state.binaryAccessor = getAccessorFromBuffer(binaryValue.value, {\n                size: binaryValue.size || this.size,\n                stride: binaryValue.stride,\n                offset: binaryValue.offset,\n                startIndices: startIndices,\n                nested: needsNormalize\n            });\n            // Fall through to auto updater\n            return false;\n        }\n        this.clearNeedsUpdate();\n        this.setData(buffer);\n        return true;\n    }\n    getVertexOffset(row) {\n        const { startIndices } = this;\n        const vertexIndex = startIndices\n            ? row < startIndices.length\n                ? startIndices[row]\n                : this.numInstances\n            : row;\n        return vertexIndex * this.size;\n    }\n    getValue() {\n        const shaderAttributeDefs = this.settings.shaderAttributes;\n        const result = super.getValue();\n        if (!shaderAttributeDefs) {\n            return result;\n        }\n        for (const shaderAttributeName in shaderAttributeDefs) {\n            Object.assign(result, super.getValue(shaderAttributeName, shaderAttributeDefs[shaderAttributeName]));\n        }\n        return result;\n    }\n    /** Generate WebGPU-style buffer layout descriptor from this attribute */\n    getBufferLayout(\n    /** A luma.gl Model-shaped object that supplies additional hint to attribute resolution */\n    modelInfo) {\n        // Clear change flag\n        this.state.layoutChanged = false;\n        const shaderAttributeDefs = this.settings.shaderAttributes;\n        const result = super._getBufferLayout();\n        const { stepMode } = this.settings;\n        if (stepMode === 'dynamic') {\n            // If model info is provided, use isInstanced flag to determine step mode\n            // If no model info is provided, assume it's an instanced model (most common use case)\n            result.stepMode = modelInfo ? (modelInfo.isInstanced ? 'instance' : 'vertex') : 'instance';\n        }\n        else {\n            result.stepMode = stepMode ?? 'vertex';\n        }\n        if (!shaderAttributeDefs) {\n            return result;\n        }\n        for (const shaderAttributeName in shaderAttributeDefs) {\n            const map = super._getBufferLayout(shaderAttributeName, shaderAttributeDefs[shaderAttributeName]);\n            // @ts-ignore\n            result.attributes.push(...map.attributes);\n        }\n        return result;\n    }\n    /* eslint-disable max-depth, max-statements */\n    _autoUpdater(attribute, { data, startRow, endRow, props, numInstances }) {\n        if (attribute.constant) {\n            // @ts-ignore TODO(ibgreen) declare context?\n            if (this.context.device.type !== 'webgpu') {\n                return;\n            }\n        }\n        const { settings, state, value, size, startIndices } = attribute;\n        const { accessor, transform } = settings;\n        let accessorFunc = state.binaryAccessor ||\n            // @ts-ignore\n            (typeof accessor === 'function' ? accessor : props[accessor]);\n        // TODO(ibgreen) WebGPU needs buffers, generate an accessor function from a constant\n        if (typeof accessorFunc !== 'function' && typeof accessor === 'string') {\n            accessorFunc = () => props[accessor];\n        }\n        assert(typeof accessorFunc === 'function', `accessor \"${accessor}\" is not a function`);\n        let i = attribute.getVertexOffset(startRow);\n        const { iterable, objectInfo } = createIterable(data, startRow, endRow);\n        for (const object of iterable) {\n            objectInfo.index++;\n            let objectValue = accessorFunc(object, objectInfo);\n            if (transform) {\n                // transform callbacks could be bound to a particular layer instance.\n                // always point `this` to the current layer.\n                objectValue = transform.call(this, objectValue);\n            }\n            if (startIndices) {\n                const numVertices = (objectInfo.index < startIndices.length - 1\n                    ? startIndices[objectInfo.index + 1]\n                    : numInstances) - startIndices[objectInfo.index];\n                if (objectValue && Array.isArray(objectValue[0])) {\n                    let startIndex = i;\n                    for (const item of objectValue) {\n                        attribute._normalizeValue(item, value, startIndex);\n                        startIndex += size;\n                    }\n                }\n                else if (objectValue && objectValue.length > size) {\n                    value.set(objectValue, i);\n                }\n                else {\n                    attribute._normalizeValue(objectValue, objectInfo.target, 0);\n                    fillArray({\n                        target: value,\n                        source: objectInfo.target,\n                        start: i,\n                        count: numVertices\n                    });\n                }\n                i += numVertices * size;\n            }\n            else {\n                attribute._normalizeValue(objectValue, value, i);\n                i += size;\n            }\n        }\n    }\n    /* eslint-enable max-depth, max-statements */\n    // Validate deck.gl level fields\n    _validateAttributeUpdaters() {\n        const { settings } = this;\n        // Check that 'update' is a valid function\n        const hasUpdater = settings.noAlloc || typeof settings.update === 'function';\n        if (!hasUpdater) {\n            throw new Error(`Attribute ${this.id} missing update or accessor`);\n        }\n    }\n    // check that the first few elements of the attribute are reasonable\n    /* eslint-disable no-fallthrough */\n    _checkAttributeArray() {\n        const { value } = this;\n        const limit = Math.min(4, this.size);\n        if (value && value.length >= limit) {\n            let valid = true;\n            switch (limit) {\n                case 4:\n                    valid = valid && Number.isFinite(value[3]);\n                case 3:\n                    valid = valid && Number.isFinite(value[2]);\n                case 2:\n                    valid = valid && Number.isFinite(value[1]);\n                case 1:\n                    valid = valid && Number.isFinite(value[0]);\n                    break;\n                default:\n                    valid = false;\n            }\n            if (!valid) {\n                throw new Error(`Illegal attribute generated for ${this.id}`);\n            }\n        }\n    }\n}\n//# sourceMappingURL=attribute.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/*\n * Helper function for padArray\n */\nfunction padArrayChunk(options) {\n    const { source, target, start = 0, size, getData } = options;\n    const end = options.end || target.length;\n    const sourceLength = source.length;\n    const targetLength = end - start;\n    if (sourceLength > targetLength) {\n        target.set(source.subarray(0, targetLength), start);\n        return;\n    }\n    target.set(source, start);\n    if (!getData) {\n        return;\n    }\n    // source is not large enough to fill target space, call `getData` to get filler data\n    let i = sourceLength;\n    while (i < targetLength) {\n        const datum = getData(i, source);\n        for (let j = 0; j < size; j++) {\n            target[start + i] = datum[j] || 0;\n            i++;\n        }\n    }\n}\n/*\n * The padArray function stretches a source array to the size of a target array.\n   The arrays can have internal structures (like the attributes of PathLayer and\n   SolidPolygonLayer), defined by the optional sourceStartIndices and targetStartIndices parameters.\n   If the target array is larger, the getData callback is used to fill in the blanks.\n */\nexport function padArray({ source, target, size, getData, sourceStartIndices, targetStartIndices }) {\n    if (!sourceStartIndices || !targetStartIndices) {\n        // Flat arrays\n        padArrayChunk({\n            source,\n            target,\n            size,\n            getData\n        });\n        return target;\n    }\n    // Arrays have internal structure\n    let sourceIndex = 0;\n    let targetIndex = 0;\n    const getChunkData = getData && ((i, chunk) => getData(i + targetIndex, chunk));\n    const n = Math.min(sourceStartIndices.length, targetStartIndices.length);\n    for (let i = 1; i < n; i++) {\n        const nextSourceIndex = sourceStartIndices[i] * size;\n        const nextTargetIndex = targetStartIndices[i] * size;\n        padArrayChunk({\n            source: source.subarray(sourceIndex, nextSourceIndex),\n            target,\n            start: targetIndex,\n            end: nextTargetIndex,\n            size,\n            getData: getChunkData\n        });\n        sourceIndex = nextSourceIndex;\n        targetIndex = nextTargetIndex;\n    }\n    if (targetIndex < target.length) {\n        padArrayChunk({\n            // @ts-ignore\n            source: [],\n            target,\n            start: targetIndex,\n            size,\n            getData: getChunkData\n        });\n    }\n    return target;\n}\n//# sourceMappingURL=array-utils.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { padArray } from \"../utils/array-utils.js\";\nimport Attribute from \"../lib/attribute/attribute.js\";\nimport { GL } from '@luma.gl/constants';\n/** Create a new empty attribute with the same settings: type, shader layout etc. */\nexport function cloneAttribute(attribute) {\n    // `attribute.settings` is the original options passed when constructing the attribute.\n    // This ensures that we set the proper `doublePrecision` flag and shader attributes.\n    const { device, settings, value } = attribute;\n    const newAttribute = new Attribute(device, settings);\n    // Placeholder value - necessary for generating the correct buffer layout\n    newAttribute.setData({\n        value: value instanceof Float64Array ? new Float64Array(0) : new Float32Array(0),\n        normalized: settings.normalized\n    });\n    return newAttribute;\n}\n/** Returns the GLSL attribute type for the given number of float32 components. */\nexport function getAttributeTypeFromSize(size) {\n    switch (size) {\n        case 1:\n            return 'float';\n        case 2:\n            return 'vec2';\n        case 3:\n            return 'vec3';\n        case 4:\n            return 'vec4';\n        default:\n            throw new Error(`No defined attribute type for size \"${size}\"`);\n    }\n}\n/** Returns the {@link VertexFormat} for the given number of float32 components. */\nexport function getFloat32VertexFormat(size) {\n    switch (size) {\n        case 1:\n            return 'float32';\n        case 2:\n            return 'float32x2';\n        case 3:\n            return 'float32x3';\n        case 4:\n            return 'float32x4';\n        default:\n            throw new Error('invalid type size');\n    }\n}\nexport function cycleBuffers(buffers) {\n    buffers.push(buffers.shift());\n}\nexport function getAttributeBufferLength(attribute, numInstances) {\n    const { doublePrecision, settings, value, size } = attribute;\n    const multiplier = doublePrecision && value instanceof Float64Array ? 2 : 1;\n    let maxVertexOffset = 0;\n    const { shaderAttributes } = attribute.settings;\n    if (shaderAttributes) {\n        for (const shaderAttribute of Object.values(shaderAttributes)) {\n            maxVertexOffset = Math.max(maxVertexOffset, shaderAttribute.vertexOffset ?? 0);\n        }\n    }\n    return ((settings.noAlloc ? value.length : (numInstances + maxVertexOffset) * size) *\n        multiplier);\n}\nexport function matchBuffer({ device, source, target }) {\n    if (!target || target.byteLength < source.byteLength) {\n        target?.destroy();\n        target = device.createBuffer({\n            byteLength: source.byteLength,\n            usage: source.usage\n        });\n    }\n    return target;\n}\n/* eslint-disable complexity */\n// This helper is used when transitioning attributes from a set of values in one buffer layout\n// to a set of values in a different buffer layout. (Buffer layouts are used when attribute values\n// within a buffer should be grouped for drawElements, like the Polygon layer.) For example, a\n// buffer layout of [3, 4] might have data [A1, A2, A3, B1, B2, B3, B4]. If it needs to transition\n// to a buffer layout of [4, 2], it should produce a buffer, using the transition setting's `enter`\n// function, that looks like this: [A1, A2, A3, A4 (user `enter` fn), B1, B2, 0]. Note: the final\n// 0 in this buffer is because we never shrink buffers, only grow them, for performance reasons.\n//\n// padBuffer may return either the original buffer, or a new buffer if the size of the original\n// was insufficient. Callers are responsible for disposing of the original buffer if needed.\nexport function padBuffer({ device, buffer, attribute, fromLength, toLength, fromStartIndices, getData = x => x }) {\n    // TODO: move the precisionMultiplier logic to the attribute when retrieving\n    // its `size` and `elementOffset`?\n    const precisionMultiplier = attribute.doublePrecision && attribute.value instanceof Float64Array ? 2 : 1;\n    const size = attribute.size * precisionMultiplier;\n    const byteOffset = attribute.byteOffset;\n    // Transform feedback can only write to float varyings\n    // Attributes of format unorm8/uint8 (1 byte per element) etc will be padded to float32 (4 bytes per element)\n    const targetByteOffset = attribute.settings.bytesPerElement < 4\n        ? (byteOffset / attribute.settings.bytesPerElement) * 4\n        : byteOffset;\n    const toStartIndices = attribute.startIndices;\n    const hasStartIndices = fromStartIndices && toStartIndices;\n    const isConstant = attribute.isConstant;\n    // check if buffer needs to be padded\n    if (!hasStartIndices && buffer && fromLength >= toLength) {\n        return buffer;\n    }\n    const ArrayType = attribute.value instanceof Float64Array\n        ? Float32Array\n        : attribute.value.constructor;\n    const toData = isConstant\n        ? attribute.value\n        : // TODO(v9.1): Avoid non-portable synchronous reads.\n            new ArrayType(attribute\n                .getBuffer()\n                .readSyncWebGL(byteOffset, toLength * ArrayType.BYTES_PER_ELEMENT).buffer);\n    if (attribute.settings.normalized && !isConstant) {\n        const getter = getData;\n        getData = (value, chunk) => attribute.normalizeConstant(getter(value, chunk));\n    }\n    const getMissingData = isConstant\n        ? (i, chunk) => getData(toData, chunk)\n        : (i, chunk) => getData(toData.subarray(i + byteOffset, i + byteOffset + size), chunk);\n    // TODO(v9.1): Avoid non-portable synchronous reads.\n    const source = buffer\n        ? new Float32Array(buffer.readSyncWebGL(targetByteOffset, fromLength * 4).buffer)\n        : new Float32Array(0);\n    const target = new Float32Array(toLength);\n    padArray({\n        source,\n        target,\n        sourceStartIndices: fromStartIndices,\n        targetStartIndices: toStartIndices,\n        size,\n        getData: getMissingData\n    });\n    if (!buffer || buffer.byteLength < target.byteLength + targetByteOffset) {\n        buffer?.destroy();\n        buffer = device.createBuffer({\n            byteLength: target.byteLength + targetByteOffset,\n            usage: 35050\n        });\n    }\n    buffer.write(target, targetByteOffset);\n    return buffer;\n}\n//# sourceMappingURL=gpu-transition-utils.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport Transition from \"./transition.js\";\nimport { cloneAttribute, getAttributeBufferLength } from \"./gpu-transition-utils.js\";\nexport class GPUTransitionBase {\n    constructor({ device, attribute, timeline }) {\n        this.buffers = [];\n        /** The vertex count of the last buffer.\n         * Buffer may be larger than the actual length we want to use\n         * because we only reallocate buffers when they grow, not when they shrink,\n         * due to performance costs */\n        this.currentLength = 0;\n        this.device = device;\n        this.transition = new Transition(timeline);\n        this.attribute = attribute;\n        this.attributeInTransition = cloneAttribute(attribute);\n        this.currentStartIndices = attribute.startIndices;\n    }\n    get inProgress() {\n        return this.transition.inProgress;\n    }\n    start(transitionSettings, numInstances, duration = Infinity) {\n        this.settings = transitionSettings;\n        this.currentStartIndices = this.attribute.startIndices;\n        this.currentLength = getAttributeBufferLength(this.attribute, numInstances);\n        this.transition.start({ ...transitionSettings, duration });\n    }\n    update() {\n        const updated = this.transition.update();\n        if (updated) {\n            this.onUpdate();\n        }\n        return updated;\n    }\n    setBuffer(buffer) {\n        this.attributeInTransition.setData({\n            buffer,\n            normalized: this.attribute.settings.normalized,\n            // Retain placeholder value to generate correct shader layout\n            value: this.attributeInTransition.value\n        });\n    }\n    cancel() {\n        this.transition.cancel();\n    }\n    delete() {\n        this.cancel();\n        for (const buffer of this.buffers) {\n            buffer.destroy();\n        }\n        this.buffers.length = 0;\n    }\n}\n//# sourceMappingURL=gpu-transition.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { BufferTransform } from '@luma.gl/engine';\nimport { fp64arithmetic } from '@luma.gl/shadertools';\nimport { GL } from '@luma.gl/constants';\nimport { getAttributeTypeFromSize, cycleBuffers, padBuffer, matchBuffer, getFloat32VertexFormat } from \"./gpu-transition-utils.js\";\nimport { GPUTransitionBase } from \"./gpu-transition.js\";\nexport default class GPUInterpolationTransition extends GPUTransitionBase {\n    constructor({ device, attribute, timeline }) {\n        super({ device, attribute, timeline });\n        this.type = 'interpolation';\n        this.transform = getTransform(device, attribute);\n    }\n    start(transitionSettings, numInstances) {\n        const prevLength = this.currentLength;\n        const prevStartIndices = this.currentStartIndices;\n        super.start(transitionSettings, numInstances, transitionSettings.duration);\n        if (transitionSettings.duration <= 0) {\n            this.transition.cancel();\n            return;\n        }\n        const { buffers, attribute } = this;\n        // Alternate between two buffers when new transitions start.\n        // Last destination buffer is used as an attribute (from state),\n        // And the other buffer is now the current buffer.\n        cycleBuffers(buffers);\n        buffers[0] = padBuffer({\n            device: this.device,\n            buffer: buffers[0],\n            attribute,\n            fromLength: prevLength,\n            toLength: this.currentLength,\n            fromStartIndices: prevStartIndices,\n            getData: transitionSettings.enter\n        });\n        buffers[1] = matchBuffer({\n            device: this.device,\n            source: buffers[0],\n            target: buffers[1]\n        });\n        this.setBuffer(buffers[1]);\n        const { transform } = this;\n        const model = transform.model;\n        let vertexCount = Math.floor(this.currentLength / attribute.size);\n        if (useFp64(attribute)) {\n            vertexCount /= 2;\n        }\n        model.setVertexCount(vertexCount);\n        if (attribute.isConstant) {\n            model.setAttributes({ aFrom: buffers[0] });\n            model.setConstantAttributes({ aTo: attribute.value });\n        }\n        else {\n            model.setAttributes({\n                aFrom: buffers[0],\n                aTo: attribute.getBuffer()\n            });\n        }\n        transform.transformFeedback.setBuffers({ vCurrent: buffers[1] });\n    }\n    onUpdate() {\n        const { duration, easing } = this.settings;\n        const { time } = this.transition;\n        let t = time / duration;\n        if (easing) {\n            t = easing(t);\n        }\n        const { model } = this.transform;\n        const interpolationProps = { time: t };\n        model.shaderInputs.setProps({ interpolation: interpolationProps });\n        this.transform.run({ discard: true });\n    }\n    delete() {\n        super.delete();\n        this.transform.destroy();\n    }\n}\nconst uniformBlock = `\\\nuniform interpolationUniforms {\n  float time;\n} interpolation;\n`;\nconst interpolationUniforms = {\n    name: 'interpolation',\n    vs: uniformBlock,\n    uniformTypes: {\n        time: 'f32'\n    }\n};\nconst vs = `\\\n#version 300 es\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nin ATTRIBUTE_TYPE aFrom;\nin ATTRIBUTE_TYPE aTo;\nout ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, interpolation.time);\n  gl_Position = vec4(0.0);\n}\n`;\nconst vs64 = `\\\n#version 300 es\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nin ATTRIBUTE_TYPE aFrom;\nin ATTRIBUTE_TYPE aFrom64Low;\nin ATTRIBUTE_TYPE aTo;\nin ATTRIBUTE_TYPE aTo64Low;\nout ATTRIBUTE_TYPE vCurrent;\nout ATTRIBUTE_TYPE vCurrent64Low;\n\nvec2 mix_fp64(vec2 a, vec2 b, float x) {\n  vec2 range = sub_fp64(b, a);\n  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));\n}\n\nvoid main(void) {\n  for (int i=0; i<ATTRIBUTE_SIZE; i++) {\n    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), interpolation.time);\n    vCurrent[i] = value.x;\n    vCurrent64Low[i] = value.y;\n  }\n  gl_Position = vec4(0.0);\n}\n`;\nfunction useFp64(attribute) {\n    return attribute.doublePrecision && attribute.value instanceof Float64Array;\n}\nfunction getTransform(device, attribute) {\n    const attributeSize = attribute.size;\n    const attributeType = getAttributeTypeFromSize(attributeSize);\n    const inputFormat = getFloat32VertexFormat(attributeSize);\n    const bufferLayout = attribute.getBufferLayout();\n    if (useFp64(attribute)) {\n        return new BufferTransform(device, {\n            vs: vs64,\n            bufferLayout: [\n                {\n                    name: 'aFrom',\n                    byteStride: 8 * attributeSize,\n                    attributes: [\n                        { attribute: 'aFrom', format: inputFormat, byteOffset: 0 },\n                        { attribute: 'aFrom64Low', format: inputFormat, byteOffset: 4 * attributeSize }\n                    ]\n                },\n                {\n                    name: 'aTo',\n                    byteStride: 8 * attributeSize,\n                    attributes: [\n                        { attribute: 'aTo', format: inputFormat, byteOffset: 0 },\n                        { attribute: 'aTo64Low', format: inputFormat, byteOffset: 4 * attributeSize }\n                    ]\n                }\n            ],\n            // @ts-expect-error fp64 module only sets ONE uniform via defaultUniforms\n            modules: [fp64arithmetic, interpolationUniforms],\n            defines: {\n                // @ts-expect-error TODO fix luma type\n                ATTRIBUTE_TYPE: attributeType,\n                // @ts-expect-error TODO fix luma type\n                ATTRIBUTE_SIZE: attributeSize\n            },\n            // Default uniforms are not set without this\n            moduleSettings: {},\n            varyings: ['vCurrent', 'vCurrent64Low'],\n            bufferMode: 35980,\n            disableWarnings: true\n        });\n    }\n    return new BufferTransform(device, {\n        vs,\n        bufferLayout: [\n            { name: 'aFrom', format: inputFormat },\n            { name: 'aTo', format: bufferLayout.attributes[0].format }\n        ],\n        modules: [interpolationUniforms],\n        defines: {\n            // @ts-expect-error TODO fix luma type\n            ATTRIBUTE_TYPE: attributeType\n        },\n        varyings: ['vCurrent'],\n        // TODO investigate why this is needed\n        disableWarnings: true\n    });\n}\n//# sourceMappingURL=gpu-interpolation-transition.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { BufferTransform } from '@luma.gl/engine';\nimport { padBuffer, matchBuffer, getAttributeTypeFromSize, getFloat32VertexFormat, cycleBuffers } from \"./gpu-transition-utils.js\";\nimport { GPUTransitionBase } from \"./gpu-transition.js\";\nexport default class GPUSpringTransition extends GPUTransitionBase {\n    constructor({ device, attribute, timeline }) {\n        super({ device, attribute, timeline });\n        this.type = 'spring';\n        this.texture = getTexture(device);\n        this.framebuffer = getFramebuffer(device, this.texture);\n        this.transform = getTransform(device, attribute);\n    }\n    start(transitionSettings, numInstances) {\n        const prevLength = this.currentLength;\n        const prevStartIndices = this.currentStartIndices;\n        super.start(transitionSettings, numInstances);\n        const { buffers, attribute } = this;\n        for (let i = 0; i < 2; i++) {\n            buffers[i] = padBuffer({\n                device: this.device,\n                buffer: buffers[i],\n                attribute,\n                fromLength: prevLength,\n                toLength: this.currentLength,\n                fromStartIndices: prevStartIndices,\n                getData: transitionSettings.enter\n            });\n        }\n        buffers[2] = matchBuffer({\n            device: this.device,\n            source: buffers[0],\n            target: buffers[2]\n        });\n        this.setBuffer(buffers[1]);\n        const { model } = this.transform;\n        model.setVertexCount(Math.floor(this.currentLength / attribute.size));\n        if (attribute.isConstant) {\n            model.setConstantAttributes({ aTo: attribute.value });\n        }\n        else {\n            model.setAttributes({ aTo: attribute.getBuffer() });\n        }\n    }\n    onUpdate() {\n        const { buffers, transform, framebuffer, transition } = this;\n        const settings = this.settings;\n        transform.model.setAttributes({\n            aPrev: buffers[0],\n            aCur: buffers[1]\n        });\n        transform.transformFeedback.setBuffers({ vNext: buffers[2] });\n        const springProps = {\n            stiffness: settings.stiffness,\n            damping: settings.damping\n        };\n        transform.model.shaderInputs.setProps({ spring: springProps });\n        transform.run({\n            framebuffer,\n            discard: false,\n            parameters: { viewport: [0, 0, 1, 1] },\n            clearColor: [0, 0, 0, 0]\n        });\n        cycleBuffers(buffers);\n        this.setBuffer(buffers[1]);\n        const isTransitioning = this.device.readPixelsToArrayWebGL(framebuffer)[0] > 0;\n        if (!isTransitioning) {\n            transition.end();\n        }\n    }\n    delete() {\n        super.delete();\n        this.transform.destroy();\n        this.texture.destroy();\n        this.framebuffer.destroy();\n    }\n}\nconst uniformBlock = `\\\nuniform springUniforms {\n  float damping;\n  float stiffness;\n} spring;\n`;\nconst springUniforms = {\n    name: 'spring',\n    vs: uniformBlock,\n    uniformTypes: {\n        damping: 'f32',\n        stiffness: 'f32'\n    }\n};\nconst vs = `\\\n#version 300 es\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nin ATTRIBUTE_TYPE aPrev;\nin ATTRIBUTE_TYPE aCur;\nin ATTRIBUTE_TYPE aTo;\nout ATTRIBUTE_TYPE vNext;\nout float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE force = delta * spring.stiffness;\n  ATTRIBUTE_TYPE resistance = velocity * spring.damping;\n  return force - resistance + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n`;\nconst fs = `\\\n#version 300 es\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nin float vIsTransitioningFlag;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  fragColor = vec4(1.0);\n}`;\nfunction getTransform(device, attribute) {\n    const attributeType = getAttributeTypeFromSize(attribute.size);\n    const format = getFloat32VertexFormat(attribute.size);\n    return new BufferTransform(device, {\n        vs,\n        fs,\n        bufferLayout: [\n            { name: 'aPrev', format },\n            { name: 'aCur', format },\n            { name: 'aTo', format: attribute.getBufferLayout().attributes[0].format }\n        ],\n        varyings: ['vNext'],\n        modules: [springUniforms],\n        // @ts-expect-error TODO fix luma type\n        defines: { ATTRIBUTE_TYPE: attributeType },\n        parameters: {\n            depthCompare: 'always',\n            blendColorOperation: 'max',\n            blendColorSrcFactor: 'one',\n            blendColorDstFactor: 'one',\n            blendAlphaOperation: 'max',\n            blendAlphaSrcFactor: 'one',\n            blendAlphaDstFactor: 'one'\n        }\n    });\n}\nfunction getTexture(device) {\n    return device.createTexture({\n        data: new Uint8Array(4),\n        format: 'rgba8unorm',\n        width: 1,\n        height: 1\n    });\n}\nfunction getFramebuffer(device, texture) {\n    return device.createFramebuffer({\n        id: 'spring-transition-is-transitioning-framebuffer',\n        width: 1,\n        height: 1,\n        colorAttachments: [texture]\n    });\n}\n//# sourceMappingURL=gpu-spring-transition.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// deck.gl, MIT license\nimport GPUInterpolationTransition from \"../../transitions/gpu-interpolation-transition.js\";\nimport GPUSpringTransition from \"../../transitions/gpu-spring-transition.js\";\nimport log from \"../../utils/log.js\";\nconst TRANSITION_TYPES = {\n    interpolation: GPUInterpolationTransition,\n    spring: GPUSpringTransition\n};\nexport default class AttributeTransitionManager {\n    constructor(device, { id, timeline }) {\n        if (!device)\n            throw new Error('AttributeTransitionManager is constructed without device');\n        this.id = id;\n        this.device = device;\n        this.timeline = timeline;\n        this.transitions = {};\n        this.needsRedraw = false;\n        this.numInstances = 1;\n    }\n    finalize() {\n        for (const attributeName in this.transitions) {\n            this._removeTransition(attributeName);\n        }\n    }\n    /* Public methods */\n    // Called when attribute manager updates\n    // Check the latest attributes for updates.\n    update({ attributes, transitions, numInstances }) {\n        // Transform class will crash if elementCount is 0\n        this.numInstances = numInstances || 1;\n        for (const attributeName in attributes) {\n            const attribute = attributes[attributeName];\n            const settings = attribute.getTransitionSetting(transitions);\n            // this attribute might not support transitions?\n            if (!settings)\n                continue; // eslint-disable-line no-continue\n            this._updateAttribute(attributeName, attribute, settings);\n        }\n        for (const attributeName in this.transitions) {\n            const attribute = attributes[attributeName];\n            if (!attribute || !attribute.getTransitionSetting(transitions)) {\n                // Animated attribute has been removed\n                this._removeTransition(attributeName);\n            }\n        }\n    }\n    // Returns `true` if attribute is transition-enabled\n    hasAttribute(attributeName) {\n        const transition = this.transitions[attributeName];\n        return transition && transition.inProgress;\n    }\n    // Get all the animated attributes\n    getAttributes() {\n        const animatedAttributes = {};\n        for (const attributeName in this.transitions) {\n            const transition = this.transitions[attributeName];\n            if (transition.inProgress) {\n                animatedAttributes[attributeName] = transition.attributeInTransition;\n            }\n        }\n        return animatedAttributes;\n    }\n    /* eslint-disable max-statements */\n    // Called every render cycle, run transform feedback\n    // Returns `true` if anything changes\n    run() {\n        if (this.numInstances === 0) {\n            return false;\n        }\n        for (const attributeName in this.transitions) {\n            const updated = this.transitions[attributeName].update();\n            if (updated) {\n                this.needsRedraw = true;\n            }\n        }\n        const needsRedraw = this.needsRedraw;\n        this.needsRedraw = false;\n        return needsRedraw;\n    }\n    /* eslint-enable max-statements */\n    /* Private methods */\n    _removeTransition(attributeName) {\n        this.transitions[attributeName].delete();\n        delete this.transitions[attributeName];\n    }\n    // Check an attributes for updates\n    // Returns a transition object if a new transition is triggered.\n    _updateAttribute(attributeName, attribute, settings) {\n        const transition = this.transitions[attributeName];\n        // an attribute can change transition type when it updates\n        // let's remove the transition when that happens so we can create the new transition type\n        // TODO: when switching transition types, make sure to carry over the attribute's\n        // previous buffers, currentLength, startIndices, etc, to be used as the starting point\n        // for the next transition\n        let isNew = !transition || transition.type !== settings.type;\n        if (isNew) {\n            if (transition) {\n                this._removeTransition(attributeName);\n            }\n            const TransitionType = TRANSITION_TYPES[settings.type];\n            if (TransitionType) {\n                this.transitions[attributeName] = new TransitionType({\n                    attribute,\n                    timeline: this.timeline,\n                    device: this.device\n                });\n            }\n            else {\n                log.error(`unsupported transition type '${settings.type}'`)();\n                isNew = false;\n            }\n        }\n        if (isNew || attribute.needsRedraw()) {\n            this.needsRedraw = true;\n            this.transitions[attributeName].start(settings, this.numInstances);\n        }\n    }\n}\n//# sourceMappingURL=attribute-transition-manager.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/* eslint-disable guard-for-in */\nimport Attribute from \"./attribute.js\";\nimport log from \"../../utils/log.js\";\nimport memoize from \"../../utils/memoize.js\";\nimport { mergeBounds } from \"../../utils/math-utils.js\";\nimport debug from \"../../debug/index.js\";\nimport AttributeTransitionManager from \"./attribute-transition-manager.js\";\nconst TRACE_INVALIDATE = 'attributeManager.invalidate';\nconst TRACE_UPDATE_START = 'attributeManager.updateStart';\nconst TRACE_UPDATE_END = 'attributeManager.updateEnd';\nconst TRACE_ATTRIBUTE_UPDATE_START = 'attribute.updateStart';\nconst TRACE_ATTRIBUTE_ALLOCATE = 'attribute.allocate';\nconst TRACE_ATTRIBUTE_UPDATE_END = 'attribute.updateEnd';\nexport default class AttributeManager {\n    constructor(device, { id = 'attribute-manager', stats, timeline } = {}) {\n        this.mergeBoundsMemoized = memoize(mergeBounds);\n        this.id = id;\n        this.device = device;\n        this.attributes = {};\n        this.updateTriggers = {};\n        this.needsRedraw = true;\n        this.userData = {};\n        this.stats = stats;\n        this.attributeTransitionManager = new AttributeTransitionManager(device, {\n            id: `${id}-transitions`,\n            timeline\n        });\n        // For debugging sanity, prevent uninitialized members\n        Object.seal(this);\n    }\n    finalize() {\n        for (const attributeName in this.attributes) {\n            this.attributes[attributeName].delete();\n        }\n        this.attributeTransitionManager.finalize();\n    }\n    // Returns the redraw flag, optionally clearing it.\n    // Redraw flag will be set if any attributes attributes changed since\n    // flag was last cleared.\n    //\n    // @param {String} [clearRedrawFlags=false] - whether to clear the flag\n    // @return {false|String} - reason a redraw is needed.\n    getNeedsRedraw(opts = { clearRedrawFlags: false }) {\n        const redraw = this.needsRedraw;\n        this.needsRedraw = this.needsRedraw && !opts.clearRedrawFlags;\n        return redraw && this.id;\n    }\n    // Sets the redraw flag.\n    // @param {Boolean} redraw=true\n    setNeedsRedraw() {\n        this.needsRedraw = true;\n    }\n    // Adds attributes\n    add(attributes) {\n        this._add(attributes);\n    }\n    // Adds attributes\n    addInstanced(attributes) {\n        this._add(attributes, { stepMode: 'instance' });\n    }\n    /**\n     * Removes attributes\n     * Takes an array of attribute names and delete them from\n     * the attribute map if they exists\n     *\n     * @example\n     * attributeManager.remove(['position']);\n     *\n     * @param {Object} attributeNameArray - attribute name array (see above)\n     */\n    remove(attributeNameArray) {\n        for (const name of attributeNameArray) {\n            if (this.attributes[name] !== undefined) {\n                this.attributes[name].delete();\n                delete this.attributes[name];\n            }\n        }\n    }\n    // Marks an attribute for update\n    invalidate(triggerName, dataRange) {\n        const invalidatedAttributes = this._invalidateTrigger(triggerName, dataRange);\n        // For performance tuning\n        debug(TRACE_INVALIDATE, this, triggerName, invalidatedAttributes);\n    }\n    invalidateAll(dataRange) {\n        for (const attributeName in this.attributes) {\n            this.attributes[attributeName].setNeedsUpdate(attributeName, dataRange);\n        }\n        // For performance tuning\n        debug(TRACE_INVALIDATE, this, 'all');\n    }\n    // Ensure all attribute buffers are updated from props or data.\n    // eslint-disable-next-line complexity\n    update({ data, numInstances, startIndices = null, transitions, props = {}, buffers = {}, context = {} }) {\n        // keep track of whether some attributes are updated\n        let updated = false;\n        debug(TRACE_UPDATE_START, this);\n        if (this.stats) {\n            this.stats.get('Update Attributes').timeStart();\n        }\n        for (const attributeName in this.attributes) {\n            const attribute = this.attributes[attributeName];\n            const accessorName = attribute.settings.accessor;\n            attribute.startIndices = startIndices;\n            attribute.numInstances = numInstances;\n            if (props[attributeName]) {\n                log.removed(`props.${attributeName}`, `data.attributes.${attributeName}`)();\n            }\n            if (attribute.setExternalBuffer(buffers[attributeName])) {\n                // Step 1: try update attribute directly from external buffers\n            }\n            else if (attribute.setBinaryValue(typeof accessorName === 'string' ? buffers[accessorName] : undefined, data.startIndices)) {\n                // Step 2: try set packed value from external typed array\n            }\n            else if (typeof accessorName === 'string' &&\n                !buffers[accessorName] &&\n                attribute.setConstantValue(context, props[accessorName])) {\n                // Step 3: try set constant value from props\n                // Note: if buffers[accessorName] is supplied, ignore props[accessorName]\n                // This may happen when setBinaryValue falls through to use the auto updater\n            }\n            else if (attribute.needsUpdate()) {\n                // Step 4: update via updater callback\n                updated = true;\n                this._updateAttribute({\n                    attribute,\n                    numInstances,\n                    data,\n                    props,\n                    context\n                });\n            }\n            this.needsRedraw = this.needsRedraw || attribute.needsRedraw();\n        }\n        if (updated) {\n            // Only initiate alloc/update (and logging) if actually needed\n            debug(TRACE_UPDATE_END, this, numInstances);\n        }\n        if (this.stats) {\n            this.stats.get('Update Attributes').timeEnd();\n        }\n        this.attributeTransitionManager.update({\n            attributes: this.attributes,\n            numInstances,\n            transitions\n        });\n    }\n    // Update attribute transition to the current timestamp\n    // Returns `true` if any transition is in progress\n    updateTransition() {\n        const { attributeTransitionManager } = this;\n        const transitionUpdated = attributeTransitionManager.run();\n        this.needsRedraw = this.needsRedraw || transitionUpdated;\n        return transitionUpdated;\n    }\n    /**\n     * Returns all attribute descriptors\n     * Note: Format matches luma.gl Model/Program.setAttributes()\n     * @return {Object} attributes - descriptors\n     */\n    getAttributes() {\n        return { ...this.attributes, ...this.attributeTransitionManager.getAttributes() };\n    }\n    /**\n     * Computes the spatial bounds of a given set of attributes\n     */\n    getBounds(attributeNames) {\n        const bounds = attributeNames.map(attributeName => this.attributes[attributeName]?.getBounds());\n        return this.mergeBoundsMemoized(bounds);\n    }\n    /**\n     * Returns changed attribute descriptors\n     * This indicates which WebGLBuffers need to be updated\n     * @return {Object} attributes - descriptors\n     */\n    getChangedAttributes(opts = { clearChangedFlags: false }) {\n        const { attributes, attributeTransitionManager } = this;\n        const changedAttributes = { ...attributeTransitionManager.getAttributes() };\n        for (const attributeName in attributes) {\n            const attribute = attributes[attributeName];\n            if (attribute.needsRedraw(opts) && !attributeTransitionManager.hasAttribute(attributeName)) {\n                changedAttributes[attributeName] = attribute;\n            }\n        }\n        return changedAttributes;\n    }\n    /** Generate WebGPU-style buffer layout descriptors from all attributes */\n    getBufferLayouts(\n    /** A luma.gl Model-shaped object that supplies additional hint to attribute resolution */\n    modelInfo) {\n        return Object.values(this.getAttributes()).map(attribute => attribute.getBufferLayout(modelInfo));\n    }\n    // PRIVATE METHODS\n    /** Register new attributes */\n    _add(\n    /** A map from attribute name to attribute descriptors */\n    attributes, \n    /** Additional attribute settings to pass to all attributes */\n    overrideOptions) {\n        for (const attributeName in attributes) {\n            const attribute = attributes[attributeName];\n            const props = {\n                ...attribute,\n                id: attributeName,\n                size: (attribute.isIndexed && 1) || attribute.size || 1,\n                ...overrideOptions\n            };\n            // Initialize the attribute descriptor, with WebGL and metadata fields\n            this.attributes[attributeName] = new Attribute(this.device, props);\n        }\n        this._mapUpdateTriggersToAttributes();\n    }\n    // build updateTrigger name to attribute name mapping\n    _mapUpdateTriggersToAttributes() {\n        const triggers = {};\n        for (const attributeName in this.attributes) {\n            const attribute = this.attributes[attributeName];\n            attribute.getUpdateTriggers().forEach(triggerName => {\n                if (!triggers[triggerName]) {\n                    triggers[triggerName] = [];\n                }\n                triggers[triggerName].push(attributeName);\n            });\n        }\n        this.updateTriggers = triggers;\n    }\n    _invalidateTrigger(triggerName, dataRange) {\n        const { attributes, updateTriggers } = this;\n        const invalidatedAttributes = updateTriggers[triggerName];\n        if (invalidatedAttributes) {\n            invalidatedAttributes.forEach(name => {\n                const attribute = attributes[name];\n                if (attribute) {\n                    attribute.setNeedsUpdate(attribute.id, dataRange);\n                }\n            });\n        }\n        return invalidatedAttributes;\n    }\n    _updateAttribute(opts) {\n        const { attribute, numInstances } = opts;\n        debug(TRACE_ATTRIBUTE_UPDATE_START, attribute);\n        if (attribute.constant) {\n            // The attribute is flagged as constant outside of an update cycle\n            // Skip allocation and updater call\n            // @ts-ignore value can be set to an array by user but always cast to typed array during attribute update\n            attribute.setConstantValue(opts.context, attribute.value);\n            return;\n        }\n        if (attribute.allocate(numInstances)) {\n            debug(TRACE_ATTRIBUTE_ALLOCATE, attribute, numInstances);\n        }\n        // Calls update on any buffers that need update\n        const updated = attribute.updateBuffer(opts);\n        if (updated) {\n            this.needsRedraw = true;\n            debug(TRACE_ATTRIBUTE_UPDATE_END, attribute, numInstances);\n        }\n    }\n}\n//# sourceMappingURL=attribute-manager.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { lerp } from '@math.gl/core';\nimport Transition from \"./transition.js\";\nexport default class CPUInterpolationTransition extends Transition {\n    get value() {\n        return this._value;\n    }\n    _onUpdate() {\n        const { time, settings: { fromValue, toValue, duration, easing } } = this;\n        const t = easing(time / duration);\n        this._value = lerp(fromValue, toValue, t);\n    }\n}\n//# sourceMappingURL=cpu-interpolation-transition.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport Transition from \"./transition.js\";\nconst EPSILON = 1e-5;\n/*\n * Calculate the next value in the spring transition\n * @param prev {Number} - previous value\n * @param cur {Number} - current value\n * @param dest {Number} - destination value\n * @param damping {Number}\n * @param stiffness {Number}\n */\nfunction updateSpringElement(prev, cur, dest, damping, stiffness) {\n    const velocity = cur - prev;\n    const delta = dest - cur;\n    const spring = delta * stiffness;\n    const damper = -velocity * damping;\n    return spring + damper + velocity + cur;\n}\nfunction updateSpring(prev, cur, dest, damping, stiffness) {\n    if (Array.isArray(dest)) {\n        const next = [];\n        for (let i = 0; i < dest.length; i++) {\n            next[i] = updateSpringElement(prev[i], cur[i], dest[i], damping, stiffness);\n        }\n        return next;\n    }\n    return updateSpringElement(prev, cur, dest, damping, stiffness);\n}\n/*\n * Calculate the distance between two numbers or two vectors\n */\nfunction distance(value1, value2) {\n    if (Array.isArray(value1)) {\n        let distanceSquare = 0;\n        for (let i = 0; i < value1.length; i++) {\n            const d = value1[i] - value2[i];\n            distanceSquare += d * d;\n        }\n        return Math.sqrt(distanceSquare);\n    }\n    return Math.abs(value1 - value2);\n}\nexport default class CPUSpringTransition extends Transition {\n    get value() {\n        return this._currValue;\n    }\n    _onUpdate() {\n        // TODO - use timeline\n        // const {time} = this;\n        const { fromValue, toValue, damping, stiffness } = this.settings;\n        const { _prevValue = fromValue, _currValue = fromValue } = this;\n        let nextValue = updateSpring(_prevValue, _currValue, toValue, damping, stiffness);\n        const delta = distance(nextValue, toValue);\n        const velocity = distance(nextValue, _currValue);\n        if (delta < EPSILON && velocity < EPSILON) {\n            nextValue = toValue;\n            this.end();\n        }\n        this._prevValue = _currValue;\n        this._currValue = nextValue;\n    }\n}\n//# sourceMappingURL=cpu-spring-transition.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { normalizeTransitionSettings } from \"./attribute/transition-settings.js\";\nimport CPUInterpolationTransition from \"../transitions/cpu-interpolation-transition.js\";\nimport CPUSpringTransition from \"../transitions/cpu-spring-transition.js\";\nimport log from \"../utils/log.js\";\nconst TRANSITION_TYPES = {\n    interpolation: CPUInterpolationTransition,\n    spring: CPUSpringTransition\n};\nexport default class UniformTransitionManager {\n    constructor(timeline) {\n        this.transitions = new Map();\n        this.timeline = timeline;\n    }\n    get active() {\n        return this.transitions.size > 0;\n    }\n    add(key, fromValue, toValue, settings) {\n        const { transitions } = this;\n        if (transitions.has(key)) {\n            const transition = transitions.get(key);\n            // value may not be available if `update()` has not been called. Fallback to `fromValue`\n            const { value = transition.settings.fromValue } = transition;\n            // start from interrupted position\n            fromValue = value;\n            this.remove(key);\n        }\n        settings = normalizeTransitionSettings(settings);\n        if (!settings) {\n            return;\n        }\n        const TransitionType = TRANSITION_TYPES[settings.type];\n        if (!TransitionType) {\n            log.error(`unsupported transition type '${settings.type}'`)();\n            return;\n        }\n        const transition = new TransitionType(this.timeline);\n        transition.start({\n            ...settings,\n            fromValue,\n            toValue\n        });\n        transitions.set(key, transition);\n    }\n    remove(key) {\n        const { transitions } = this;\n        if (transitions.has(key)) {\n            transitions.get(key).cancel();\n            transitions.delete(key);\n        }\n    }\n    update() {\n        const propsInTransition = {};\n        for (const [key, transition] of this.transitions) {\n            transition.update();\n            propsInTransition[key] = transition.value;\n            if (!transition.inProgress) {\n                // transition ended\n                this.remove(key);\n            }\n        }\n        return propsInTransition;\n    }\n    clear() {\n        for (const key of this.transitions.keys()) {\n            this.remove(key);\n        }\n    }\n}\n//# sourceMappingURL=uniform-transition-manager.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { PROP_TYPES_SYMBOL } from \"./constants.js\";\nexport function validateProps(props) {\n    const propTypes = props[PROP_TYPES_SYMBOL];\n    for (const propName in propTypes) {\n        const propType = propTypes[propName];\n        const { validate } = propType;\n        if (validate && !validate(props[propName], propType)) {\n            throw new Error(`Invalid prop ${propName}: ${props[propName]}`);\n        }\n    }\n}\n// Returns an object with \"change flags\", either false or strings indicating reason for change\nexport function diffProps(props, oldProps) {\n    // First check if any props have changed (ignore props that will be examined separately)\n    const propsChangedReason = compareProps({\n        newProps: props,\n        oldProps,\n        propTypes: props[PROP_TYPES_SYMBOL],\n        ignoreProps: { data: null, updateTriggers: null, extensions: null, transitions: null }\n    });\n    // Now check if any data related props have changed\n    const dataChangedReason = diffDataProps(props, oldProps);\n    // Check update triggers to determine if any attributes need regeneration\n    // Note - if data has changed, all attributes will need regeneration, so skip this step\n    let updateTriggersChangedReason = false;\n    if (!dataChangedReason) {\n        updateTriggersChangedReason = diffUpdateTriggers(props, oldProps);\n    }\n    return {\n        dataChanged: dataChangedReason,\n        propsChanged: propsChangedReason,\n        updateTriggersChanged: updateTriggersChangedReason,\n        extensionsChanged: diffExtensions(props, oldProps),\n        transitionsChanged: diffTransitions(props, oldProps)\n    };\n}\nfunction diffTransitions(props, oldProps) {\n    if (!props.transitions) {\n        return false;\n    }\n    const result = {};\n    const propTypes = props[PROP_TYPES_SYMBOL];\n    let changed = false;\n    for (const key in props.transitions) {\n        const propType = propTypes[key];\n        const type = propType && propType.type;\n        const isTransitionable = type === 'number' || type === 'color' || type === 'array';\n        if (isTransitionable && comparePropValues(props[key], oldProps[key], propType)) {\n            result[key] = true;\n            changed = true;\n        }\n    }\n    return changed ? result : false;\n}\n/**\n * Performs equality by iterating through keys on an object and returning false\n * when any key has values which are not strictly equal between the arguments.\n * @param {Object} opt.oldProps - object with old key/value pairs\n * @param {Object} opt.newProps - object with new key/value pairs\n * @param {Object} opt.ignoreProps={} - object, keys that should not be compared\n * @returns {null|String} - null when values of all keys are strictly equal.\n *   if unequal, returns a string explaining what changed.\n */\n/* eslint-disable max-statements, max-depth, complexity */\n/*\n * Note: for better performance, this function assumes that both oldProps and newProps\n   inherit the same prototype (defaultProps). That is, if neither object contains own\n   property <key>, assume `oldProps.<key>` and `newProps.<key>` are equal.\n */\nexport function compareProps({ newProps, oldProps, ignoreProps = {}, propTypes = {}, triggerName = 'props' }) {\n    // shallow equality => deep equality\n    if (oldProps === newProps) {\n        return false;\n    }\n    // TODO - do we need these checks? Should never happen...\n    if (typeof newProps !== 'object' || newProps === null) {\n        return `${triggerName} changed shallowly`;\n    }\n    if (typeof oldProps !== 'object' || oldProps === null) {\n        return `${triggerName} changed shallowly`;\n    }\n    // Compare explicitly defined new props against old/default values\n    for (const key of Object.keys(newProps)) {\n        if (!(key in ignoreProps)) {\n            if (!(key in oldProps)) {\n                return `${triggerName}.${key} added`;\n            }\n            const changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n            if (changed) {\n                return `${triggerName}.${key} ${changed}`;\n            }\n        }\n    }\n    // Test if any old props have been dropped\n    for (const key of Object.keys(oldProps)) {\n        if (!(key in ignoreProps)) {\n            if (!(key in newProps)) {\n                return `${triggerName}.${key} dropped`;\n            }\n            if (!Object.hasOwnProperty.call(newProps, key)) {\n                // Compare dropped old prop against default value\n                const changed = comparePropValues(newProps[key], oldProps[key], propTypes[key]);\n                if (changed) {\n                    return `${triggerName}.${key} ${changed}`;\n                }\n            }\n        }\n    }\n    return false;\n}\n/* eslint-enable max-statements, max-depth, complexity */\n// HELPERS\nfunction comparePropValues(newProp, oldProp, propType) {\n    // If prop type has an equal function, invoke it\n    let equal = propType && propType.equal;\n    if (equal && !equal(newProp, oldProp, propType)) {\n        return 'changed deeply';\n    }\n    if (!equal) {\n        // If object has an equals function, invoke it\n        equal = newProp && oldProp && newProp.equals;\n        if (equal && !equal.call(newProp, oldProp)) {\n            return 'changed deeply';\n        }\n    }\n    if (!equal && oldProp !== newProp) {\n        return 'changed shallowly';\n    }\n    return null;\n}\n// The comparison of the data prop requires special handling\n// the dataComparator should be used if supplied\nfunction diffDataProps(props, oldProps) {\n    if (oldProps === null) {\n        return 'oldProps is null, initial diff';\n    }\n    let dataChanged = false;\n    // Support optional app defined comparison of data\n    const { dataComparator, _dataDiff } = props;\n    if (dataComparator) {\n        if (!dataComparator(props.data, oldProps.data)) {\n            dataChanged = 'Data comparator detected a change';\n        }\n        // Otherwise, do a shallow equal on props\n    }\n    else if (props.data !== oldProps.data) {\n        dataChanged = 'A new data container was supplied';\n    }\n    if (dataChanged && _dataDiff) {\n        dataChanged = _dataDiff(props.data, oldProps.data) || dataChanged;\n    }\n    return dataChanged;\n}\n// Checks if any update triggers have changed\n// also calls callback to invalidate attributes accordingly.\nfunction diffUpdateTriggers(props, oldProps) {\n    if (oldProps === null) {\n        return { all: true };\n    }\n    // If the 'all' updateTrigger fires, ignore testing others\n    if ('all' in props.updateTriggers) {\n        const diffReason = diffUpdateTrigger(props, oldProps, 'all');\n        if (diffReason) {\n            return { all: true };\n        }\n    }\n    const reason = {};\n    let changed = false;\n    // If the 'all' updateTrigger didn't fire, need to check all others\n    for (const triggerName in props.updateTriggers) {\n        if (triggerName !== 'all') {\n            const diffReason = diffUpdateTrigger(props, oldProps, triggerName);\n            if (diffReason) {\n                reason[triggerName] = true;\n                changed = true;\n            }\n        }\n    }\n    return changed ? reason : false;\n}\n// Returns true if any extensions have changed\nfunction diffExtensions(props, oldProps) {\n    if (oldProps === null) {\n        return true;\n    }\n    const oldExtensions = oldProps.extensions;\n    const { extensions } = props;\n    if (extensions === oldExtensions) {\n        return false;\n    }\n    if (!oldExtensions || !extensions) {\n        return true;\n    }\n    if (extensions.length !== oldExtensions.length) {\n        return true;\n    }\n    for (let i = 0; i < extensions.length; i++) {\n        if (!extensions[i].equals(oldExtensions[i])) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction diffUpdateTrigger(props, oldProps, triggerName) {\n    let newTriggers = props.updateTriggers[triggerName];\n    newTriggers = newTriggers === undefined || newTriggers === null ? {} : newTriggers;\n    let oldTriggers = oldProps.updateTriggers[triggerName];\n    oldTriggers = oldTriggers === undefined || oldTriggers === null ? {} : oldTriggers;\n    const diffReason = compareProps({\n        oldProps: oldTriggers,\n        newProps: newTriggers,\n        triggerName\n    });\n    return diffReason;\n}\n//# sourceMappingURL=props.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst ERR_NOT_OBJECT = 'count(): argument not an object';\nconst ERR_NOT_CONTAINER = 'count(): argument not a container';\n/**\n * Deduces numer of elements in a JavaScript container.\n * - Auto-deduction for ES6 containers that define a count() method\n * - Auto-deduction for ES6 containers that define a size member\n * - Auto-deduction for Classic Arrays via the built-in length attribute\n * - Also handles objects, although note that this an O(N) operation\n */\nexport function count(container) {\n    if (!isObject(container)) {\n        throw new Error(ERR_NOT_OBJECT);\n    }\n    // Check if ES6 collection \"count\" function is available\n    if (typeof container.count === 'function') {\n        return container.count();\n    }\n    // Check if ES6 collection \"size\" attribute is set\n    if (Number.isFinite(container.size)) {\n        return container.size;\n    }\n    // Check if array length attribute is set\n    // Note: checking this last since some ES6 collections (Immutable.js)\n    // emit profuse warnings when trying to access `length` attribute\n    if (Number.isFinite(container.length)) {\n        return container.length;\n    }\n    // Note that getting the count of an object is O(N)\n    if (isPlainObject(container)) {\n        return Object.keys(container).length;\n    }\n    throw new Error(ERR_NOT_CONTAINER);\n}\n/**\n * Checks if argument is a plain object (not a class or array etc)\n * @param {*} value - JavaScript value to be tested\n * @return {Boolean} - true if argument is a plain JavaScript object\n */\nfunction isPlainObject(value) {\n    return value !== null && typeof value === 'object' && value.constructor === Object;\n}\n/**\n * Checks if argument is an indexable object (not a primitive value, nor null)\n * @param {*} value - JavaScript value to be tested\n * @return {Boolean} - true if argument is a JavaScript object\n */\nfunction isObject(value) {\n    return value !== null && typeof value === 'object';\n}\n//# sourceMappingURL=count.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Merge two luma.gl shader descriptors\nexport function mergeShaders(target, source) {\n    if (!source) {\n        return target;\n    }\n    const result = { ...target, ...source };\n    if ('defines' in source) {\n        result.defines = { ...target.defines, ...source.defines };\n    }\n    if ('modules' in source) {\n        result.modules = (target.modules || []).concat(source.modules);\n        // Hack: prject32 and project64 cannot co-exist\n        if (source.modules.some(module => module.name === 'project64')) {\n            const index = result.modules.findIndex(module => module.name === 'project32');\n            if (index >= 0) {\n                result.modules.splice(index, 1);\n            }\n        }\n    }\n    if ('inject' in source) {\n        if (!target.inject) {\n            result.inject = source.inject;\n        }\n        else {\n            const mergedInjection = { ...target.inject };\n            for (const key in source.inject) {\n                mergedInjection[key] = (mergedInjection[key] || '') + source.inject[key];\n            }\n            result.inject = mergedInjection;\n        }\n    }\n    return result;\n}\n//# sourceMappingURL=shader.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Texture } from '@luma.gl/core';\nconst DEFAULT_TEXTURE_PARAMETERS = {\n    minFilter: 'linear',\n    mipmapFilter: 'linear',\n    magFilter: 'linear',\n    addressModeU: 'clamp-to-edge',\n    addressModeV: 'clamp-to-edge'\n};\n// Track the textures that are created by us. They need to be released when they are no longer used.\nconst internalTextures = {};\n/**\n *\n * @param owner\n * @param device\n * @param image could be one of:\n *   - Texture\n *   - Browser object: Image, ImageData, ImageData, HTMLCanvasElement, HTMLVideoElement, ImageBitmap\n *   - Plain object: {width: <number>, height: <number>, data: <Uint8Array>}\n * @param parameters\n * @returns\n */\nexport function createTexture(owner, device, image, sampler) {\n    if (image instanceof Texture) {\n        return image;\n    }\n    else if (image.constructor && image.constructor.name !== 'Object') {\n        // Browser object\n        image = { data: image };\n    }\n    let samplerParameters = null;\n    if (image.compressed) {\n        samplerParameters = {\n            minFilter: 'linear',\n            mipmapFilter: image.data.length > 1 ? 'nearest' : 'linear'\n        };\n    }\n    const { width, height } = image.data;\n    const texture = device.createTexture({\n        ...image,\n        sampler: {\n            ...DEFAULT_TEXTURE_PARAMETERS,\n            ...samplerParameters,\n            ...sampler\n        },\n        mipLevels: device.getMipLevelCount(width, height)\n    });\n    texture.generateMipmapsWebGL();\n    // Track this texture\n    internalTextures[texture.id] = owner;\n    return texture;\n}\nexport function destroyTexture(owner, texture) {\n    if (!texture || !(texture instanceof Texture)) {\n        return;\n    }\n    // Only delete the texture if requested by the same layer that created it\n    if (internalTextures[texture.id] === owner) {\n        texture.delete();\n        delete internalTextures[texture.id];\n    }\n}\n//# sourceMappingURL=texture.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { createTexture, destroyTexture } from \"../utils/texture.js\";\nimport { deepEqual } from \"../utils/deep-equal.js\";\nconst TYPE_DEFINITIONS = {\n    boolean: {\n        validate(value, propType) {\n            return true;\n        },\n        equal(value1, value2, propType) {\n            return Boolean(value1) === Boolean(value2);\n        }\n    },\n    number: {\n        validate(value, propType) {\n            return (Number.isFinite(value) &&\n                (!('max' in propType) || value <= propType.max) &&\n                (!('min' in propType) || value >= propType.min));\n        }\n    },\n    color: {\n        validate(value, propType) {\n            return ((propType.optional && !value) ||\n                (isArray(value) && (value.length === 3 || value.length === 4)));\n        },\n        equal(value1, value2, propType) {\n            return deepEqual(value1, value2, 1);\n        }\n    },\n    accessor: {\n        validate(value, propType) {\n            const valueType = getTypeOf(value);\n            return valueType === 'function' || valueType === getTypeOf(propType.value);\n        },\n        equal(value1, value2, propType) {\n            if (typeof value2 === 'function') {\n                return true;\n            }\n            return deepEqual(value1, value2, 1);\n        }\n    },\n    array: {\n        validate(value, propType) {\n            return (propType.optional && !value) || isArray(value);\n        },\n        equal(value1, value2, propType) {\n            const { compare } = propType;\n            const depth = Number.isInteger(compare) ? compare : compare ? 1 : 0;\n            return compare ? deepEqual(value1, value2, depth) : value1 === value2;\n        }\n    },\n    object: {\n        equal(value1, value2, propType) {\n            if (propType.ignore) {\n                return true;\n            }\n            const { compare } = propType;\n            const depth = Number.isInteger(compare) ? compare : compare ? 1 : 0;\n            return compare ? deepEqual(value1, value2, depth) : value1 === value2;\n        }\n    },\n    function: {\n        validate(value, propType) {\n            return (propType.optional && !value) || typeof value === 'function';\n        },\n        equal(value1, value2, propType) {\n            // Backward compatibility - {compare: true} and {ignore: false} are equivalent\n            const shouldIgnore = !propType.compare && propType.ignore !== false;\n            return shouldIgnore || value1 === value2;\n        }\n    },\n    data: {\n        transform: (value, propType, component) => {\n            if (!value) {\n                return value;\n            }\n            const { dataTransform } = component.props;\n            if (dataTransform) {\n                return dataTransform(value);\n            }\n            // Detect loaders.gl v4 table format\n            if (typeof value.shape === 'string' &&\n                value.shape.endsWith('-table') &&\n                Array.isArray(value.data)) {\n                return value.data;\n            }\n            return value;\n        }\n    },\n    image: {\n        transform: (value, propType, component) => {\n            const context = component.context;\n            if (!context || !context.device) {\n                return null;\n            }\n            return createTexture(component.id, context.device, value, {\n                ...propType.parameters,\n                ...component.props.textureParameters\n            });\n        },\n        release: (value, propType, component) => {\n            destroyTexture(component.id, value);\n        }\n    }\n};\nexport function parsePropTypes(propDefs) {\n    const propTypes = {};\n    const defaultProps = {};\n    const deprecatedProps = {};\n    for (const [propName, propDef] of Object.entries(propDefs)) {\n        const deprecated = propDef?.deprecatedFor;\n        if (deprecated) {\n            deprecatedProps[propName] = Array.isArray(deprecated) ? deprecated : [deprecated];\n        }\n        else {\n            const propType = parsePropType(propName, propDef);\n            propTypes[propName] = propType;\n            defaultProps[propName] = propType.value;\n        }\n    }\n    return { propTypes, defaultProps, deprecatedProps };\n}\n// Parses one property definition entry. Either contains:\n// * a valid prop type object ({type, ...})\n// * or just a default value, in which case type and name inference is used\nfunction parsePropType(name, propDef) {\n    switch (getTypeOf(propDef)) {\n        case 'object':\n            return normalizePropDefinition(name, propDef);\n        case 'array':\n            return normalizePropDefinition(name, { type: 'array', value: propDef, compare: false });\n        case 'boolean':\n            return normalizePropDefinition(name, { type: 'boolean', value: propDef });\n        case 'number':\n            return normalizePropDefinition(name, { type: 'number', value: propDef });\n        case 'function':\n            // return guessFunctionType(name, propDef);\n            return normalizePropDefinition(name, { type: 'function', value: propDef, compare: true });\n        default:\n            return { name, type: 'unknown', value: propDef };\n    }\n}\nfunction normalizePropDefinition(name, propDef) {\n    if (!('type' in propDef)) {\n        if (!('value' in propDef)) {\n            // If no type and value this object is likely the value\n            return { name, type: 'object', value: propDef };\n        }\n        return { name, type: getTypeOf(propDef.value), ...propDef };\n    }\n    return { name, ...TYPE_DEFINITIONS[propDef.type], ...propDef };\n}\nfunction isArray(value) {\n    return Array.isArray(value) || ArrayBuffer.isView(value);\n}\n// improved version of javascript typeof that can distinguish arrays and null values\nfunction getTypeOf(value) {\n    if (isArray(value)) {\n        return 'array';\n    }\n    if (value === null) {\n        return 'null';\n    }\n    return typeof value;\n}\n//# sourceMappingURL=prop-types.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport log from \"../utils/log.js\";\nimport { isAsyncIterable } from \"../utils/iterable-utils.js\";\nimport { parsePropTypes } from \"./prop-types.js\";\nimport { COMPONENT_SYMBOL, PROP_TYPES_SYMBOL, DEPRECATED_PROPS_SYMBOL, ASYNC_ORIGINAL_SYMBOL, ASYNC_RESOLVED_SYMBOL, ASYNC_DEFAULTS_SYMBOL } from \"./constants.js\";\nimport Component from \"./component.js\";\n// Create a property object\nexport function createProps(component, propObjects) {\n    // Resolve extension value\n    let extensions;\n    for (let i = propObjects.length - 1; i >= 0; i--) {\n        const props = propObjects[i];\n        if ('extensions' in props) {\n            // @ts-expect-error TS(2339) extensions not defined\n            extensions = props.extensions;\n        }\n    }\n    // Create a new prop object with empty default props object\n    const propsPrototype = getPropsPrototype(component.constructor, extensions);\n    // The true default props object will be found later\n    const propsInstance = Object.create(propsPrototype);\n    // Props need a back pointer to the owning component\n    propsInstance[COMPONENT_SYMBOL] = component;\n    // The supplied (original) values for those async props that are set to url strings or Promises.\n    // In this case, the actual (i.e. resolved) values are looked up from component.internalState\n    propsInstance[ASYNC_ORIGINAL_SYMBOL] = {};\n    // Note: the actual (resolved) values for props that are NOT set to urls or Promises.\n    // in this case the values are served directly from this map\n    propsInstance[ASYNC_RESOLVED_SYMBOL] = {};\n    // \"Copy\" all sync props\n    for (let i = 0; i < propObjects.length; ++i) {\n        const props = propObjects[i];\n        // Do not use Object.assign here to avoid Symbols in props overwriting our private fields\n        // This might happen if one of the arguments is another props instance\n        for (const key in props) {\n            propsInstance[key] = props[key];\n        }\n    }\n    // Props must be immutable\n    Object.freeze(propsInstance);\n    return propsInstance;\n}\nconst MergedDefaultPropsCacheKey = '_mergedDefaultProps';\n// Return precalculated defaultProps and propType objects if available\n// build them if needed\nfunction getPropsPrototype(componentClass, extensions) {\n    // Bail out if we're not looking at a component - for two reasons:\n    // 1. There's no reason for an ancestor of component to have props\n    // 2. If we don't bail out, we'll follow the prototype chain all the way back to the global\n    // function prototype and add _mergedDefaultProps to it, which may break other frameworks\n    // (e.g. the react-three-fiber reconciler)\n    if (!(componentClass instanceof Component.constructor))\n        return {};\n    // A string that uniquely identifies the extensions involved\n    let cacheKey = MergedDefaultPropsCacheKey;\n    if (extensions) {\n        for (const extension of extensions) {\n            const ExtensionClass = extension.constructor;\n            if (ExtensionClass) {\n                cacheKey += `:${ExtensionClass.extensionName || ExtensionClass.name}`;\n            }\n        }\n    }\n    const defaultProps = getOwnProperty(componentClass, cacheKey);\n    if (!defaultProps) {\n        return (componentClass[cacheKey] = createPropsPrototypeAndTypes(componentClass, extensions || []));\n    }\n    return defaultProps;\n}\n// Build defaultProps and propType objects by walking component prototype chain\nfunction createPropsPrototypeAndTypes(componentClass, extensions) {\n    const parent = componentClass.prototype;\n    if (!parent) {\n        return null;\n    }\n    const parentClass = Object.getPrototypeOf(componentClass);\n    const parentDefaultProps = getPropsPrototype(parentClass);\n    // Parse propTypes from Component.defaultProps\n    const componentDefaultProps = getOwnProperty(componentClass, 'defaultProps') || {};\n    const componentPropDefs = parsePropTypes(componentDefaultProps);\n    // Merged default props object. Order: parent, self, extensions\n    const defaultProps = Object.assign(Object.create(null), parentDefaultProps, componentPropDefs.defaultProps);\n    // Merged prop type definitions. Order: parent, self, extensions\n    const propTypes = Object.assign(Object.create(null), parentDefaultProps?.[PROP_TYPES_SYMBOL], componentPropDefs.propTypes);\n    // Merged deprecation list. Order: parent, self, extensions\n    const deprecatedProps = Object.assign(Object.create(null), parentDefaultProps?.[DEPRECATED_PROPS_SYMBOL], componentPropDefs.deprecatedProps);\n    for (const extension of extensions) {\n        const extensionDefaultProps = getPropsPrototype(extension.constructor);\n        if (extensionDefaultProps) {\n            Object.assign(defaultProps, extensionDefaultProps);\n            Object.assign(propTypes, extensionDefaultProps[PROP_TYPES_SYMBOL]);\n            Object.assign(deprecatedProps, extensionDefaultProps[DEPRECATED_PROPS_SYMBOL]);\n        }\n    }\n    // Create any necessary property descriptors and create the default prop object\n    // Assign merged default props\n    createPropsPrototype(defaultProps, componentClass);\n    // Add getters/setters for async props\n    addAsyncPropsToPropPrototype(defaultProps, propTypes);\n    // Add setters for deprecated props\n    addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps);\n    // Store the precalculated props\n    defaultProps[PROP_TYPES_SYMBOL] = propTypes;\n    defaultProps[DEPRECATED_PROPS_SYMBOL] = deprecatedProps;\n    // Backwards compatibility\n    // TODO: remove access of hidden property from the rest of the code base\n    if (extensions.length === 0 && !hasOwnProperty(componentClass, '_propTypes')) {\n        componentClass._propTypes = propTypes;\n    }\n    return defaultProps;\n}\n// Builds a pre-merged default props object that component props can inherit from\nfunction createPropsPrototype(defaultProps, componentClass) {\n    // Avoid freezing `id` prop\n    const id = getComponentName(componentClass);\n    Object.defineProperties(defaultProps, {\n        // `id` is treated specially because layer might need to override it\n        id: {\n            writable: true,\n            value: id\n        }\n    });\n}\nfunction addDeprecatedPropsToPropPrototype(defaultProps, deprecatedProps) {\n    for (const propName in deprecatedProps) {\n        /* eslint-disable accessor-pairs */\n        Object.defineProperty(defaultProps, propName, {\n            enumerable: false,\n            set(newValue) {\n                const nameStr = `${this.id}: ${propName}`;\n                for (const newPropName of deprecatedProps[propName]) {\n                    if (!hasOwnProperty(this, newPropName)) {\n                        this[newPropName] = newValue;\n                    }\n                }\n                log.deprecated(nameStr, deprecatedProps[propName].join('/'))();\n            }\n        });\n        /* eslint-enable accessor-pairs */\n    }\n}\n// Create descriptors for overridable props\nfunction addAsyncPropsToPropPrototype(defaultProps, propTypes) {\n    const defaultValues = {};\n    const descriptors = {};\n    // Move async props into shadow values\n    for (const propName in propTypes) {\n        const propType = propTypes[propName];\n        const { name, value } = propType;\n        // Note: async is ES7 keyword, can't destructure\n        if (propType.async) {\n            defaultValues[name] = value;\n            descriptors[name] = getDescriptorForAsyncProp(name);\n        }\n    }\n    // Default \"resolved\" values for async props, returned if value not yet resolved/set.\n    defaultProps[ASYNC_DEFAULTS_SYMBOL] = defaultValues;\n    // Shadowed object, just to make sure \"early indexing\" into the instance does not fail\n    defaultProps[ASYNC_ORIGINAL_SYMBOL] = {};\n    Object.defineProperties(defaultProps, descriptors);\n}\n// Helper: Configures getter and setter for one async prop\nfunction getDescriptorForAsyncProp(name) {\n    return {\n        enumerable: true,\n        // Save the provided value for async props in a special map\n        set(newValue) {\n            if (typeof newValue === 'string' ||\n                newValue instanceof Promise ||\n                isAsyncIterable(newValue)) {\n                this[ASYNC_ORIGINAL_SYMBOL][name] = newValue;\n            }\n            else {\n                this[ASYNC_RESOLVED_SYMBOL][name] = newValue;\n            }\n        },\n        // Only the component's state knows the true value of async prop\n        get() {\n            if (this[ASYNC_RESOLVED_SYMBOL]) {\n                // Prop value isn't async, so just return it\n                if (name in this[ASYNC_RESOLVED_SYMBOL]) {\n                    const value = this[ASYNC_RESOLVED_SYMBOL][name];\n                    return value || this[ASYNC_DEFAULTS_SYMBOL][name];\n                }\n                if (name in this[ASYNC_ORIGINAL_SYMBOL]) {\n                    // It's an async prop value: look into component state\n                    const state = this[COMPONENT_SYMBOL] && this[COMPONENT_SYMBOL].internalState;\n                    if (state && state.hasAsyncProp(name)) {\n                        return state.getAsyncProp(name) || this[ASYNC_DEFAULTS_SYMBOL][name];\n                    }\n                }\n            }\n            // the prop is not supplied, or\n            // component not yet initialized/matched, return the component's default value for the prop\n            return this[ASYNC_DEFAULTS_SYMBOL][name];\n        }\n    };\n}\n// HELPER METHODS\nfunction hasOwnProperty(object, prop) {\n    return Object.prototype.hasOwnProperty.call(object, prop);\n}\n// Constructors have their super class constructors as prototypes\nfunction getOwnProperty(object, prop) {\n    return hasOwnProperty(object, prop) && object[prop];\n}\nfunction getComponentName(componentClass) {\n    const componentName = componentClass.componentName;\n    if (!componentName) {\n        log.warn(`${componentClass.name}.componentName not specified`)();\n    }\n    return componentName || componentClass.name;\n}\n//# sourceMappingURL=create-props.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { COMPONENT_SYMBOL, PROP_TYPES_SYMBOL, ASYNC_ORIGINAL_SYMBOL, ASYNC_RESOLVED_SYMBOL, ASYNC_DEFAULTS_SYMBOL } from \"./constants.js\";\nimport { createProps } from \"./create-props.js\";\nlet counter = 0;\nclass Component {\n    constructor(...propObjects) {\n        // Merge supplied props with default props and freeze them.\n        /* eslint-disable prefer-spread */\n        this.props = createProps(this, propObjects);\n        /* eslint-enable prefer-spread */\n        this.id = this.props.id; // The layer's id, used for matching with layers from last render cycle\n        this.count = counter++; // Keep track of how many layer instances you are generating\n    }\n    // clone this layer with modified props\n    clone(newProps) {\n        const { props } = this;\n        // Async props cannot be copied with Object.assign, copy them separately\n        const asyncProps = {};\n        // See async props definition in create-props.js\n        for (const key in props[ASYNC_DEFAULTS_SYMBOL]) {\n            if (key in props[ASYNC_RESOLVED_SYMBOL]) {\n                asyncProps[key] = props[ASYNC_RESOLVED_SYMBOL][key];\n            }\n            else if (key in props[ASYNC_ORIGINAL_SYMBOL]) {\n                asyncProps[key] = props[ASYNC_ORIGINAL_SYMBOL][key];\n            }\n        }\n        // Some custom layer implementation may not support multiple arguments in the constructor\n        // @ts-ignore\n        return new this.constructor({ ...props, ...asyncProps, ...newProps });\n    }\n}\nComponent.componentName = 'Component';\nComponent.defaultProps = {};\nexport default Component;\n//# sourceMappingURL=component.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { isAsyncIterable } from \"../utils/iterable-utils.js\";\nimport { COMPONENT_SYMBOL, PROP_TYPES_SYMBOL, ASYNC_ORIGINAL_SYMBOL, ASYNC_RESOLVED_SYMBOL, ASYNC_DEFAULTS_SYMBOL } from \"./constants.js\";\nconst EMPTY_PROPS = Object.freeze({});\nexport default class ComponentState {\n    constructor(component) {\n        this.component = component;\n        this.asyncProps = {}; // Prop values that the layer sees\n        this.onAsyncPropUpdated = () => { };\n        this.oldProps = null; // Last props before update\n        this.oldAsyncProps = null; // Last props before update, with async values copied.\n    }\n    finalize() {\n        for (const propName in this.asyncProps) {\n            const asyncProp = this.asyncProps[propName];\n            if (asyncProp && asyncProp.type && asyncProp.type.release) {\n                // Release any resources created by transforms\n                asyncProp.type.release(asyncProp.resolvedValue, asyncProp.type, this.component);\n            }\n        }\n        this.asyncProps = {};\n        this.component = null;\n        this.resetOldProps();\n    }\n    /* Layer-facing props API */\n    getOldProps() {\n        return this.oldAsyncProps || this.oldProps || EMPTY_PROPS;\n    }\n    resetOldProps() {\n        this.oldAsyncProps = null;\n        this.oldProps = this.component ? this.component.props : null;\n    }\n    // Checks if a prop is overridden\n    hasAsyncProp(propName) {\n        return propName in this.asyncProps;\n    }\n    // Returns value of an overriden prop\n    getAsyncProp(propName) {\n        const asyncProp = this.asyncProps[propName];\n        return asyncProp && asyncProp.resolvedValue;\n    }\n    isAsyncPropLoading(propName) {\n        if (propName) {\n            const asyncProp = this.asyncProps[propName];\n            return Boolean(asyncProp &&\n                asyncProp.pendingLoadCount > 0 &&\n                asyncProp.pendingLoadCount !== asyncProp.resolvedLoadCount);\n        }\n        for (const key in this.asyncProps) {\n            if (this.isAsyncPropLoading(key)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    // Without changing the original prop value, swap out the data resolution under the hood\n    reloadAsyncProp(propName, value) {\n        this._watchPromise(propName, Promise.resolve(value));\n    }\n    // Updates all async/overridden props (when new props come in)\n    // Checks if urls have changed, starts loading, or removes override\n    setAsyncProps(props) {\n        this.component = props[COMPONENT_SYMBOL] || this.component;\n        // NOTE: prop param and default values are only support for testing\n        const resolvedValues = props[ASYNC_RESOLVED_SYMBOL] || {};\n        const originalValues = props[ASYNC_ORIGINAL_SYMBOL] || props;\n        const defaultValues = props[ASYNC_DEFAULTS_SYMBOL] || {};\n        // TODO - use async props from the layer's prop types\n        for (const propName in resolvedValues) {\n            const value = resolvedValues[propName];\n            this._createAsyncPropData(propName, defaultValues[propName]);\n            this._updateAsyncProp(propName, value);\n            // Use transformed value\n            resolvedValues[propName] = this.getAsyncProp(propName);\n        }\n        for (const propName in originalValues) {\n            const value = originalValues[propName];\n            // Makes sure a record exists for this prop\n            this._createAsyncPropData(propName, defaultValues[propName]);\n            this._updateAsyncProp(propName, value);\n        }\n    }\n    /* Placeholder methods for subclassing */\n    _fetch(propName, url) {\n        return null;\n    }\n    _onResolve(propName, value) { } // eslint-disable-line @typescript-eslint/no-empty-function\n    _onError(propName, error) { } // eslint-disable-line @typescript-eslint/no-empty-function\n    // Intercept strings (URLs) and Promises and activates loading and prop rewriting\n    _updateAsyncProp(propName, value) {\n        if (!this._didAsyncInputValueChange(propName, value)) {\n            return;\n        }\n        // interpret value string as url and start a new load tracked by a promise\n        if (typeof value === 'string') {\n            value = this._fetch(propName, value);\n        }\n        // interprets promise and track the \"loading\"\n        if (value instanceof Promise) {\n            this._watchPromise(propName, value);\n            return;\n        }\n        if (isAsyncIterable(value)) {\n            this._resolveAsyncIterable(propName, value); // eslint-disable-line @typescript-eslint/no-floating-promises\n            return;\n        }\n        // else, normal, non-async value. Just store value for now\n        this._setPropValue(propName, value);\n    }\n    // Whenever async props are changing, we need to make a copy of oldProps\n    // otherwise the prop rewriting will affect the value both in props and oldProps.\n    // While the copy is relatively expensive, this only happens on load completion.\n    _freezeAsyncOldProps() {\n        if (!this.oldAsyncProps && this.oldProps) {\n            // 1. inherit all synchronous props from oldProps\n            // 2. reconfigure the async prop descriptors to fixed values\n            this.oldAsyncProps = Object.create(this.oldProps);\n            for (const propName in this.asyncProps) {\n                Object.defineProperty(this.oldAsyncProps, propName, {\n                    enumerable: true,\n                    value: this.oldProps[propName]\n                });\n            }\n        }\n    }\n    // Checks if an input value actually changed (to avoid reloading/rewatching promises/urls)\n    _didAsyncInputValueChange(propName, value) {\n        // @ts-ignore\n        const asyncProp = this.asyncProps[propName];\n        if (value === asyncProp.resolvedValue || value === asyncProp.lastValue) {\n            return false;\n        }\n        asyncProp.lastValue = value;\n        return true;\n    }\n    // Set normal, non-async value\n    _setPropValue(propName, value) {\n        // Save the current value before overwriting so that diffProps can access both\n        this._freezeAsyncOldProps();\n        const asyncProp = this.asyncProps[propName];\n        if (asyncProp) {\n            value = this._postProcessValue(asyncProp, value);\n            asyncProp.resolvedValue = value;\n            asyncProp.pendingLoadCount++;\n            asyncProp.resolvedLoadCount = asyncProp.pendingLoadCount;\n        }\n    }\n    // Set a just resolved async value, calling onAsyncPropUpdates if value changes asynchronously\n    _setAsyncPropValue(propName, value, loadCount) {\n        // Only update if loadCount is larger or equal to resolvedLoadCount\n        // otherwise a more recent load has already completed\n        const asyncProp = this.asyncProps[propName];\n        if (asyncProp && loadCount >= asyncProp.resolvedLoadCount && value !== undefined) {\n            // Save the current value before overwriting so that diffProps can access both\n            this._freezeAsyncOldProps();\n            asyncProp.resolvedValue = value;\n            asyncProp.resolvedLoadCount = loadCount;\n            // Call callback to inform listener\n            this.onAsyncPropUpdated(propName, value);\n        }\n    }\n    // Tracks a promise, sets the prop when loaded, handles load count\n    _watchPromise(propName, promise) {\n        const asyncProp = this.asyncProps[propName];\n        if (asyncProp) {\n            asyncProp.pendingLoadCount++;\n            const loadCount = asyncProp.pendingLoadCount;\n            promise\n                .then(data => {\n                if (!this.component) {\n                    // This component state has been finalized\n                    return;\n                }\n                data = this._postProcessValue(asyncProp, data);\n                this._setAsyncPropValue(propName, data, loadCount);\n                this._onResolve(propName, data);\n            })\n                .catch(error => {\n                this._onError(propName, error);\n            });\n        }\n    }\n    async _resolveAsyncIterable(propName, iterable) {\n        if (propName !== 'data') {\n            // we only support data as async iterable\n            this._setPropValue(propName, iterable);\n            return;\n        }\n        const asyncProp = this.asyncProps[propName];\n        if (!asyncProp) {\n            return;\n        }\n        asyncProp.pendingLoadCount++;\n        const loadCount = asyncProp.pendingLoadCount;\n        let data = [];\n        let count = 0;\n        for await (const chunk of iterable) {\n            if (!this.component) {\n                // This component state has been finalized\n                return;\n            }\n            // @ts-expect-error (2339) dataTransform is not decared in base component props\n            const { dataTransform } = this.component.props;\n            if (dataTransform) {\n                data = dataTransform(chunk, data);\n            }\n            else {\n                data = data.concat(chunk);\n            }\n            // Used by the default _dataDiff function\n            Object.defineProperty(data, '__diff', {\n                enumerable: false,\n                value: [{ startRow: count, endRow: data.length }]\n            });\n            count = data.length;\n            this._setAsyncPropValue(propName, data, loadCount);\n        }\n        this._onResolve(propName, data);\n    }\n    // Give the app a chance to post process the loaded data\n    _postProcessValue(asyncProp, value) {\n        const propType = asyncProp.type;\n        if (propType && this.component) {\n            if (propType.release) {\n                propType.release(asyncProp.resolvedValue, propType, this.component);\n            }\n            if (propType.transform) {\n                return propType.transform(value, propType, this.component);\n            }\n        }\n        return value;\n    }\n    // Creating an asyncProp record if needed\n    _createAsyncPropData(propName, defaultValue) {\n        const asyncProp = this.asyncProps[propName];\n        if (!asyncProp) {\n            const propTypes = this.component && this.component.props[PROP_TYPES_SYMBOL];\n            // assert(defaultValue !== undefined);\n            this.asyncProps[propName] = {\n                type: propTypes && propTypes[propName],\n                lastValue: null,\n                resolvedValue: defaultValue,\n                pendingLoadCount: 0,\n                resolvedLoadCount: 0\n            };\n        }\n    }\n}\n//# sourceMappingURL=component-state.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// deck.gl, MIT license\nimport ComponentState from \"../lifecycle/component-state.js\";\nexport default class LayerState extends ComponentState {\n    constructor({ attributeManager, layer }) {\n        super(layer);\n        this.attributeManager = attributeManager;\n        this.needsRedraw = true;\n        this.needsUpdate = true;\n        this.subLayers = null;\n        this.usesPickingColorCache = false;\n    }\n    get layer() {\n        return this.component;\n    }\n    /* Override base Component methods with Layer-specific handling */\n    _fetch(propName, url) {\n        const layer = this.layer;\n        const fetch = layer?.props.fetch;\n        if (fetch) {\n            return fetch(url, { propName, layer });\n        }\n        return super._fetch(propName, url);\n    }\n    _onResolve(propName, value) {\n        const layer = this.layer;\n        if (layer) {\n            const onDataLoad = layer.props.onDataLoad;\n            if (propName === 'data' && onDataLoad) {\n                onDataLoad(value, { propName, layer });\n            }\n        }\n    }\n    _onError(propName, error) {\n        const layer = this.layer;\n        if (layer) {\n            layer.raiseError(error, `loading ${propName} of ${this.layer}`);\n        }\n    }\n}\n//# sourceMappingURL=layer-state.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/* eslint-disable react/no-direct-mutation-state */\nimport { Buffer } from '@luma.gl/core';\nimport { WebGLDevice } from '@luma.gl/webgl';\nimport { COORDINATE_SYSTEM } from \"./constants.js\";\nimport AttributeManager from \"./attribute/attribute-manager.js\";\nimport UniformTransitionManager from \"./uniform-transition-manager.js\";\nimport { diffProps, validateProps } from \"../lifecycle/props.js\";\nimport { LIFECYCLE } from \"../lifecycle/constants.js\";\nimport { count } from \"../utils/count.js\";\nimport log from \"../utils/log.js\";\nimport debug from \"../debug/index.js\";\nimport assert from \"../utils/assert.js\";\nimport memoize from \"../utils/memoize.js\";\nimport { mergeShaders } from \"../utils/shader.js\";\nimport { projectPosition, getWorldPosition } from \"../shaderlib/project/project-functions.js\";\nimport typedArrayManager from \"../utils/typed-array-manager.js\";\nimport Component from \"../lifecycle/component.js\";\nimport LayerState from \"./layer-state.js\";\nimport { worldToPixels } from '@math.gl/web-mercator';\nimport { load } from '@loaders.gl/core';\nconst TRACE_CHANGE_FLAG = 'layer.changeFlag';\nconst TRACE_INITIALIZE = 'layer.initialize';\nconst TRACE_UPDATE = 'layer.update';\nconst TRACE_FINALIZE = 'layer.finalize';\nconst TRACE_MATCHED = 'layer.matched';\nconst MAX_PICKING_COLOR_CACHE_SIZE = 2 ** 24 - 1;\nconst EMPTY_ARRAY = Object.freeze([]);\n// Only compare the same two viewports once\nconst areViewportsEqual = memoize(({ oldViewport, viewport }) => {\n    return oldViewport.equals(viewport);\n});\nlet pickingColorCache = new Uint8ClampedArray(0);\nconst defaultProps = {\n    // data: Special handling for null, see below\n    data: { type: 'data', value: EMPTY_ARRAY, async: true },\n    dataComparator: { type: 'function', value: null, optional: true },\n    _dataDiff: {\n        type: 'function',\n        // @ts-ignore __diff is not defined on data\n        value: data => data && data.__diff,\n        optional: true\n    },\n    dataTransform: { type: 'function', value: null, optional: true },\n    onDataLoad: { type: 'function', value: null, optional: true },\n    onError: { type: 'function', value: null, optional: true },\n    fetch: {\n        type: 'function',\n        value: (url, { propName, layer, loaders, loadOptions, signal }) => {\n            const { resourceManager } = layer.context;\n            loadOptions = loadOptions || layer.getLoadOptions();\n            loaders = loaders || layer.props.loaders;\n            if (signal) {\n                loadOptions = {\n                    ...loadOptions,\n                    fetch: {\n                        ...loadOptions?.fetch,\n                        signal\n                    }\n                };\n            }\n            let inResourceManager = resourceManager.contains(url);\n            if (!inResourceManager && !loadOptions) {\n                // If there is no layer-specific load options, then attempt to cache this resource in the data manager\n                resourceManager.add({ resourceId: url, data: load(url, loaders), persistent: false });\n                inResourceManager = true;\n            }\n            if (inResourceManager) {\n                return resourceManager.subscribe({\n                    resourceId: url,\n                    onChange: data => layer.internalState?.reloadAsyncProp(propName, data),\n                    consumerId: layer.id,\n                    requestId: propName\n                });\n            }\n            return load(url, loaders, loadOptions);\n        }\n    },\n    updateTriggers: {}, // Update triggers: a core change detection mechanism in deck.gl\n    visible: true,\n    pickable: false,\n    opacity: { type: 'number', min: 0, max: 1, value: 1 },\n    operation: 'draw',\n    onHover: { type: 'function', value: null, optional: true },\n    onClick: { type: 'function', value: null, optional: true },\n    onDragStart: { type: 'function', value: null, optional: true },\n    onDrag: { type: 'function', value: null, optional: true },\n    onDragEnd: { type: 'function', value: null, optional: true },\n    coordinateSystem: COORDINATE_SYSTEM.DEFAULT,\n    coordinateOrigin: { type: 'array', value: [0, 0, 0], compare: true },\n    modelMatrix: { type: 'array', value: null, compare: true, optional: true },\n    wrapLongitude: false,\n    positionFormat: 'XYZ',\n    colorFormat: 'RGBA',\n    parameters: { type: 'object', value: {}, optional: true, compare: 2 },\n    loadOptions: { type: 'object', value: null, optional: true, ignore: true },\n    transitions: null,\n    extensions: [],\n    loaders: { type: 'array', value: [], optional: true, ignore: true },\n    // Offset depth based on layer index to avoid z-fighting.\n    // Negative values pull layer towards the camera\n    // https://www.opengl.org/archives/resources/faq/technical/polygonoffset.htm\n    getPolygonOffset: {\n        type: 'function',\n        value: ({ layerIndex }) => [0, -layerIndex * 100]\n    },\n    // Selection/Highlighting\n    highlightedObjectIndex: null,\n    autoHighlight: false,\n    highlightColor: { type: 'accessor', value: [0, 0, 128, 128] }\n};\nclass Layer extends Component {\n    constructor() {\n        super(...arguments);\n        this.internalState = null;\n        this.lifecycle = LIFECYCLE.NO_STATE; // Helps track and debug the life cycle of the layers\n        this.parent = null;\n    }\n    static get componentName() {\n        return Object.prototype.hasOwnProperty.call(this, 'layerName') ? this.layerName : '';\n    }\n    get root() {\n        // eslint-disable-next-line\n        let layer = this;\n        while (layer.parent) {\n            layer = layer.parent;\n        }\n        return layer;\n    }\n    toString() {\n        const className = this.constructor.layerName || this.constructor.name;\n        return `${className}({id: '${this.props.id}'})`;\n    }\n    // Public API for users\n    /** Projects a point with current view state from the current layer's coordinate system to screen */\n    project(xyz) {\n        assert(this.internalState);\n        const viewport = this.internalState.viewport || this.context.viewport;\n        const worldPosition = getWorldPosition(xyz, {\n            viewport,\n            modelMatrix: this.props.modelMatrix,\n            coordinateOrigin: this.props.coordinateOrigin,\n            coordinateSystem: this.props.coordinateSystem\n        });\n        const [x, y, z] = worldToPixels(worldPosition, viewport.pixelProjectionMatrix);\n        return xyz.length === 2 ? [x, y] : [x, y, z];\n    }\n    /** Unprojects a screen pixel to the current view's default coordinate system\n        Note: this does not reverse `project`. */\n    unproject(xy) {\n        assert(this.internalState);\n        const viewport = this.internalState.viewport || this.context.viewport;\n        return viewport.unproject(xy);\n    }\n    /** Projects a point with current view state from the current layer's coordinate system to the world space */\n    projectPosition(xyz, params) {\n        assert(this.internalState);\n        const viewport = this.internalState.viewport || this.context.viewport;\n        return projectPosition(xyz, {\n            viewport,\n            modelMatrix: this.props.modelMatrix,\n            coordinateOrigin: this.props.coordinateOrigin,\n            coordinateSystem: this.props.coordinateSystem,\n            ...params\n        });\n    }\n    // Public API for custom layer implementation\n    /** `true` if this layer renders other layers */\n    get isComposite() {\n        return false;\n    }\n    /** `true` if the layer renders to screen */\n    get isDrawable() {\n        return true;\n    }\n    /** Updates selected state members and marks the layer for redraw */\n    setState(partialState) {\n        this.setChangeFlags({ stateChanged: true });\n        Object.assign(this.state, partialState);\n        this.setNeedsRedraw();\n    }\n    /** Sets the redraw flag for this layer, will trigger a redraw next animation frame */\n    setNeedsRedraw() {\n        if (this.internalState) {\n            this.internalState.needsRedraw = true;\n        }\n    }\n    /** Mark this layer as needs a deep update */\n    setNeedsUpdate() {\n        if (this.internalState) {\n            this.context.layerManager.setNeedsUpdate(String(this));\n            this.internalState.needsUpdate = true;\n        }\n    }\n    /** Returns true if all async resources are loaded */\n    get isLoaded() {\n        return this.internalState ? !this.internalState.isAsyncPropLoading() : false;\n    }\n    /** Returns true if using shader-based WGS84 longitude wrapping */\n    get wrapLongitude() {\n        return this.props.wrapLongitude;\n    }\n    /** @deprecated Returns true if the layer is visible in the picking pass */\n    isPickable() {\n        return this.props.pickable && this.props.visible;\n    }\n    /** Returns an array of models used by this layer, can be overriden by layer subclass */\n    getModels() {\n        const state = this.state;\n        return (state && (state.models || (state.model && [state.model]))) || [];\n    }\n    /** Update shader input parameters */\n    setShaderModuleProps(...props) {\n        for (const model of this.getModels()) {\n            model.shaderInputs.setProps(...props);\n        }\n    }\n    /** Returns the attribute manager of this layer */\n    getAttributeManager() {\n        return this.internalState && this.internalState.attributeManager;\n    }\n    /** Returns the most recent layer that matched to this state\n      (When reacting to an async event, this layer may no longer be the latest) */\n    getCurrentLayer() {\n        return this.internalState && this.internalState.layer;\n    }\n    /** Returns the default parse options for async props */\n    getLoadOptions() {\n        return this.props.loadOptions;\n    }\n    use64bitPositions() {\n        const { coordinateSystem } = this.props;\n        return (coordinateSystem === COORDINATE_SYSTEM.DEFAULT ||\n            coordinateSystem === COORDINATE_SYSTEM.LNGLAT ||\n            coordinateSystem === COORDINATE_SYSTEM.CARTESIAN);\n    }\n    // Event handling\n    onHover(info, pickingEvent) {\n        if (this.props.onHover) {\n            return this.props.onHover(info, pickingEvent) || false;\n        }\n        return false;\n    }\n    onClick(info, pickingEvent) {\n        if (this.props.onClick) {\n            return this.props.onClick(info, pickingEvent) || false;\n        }\n        return false;\n    }\n    // Returns the picking color that doesn't match any subfeature\n    // Use if some graphics do not belong to any pickable subfeature\n    // @return {Array} - a black color\n    nullPickingColor() {\n        return [0, 0, 0];\n    }\n    // Returns the picking color that doesn't match any subfeature\n    // Use if some graphics do not belong to any pickable subfeature\n    encodePickingColor(i, target = []) {\n        target[0] = (i + 1) & 255;\n        target[1] = ((i + 1) >> 8) & 255;\n        target[2] = (((i + 1) >> 8) >> 8) & 255;\n        return target;\n    }\n    // Returns the index corresponding to a picking color that doesn't match any subfeature\n    // @param {Uint8Array} color - color array to be decoded\n    // @return {Array} - the decoded picking color\n    decodePickingColor(color) {\n        assert(color instanceof Uint8Array);\n        const [i1, i2, i3] = color;\n        // 1 was added to seperate from no selection\n        const index = i1 + i2 * 256 + i3 * 65536 - 1;\n        return index;\n    }\n    /** Deduces number of instances. Intention is to support:\n      - Explicit setting of numInstances\n      - Auto-deduction for ES6 containers that define a size member\n      - Auto-deduction for Classic Arrays via the built-in length attribute\n      - Auto-deduction via arrays */\n    getNumInstances() {\n        // First Check if app has provided an explicit value\n        if (Number.isFinite(this.props.numInstances)) {\n            return this.props.numInstances;\n        }\n        // Second check if the layer has set its own value\n        if (this.state && this.state.numInstances !== undefined) {\n            return this.state.numInstances;\n        }\n        // Use container library to get a count for any ES6 container or object\n        return count(this.props.data);\n    }\n    /** Buffer layout describes how many attribute values are packed for each data object\n        The default (null) is one value each object.\n        Some data formats (e.g. paths, polygons) have various length. Their buffer layout\n        is in the form of [L0, L1, L2, ...] */\n    getStartIndices() {\n        // First Check if startIndices is provided as an explicit value\n        if (this.props.startIndices) {\n            return this.props.startIndices;\n        }\n        // Second check if the layer has set its own value\n        if (this.state && this.state.startIndices) {\n            return this.state.startIndices;\n        }\n        return null;\n    }\n    // Default implementation\n    getBounds() {\n        return this.getAttributeManager()?.getBounds(['positions', 'instancePositions']);\n    }\n    getShaders(shaders) {\n        shaders = mergeShaders(shaders, {\n            disableWarnings: true,\n            modules: this.context.defaultShaderModules\n        });\n        for (const extension of this.props.extensions) {\n            shaders = mergeShaders(shaders, extension.getShaders.call(this, extension));\n        }\n        return shaders;\n    }\n    /** Controls if updateState should be called. By default returns true if any prop has changed */\n    shouldUpdateState(params) {\n        return params.changeFlags.propsOrDataChanged;\n    }\n    /** Default implementation, all attributes will be invalidated and updated when data changes */\n    // eslint-disable-next-line complexity\n    updateState(params) {\n        const attributeManager = this.getAttributeManager();\n        const { dataChanged } = params.changeFlags;\n        if (dataChanged && attributeManager) {\n            if (Array.isArray(dataChanged)) {\n                // is partial update\n                for (const dataRange of dataChanged) {\n                    attributeManager.invalidateAll(dataRange);\n                }\n            }\n            else {\n                attributeManager.invalidateAll();\n            }\n        }\n        // Enable/disable picking buffer\n        if (attributeManager) {\n            const { props } = params;\n            const hasPickingBuffer = this.internalState.hasPickingBuffer;\n            const needsPickingBuffer = Number.isInteger(props.highlightedObjectIndex) ||\n                props.pickable ||\n                props.extensions.some(extension => extension.getNeedsPickingBuffer.call(this, extension));\n            // Only generate picking buffer if needed\n            if (hasPickingBuffer !== needsPickingBuffer) {\n                this.internalState.hasPickingBuffer = needsPickingBuffer;\n                const { pickingColors, instancePickingColors } = attributeManager.attributes;\n                const pickingColorsAttribute = pickingColors || instancePickingColors;\n                if (pickingColorsAttribute) {\n                    if (needsPickingBuffer && pickingColorsAttribute.constant) {\n                        pickingColorsAttribute.constant = false;\n                        attributeManager.invalidate(pickingColorsAttribute.id);\n                    }\n                    if (!pickingColorsAttribute.value && !needsPickingBuffer) {\n                        pickingColorsAttribute.constant = true;\n                        pickingColorsAttribute.value = [0, 0, 0];\n                    }\n                }\n            }\n        }\n    }\n    /** Called once when layer is no longer matched and state will be discarded. Layers can destroy WebGL resources here. */\n    finalizeState(context) {\n        for (const model of this.getModels()) {\n            model.destroy();\n        }\n        const attributeManager = this.getAttributeManager();\n        if (attributeManager) {\n            attributeManager.finalize();\n        }\n        if (this.context) {\n            this.context.resourceManager.unsubscribe({ consumerId: this.id });\n        }\n        if (this.internalState) {\n            this.internalState.uniformTransitions.clear();\n            this.internalState.finalize();\n        }\n    }\n    // If state has a model, draw it with supplied uniforms\n    draw(opts) {\n        for (const model of this.getModels()) {\n            model.draw(opts.renderPass);\n        }\n    }\n    // called to populate the info object that is passed to the event handler\n    // @return null to cancel event\n    getPickingInfo({ info, mode, sourceLayer }) {\n        const { index } = info;\n        if (index >= 0) {\n            // If props.data is an indexable array, get the object\n            if (Array.isArray(this.props.data)) {\n                info.object = this.props.data[index];\n            }\n        }\n        return info;\n    }\n    // END LIFECYCLE METHODS\n    // / INTERNAL METHODS - called by LayerManager, DeckRenderer and DeckPicker\n    /** (Internal) Propagate an error event through the system */\n    raiseError(error, message) {\n        if (message) {\n            // Duplicating error message for backward compatibility, see #7986\n            // TODO - revisit in v9\n            error = new Error(`${message}: ${error.message}`, { cause: error });\n        }\n        if (!this.props.onError?.(error)) {\n            this.context?.onError?.(error, this);\n        }\n    }\n    /** (Internal) Checks if this layer needs redraw */\n    getNeedsRedraw(opts = { clearRedrawFlags: false }) {\n        return this._getNeedsRedraw(opts);\n    }\n    /** (Internal) Checks if this layer needs a deep update */\n    needsUpdate() {\n        if (!this.internalState) {\n            return false;\n        }\n        // Call subclass lifecycle method\n        return (this.internalState.needsUpdate ||\n            this.hasUniformTransition() ||\n            this.shouldUpdateState(this._getUpdateParams()));\n        // End lifecycle method\n    }\n    /** Checks if this layer has ongoing uniform transition */\n    hasUniformTransition() {\n        return this.internalState?.uniformTransitions.active || false;\n    }\n    /** Called when this layer is rendered into the given viewport */\n    activateViewport(viewport) {\n        if (!this.internalState) {\n            return;\n        }\n        const oldViewport = this.internalState.viewport;\n        this.internalState.viewport = viewport;\n        if (!oldViewport || !areViewportsEqual({ oldViewport, viewport })) {\n            this.setChangeFlags({ viewportChanged: true });\n            if (this.isComposite) {\n                if (this.needsUpdate()) {\n                    // Composite layers may add/remove sublayers on viewport change\n                    // Because we cannot change the layers list during a draw cycle, we don't want to update sublayers right away\n                    // This will not call update immediately, but mark the layerManager as needs update on the next frame\n                    this.setNeedsUpdate();\n                }\n            }\n            else {\n                this._update();\n            }\n        }\n    }\n    /** Default implementation of attribute invalidation, can be redefined */\n    invalidateAttribute(name = 'all') {\n        const attributeManager = this.getAttributeManager();\n        if (!attributeManager) {\n            return;\n        }\n        if (name === 'all') {\n            attributeManager.invalidateAll();\n        }\n        else {\n            attributeManager.invalidate(name);\n        }\n    }\n    /** Send updated attributes to the WebGL model */\n    updateAttributes(changedAttributes) {\n        // If some buffer layout changed\n        let bufferLayoutChanged = false;\n        for (const id in changedAttributes) {\n            if (changedAttributes[id].layoutChanged()) {\n                bufferLayoutChanged = true;\n            }\n        }\n        for (const model of this.getModels()) {\n            this._setModelAttributes(model, changedAttributes, bufferLayoutChanged);\n        }\n    }\n    /** Recalculate any attributes if needed */\n    _updateAttributes() {\n        const attributeManager = this.getAttributeManager();\n        if (!attributeManager) {\n            return;\n        }\n        const props = this.props;\n        // Figure out data length\n        const numInstances = this.getNumInstances();\n        const startIndices = this.getStartIndices();\n        attributeManager.update({\n            data: props.data,\n            numInstances,\n            startIndices,\n            props,\n            transitions: props.transitions,\n            // @ts-ignore (TS2339) property attribute is not present on some acceptable data types\n            buffers: props.data.attributes,\n            context: this\n        });\n        const changedAttributes = attributeManager.getChangedAttributes({ clearChangedFlags: true });\n        this.updateAttributes(changedAttributes);\n    }\n    /** Update attribute transitions. This is called in drawLayer, no model updates required. */\n    _updateAttributeTransition() {\n        const attributeManager = this.getAttributeManager();\n        if (attributeManager) {\n            attributeManager.updateTransition();\n        }\n    }\n    /** Update uniform (prop) transitions. This is called in updateState, may result in model updates. */\n    _updateUniformTransition() {\n        // @ts-ignore (TS2339) internalState is alwasy defined when this method is called\n        const { uniformTransitions } = this.internalState;\n        if (uniformTransitions.active) {\n            // clone props\n            const propsInTransition = uniformTransitions.update();\n            const props = Object.create(this.props);\n            for (const key in propsInTransition) {\n                Object.defineProperty(props, key, { value: propsInTransition[key] });\n            }\n            return props;\n        }\n        return this.props;\n    }\n    /** Updater for the automatically populated instancePickingColors attribute */\n    calculateInstancePickingColors(attribute, { numInstances }) {\n        if (attribute.constant) {\n            return;\n        }\n        // calculateInstancePickingColors always generates the same sequence.\n        // pickingColorCache saves the largest generated sequence for reuse\n        const cacheSize = Math.floor(pickingColorCache.length / 4);\n        // Record when using the picking buffer cache, so that layers can always point at the most recently allocated cache\n        // @ts-ignore (TS2531) internalState is always defined when this method is called\n        this.internalState.usesPickingColorCache = true;\n        if (cacheSize < numInstances) {\n            if (numInstances > MAX_PICKING_COLOR_CACHE_SIZE) {\n                log.warn('Layer has too many data objects. Picking might not be able to distinguish all objects.')();\n            }\n            pickingColorCache = typedArrayManager.allocate(pickingColorCache, numInstances, {\n                size: 4,\n                copy: true,\n                maxCount: Math.max(numInstances, MAX_PICKING_COLOR_CACHE_SIZE)\n            });\n            // If the attribute is larger than the cache, resize the cache and populate the missing chunk\n            const newCacheSize = Math.floor(pickingColorCache.length / 4);\n            const pickingColor = [0, 0, 0];\n            for (let i = cacheSize; i < newCacheSize; i++) {\n                this.encodePickingColor(i, pickingColor);\n                pickingColorCache[i * 4 + 0] = pickingColor[0];\n                pickingColorCache[i * 4 + 1] = pickingColor[1];\n                pickingColorCache[i * 4 + 2] = pickingColor[2];\n                pickingColorCache[i * 4 + 3] = 0;\n            }\n        }\n        attribute.value = pickingColorCache.subarray(0, numInstances * 4);\n    }\n    /** Apply changed attributes to model */\n    _setModelAttributes(model, changedAttributes, bufferLayoutChanged = false) {\n        if (!Object.keys(changedAttributes).length) {\n            return;\n        }\n        if (bufferLayoutChanged) {\n            // AttributeManager is always defined when this method is called\n            const attributeManager = this.getAttributeManager();\n            model.setBufferLayout(attributeManager.getBufferLayouts(model));\n            // All attributes must be reset after buffer layout change\n            changedAttributes = attributeManager.getAttributes();\n        }\n        // @ts-ignore luma.gl type issue\n        const excludeAttributes = model.userData?.excludeAttributes || {};\n        const attributeBuffers = {};\n        const constantAttributes = {};\n        for (const name in changedAttributes) {\n            if (excludeAttributes[name]) {\n                continue;\n            }\n            const values = changedAttributes[name].getValue();\n            for (const attributeName in values) {\n                const value = values[attributeName];\n                if (value instanceof Buffer) {\n                    if (changedAttributes[name].settings.isIndexed) {\n                        model.setIndexBuffer(value);\n                    }\n                    else {\n                        attributeBuffers[attributeName] = value;\n                    }\n                }\n                else if (value) {\n                    constantAttributes[attributeName] = value;\n                }\n            }\n        }\n        // TODO - update buffer map?\n        model.setAttributes(attributeBuffers);\n        model.setConstantAttributes(constantAttributes);\n    }\n    /** (Internal) Sets the picking color at the specified index to null picking color. Used for multi-depth picking.\n       This method may be overriden by layer implementations */\n    disablePickingIndex(objectIndex) {\n        const data = this.props.data;\n        if (!('attributes' in data)) {\n            this._disablePickingIndex(objectIndex);\n            return;\n        }\n        // @ts-ignore (TS2531) this method is only called internally with attributeManager defined\n        const { pickingColors, instancePickingColors } = this.getAttributeManager().attributes;\n        const colors = pickingColors || instancePickingColors;\n        const externalColorAttribute = colors && data.attributes && data.attributes[colors.id];\n        if (externalColorAttribute && externalColorAttribute.value) {\n            const values = externalColorAttribute.value;\n            const objectColor = this.encodePickingColor(objectIndex);\n            for (let index = 0; index < data.length; index++) {\n                const i = colors.getVertexOffset(index);\n                if (values[i] === objectColor[0] &&\n                    values[i + 1] === objectColor[1] &&\n                    values[i + 2] === objectColor[2]) {\n                    this._disablePickingIndex(index);\n                }\n            }\n        }\n        else {\n            this._disablePickingIndex(objectIndex);\n        }\n    }\n    // TODO - simplify subclassing interface\n    _disablePickingIndex(objectIndex) {\n        // @ts-ignore (TS2531) this method is only called internally with attributeManager defined\n        const { pickingColors, instancePickingColors } = this.getAttributeManager().attributes;\n        const colors = pickingColors || instancePickingColors;\n        if (!colors) {\n            return;\n        }\n        const start = colors.getVertexOffset(objectIndex);\n        const end = colors.getVertexOffset(objectIndex + 1);\n        // Fill the sub buffer with 0s, 1 byte per element\n        colors.buffer.write(new Uint8Array(end - start), start);\n    }\n    /** (Internal) Re-enable all picking indices after multi-depth picking */\n    restorePickingColors() {\n        // @ts-ignore (TS2531) this method is only called internally with attributeManager defined\n        const { pickingColors, instancePickingColors } = this.getAttributeManager().attributes;\n        const colors = pickingColors || instancePickingColors;\n        if (!colors) {\n            return;\n        }\n        // The picking color cache may have been freed and then reallocated. This ensures we read from the currently allocated cache.\n        if (\n        // @ts-ignore (TS2531) this method is only called internally with internalState defined\n        this.internalState.usesPickingColorCache &&\n            colors.value.buffer !== pickingColorCache.buffer) {\n            colors.value = pickingColorCache.subarray(0, colors.value.length);\n        }\n        colors.updateSubBuffer({ startOffset: 0 });\n    }\n    /* eslint-disable max-statements */\n    /* (Internal) Called by layer manager when a new layer is found */\n    _initialize() {\n        assert(!this.internalState); // finalized layer cannot be reused\n        assert(Number.isFinite(this.props.coordinateSystem)); // invalid coordinateSystem\n        debug(TRACE_INITIALIZE, this);\n        const attributeManager = this._getAttributeManager();\n        if (attributeManager) {\n            // All instanced layers get instancePickingColors attribute by default\n            // Their shaders can use it to render a picking scene\n            // TODO - this slightly slows down non instanced layers\n            attributeManager.addInstanced({\n                instancePickingColors: {\n                    type: 'uint8',\n                    size: 4,\n                    noAlloc: true,\n                    // Updaters are always called with `this` pointing to the layer\n                    // eslint-disable-next-line @typescript-eslint/unbound-method\n                    update: this.calculateInstancePickingColors\n                }\n            });\n        }\n        this.internalState = new LayerState({\n            attributeManager,\n            layer: this\n        });\n        this._clearChangeFlags(); // populate this.internalState.changeFlags\n        this.state = {};\n        // for backwards compatibility with older layers\n        // TODO - remove in next release\n        /* eslint-disable accessor-pairs */\n        Object.defineProperty(this.state, 'attributeManager', {\n            get: () => {\n                log.deprecated('layer.state.attributeManager', 'layer.getAttributeManager()')();\n                return attributeManager;\n            }\n        });\n        /* eslint-enable accessor-pairs */\n        this.internalState.uniformTransitions = new UniformTransitionManager(this.context.timeline);\n        this.internalState.onAsyncPropUpdated = this._onAsyncPropUpdated.bind(this);\n        // Ensure any async props are updated\n        this.internalState.setAsyncProps(this.props);\n        // Call subclass lifecycle methods\n        this.initializeState(this.context);\n        // Initialize extensions\n        for (const extension of this.props.extensions) {\n            extension.initializeState.call(this, this.context, extension);\n        }\n        // End subclass lifecycle methods\n        // initializeState callback tends to clear state\n        this.setChangeFlags({\n            dataChanged: 'init',\n            propsChanged: 'init',\n            viewportChanged: true,\n            extensionsChanged: true\n        });\n        this._update();\n    }\n    /** (Internal) Called by layer manager to transfer state from an old layer */\n    _transferState(oldLayer) {\n        debug(TRACE_MATCHED, this, this === oldLayer);\n        const { state, internalState } = oldLayer;\n        if (this === oldLayer) {\n            return;\n        }\n        // Move internalState\n        this.internalState = internalState;\n        // Move state\n        this.state = state;\n        // We keep the state ref on old layers to support async actions\n        // oldLayer.state = null;\n        // Ensure any async props are updated\n        this.internalState.setAsyncProps(this.props);\n        this._diffProps(this.props, this.internalState.getOldProps());\n    }\n    /** (Internal) Called by layer manager when a new layer is added or an existing layer is matched with a new instance */\n    _update() {\n        // Call subclass lifecycle method\n        const stateNeedsUpdate = this.needsUpdate();\n        // End lifecycle method\n        debug(TRACE_UPDATE, this, stateNeedsUpdate);\n        if (!stateNeedsUpdate) {\n            return;\n        }\n        const currentProps = this.props;\n        const context = this.context;\n        const internalState = this.internalState;\n        const currentViewport = context.viewport;\n        const propsInTransition = this._updateUniformTransition();\n        internalState.propsInTransition = propsInTransition;\n        // Overwrite this.context.viewport during update to use the last activated viewport on this layer\n        // In multi-view applications, a layer may only be drawn in one of the views\n        // Which would make the \"active\" viewport different from the shared context\n        context.viewport = internalState.viewport || currentViewport;\n        // Overwrite this.props during update to use in-transition prop values\n        this.props = propsInTransition;\n        try {\n            const updateParams = this._getUpdateParams();\n            const oldModels = this.getModels();\n            // Safely call subclass lifecycle methods\n            if (context.device) {\n                this.updateState(updateParams);\n            }\n            else {\n                try {\n                    this.updateState(updateParams);\n                }\n                catch (error) {\n                    // ignore error if gl context is missing\n                }\n            }\n            // Execute extension updates\n            for (const extension of this.props.extensions) {\n                extension.updateState.call(this, updateParams, extension);\n            }\n            this.setNeedsRedraw();\n            // Check if attributes need recalculation\n            this._updateAttributes();\n            const modelChanged = this.getModels()[0] !== oldModels[0];\n            this._postUpdate(updateParams, modelChanged);\n            // End subclass lifecycle methods\n        }\n        finally {\n            // Restore shared context\n            context.viewport = currentViewport;\n            this.props = currentProps;\n            this._clearChangeFlags();\n            internalState.needsUpdate = false;\n            internalState.resetOldProps();\n        }\n    }\n    /* eslint-enable max-statements */\n    /** (Internal) Called by manager when layer is about to be disposed\n        Note: not guaranteed to be called on application shutdown */\n    _finalize() {\n        debug(TRACE_FINALIZE, this);\n        // Call subclass lifecycle method\n        this.finalizeState(this.context);\n        // Finalize extensions\n        for (const extension of this.props.extensions) {\n            extension.finalizeState.call(this, this.context, extension);\n        }\n    }\n    // Calculates uniforms\n    _drawLayer({ renderPass, shaderModuleProps = null, uniforms = {}, parameters = {} }) {\n        this._updateAttributeTransition();\n        const currentProps = this.props;\n        const context = this.context;\n        // Overwrite this.props during redraw to use in-transition prop values\n        // `internalState.propsInTransition` could be missing if `updateState` failed\n        // @ts-ignore (TS2339) internalState is alwasy defined when this method is called\n        this.props = this.internalState.propsInTransition || currentProps;\n        try {\n            // TODO/ib - hack move to luma Model.draw\n            if (shaderModuleProps) {\n                this.setShaderModuleProps(shaderModuleProps);\n            }\n            // Apply polygon offset to avoid z-fighting\n            // TODO - move to draw-layers\n            const { getPolygonOffset } = this.props;\n            const offsets = (getPolygonOffset && getPolygonOffset(uniforms)) || [0, 0];\n            if (context.device instanceof WebGLDevice) {\n                context.device.setParametersWebGL({ polygonOffset: offsets });\n            }\n            for (const model of this.getModels()) {\n                if (model.device.type === 'webgpu') {\n                    // TODO(ibgreen): model.setParameters currently wipes parameters. Semantics TBD.\n                    model.setParameters({ ...model.parameters, ...parameters });\n                }\n                else {\n                    model.setParameters(parameters);\n                }\n            }\n            // Call subclass lifecycle method\n            if (context.device instanceof WebGLDevice) {\n                context.device.withParametersWebGL(parameters, () => {\n                    const opts = { renderPass, shaderModuleProps, uniforms, parameters, context };\n                    // extensions\n                    for (const extension of this.props.extensions) {\n                        extension.draw.call(this, opts, extension);\n                    }\n                    this.draw(opts);\n                });\n            }\n            else {\n                const opts = { renderPass, shaderModuleProps, uniforms, parameters, context };\n                // extensions\n                for (const extension of this.props.extensions) {\n                    extension.draw.call(this, opts, extension);\n                }\n                this.draw(opts);\n            }\n        }\n        finally {\n            this.props = currentProps;\n        }\n        // End lifecycle method\n    }\n    // Helper methods\n    /** Returns the current change flags */\n    getChangeFlags() {\n        return this.internalState?.changeFlags;\n    }\n    /* eslint-disable complexity */\n    /** Dirty some change flags, will be handled by updateLayer */\n    setChangeFlags(flags) {\n        if (!this.internalState) {\n            return;\n        }\n        const { changeFlags } = this.internalState;\n        /* eslint-disable no-fallthrough, max-depth */\n        for (const key in flags) {\n            if (flags[key]) {\n                let flagChanged = false;\n                switch (key) {\n                    case 'dataChanged':\n                        // changeFlags.dataChanged may be `false`, a string (reason) or an array of ranges\n                        const dataChangedReason = flags[key];\n                        const prevDataChangedReason = changeFlags[key];\n                        if (dataChangedReason && Array.isArray(prevDataChangedReason)) {\n                            // Merge partial updates\n                            changeFlags.dataChanged = Array.isArray(dataChangedReason)\n                                ? prevDataChangedReason.concat(dataChangedReason)\n                                : dataChangedReason;\n                            flagChanged = true;\n                        }\n                    default:\n                        if (!changeFlags[key]) {\n                            changeFlags[key] = flags[key];\n                            flagChanged = true;\n                        }\n                }\n                if (flagChanged) {\n                    debug(TRACE_CHANGE_FLAG, this, key, flags);\n                }\n            }\n        }\n        /* eslint-enable no-fallthrough, max-depth */\n        // Update composite flags\n        const propsOrDataChanged = Boolean(changeFlags.dataChanged ||\n            changeFlags.updateTriggersChanged ||\n            changeFlags.propsChanged ||\n            changeFlags.extensionsChanged);\n        changeFlags.propsOrDataChanged = propsOrDataChanged;\n        changeFlags.somethingChanged =\n            propsOrDataChanged || changeFlags.viewportChanged || changeFlags.stateChanged;\n    }\n    /* eslint-enable complexity */\n    /** Clear all changeFlags, typically after an update */\n    _clearChangeFlags() {\n        // @ts-ignore TS2531 this method can only be called internally with internalState assigned\n        this.internalState.changeFlags = {\n            dataChanged: false,\n            propsChanged: false,\n            updateTriggersChanged: false,\n            viewportChanged: false,\n            stateChanged: false,\n            extensionsChanged: false,\n            propsOrDataChanged: false,\n            somethingChanged: false\n        };\n    }\n    /** Compares the layers props with old props from a matched older layer\n        and extracts change flags that describe what has change so that state\n        can be update correctly with minimal effort */\n    _diffProps(newProps, oldProps) {\n        const changeFlags = diffProps(newProps, oldProps);\n        // iterate over changedTriggers\n        if (changeFlags.updateTriggersChanged) {\n            for (const key in changeFlags.updateTriggersChanged) {\n                if (changeFlags.updateTriggersChanged[key]) {\n                    this.invalidateAttribute(key);\n                }\n            }\n        }\n        // trigger uniform transitions\n        if (changeFlags.transitionsChanged) {\n            for (const key in changeFlags.transitionsChanged) {\n                // prop changed and transition is enabled\n                // @ts-ignore (TS2531) internalState is always defined when this method is called\n                this.internalState.uniformTransitions.add(key, oldProps[key], newProps[key], newProps.transitions?.[key]);\n            }\n        }\n        return this.setChangeFlags(changeFlags);\n    }\n    /** (Internal) called by layer manager to perform extra props validation (in development only) */\n    validateProps() {\n        validateProps(this.props);\n    }\n    /** (Internal) Called by deck picker when the hovered object changes to update the auto highlight */\n    updateAutoHighlight(info) {\n        if (this.props.autoHighlight && !Number.isInteger(this.props.highlightedObjectIndex)) {\n            this._updateAutoHighlight(info);\n        }\n    }\n    // May be overriden by subclasses\n    // TODO - simplify subclassing interface\n    /** Update picking module parameters to highlight the hovered object */\n    _updateAutoHighlight(info) {\n        const picking = {\n            // @ts-ignore\n            highlightedObjectColor: info.picked ? info.color : null\n        };\n        const { highlightColor } = this.props;\n        if (info.picked && typeof highlightColor === 'function') {\n            // @ts-ignore\n            picking.highlightColor = highlightColor(info);\n        }\n        this.setShaderModuleProps({ picking });\n        // setShaderModuleProps does not trigger redraw\n        this.setNeedsRedraw();\n    }\n    /** Create new attribute manager */\n    _getAttributeManager() {\n        const context = this.context;\n        return new AttributeManager(context.device, {\n            id: this.props.id,\n            stats: context.stats,\n            timeline: context.timeline\n        });\n    }\n    // Private methods\n    /** Called after updateState to perform common tasks */\n    // eslint-disable-next-line complexity\n    _postUpdate(updateParams, forceUpdate) {\n        const { props, oldProps } = updateParams;\n        // Note: Automatic instance count update only works for single layers\n        const model = this.state.model;\n        if (model?.isInstanced) {\n            model.setInstanceCount(this.getNumInstances());\n        }\n        // Set picking module parameters to match props\n        const { autoHighlight, highlightedObjectIndex, highlightColor } = props;\n        if (forceUpdate ||\n            oldProps.autoHighlight !== autoHighlight ||\n            oldProps.highlightedObjectIndex !== highlightedObjectIndex ||\n            oldProps.highlightColor !== highlightColor) {\n            const picking = {};\n            if (Array.isArray(highlightColor)) {\n                picking.highlightColor = highlightColor;\n            }\n            // highlightedObjectIndex will overwrite any settings from auto highlighting.\n            // Do not reset unless the value has changed.\n            if (forceUpdate ||\n                oldProps.autoHighlight !== autoHighlight ||\n                highlightedObjectIndex !== oldProps.highlightedObjectIndex) {\n                picking.highlightedObjectColor =\n                    Number.isFinite(highlightedObjectIndex) && highlightedObjectIndex >= 0\n                        ? this.encodePickingColor(highlightedObjectIndex)\n                        : null;\n            }\n            this.setShaderModuleProps({ picking });\n        }\n    }\n    _getUpdateParams() {\n        return {\n            props: this.props,\n            // @ts-ignore TS2531 this method can only be called internally with internalState assigned\n            oldProps: this.internalState.getOldProps(),\n            context: this.context,\n            // @ts-ignore TS2531 this method can only be called internally with internalState assigned\n            changeFlags: this.internalState.changeFlags\n        };\n    }\n    /** Checks state of attributes and model */\n    _getNeedsRedraw(opts) {\n        // this method may be called by the render loop as soon a the layer\n        // has been created, so guard against uninitialized state\n        if (!this.internalState) {\n            return false;\n        }\n        let redraw = false;\n        redraw = redraw || (this.internalState.needsRedraw && this.id);\n        // TODO - is attribute manager needed? - Model should be enough.\n        const attributeManager = this.getAttributeManager();\n        const attributeManagerNeedsRedraw = attributeManager\n            ? attributeManager.getNeedsRedraw(opts)\n            : false;\n        redraw = redraw || attributeManagerNeedsRedraw;\n        if (redraw) {\n            for (const extension of this.props.extensions) {\n                extension.onNeedsRedraw.call(this, extension);\n            }\n        }\n        this.internalState.needsRedraw = this.internalState.needsRedraw && !opts.clearRedrawFlags;\n        return redraw;\n    }\n    /** Callback when asyn prop is loaded */\n    _onAsyncPropUpdated() {\n        // @ts-ignore TS2531 this method can only be called internally with internalState assigned\n        this._diffProps(this.props, this.internalState.getOldProps());\n        this.setNeedsUpdate();\n    }\n}\nLayer.defaultProps = defaultProps;\nLayer.layerName = 'Layer';\nexport default Layer;\n//# sourceMappingURL=layer.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport Layer from \"./layer.js\";\nimport debug from \"../debug/index.js\";\nimport { flatten } from \"../utils/flatten.js\";\nimport { PROP_TYPES_SYMBOL } from \"../lifecycle/constants.js\";\nconst TRACE_RENDER_LAYERS = 'compositeLayer.renderLayers';\nclass CompositeLayer extends Layer {\n    /** `true` if this layer renders other layers */\n    get isComposite() {\n        return true;\n    }\n    /** `true` if the layer renders to screen */\n    get isDrawable() {\n        return false;\n    }\n    /** Returns true if all async resources are loaded */\n    get isLoaded() {\n        return super.isLoaded && this.getSubLayers().every(layer => layer.isLoaded);\n    }\n    /** Return last rendered sub layers */\n    getSubLayers() {\n        return (this.internalState && this.internalState.subLayers) || [];\n    }\n    // initializeState is usually not needed for composite layers\n    // Provide empty definition to disable check for missing definition\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    initializeState(context) { }\n    /** Updates selected state members and marks the composite layer to need rerender */\n    setState(updateObject) {\n        super.setState(updateObject);\n        // Trigger a layer update\n        // Although conceptually layer.draw and compositeLayer.renderLayers are equivalent,\n        // they are executed during different lifecycles.\n        // draw can be called without calling updateState (e.g. most viewport changes),\n        // while renderLayers can only be called during a recursive layer update.\n        this.setNeedsUpdate();\n    }\n    /** called to augment the info object that is bubbled up from a sublayer\n        override Layer.getPickingInfo() because decoding / setting uniform do\n        not apply to a composite layer. */\n    getPickingInfo({ info }) {\n        const { object } = info;\n        const isDataWrapped = object && object.__source && object.__source.parent && object.__source.parent.id === this.id;\n        if (!isDataWrapped) {\n            return info;\n        }\n        // override object with picked data\n        info.object = object.__source.object;\n        info.index = object.__source.index;\n        return info;\n    }\n    /**\n     * Filters sub layers at draw time. Return true if the sub layer should be drawn.\n     */\n    filterSubLayer(context) {\n        return true;\n    }\n    /** Returns true if sub layer needs to be rendered */\n    shouldRenderSubLayer(subLayerId, data) {\n        return data && data.length;\n    }\n    /** Returns sub layer class for a specific sublayer */\n    getSubLayerClass(subLayerId, DefaultLayerClass) {\n        const { _subLayerProps: overridingProps } = this.props;\n        return ((overridingProps &&\n            overridingProps[subLayerId] &&\n            overridingProps[subLayerId].type) ||\n            DefaultLayerClass);\n    }\n    /** When casting user data into another format to pass to sublayers,\n        add reference to the original object and object index */\n    getSubLayerRow(row, sourceObject, sourceObjectIndex) {\n        // @ts-ignore (TS2339) adding undefined property\n        row.__source = {\n            parent: this,\n            object: sourceObject,\n            index: sourceObjectIndex\n        };\n        return row;\n    }\n    /** Some composite layers cast user data into another format before passing to sublayers\n      We need to unwrap them before calling the accessor so that they see the original data\n      objects */\n    getSubLayerAccessor(accessor) {\n        if (typeof accessor === 'function') {\n            const objectInfo = {\n                index: -1,\n                // @ts-ignore accessing resolved data\n                data: this.props.data,\n                target: []\n            };\n            return (x, i) => {\n                if (x && x.__source) {\n                    objectInfo.index = x.__source.index;\n                    // @ts-ignore (TS2349) Out is never a function\n                    return accessor(x.__source.object, objectInfo);\n                }\n                // @ts-ignore (TS2349) Out is never a function\n                return accessor(x, i);\n            };\n        }\n        return accessor;\n    }\n    /** Returns sub layer props for a specific sublayer */\n    // eslint-disable-next-line complexity\n    getSubLayerProps(sublayerProps = {}) {\n        const { opacity, pickable, visible, parameters, getPolygonOffset, highlightedObjectIndex, autoHighlight, highlightColor, coordinateSystem, coordinateOrigin, wrapLongitude, positionFormat, modelMatrix, extensions, fetch, operation, _subLayerProps: overridingProps } = this.props;\n        const newProps = {\n            id: '',\n            updateTriggers: {},\n            opacity,\n            pickable,\n            visible,\n            parameters,\n            getPolygonOffset,\n            highlightedObjectIndex,\n            autoHighlight,\n            highlightColor,\n            coordinateSystem,\n            coordinateOrigin,\n            wrapLongitude,\n            positionFormat,\n            modelMatrix,\n            extensions,\n            fetch,\n            operation\n        };\n        const overridingSublayerProps = overridingProps && sublayerProps.id && overridingProps[sublayerProps.id];\n        const overridingSublayerTriggers = overridingSublayerProps && overridingSublayerProps.updateTriggers;\n        const sublayerId = sublayerProps.id || 'sublayer';\n        if (overridingSublayerProps) {\n            const propTypes = this.props[PROP_TYPES_SYMBOL];\n            const subLayerPropTypes = sublayerProps.type ? sublayerProps.type._propTypes : {};\n            for (const key in overridingSublayerProps) {\n                const propType = subLayerPropTypes[key] || propTypes[key];\n                // eslint-disable-next-line\n                if (propType && propType.type === 'accessor') {\n                    overridingSublayerProps[key] = this.getSubLayerAccessor(overridingSublayerProps[key]);\n                }\n            }\n        }\n        Object.assign(newProps, sublayerProps, \n        // experimental feature that allows users to override sublayer props via parent layer prop\n        overridingSublayerProps);\n        newProps.id = `${this.props.id}-${sublayerId}`;\n        newProps.updateTriggers = {\n            all: this.props.updateTriggers?.all,\n            ...sublayerProps.updateTriggers,\n            ...overridingSublayerTriggers\n        };\n        // Pass through extension props\n        // @ts-ignore (TS2532) extensions is always defined after merging with default props\n        for (const extension of extensions) {\n            const passThroughProps = extension.getSubLayerProps.call(this, extension);\n            if (passThroughProps) {\n                Object.assign(newProps, passThroughProps, {\n                    updateTriggers: Object.assign(newProps.updateTriggers, passThroughProps.updateTriggers)\n                });\n            }\n        }\n        return newProps;\n    }\n    /** Update sub layers to highlight the hovered object */\n    _updateAutoHighlight(info) {\n        for (const layer of this.getSubLayers()) {\n            layer.updateAutoHighlight(info);\n        }\n    }\n    /** Override base Layer method */\n    _getAttributeManager() {\n        return null;\n    }\n    /** (Internal) Called after an update to rerender sub layers */\n    _postUpdate(updateParams, forceUpdate) {\n        // @ts-ignore (TS2531) this method is only called internally when internalState is defined\n        let subLayers = this.internalState.subLayers;\n        const shouldUpdate = !subLayers || this.needsUpdate();\n        if (shouldUpdate) {\n            const subLayersList = this.renderLayers();\n            // Flatten the returned array, removing any null, undefined or false\n            // this allows layers to render sublayers conditionally\n            // (see CompositeLayer.renderLayers docs)\n            subLayers = flatten(subLayersList, Boolean);\n            // @ts-ignore (TS2531) this method is only called internally when internalState is defined\n            this.internalState.subLayers = subLayers;\n        }\n        debug(TRACE_RENDER_LAYERS, this, shouldUpdate, subLayers);\n        // populate reference to parent layer (this layer)\n        // NOTE: needs to be done even when reusing layers as the parent may have changed\n        for (const layer of subLayers) {\n            layer.parent = this;\n        }\n    }\n}\nCompositeLayer.layerName = 'CompositeLayer';\nexport default CompositeLayer;\n//# sourceMappingURL=composite-layer.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { createIterable, getAccessorFromBuffer } from \"./iterable-utils.js\";\nimport defaultTypedArrayManager from \"./typed-array-manager.js\";\nimport assert from \"./assert.js\";\nimport { Buffer } from '@luma.gl/core';\nexport default class Tesselator {\n    constructor(opts) {\n        this.indexStarts = [0];\n        this.vertexStarts = [0];\n        this.vertexCount = 0;\n        this.instanceCount = 0;\n        const { attributes = {} } = opts;\n        this.typedArrayManager = defaultTypedArrayManager;\n        this.attributes = {};\n        this._attributeDefs = attributes;\n        this.opts = opts;\n        this.updateGeometry(opts);\n    }\n    /* Public methods */\n    updateGeometry(opts) {\n        Object.assign(this.opts, opts);\n        const { data, buffers = {}, getGeometry, geometryBuffer, positionFormat, dataChanged, normalize = true } = this.opts;\n        this.data = data;\n        this.getGeometry = getGeometry;\n        this.positionSize =\n            // @ts-ignore (2339) when geometryBuffer is a luma Buffer, size falls back to positionFormat\n            (geometryBuffer && geometryBuffer.size) || (positionFormat === 'XY' ? 2 : 3);\n        this.buffers = buffers;\n        this.normalize = normalize;\n        // Handle external logical value\n        if (geometryBuffer) {\n            assert(data.startIndices); // binary data missing startIndices\n            this.getGeometry = this.getGeometryFromBuffer(geometryBuffer);\n            if (!normalize) {\n                // skip packing and set attribute value directly\n                // TODO - avoid mutating user-provided object\n                buffers.vertexPositions = geometryBuffer;\n            }\n        }\n        this.geometryBuffer = buffers.vertexPositions;\n        if (Array.isArray(dataChanged)) {\n            // is partial update\n            for (const dataRange of dataChanged) {\n                this._rebuildGeometry(dataRange);\n            }\n        }\n        else {\n            this._rebuildGeometry();\n        }\n    }\n    updatePartialGeometry({ startRow, endRow }) {\n        this._rebuildGeometry({ startRow, endRow });\n    }\n    getGeometryFromBuffer(geometryBuffer) {\n        const value = geometryBuffer.value || geometryBuffer;\n        if (!ArrayBuffer.isView(value)) {\n            // Cannot read binary geometries\n            return null;\n        }\n        // @ts-ignore (2322) NumericArray not assignable to GeometryT\n        return getAccessorFromBuffer(value, {\n            size: this.positionSize,\n            offset: geometryBuffer.offset,\n            stride: geometryBuffer.stride,\n            startIndices: this.data.startIndices\n        });\n    }\n    /* Private utility methods */\n    _allocate(instanceCount, copy) {\n        // allocate attributes\n        const { attributes, buffers, _attributeDefs, typedArrayManager } = this;\n        for (const name in _attributeDefs) {\n            if (name in buffers) {\n                // Use external buffer\n                typedArrayManager.release(attributes[name]);\n                attributes[name] = null;\n            }\n            else {\n                const def = _attributeDefs[name];\n                // If dataRange is supplied, this is a partial update.\n                // In case we need to reallocate the typed array, it will need the old values copied\n                // before performing partial update.\n                def.copy = copy;\n                attributes[name] = typedArrayManager.allocate(attributes[name], instanceCount, def);\n            }\n        }\n    }\n    /**\n     * Visit all objects\n     * `data` is expected to be an iterable consistent with the base Layer expectation\n     */\n    _forEachGeometry(visitor, startRow, endRow) {\n        const { data, getGeometry } = this;\n        const { iterable, objectInfo } = createIterable(data, startRow, endRow);\n        for (const object of iterable) {\n            objectInfo.index++;\n            const geometry = getGeometry ? getGeometry(object, objectInfo) : null;\n            visitor(geometry, objectInfo.index);\n        }\n    }\n    /* eslint-disable complexity,max-statements */\n    _rebuildGeometry(dataRange) {\n        if (!this.data) {\n            return;\n        }\n        let { indexStarts, vertexStarts, instanceCount } = this;\n        const { data, geometryBuffer } = this;\n        const { startRow = 0, endRow = Infinity } = dataRange || {};\n        const normalizedData = {};\n        if (!dataRange) {\n            // Full update - regenerate buffer layout from scratch\n            indexStarts = [0];\n            vertexStarts = [0];\n        }\n        if (this.normalize || !geometryBuffer) {\n            this._forEachGeometry((geometry, dataIndex) => {\n                const normalizedGeometry = geometry && this.normalizeGeometry(geometry);\n                normalizedData[dataIndex] = normalizedGeometry;\n                vertexStarts[dataIndex + 1] =\n                    vertexStarts[dataIndex] +\n                        (normalizedGeometry ? this.getGeometrySize(normalizedGeometry) : 0);\n            }, startRow, endRow);\n            // count instances\n            instanceCount = vertexStarts[vertexStarts.length - 1];\n        }\n        else {\n            // assume user provided data is already normalized\n            vertexStarts = data.startIndices;\n            instanceCount = vertexStarts[data.length] || 0;\n            if (ArrayBuffer.isView(geometryBuffer)) {\n                instanceCount = instanceCount || geometryBuffer.length / this.positionSize;\n            }\n            else if (geometryBuffer instanceof Buffer) {\n                const byteStride = this.positionSize * 4;\n                instanceCount = instanceCount || geometryBuffer.byteLength / byteStride;\n            }\n            else if (geometryBuffer.buffer) {\n                const byteStride = geometryBuffer.stride || this.positionSize * 4;\n                instanceCount = instanceCount || geometryBuffer.buffer.byteLength / byteStride;\n            }\n            else if (geometryBuffer.value) {\n                const bufferValue = geometryBuffer.value;\n                const elementStride = \n                // @ts-ignore (2339) if stride is not specified, will fall through to positionSize\n                geometryBuffer.stride / bufferValue.BYTES_PER_ELEMENT || this.positionSize;\n                instanceCount = instanceCount || bufferValue.length / elementStride;\n            }\n        }\n        // allocate attributes\n        this._allocate(instanceCount, Boolean(dataRange));\n        this.indexStarts = indexStarts;\n        this.vertexStarts = vertexStarts;\n        this.instanceCount = instanceCount;\n        // @ts-ignore (2739) context will be populated in the loop\n        const context = {};\n        this._forEachGeometry((geometry, dataIndex) => {\n            const normalizedGeometry = normalizedData[dataIndex] || geometry;\n            context.vertexStart = vertexStarts[dataIndex];\n            context.indexStart = indexStarts[dataIndex];\n            const vertexEnd = dataIndex < vertexStarts.length - 1 ? vertexStarts[dataIndex + 1] : instanceCount;\n            context.geometrySize = vertexEnd - vertexStarts[dataIndex];\n            context.geometryIndex = dataIndex;\n            this.updateGeometryAttributes(normalizedGeometry, context);\n        }, startRow, endRow);\n        this.vertexCount = indexStarts[indexStarts.length - 1];\n    }\n}\n//# sourceMappingURL=tesselator.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst uniformBlock = `\\\nuniform arcUniforms {\n  bool greatCircle;\n  bool useShortestPath;\n  float numSegments;\n  float widthScale;\n  float widthMinPixels;\n  float widthMaxPixels;\n  highp int widthUnits;\n} arc;\n`;\nexport const arcUniforms = {\n    name: 'arc',\n    vs: uniformBlock,\n    fs: uniformBlock,\n    uniformTypes: {\n        greatCircle: 'f32',\n        useShortestPath: 'f32',\n        numSegments: 'f32',\n        widthScale: 'f32',\n        widthMinPixels: 'f32',\n        widthMaxPixels: 'f32',\n        widthUnits: 'i32'\n    }\n};\n//# sourceMappingURL=arc-layer-uniforms.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `\\\n#version 300 es\n#define SHADER_NAME arc-layer-vertex-shader\nin vec4 instanceSourceColors;\nin vec4 instanceTargetColors;\nin vec3 instanceSourcePositions;\nin vec3 instanceSourcePositions64Low;\nin vec3 instanceTargetPositions;\nin vec3 instanceTargetPositions64Low;\nin vec3 instancePickingColors;\nin float instanceWidths;\nin float instanceHeights;\nin float instanceTilts;\nout vec4 vColor;\nout vec2 uv;\nout float isValid;\nfloat paraboloid(float distance, float sourceZ, float targetZ, float ratio) {\nfloat deltaZ = targetZ - sourceZ;\nfloat dh = distance * instanceHeights;\nif (dh == 0.0) {\nreturn sourceZ + deltaZ * ratio;\n}\nfloat unitZ = deltaZ / dh;\nfloat p2 = unitZ * unitZ + 1.0;\nfloat dir = step(deltaZ, 0.0);\nfloat z0 = mix(sourceZ, targetZ, dir);\nfloat r = mix(ratio, 1.0 - ratio, dir);\nreturn sqrt(r * (p2 - r)) * dh + z0;\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\nvec2 dir_screenspace = normalize(line_clipspace * project.viewportSize);\ndir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\nreturn dir_screenspace * offset_direction * width / 2.0;\n}\nfloat getSegmentRatio(float index) {\nreturn smoothstep(0.0, 1.0, index / (arc.numSegments - 1.0));\n}\nvec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {\nfloat distance = length(source.xy - target.xy);\nfloat z = paraboloid(distance, source.z, target.z, segmentRatio);\nfloat tiltAngle = radians(instanceTilts);\nvec2 tiltDirection = normalize(target.xy - source.xy);\nvec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);\nreturn vec3(\nmix(source.xy, target.xy, segmentRatio) + tilt,\nz * cos(tiltAngle)\n);\n}\nfloat getAngularDist (vec2 source, vec2 target) {\nvec2 sourceRadians = radians(source);\nvec2 targetRadians = radians(target);\nvec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);\nvec2 shd_sq = sin_half_delta * sin_half_delta;\nfloat a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;\nreturn 2.0 * asin(sqrt(a));\n}\nvec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {\nvec2 lngLat;\nif(abs(angularDist - PI) < 0.001) {\nlngLat = (1.0 - t) * source.xy + t * target.xy;\n} else {\nfloat a = sin((1.0 - t) * angularDist);\nfloat b = sin(t * angularDist);\nvec3 p = source3D.yxz * a + target3D.yxz * b;\nlngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));\n}\nfloat z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);\nreturn vec3(lngLat, z);\n}\nvoid main(void) {\ngeometry.worldPosition = instanceSourcePositions;\ngeometry.worldPositionAlt = instanceTargetPositions;\nfloat segmentIndex = float(gl_VertexID / 2);\nfloat segmentSide = mod(float(gl_VertexID), 2.) == 0. ? -1. : 1.;\nfloat segmentRatio = getSegmentRatio(segmentIndex);\nfloat prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));\nfloat nextSegmentRatio = getSegmentRatio(min(arc.numSegments - 1.0, segmentIndex + 1.0));\nfloat indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\nisValid = 1.0;\nuv = vec2(segmentRatio, segmentSide);\ngeometry.uv = uv;\ngeometry.pickingColor = instancePickingColors;\nvec4 curr;\nvec4 next;\nvec3 source;\nvec3 target;\nif ((arc.greatCircle || project.projectionMode == PROJECTION_MODE_GLOBE) && project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nsource = project_globe_(vec3(instanceSourcePositions.xy, 0.0));\ntarget = project_globe_(vec3(instanceTargetPositions.xy, 0.0));\nfloat angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);\nvec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);\nvec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);\nvec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);\nif (abs(currPos.x - prevPos.x) > 180.0) {\nindexDir = -1.0;\nisValid = 0.0;\n} else if (abs(currPos.x - nextPos.x) > 180.0) {\nindexDir = 1.0;\nisValid = 0.0;\n}\nnextPos = indexDir < 0.0 ? prevPos : nextPos;\nnextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\nif (isValid == 0.0) {\nnextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;\nfloat t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);\ncurrPos = mix(currPos, nextPos, t);\nsegmentRatio = mix(segmentRatio, nextSegmentRatio, t);\n}\nvec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);\nvec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);\ncurr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);\nnext = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));\n} else {\nvec3 source_world = instanceSourcePositions;\nvec3 target_world = instanceTargetPositions;\nif (arc.useShortestPath) {\nsource_world.x = mod(source_world.x + 180., 360.0) - 180.;\ntarget_world.x = mod(target_world.x + 180., 360.0) - 180.;\nfloat deltaLng = target_world.x - source_world.x;\nif (deltaLng > 180.) target_world.x -= 360.;\nif (deltaLng < -180.) source_world.x -= 360.;\n}\nsource = project_position(source_world, instanceSourcePositions64Low);\ntarget = project_position(target_world, instanceTargetPositions64Low);\nfloat antiMeridianX = 0.0;\nif (arc.useShortestPath) {\nif (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\nantiMeridianX = -(project.coordinateOrigin.x + 180.) / 360. * TILE_SIZE;\n}\nfloat thresholdRatio = (antiMeridianX - source.x) / (target.x - source.x);\nif (prevSegmentRatio <= thresholdRatio && nextSegmentRatio > thresholdRatio) {\nisValid = 0.0;\nindexDir = sign(segmentRatio - thresholdRatio);\nsegmentRatio = thresholdRatio;\n}\n}\nnextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;\nvec3 currPos = interpolateFlat(source, target, segmentRatio);\nvec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);\nif (arc.useShortestPath) {\nif (nextPos.x < antiMeridianX) {\ncurrPos.x += TILE_SIZE;\nnextPos.x += TILE_SIZE;\n}\n}\ncurr = project_common_position_to_clipspace(vec4(currPos, 1.0));\nnext = project_common_position_to_clipspace(vec4(nextPos, 1.0));\ngeometry.position = vec4(currPos, 1.0);\n}\nfloat widthPixels = clamp(\nproject_size_to_pixel(instanceWidths * arc.widthScale, arc.widthUnits),\narc.widthMinPixels, arc.widthMaxPixels\n);\nvec3 offset = vec3(\ngetExtrusionOffset((next.xy - curr.xy) * indexDir, segmentSide, widthPixels),\n0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\nDECKGL_FILTER_GL_POSITION(curr, geometry);\ngl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\nvec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);\nvColor = vec4(color.rgb, color.a * layer.opacity);\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;\n//# sourceMappingURL=arc-layer-vertex.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `\\\n#version 300 es\n#define SHADER_NAME arc-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nin vec2 uv;\nin float isValid;\nout vec4 fragColor;\nvoid main(void) {\nif (isValid == 0.0) {\ndiscard;\n}\nfragColor = vColor;\ngeometry.uv = uv;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;\n//# sourceMappingURL=arc-layer-fragment.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Layer, project32, picking, UNIT } from '@deck.gl/core';\nimport { Model } from '@luma.gl/engine';\nimport { arcUniforms } from \"./arc-layer-uniforms.js\";\nimport vs from \"./arc-layer-vertex.glsl.js\";\nimport fs from \"./arc-layer-fragment.glsl.js\";\nconst DEFAULT_COLOR = [0, 0, 0, 255];\nconst defaultProps = {\n    getSourcePosition: { type: 'accessor', value: (x) => x.sourcePosition },\n    getTargetPosition: { type: 'accessor', value: (x) => x.targetPosition },\n    getSourceColor: { type: 'accessor', value: DEFAULT_COLOR },\n    getTargetColor: { type: 'accessor', value: DEFAULT_COLOR },\n    getWidth: { type: 'accessor', value: 1 },\n    getHeight: { type: 'accessor', value: 1 },\n    getTilt: { type: 'accessor', value: 0 },\n    greatCircle: false,\n    numSegments: { type: 'number', value: 50, min: 1 },\n    widthUnits: 'pixels',\n    widthScale: { type: 'number', value: 1, min: 0 },\n    widthMinPixels: { type: 'number', value: 0, min: 0 },\n    widthMaxPixels: { type: 'number', value: Number.MAX_SAFE_INTEGER, min: 0 }\n};\n/** Render raised arcs joining pairs of source and target coordinates. */\nclass ArcLayer extends Layer {\n    getBounds() {\n        return this.getAttributeManager()?.getBounds([\n            'instanceSourcePositions',\n            'instanceTargetPositions'\n        ]);\n    }\n    getShaders() {\n        return super.getShaders({ vs, fs, modules: [project32, picking, arcUniforms] }); // 'project' module added by default.\n    }\n    // This layer has its own wrapLongitude logic\n    get wrapLongitude() {\n        return false;\n    }\n    initializeState() {\n        const attributeManager = this.getAttributeManager();\n        /* eslint-disable max-len */\n        attributeManager.addInstanced({\n            instanceSourcePositions: {\n                size: 3,\n                type: 'float64',\n                fp64: this.use64bitPositions(),\n                transition: true,\n                accessor: 'getSourcePosition'\n            },\n            instanceTargetPositions: {\n                size: 3,\n                type: 'float64',\n                fp64: this.use64bitPositions(),\n                transition: true,\n                accessor: 'getTargetPosition'\n            },\n            instanceSourceColors: {\n                size: this.props.colorFormat.length,\n                type: 'unorm8',\n                transition: true,\n                accessor: 'getSourceColor',\n                defaultValue: DEFAULT_COLOR\n            },\n            instanceTargetColors: {\n                size: this.props.colorFormat.length,\n                type: 'unorm8',\n                transition: true,\n                accessor: 'getTargetColor',\n                defaultValue: DEFAULT_COLOR\n            },\n            instanceWidths: {\n                size: 1,\n                transition: true,\n                accessor: 'getWidth',\n                defaultValue: 1\n            },\n            instanceHeights: {\n                size: 1,\n                transition: true,\n                accessor: 'getHeight',\n                defaultValue: 1\n            },\n            instanceTilts: {\n                size: 1,\n                transition: true,\n                accessor: 'getTilt',\n                defaultValue: 0\n            }\n        });\n        /* eslint-enable max-len */\n    }\n    updateState(params) {\n        super.updateState(params);\n        if (params.changeFlags.extensionsChanged) {\n            this.state.model?.destroy();\n            this.state.model = this._getModel();\n            this.getAttributeManager().invalidateAll();\n        }\n    }\n    draw({ uniforms }) {\n        const { widthUnits, widthScale, widthMinPixels, widthMaxPixels, greatCircle, wrapLongitude, numSegments } = this.props;\n        const arcProps = {\n            numSegments,\n            widthUnits: UNIT[widthUnits],\n            widthScale,\n            widthMinPixels,\n            widthMaxPixels,\n            greatCircle,\n            useShortestPath: wrapLongitude\n        };\n        const model = this.state.model;\n        model.shaderInputs.setProps({ arc: arcProps });\n        model.setVertexCount(numSegments * 2);\n        model.draw(this.context.renderPass);\n    }\n    _getModel() {\n        return new Model(this.context.device, {\n            ...this.getShaders(),\n            id: this.props.id,\n            bufferLayout: this.getAttributeManager().getBufferLayouts(),\n            topology: 'triangle-strip',\n            isInstanced: true\n        });\n    }\n}\nArcLayer.layerName = 'ArcLayer';\nArcLayer.defaultProps = defaultProps;\nexport default ArcLayer;\n//# sourceMappingURL=arc-layer.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { lerp } from '@math.gl/core';\nconst DEFAULT_INDICES = new Uint32Array([0, 2, 1, 0, 3, 2]);\nconst DEFAULT_TEX_COORDS = new Float32Array([0, 1, 0, 0, 1, 0, 1, 1]);\n/*\n  1 ---- 2\n  |      |\n  |      |\n  0 ---- 3\n*/\n/* eslint-disable max-statements */\nexport default function createMesh(bounds, resolution) {\n    if (!resolution) {\n        return createQuad(bounds);\n    }\n    const maxXSpan = Math.max(Math.abs(bounds[0][0] - bounds[3][0]), Math.abs(bounds[1][0] - bounds[2][0]));\n    const maxYSpan = Math.max(Math.abs(bounds[1][1] - bounds[0][1]), Math.abs(bounds[2][1] - bounds[3][1]));\n    const uCount = Math.ceil(maxXSpan / resolution) + 1;\n    const vCount = Math.ceil(maxYSpan / resolution) + 1;\n    const vertexCount = (uCount - 1) * (vCount - 1) * 6;\n    const indices = new Uint32Array(vertexCount);\n    const texCoords = new Float32Array(uCount * vCount * 2);\n    const positions = new Float64Array(uCount * vCount * 3);\n    // Tesselate\n    let vertex = 0;\n    let index = 0;\n    for (let u = 0; u < uCount; u++) {\n        const ut = u / (uCount - 1);\n        for (let v = 0; v < vCount; v++) {\n            const vt = v / (vCount - 1);\n            const p = interpolateQuad(bounds, ut, vt);\n            positions[vertex * 3 + 0] = p[0];\n            positions[vertex * 3 + 1] = p[1];\n            positions[vertex * 3 + 2] = p[2] || 0;\n            texCoords[vertex * 2 + 0] = ut;\n            texCoords[vertex * 2 + 1] = 1 - vt;\n            if (u > 0 && v > 0) {\n                indices[index++] = vertex - vCount;\n                indices[index++] = vertex - vCount - 1;\n                indices[index++] = vertex - 1;\n                indices[index++] = vertex - vCount;\n                indices[index++] = vertex - 1;\n                indices[index++] = vertex;\n            }\n            vertex++;\n        }\n    }\n    return {\n        vertexCount,\n        positions,\n        indices,\n        texCoords\n    };\n}\nfunction createQuad(bounds) {\n    const positions = new Float64Array(12);\n    // [[minX, minY], [minX, maxY], [maxX, maxY], [maxX, minY]]\n    for (let i = 0; i < bounds.length; i++) {\n        positions[i * 3 + 0] = bounds[i][0];\n        positions[i * 3 + 1] = bounds[i][1];\n        positions[i * 3 + 2] = bounds[i][2] || 0;\n    }\n    return {\n        vertexCount: 6,\n        positions,\n        indices: DEFAULT_INDICES,\n        texCoords: DEFAULT_TEX_COORDS\n    };\n}\nfunction interpolateQuad(quad, ut, vt) {\n    return lerp(lerp(quad[0], quad[1], vt), lerp(quad[3], quad[2], vt), ut);\n}\n//# sourceMappingURL=create-mesh.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst uniformBlock = `\\\nuniform bitmapUniforms {\n  vec4 bounds;\n  float coordinateConversion;\n  float desaturate;\n  vec3 tintColor;\n  vec4 transparentColor;\n} bitmap;\n`;\nexport const bitmapUniforms = {\n    name: 'bitmap',\n    vs: uniformBlock,\n    fs: uniformBlock,\n    uniformTypes: {\n        bounds: 'vec4<f32>',\n        coordinateConversion: 'f32',\n        desaturate: 'f32',\n        tintColor: 'vec3<f32>',\n        transparentColor: 'vec4<f32>'\n    }\n};\n//# sourceMappingURL=bitmap-layer-uniforms.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `\\\n#version 300 es\n#define SHADER_NAME bitmap-layer-vertex-shader\n\nin vec2 texCoords;\nin vec3 positions;\nin vec3 positions64Low;\n\nout vec2 vTexCoord;\nout vec2 vTexPos;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  if (bitmap.coordinateConversion < -0.5) {\n    vTexPos = geometry.position.xy + project.commonOrigin.xy;\n  } else if (bitmap.coordinateConversion > 0.5) {\n    vTexPos = geometry.worldPosition.xy;\n  }\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n`;\n//# sourceMappingURL=bitmap-layer-vertex.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/**\n * Pack the top 12 bits of two normalized floats into 3 8-bit (rgb) values\n * This enables addressing 4096x4096 individual pixels\n *\n * returns vec3 encoded RGB colors\n *  result.r - top 8 bits of u\n *  result.g - top 8 bits of v\n *  result.b - next 4 bits of u and v: (u + v * 16)\n */\nconst packUVsIntoRGB = `\nvec3 packUVsIntoRGB(vec2 uv) {\n  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction\n  vec2 uv8bit = floor(uv * 256.);\n\n  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits\n  // Scale and clamp to 0-1 range\n  vec2 uvFraction = fract(uv * 256.);\n  vec2 uvFraction4bit = floor(uvFraction * 16.);\n\n  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates\n  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;\n\n  return vec3(uv8bit, fractions) / 255.;\n}\n`;\nexport default `\\\n#version 300 es\n#define SHADER_NAME bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D bitmapTexture;\n\nin vec2 vTexCoord;\nin vec2 vTexPos;\n\nout vec4 fragColor;\n\n/* projection utils */\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / PI / 2.0;\n\n// from degrees to Web Mercator\nvec2 lnglat_to_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// from Web Mercator to degrees\nvec2 mercator_to_lnglat(vec2 xy) {\n  xy /= WORLD_SCALE;\n  return degrees(vec2(\n    xy.x - PI,\n    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5\n  ));\n}\n/* End projection utils */\n\n// apply desaturation\nvec3 color_desaturate(vec3 color) {\n  float luminance = (color.r + color.g + color.b) * 0.333333333;\n  return mix(color, vec3(luminance), bitmap.desaturate);\n}\n\n// apply tint\nvec3 color_tint(vec3 color) {\n  return color * bitmap.tintColor;\n}\n\n// blend with background color\nvec4 apply_opacity(vec3 color, float alpha) {\n  if (bitmap.transparentColor.a == 0.0) {\n    return vec4(color, alpha);\n  }\n  float blendedAlpha = alpha + bitmap.transparentColor.a * (1.0 - alpha);\n  float highLightRatio = alpha / blendedAlpha;\n  vec3 blendedRGB = mix(bitmap.transparentColor.rgb, color, highLightRatio);\n  return vec4(blendedRGB, blendedAlpha);\n}\n\nvec2 getUV(vec2 pos) {\n  return vec2(\n    (pos.x - bitmap.bounds[0]) / (bitmap.bounds[2] - bitmap.bounds[0]),\n    (pos.y - bitmap.bounds[3]) / (bitmap.bounds[1] - bitmap.bounds[3])\n  );\n}\n\n${packUVsIntoRGB}\n\nvoid main(void) {\n  vec2 uv = vTexCoord;\n  if (bitmap.coordinateConversion < -0.5) {\n    vec2 lnglat = mercator_to_lnglat(vTexPos);\n    uv = getUV(lnglat);\n  } else if (bitmap.coordinateConversion > 0.5) {\n    vec2 commonPos = lnglat_to_mercator(vTexPos);\n    uv = getUV(commonPos);\n  }\n  vec4 bitmapColor = texture(bitmapTexture, uv);\n\n  fragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * layer.opacity);\n\n  geometry.uv = uv;\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n\n  if (bool(picking.isActive) && !bool(picking.isAttribute)) {\n    // Since instance information is not used, we can use picking color for pixel index\n    fragColor.rgb = packUVsIntoRGB(uv);\n  }\n}\n`;\n//# sourceMappingURL=bitmap-layer-fragment.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Layer, project32, picking, COORDINATE_SYSTEM } from '@deck.gl/core';\nimport { Model } from '@luma.gl/engine';\nimport { lngLatToWorld } from '@math.gl/web-mercator';\nimport createMesh from \"./create-mesh.js\";\nimport { bitmapUniforms } from \"./bitmap-layer-uniforms.js\";\nimport vs from \"./bitmap-layer-vertex.js\";\nimport fs from \"./bitmap-layer-fragment.js\";\nconst defaultProps = {\n    image: { type: 'image', value: null, async: true },\n    bounds: { type: 'array', value: [1, 0, 0, 1], compare: true },\n    _imageCoordinateSystem: COORDINATE_SYSTEM.DEFAULT,\n    desaturate: { type: 'number', min: 0, max: 1, value: 0 },\n    // More context: because of the blending mode we're using for ground imagery,\n    // alpha is not effective when blending the bitmap layers with the base map.\n    // Instead we need to manually dim/blend rgb values with a background color.\n    transparentColor: { type: 'color', value: [0, 0, 0, 0] },\n    tintColor: { type: 'color', value: [255, 255, 255] },\n    textureParameters: { type: 'object', ignore: true, value: null }\n};\n/** Render a bitmap at specified boundaries. */\nclass BitmapLayer extends Layer {\n    getShaders() {\n        return super.getShaders({ vs, fs, modules: [project32, picking, bitmapUniforms] });\n    }\n    initializeState() {\n        const attributeManager = this.getAttributeManager();\n        attributeManager.remove(['instancePickingColors']);\n        const noAlloc = true;\n        attributeManager.add({\n            indices: {\n                size: 1,\n                isIndexed: true,\n                update: attribute => (attribute.value = this.state.mesh.indices),\n                noAlloc\n            },\n            positions: {\n                size: 3,\n                type: 'float64',\n                fp64: this.use64bitPositions(),\n                update: attribute => (attribute.value = this.state.mesh.positions),\n                noAlloc\n            },\n            texCoords: {\n                size: 2,\n                update: attribute => (attribute.value = this.state.mesh.texCoords),\n                noAlloc\n            }\n        });\n    }\n    updateState({ props, oldProps, changeFlags }) {\n        // setup model first\n        const attributeManager = this.getAttributeManager();\n        if (changeFlags.extensionsChanged) {\n            this.state.model?.destroy();\n            this.state.model = this._getModel();\n            attributeManager.invalidateAll();\n        }\n        if (props.bounds !== oldProps.bounds) {\n            const oldMesh = this.state.mesh;\n            const mesh = this._createMesh();\n            this.state.model.setVertexCount(mesh.vertexCount);\n            for (const key in mesh) {\n                if (oldMesh && oldMesh[key] !== mesh[key]) {\n                    attributeManager.invalidate(key);\n                }\n            }\n            this.setState({ mesh, ...this._getCoordinateUniforms() });\n        }\n        else if (props._imageCoordinateSystem !== oldProps._imageCoordinateSystem) {\n            this.setState(this._getCoordinateUniforms());\n        }\n    }\n    getPickingInfo(params) {\n        const { image } = this.props;\n        const info = params.info;\n        if (!info.color || !image) {\n            info.bitmap = null;\n            return info;\n        }\n        const { width, height } = image;\n        // Picking color doesn't represent object index in this layer\n        info.index = 0;\n        // Calculate uv and pixel in bitmap\n        const uv = unpackUVsFromRGB(info.color);\n        info.bitmap = {\n            size: { width, height },\n            uv,\n            pixel: [Math.floor(uv[0] * width), Math.floor(uv[1] * height)]\n        };\n        return info;\n    }\n    // Override base Layer multi-depth picking logic\n    disablePickingIndex() {\n        this.setState({ disablePicking: true });\n    }\n    restorePickingColors() {\n        this.setState({ disablePicking: false });\n    }\n    _updateAutoHighlight(info) {\n        super._updateAutoHighlight({\n            ...info,\n            color: this.encodePickingColor(0)\n        });\n    }\n    _createMesh() {\n        const { bounds } = this.props;\n        let normalizedBounds = bounds;\n        // bounds as [minX, minY, maxX, maxY]\n        if (isRectangularBounds(bounds)) {\n            /*\n              (minX0, maxY3) ---- (maxX2, maxY3)\n                     |                  |\n                     |                  |\n                     |                  |\n              (minX0, minY1) ---- (maxX2, minY1)\n           */\n            normalizedBounds = [\n                [bounds[0], bounds[1]],\n                [bounds[0], bounds[3]],\n                [bounds[2], bounds[3]],\n                [bounds[2], bounds[1]]\n            ];\n        }\n        return createMesh(normalizedBounds, this.context.viewport.resolution);\n    }\n    _getModel() {\n        /*\n          0,0 --- 1,0\n           |       |\n          0,1 --- 1,1\n        */\n        return new Model(this.context.device, {\n            ...this.getShaders(),\n            id: this.props.id,\n            bufferLayout: this.getAttributeManager().getBufferLayouts(),\n            topology: 'triangle-list',\n            isInstanced: false\n        });\n    }\n    draw(opts) {\n        const { shaderModuleProps } = opts;\n        const { model, coordinateConversion, bounds, disablePicking } = this.state;\n        const { image, desaturate, transparentColor, tintColor } = this.props;\n        if (shaderModuleProps.picking.isActive && disablePicking) {\n            return;\n        }\n        // // TODO fix zFighting\n        // Render the image\n        if (image && model) {\n            const bitmapProps = {\n                bitmapTexture: image,\n                bounds,\n                coordinateConversion,\n                desaturate,\n                tintColor: tintColor.slice(0, 3).map(x => x / 255),\n                transparentColor: transparentColor.map(x => x / 255)\n            };\n            model.shaderInputs.setProps({ bitmap: bitmapProps });\n            model.draw(this.context.renderPass);\n        }\n    }\n    _getCoordinateUniforms() {\n        const { LNGLAT, CARTESIAN, DEFAULT } = COORDINATE_SYSTEM;\n        let { _imageCoordinateSystem: imageCoordinateSystem } = this.props;\n        if (imageCoordinateSystem !== DEFAULT) {\n            const { bounds } = this.props;\n            if (!isRectangularBounds(bounds)) {\n                throw new Error('_imageCoordinateSystem only supports rectangular bounds');\n            }\n            // The default behavior (linearly interpolated tex coords)\n            const defaultImageCoordinateSystem = this.context.viewport.resolution ? LNGLAT : CARTESIAN;\n            imageCoordinateSystem = imageCoordinateSystem === LNGLAT ? LNGLAT : CARTESIAN;\n            if (imageCoordinateSystem === LNGLAT && defaultImageCoordinateSystem === CARTESIAN) {\n                // LNGLAT in Mercator, e.g. display LNGLAT-encoded image in WebMercator projection\n                return { coordinateConversion: -1, bounds };\n            }\n            if (imageCoordinateSystem === CARTESIAN && defaultImageCoordinateSystem === LNGLAT) {\n                // Mercator in LNGLAT, e.g. display WebMercator encoded image in Globe projection\n                const bottomLeft = lngLatToWorld([bounds[0], bounds[1]]);\n                const topRight = lngLatToWorld([bounds[2], bounds[3]]);\n                return {\n                    coordinateConversion: 1,\n                    bounds: [bottomLeft[0], bottomLeft[1], topRight[0], topRight[1]]\n                };\n            }\n        }\n        return {\n            coordinateConversion: 0,\n            bounds: [0, 0, 0, 0]\n        };\n    }\n}\nBitmapLayer.layerName = 'BitmapLayer';\nBitmapLayer.defaultProps = defaultProps;\nexport default BitmapLayer;\n/**\n * Decode uv floats from rgb bytes where b contains 4-bit fractions of uv\n * @param {number[]} color\n * @returns {number[]} uvs\n * https://stackoverflow.com/questions/30242013/glsl-compressing-packing-multiple-0-1-colours-var4-into-a-single-var4-variab\n */\nfunction unpackUVsFromRGB(color) {\n    const [u, v, fracUV] = color;\n    const vFrac = (fracUV & 0xf0) / 256;\n    const uFrac = (fracUV & 0x0f) / 16;\n    return [(u + uFrac) / 256, (v + vFrac) / 256];\n}\nfunction isRectangularBounds(bounds) {\n    return Number.isFinite(bounds[0]);\n}\n//# sourceMappingURL=bitmap-layer.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst uniformBlock = `\\\nuniform iconUniforms {\n  float sizeScale;\n  vec2 iconsTextureDim;\n  float sizeBasis;\n  float sizeMinPixels;\n  float sizeMaxPixels;\n  bool billboard;\n  highp int sizeUnits;\n  float alphaCutoff;\n} icon;\n`;\nexport const iconUniforms = {\n    name: 'icon',\n    vs: uniformBlock,\n    fs: uniformBlock,\n    uniformTypes: {\n        sizeScale: 'f32',\n        iconsTextureDim: 'vec2<f32>',\n        sizeBasis: 'f32',\n        sizeMinPixels: 'f32',\n        sizeMaxPixels: 'f32',\n        billboard: 'f32',\n        sizeUnits: 'i32',\n        alphaCutoff: 'f32'\n    }\n};\n//# sourceMappingURL=icon-layer-uniforms.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `\\\n#version 300 es\n#define SHADER_NAME icon-layer-vertex-shader\nin vec2 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin float instanceSizes;\nin float instanceAngles;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin vec4 instanceIconFrames;\nin float instanceColorModes;\nin vec2 instanceOffsets;\nin vec2 instancePixelOffset;\nout float vColorMode;\nout vec4 vColor;\nout vec2 vTextureCoords;\nout vec2 uv;\nvec2 rotate_by_angle(vec2 vertex, float angle) {\nfloat angle_radian = angle * PI / 180.0;\nfloat cos_angle = cos(angle_radian);\nfloat sin_angle = sin(angle_radian);\nmat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\nreturn rotationMatrix * vertex;\n}\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.uv = positions;\ngeometry.pickingColor = instancePickingColors;\nuv = positions;\nvec2 iconSize = instanceIconFrames.zw;\nfloat sizePixels = clamp(\nproject_size_to_pixel(instanceSizes * icon.sizeScale, icon.sizeUnits),\nicon.sizeMinPixels, icon.sizeMaxPixels\n);\nfloat iconConstraint = icon.sizeBasis == 0.0 ? iconSize.x : iconSize.y;\nfloat instanceScale = iconConstraint == 0.0 ? 0.0 : sizePixels / iconConstraint;\nvec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\npixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\npixelOffset += instancePixelOffset;\npixelOffset.y *= -1.0;\nif (icon.billboard)  {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = vec3(pixelOffset, 0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\nDECKGL_FILTER_SIZE(offset_common, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvTextureCoords = mix(\ninstanceIconFrames.xy,\ninstanceIconFrames.xy + iconSize,\n(positions.xy + 1.0) / 2.0\n) / icon.iconsTextureDim;\nvColor = instanceColors;\nDECKGL_FILTER_COLOR(vColor, geometry);\nvColorMode = instanceColorModes;\n}\n`;\n//# sourceMappingURL=icon-layer-vertex.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `\\\n#version 300 es\n#define SHADER_NAME icon-layer-fragment-shader\nprecision highp float;\nuniform sampler2D iconsTexture;\nin float vColorMode;\nin vec4 vColor;\nin vec2 vTextureCoords;\nin vec2 uv;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nvec4 texColor = texture(iconsTexture, vTextureCoords);\nvec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\nfloat a = texColor.a * layer.opacity * vColor.a;\nif (a < icon.alphaCutoff) {\ndiscard;\n}\nfragColor = vec4(color, a);\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;\n//# sourceMappingURL=icon-layer-fragment.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { load } from '@loaders.gl/core';\nimport { createIterable } from '@deck.gl/core';\nconst DEFAULT_CANVAS_WIDTH = 1024;\nconst DEFAULT_BUFFER = 4;\nconst noop = () => { };\nconst DEFAULT_SAMPLER_PARAMETERS = {\n    minFilter: 'linear',\n    mipmapFilter: 'linear',\n    // LINEAR is the default value but explicitly set it here\n    magFilter: 'linear',\n    // minimize texture boundary artifacts\n    addressModeU: 'clamp-to-edge',\n    addressModeV: 'clamp-to-edge'\n};\nconst MISSING_ICON = {\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n};\nfunction nextPowOfTwo(number) {\n    return Math.pow(2, Math.ceil(Math.log2(number)));\n}\n// update comment to create a new texture and copy original data.\nfunction resizeImage(ctx, imageData, maxWidth, maxHeight) {\n    const resizeRatio = Math.min(maxWidth / imageData.width, maxHeight / imageData.height);\n    const width = Math.floor(imageData.width * resizeRatio);\n    const height = Math.floor(imageData.height * resizeRatio);\n    if (resizeRatio === 1) {\n        // No resizing required\n        return { image: imageData, width, height };\n    }\n    ctx.canvas.height = height;\n    ctx.canvas.width = width;\n    ctx.clearRect(0, 0, width, height);\n    // image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight\n    ctx.drawImage(imageData, 0, 0, imageData.width, imageData.height, 0, 0, width, height);\n    return { image: ctx.canvas, width, height };\n}\nfunction getIconId(icon) {\n    return icon && (icon.id || icon.url);\n}\n// resize texture without losing original data\nfunction resizeTexture(texture, width, height, sampler) {\n    const { width: oldWidth, height: oldHeight, device } = texture;\n    const newTexture = device.createTexture({\n        format: 'rgba8unorm',\n        width,\n        height,\n        sampler,\n        mipLevels: device.getMipLevelCount(width, height)\n    });\n    const commandEncoder = device.createCommandEncoder();\n    commandEncoder.copyTextureToTexture({\n        sourceTexture: texture,\n        destinationTexture: newTexture,\n        width: oldWidth,\n        height: oldHeight\n    });\n    commandEncoder.finish();\n    newTexture.generateMipmapsWebGL();\n    texture.destroy();\n    return newTexture;\n}\n// traverse icons in a row of icon atlas\n// extend each icon with left-top coordinates\nfunction buildRowMapping(mapping, columns, yOffset) {\n    for (let i = 0; i < columns.length; i++) {\n        const { icon, xOffset } = columns[i];\n        const id = getIconId(icon);\n        mapping[id] = {\n            ...icon,\n            x: xOffset,\n            y: yOffset\n        };\n    }\n}\n/**\n * Generate coordinate mapping to retrieve icon left-top position from an icon atlas\n */\nexport function buildMapping({ icons, buffer, mapping = {}, xOffset = 0, yOffset = 0, rowHeight = 0, canvasWidth }) {\n    let columns = [];\n    // Strategy to layout all the icons into a texture:\n    // traverse the icons sequentially, layout the icons from left to right, top to bottom\n    // when the sum of the icons width is equal or larger than canvasWidth,\n    // move to next row starting from total height so far plus max height of the icons in previous row\n    // row width is equal to canvasWidth\n    // row height is decided by the max height of the icons in that row\n    // mapping coordinates of each icon is its left-top position in the texture\n    for (let i = 0; i < icons.length; i++) {\n        const icon = icons[i];\n        const id = getIconId(icon);\n        if (!mapping[id]) {\n            const { height, width } = icon;\n            // fill one row\n            if (xOffset + width + buffer > canvasWidth) {\n                buildRowMapping(mapping, columns, yOffset);\n                xOffset = 0;\n                yOffset = rowHeight + yOffset + buffer;\n                rowHeight = 0;\n                columns = [];\n            }\n            columns.push({\n                icon,\n                xOffset\n            });\n            xOffset = xOffset + width + buffer;\n            rowHeight = Math.max(rowHeight, height);\n        }\n    }\n    if (columns.length > 0) {\n        buildRowMapping(mapping, columns, yOffset);\n    }\n    return {\n        mapping,\n        rowHeight,\n        xOffset,\n        yOffset,\n        canvasWidth,\n        canvasHeight: nextPowOfTwo(rowHeight + yOffset + buffer)\n    };\n}\n// extract icons from data\n// return icons should be unique, and not cached or cached but url changed\nexport function getDiffIcons(data, getIcon, cachedIcons) {\n    if (!data || !getIcon) {\n        return null;\n    }\n    cachedIcons = cachedIcons || {};\n    const icons = {};\n    const { iterable, objectInfo } = createIterable(data);\n    for (const object of iterable) {\n        objectInfo.index++;\n        const icon = getIcon(object, objectInfo);\n        const id = getIconId(icon);\n        if (!icon) {\n            throw new Error('Icon is missing.');\n        }\n        if (!icon.url) {\n            throw new Error('Icon url is missing.');\n        }\n        if (!icons[id] && (!cachedIcons[id] || icon.url !== cachedIcons[id].url)) {\n            icons[id] = { ...icon, source: object, sourceIndex: objectInfo.index };\n        }\n    }\n    return icons;\n}\nexport default class IconManager {\n    constructor(device, { onUpdate = noop, onError = noop }) {\n        this._loadOptions = null;\n        this._texture = null;\n        this._externalTexture = null;\n        this._mapping = {};\n        this._samplerParameters = null;\n        /** count of pending requests to fetch icons */\n        this._pendingCount = 0;\n        this._autoPacking = false;\n        // / internal state used for autoPacking\n        this._xOffset = 0;\n        this._yOffset = 0;\n        this._rowHeight = 0;\n        this._buffer = DEFAULT_BUFFER;\n        this._canvasWidth = DEFAULT_CANVAS_WIDTH;\n        this._canvasHeight = 0;\n        this._canvas = null;\n        this.device = device;\n        this.onUpdate = onUpdate;\n        this.onError = onError;\n    }\n    finalize() {\n        this._texture?.delete();\n    }\n    getTexture() {\n        return this._texture || this._externalTexture;\n    }\n    getIconMapping(icon) {\n        const id = this._autoPacking ? getIconId(icon) : icon;\n        return this._mapping[id] || MISSING_ICON;\n    }\n    setProps({ loadOptions, autoPacking, iconAtlas, iconMapping, textureParameters }) {\n        if (loadOptions) {\n            this._loadOptions = loadOptions;\n        }\n        if (autoPacking !== undefined) {\n            this._autoPacking = autoPacking;\n        }\n        if (iconMapping) {\n            this._mapping = iconMapping;\n        }\n        if (iconAtlas) {\n            this._texture?.delete();\n            this._texture = null;\n            this._externalTexture = iconAtlas;\n        }\n        if (textureParameters) {\n            this._samplerParameters = textureParameters;\n        }\n    }\n    get isLoaded() {\n        return this._pendingCount === 0;\n    }\n    packIcons(data, getIcon) {\n        if (!this._autoPacking || typeof document === 'undefined') {\n            return;\n        }\n        const icons = Object.values(getDiffIcons(data, getIcon, this._mapping) || {});\n        if (icons.length > 0) {\n            // generate icon mapping\n            const { mapping, xOffset, yOffset, rowHeight, canvasHeight } = buildMapping({\n                icons,\n                buffer: this._buffer,\n                canvasWidth: this._canvasWidth,\n                mapping: this._mapping,\n                rowHeight: this._rowHeight,\n                xOffset: this._xOffset,\n                yOffset: this._yOffset\n            });\n            this._rowHeight = rowHeight;\n            this._mapping = mapping;\n            this._xOffset = xOffset;\n            this._yOffset = yOffset;\n            this._canvasHeight = canvasHeight;\n            // create new texture\n            if (!this._texture) {\n                this._texture = this.device.createTexture({\n                    format: 'rgba8unorm',\n                    data: null,\n                    width: this._canvasWidth,\n                    height: this._canvasHeight,\n                    sampler: this._samplerParameters || DEFAULT_SAMPLER_PARAMETERS,\n                    mipLevels: this.device.getMipLevelCount(this._canvasWidth, this._canvasHeight)\n                });\n            }\n            if (this._texture.height !== this._canvasHeight) {\n                this._texture = resizeTexture(this._texture, this._canvasWidth, this._canvasHeight, this._samplerParameters || DEFAULT_SAMPLER_PARAMETERS);\n            }\n            this.onUpdate(true);\n            // load images\n            this._canvas = this._canvas || document.createElement('canvas');\n            this._loadIcons(icons);\n        }\n    }\n    _loadIcons(icons) {\n        // This method is only called in the auto packing case, where _canvas is defined\n        const ctx = this._canvas.getContext('2d', {\n            willReadFrequently: true\n        });\n        for (const icon of icons) {\n            this._pendingCount++;\n            load(icon.url, this._loadOptions)\n                .then(imageData => {\n                const id = getIconId(icon);\n                const iconDef = this._mapping[id];\n                const { x: initialX, y: initialY, width: maxWidth, height: maxHeight } = iconDef;\n                const { image, width, height } = resizeImage(ctx, imageData, maxWidth, maxHeight);\n                const x = initialX + (maxWidth - width) / 2;\n                const y = initialY + (maxHeight - height) / 2;\n                this._texture?.copyExternalImage({\n                    image,\n                    x,\n                    y,\n                    width,\n                    height\n                });\n                iconDef.x = x;\n                iconDef.y = y;\n                iconDef.width = width;\n                iconDef.height = height;\n                // Call to regenerate mipmaps after modifying texture(s)\n                this._texture?.generateMipmapsWebGL();\n                this.onUpdate(width !== maxWidth || height !== maxHeight);\n            })\n                .catch(error => {\n                this.onError({\n                    url: icon.url,\n                    source: icon.source,\n                    sourceIndex: icon.sourceIndex,\n                    loadOptions: this._loadOptions,\n                    error\n                });\n            })\n                .finally(() => {\n                this._pendingCount--;\n            });\n        }\n    }\n}\n//# sourceMappingURL=icon-manager.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Layer, project32, picking, log, UNIT } from '@deck.gl/core';\nimport { Model, Geometry } from '@luma.gl/engine';\nimport { iconUniforms } from \"./icon-layer-uniforms.js\";\nimport vs from \"./icon-layer-vertex.glsl.js\";\nimport fs from \"./icon-layer-fragment.glsl.js\";\nimport IconManager from \"./icon-manager.js\";\nconst DEFAULT_COLOR = [0, 0, 0, 255];\nconst defaultProps = {\n    iconAtlas: { type: 'image', value: null, async: true },\n    iconMapping: { type: 'object', value: {}, async: true },\n    sizeScale: { type: 'number', value: 1, min: 0 },\n    billboard: true,\n    sizeUnits: 'pixels',\n    sizeBasis: 'height',\n    sizeMinPixels: { type: 'number', min: 0, value: 0 }, //  min point radius in pixels\n    sizeMaxPixels: { type: 'number', min: 0, value: Number.MAX_SAFE_INTEGER }, // max point radius in pixels\n    alphaCutoff: { type: 'number', value: 0.05, min: 0, max: 1 },\n    getPosition: { type: 'accessor', value: (x) => x.position },\n    getIcon: { type: 'accessor', value: (x) => x.icon },\n    getColor: { type: 'accessor', value: DEFAULT_COLOR },\n    getSize: { type: 'accessor', value: 1 },\n    getAngle: { type: 'accessor', value: 0 },\n    getPixelOffset: { type: 'accessor', value: [0, 0] },\n    onIconError: { type: 'function', value: null, optional: true },\n    textureParameters: { type: 'object', ignore: true, value: null }\n};\n/** Render raster icons at given coordinates. */\nclass IconLayer extends Layer {\n    getShaders() {\n        return super.getShaders({ vs, fs, modules: [project32, picking, iconUniforms] });\n    }\n    initializeState() {\n        this.state = {\n            iconManager: new IconManager(this.context.device, {\n                onUpdate: this._onUpdate.bind(this),\n                onError: this._onError.bind(this)\n            })\n        };\n        const attributeManager = this.getAttributeManager();\n        /* eslint-disable max-len */\n        attributeManager.addInstanced({\n            instancePositions: {\n                size: 3,\n                type: 'float64',\n                fp64: this.use64bitPositions(),\n                transition: true,\n                accessor: 'getPosition'\n            },\n            instanceSizes: {\n                size: 1,\n                transition: true,\n                accessor: 'getSize',\n                defaultValue: 1\n            },\n            instanceOffsets: {\n                size: 2,\n                accessor: 'getIcon',\n                // eslint-disable-next-line @typescript-eslint/unbound-method\n                transform: this.getInstanceOffset\n            },\n            instanceIconFrames: {\n                size: 4,\n                accessor: 'getIcon',\n                // eslint-disable-next-line @typescript-eslint/unbound-method\n                transform: this.getInstanceIconFrame\n            },\n            instanceColorModes: {\n                size: 1,\n                type: 'uint8',\n                accessor: 'getIcon',\n                // eslint-disable-next-line @typescript-eslint/unbound-method\n                transform: this.getInstanceColorMode\n            },\n            instanceColors: {\n                size: this.props.colorFormat.length,\n                type: 'unorm8',\n                transition: true,\n                accessor: 'getColor',\n                defaultValue: DEFAULT_COLOR\n            },\n            instanceAngles: {\n                size: 1,\n                transition: true,\n                accessor: 'getAngle'\n            },\n            instancePixelOffset: {\n                size: 2,\n                transition: true,\n                accessor: 'getPixelOffset'\n            }\n        });\n        /* eslint-enable max-len */\n    }\n    /* eslint-disable max-statements, complexity */\n    updateState(params) {\n        super.updateState(params);\n        const { props, oldProps, changeFlags } = params;\n        const attributeManager = this.getAttributeManager();\n        const { iconAtlas, iconMapping, data, getIcon, textureParameters } = props;\n        const { iconManager } = this.state;\n        if (typeof iconAtlas === 'string') {\n            return;\n        }\n        // internalState is always defined during updateState\n        const prePacked = iconAtlas || this.internalState.isAsyncPropLoading('iconAtlas');\n        iconManager.setProps({\n            loadOptions: props.loadOptions,\n            autoPacking: !prePacked,\n            iconAtlas,\n            iconMapping: prePacked ? iconMapping : null,\n            textureParameters\n        });\n        // prepacked iconAtlas from user\n        if (prePacked) {\n            if (oldProps.iconMapping !== props.iconMapping) {\n                attributeManager.invalidate('getIcon');\n            }\n        }\n        else if (changeFlags.dataChanged ||\n            (changeFlags.updateTriggersChanged &&\n                (changeFlags.updateTriggersChanged.all || changeFlags.updateTriggersChanged.getIcon))) {\n            // Auto packing - getIcon is expected to return an object\n            iconManager.packIcons(data, getIcon);\n        }\n        if (changeFlags.extensionsChanged) {\n            this.state.model?.destroy();\n            this.state.model = this._getModel();\n            attributeManager.invalidateAll();\n        }\n    }\n    /* eslint-enable max-statements, complexity */\n    get isLoaded() {\n        return super.isLoaded && this.state.iconManager.isLoaded;\n    }\n    finalizeState(context) {\n        super.finalizeState(context);\n        // Release resources held by the icon manager\n        this.state.iconManager.finalize();\n    }\n    draw({ uniforms }) {\n        const { sizeScale, sizeBasis, sizeMinPixels, sizeMaxPixels, sizeUnits, billboard, alphaCutoff } = this.props;\n        const { iconManager } = this.state;\n        const iconsTexture = iconManager.getTexture();\n        if (iconsTexture) {\n            const model = this.state.model;\n            const iconProps = {\n                iconsTexture,\n                iconsTextureDim: [iconsTexture.width, iconsTexture.height],\n                sizeUnits: UNIT[sizeUnits],\n                sizeScale,\n                sizeBasis: sizeBasis === 'height' ? 1.0 : 0.0,\n                sizeMinPixels,\n                sizeMaxPixels,\n                billboard,\n                alphaCutoff\n            };\n            model.shaderInputs.setProps({ icon: iconProps });\n            model.draw(this.context.renderPass);\n        }\n    }\n    _getModel() {\n        // The icon-layer vertex shader uses 2d positions\n        // specifed via: in vec2 positions;\n        const positions = [-1, -1, 1, -1, -1, 1, 1, 1];\n        return new Model(this.context.device, {\n            ...this.getShaders(),\n            id: this.props.id,\n            bufferLayout: this.getAttributeManager().getBufferLayouts(),\n            geometry: new Geometry({\n                topology: 'triangle-strip',\n                attributes: {\n                    // The size must be explicitly passed here otherwise luma.gl\n                    // will default to assuming that positions are 3D (x,y,z)\n                    positions: {\n                        size: 2,\n                        value: new Float32Array(positions)\n                    }\n                }\n            }),\n            isInstanced: true\n        });\n    }\n    _onUpdate(didFrameChange) {\n        if (didFrameChange) {\n            this.getAttributeManager()?.invalidate('getIcon');\n            this.setNeedsUpdate();\n        }\n        else {\n            this.setNeedsRedraw();\n        }\n    }\n    _onError(evt) {\n        const onIconError = this.getCurrentLayer()?.props.onIconError;\n        if (onIconError) {\n            onIconError(evt);\n        }\n        else {\n            log.error(evt.error.message)();\n        }\n    }\n    getInstanceOffset(icon) {\n        const { width, height, anchorX = width / 2, anchorY = height / 2 } = this.state.iconManager.getIconMapping(icon);\n        return [width / 2 - anchorX, height / 2 - anchorY];\n    }\n    getInstanceColorMode(icon) {\n        const mapping = this.state.iconManager.getIconMapping(icon);\n        return mapping.mask ? 1 : 0;\n    }\n    getInstanceIconFrame(icon) {\n        const { x, y, width, height } = this.state.iconManager.getIconMapping(icon);\n        return [x, y, width, height];\n    }\n}\nIconLayer.defaultProps = defaultProps;\nIconLayer.layerName = 'IconLayer';\nexport default IconLayer;\n//# sourceMappingURL=icon-layer.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst uniformBlockWGSL = /* wgsl */ `\\\nstruct LineUniforms {\n  widthScale: f32,\n  widthMinPixels: f32,\n  widthMaxPixels: f32,\n  useShortestPath: f32,\n  widthUnits: i32,\n};\n\n@group(0) @binding(1)\nvar<uniform> line: LineUniforms;\n`;\nconst uniformBlockGLSL = /* glsl */ `\\\nuniform lineUniforms {\n  float widthScale;\n  float widthMinPixels;\n  float widthMaxPixels;\n  float useShortestPath;\n  highp int widthUnits;\n} line;\n`;\nexport const lineUniforms = {\n    name: 'line',\n    source: uniformBlockWGSL,\n    vs: uniformBlockGLSL,\n    fs: uniformBlockGLSL,\n    uniformTypes: {\n        widthScale: 'f32',\n        widthMinPixels: 'f32',\n        widthMaxPixels: 'f32',\n        useShortestPath: 'f32',\n        widthUnits: 'i32'\n    }\n};\n//# sourceMappingURL=line-layer-uniforms.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport const shaderWGSL = /* wgsl */ `\\\n// ---------- Helper Structures & Functions ----------\n\n// Placeholder filter functions.\nfn deckgl_filter_size(offset: vec3<f32>, geometry: Geometry) -> vec3<f32> {\n  return offset;\n}\nfn deckgl_filter_gl_position(p: vec4<f32>, geometry: Geometry) -> vec4<f32> {\n  return p;\n}\nfn deckgl_filter_color(color: vec4<f32>, geometry: Geometry) -> vec4<f32> {\n  return color;\n}\n\n// Compute an extrusion offset given a line direction (in clipspace),\n// an offset direction (-1 or 1), and a width in pixels.\n// Assumes a uniform \"project\" with a viewportSize field is available.\nfn getExtrusionOffset(line_clipspace: vec2<f32>, offset_direction: f32, width: f32) -> vec2<f32> {\n  // project.viewportSize should be provided as a uniform (not shown here)\n  let dir_screenspace = normalize(line_clipspace * project.viewportSize);\n  // Rotate by 90: (x,y) becomes (-y,x)\n  let rotated = vec2<f32>(-dir_screenspace.y, dir_screenspace.x);\n  return rotated * offset_direction * width / 2.0;\n}\n\n// Splits the line between two points at a given x coordinate.\n// Interpolates the y and z components.\nfn splitLine(a: vec3<f32>, b: vec3<f32>, x: f32) -> vec3<f32> {\n  let t: f32 = (x - a.x) / (b.x - a.x);\n  return vec3<f32>(x, a.yz + t * (b.yz - a.yz));\n}\n\n// ---------- Uniforms & Global Structures ----------\n\n// Uniforms for line, color, and project are assumed to be defined elsewhere.\n// For example:\n//\n// @group(0) @binding(0)\n// var<uniform> line: LineUniform;\n//\n// struct ColorUniform {\n//   opacity: f32,\n// };\n// @group(0) @binding(1)\n// var<uniform> color: ColorUniform;\n//\n// struct ProjectUniform {\n//   viewportSize: vec2<f32>,\n// };\n// @group(0) @binding(2)\n// var<uniform> project: ProjectUniform;\n\n\n\n// ---------- Vertex Output Structure ----------\n\nstruct Varyings {\n  @builtin(position) gl_Position: vec4<f32>,\n  @location(0) vColor: vec4<f32>,\n  @location(1) uv: vec2<f32>,\n};\n\n// ---------- Vertex Shader Entry Point ----------\n\n@vertex\nfn vertexMain(\n  @location(0) positions: vec3<f32>,\n  @location(1) instanceSourcePositions: vec3<f32>,\n  @location(2) instanceTargetPositions: vec3<f32>,\n  @location(3) instanceSourcePositions64Low: vec3<f32>,\n  @location(4) instanceTargetPositions64Low: vec3<f32>,\n  @location(5) instanceColors: vec4<f32>,\n  @location(6) instancePickingColors: vec3<f32>,\n  @location(7) instanceWidths: f32\n) -> Varyings {\n  var geometry: Geometry;\n  geometry.worldPosition = instanceSourcePositions;\n  geometry.worldPositionAlt = instanceTargetPositions;\n\n  var source_world: vec3<f32> = instanceSourcePositions;\n  var target_world: vec3<f32> = instanceTargetPositions;\n  var source_world_64low: vec3<f32> = instanceSourcePositions64Low;\n  var target_world_64low: vec3<f32> = instanceTargetPositions64Low;\n\n  // Apply shortest-path adjustments if needed.\n  if (line.useShortestPath > 0.5 || line.useShortestPath < -0.5) {\n    source_world.x = (source_world.x + 180.0 % 360.0) - 180.0;\n    target_world.x = (target_world.x + 180.0 % 360.0) - 180.0;\n    let deltaLng: f32 = target_world.x - source_world.x;\n\n    if (deltaLng * line.useShortestPath > 180.0) {\n      source_world.x = source_world.x + 360.0 * line.useShortestPath;\n      source_world = splitLine(source_world, target_world, 180.0 * line.useShortestPath);\n      source_world_64low = vec3<f32>(0.0, 0.0, 0.0);\n    } else if (deltaLng * line.useShortestPath < -180.0) {\n      target_world.x = target_world.x + 360.0 * line.useShortestPath;\n      target_world = splitLine(source_world, target_world, 180.0 * line.useShortestPath);\n      target_world_64low = vec3<f32>(0.0, 0.0, 0.0);\n    } else if (line.useShortestPath < 0.0) {\n      var abortOut: Varyings;\n      abortOut.gl_Position = vec4<f32>(0.0);\n      abortOut.vColor = vec4<f32>(0.0);\n      abortOut.uv = vec2<f32>(0.0);\n      return abortOut;\n    }\n  }\n\n  // Project Pos and target positions to clip space.\n  let sourceResult = project_position_to_clipspace_and_commonspace(source_world, source_world_64low, vec3<f32>(0.0));\n  let targetResult = project_position_to_clipspace_and_commonspace(target_world, target_world_64low, vec3<f32>(0.0));\n  let sourcePos: vec4<f32> = sourceResult.clipPosition;\n  let targetPos: vec4<f32> = targetResult.clipPosition;\n  let source_commonspace: vec4<f32> = sourceResult.commonPosition;\n  let target_commonspace: vec4<f32> = targetResult.commonPosition;\n\n  // Interpolate along the line segment.\n  let segmentIndex: f32 = positions.x;\n  let p: vec4<f32> = sourcePos + segmentIndex * (targetPos - sourcePos);\n  geometry.position = source_commonspace + segmentIndex * (target_commonspace - source_commonspace);\n  let uv: vec2<f32> = positions.xy;\n  geometry.uv = uv;\n  geometry.pickingColor = instancePickingColors;\n\n  // Determine width in pixels.\n  let widthPixels: f32 = clamp(\n    project_unit_size_to_pixel(instanceWidths * line.widthScale, line.widthUnits),\n    line.widthMinPixels, line.widthMaxPixels\n  );\n\n  // Compute extrusion offset.\n  let extrusion: vec2<f32> = getExtrusionOffset(targetPos.xy - sourcePos.xy, positions.y, widthPixels);\n  let offset: vec3<f32> = vec3<f32>(extrusion, 0.0);\n\n  // Apply deck.gl filter functions.\n  let filteredOffset = deckgl_filter_size(offset, geometry);\n  let filteredP = deckgl_filter_gl_position(p, geometry);\n\n  let clipOffset: vec2<f32> = project_pixel_size_to_clipspace(filteredOffset.xy);\n  let finalPosition: vec4<f32> = filteredP + vec4<f32>(clipOffset, 0.0, 0.0);\n\n  // Compute color.\n  var vColor: vec4<f32> = vec4<f32>(instanceColors.rgb, instanceColors.a * color.opacity);\n  // vColor = deckgl_filter_color(vColor, geometry);\n\n  var output: Varyings;\n  output.gl_Position = finalPosition;\n  output.vColor = vColor;\n  output.uv = uv;\n  return output;\n}\n\n@fragment\nfn fragmentMain(\n  @location(0) vColor: vec4<f32>,\n  @location(1) uv: vec2<f32>\n) -> @location(0) vec4<f32> {\n  // Create and initialize geometry with the provided uv.\n  var geometry: Geometry;\n  geometry.uv = uv;\n\n  // Start with the input color.\n  var fragColor: vec4<f32> = vColor;\n\n  // Apply the deck.gl filter to the color.\n  fragColor = deckgl_filter_color(fragColor, geometry);\n\n  // Apply premultiplied alpha as required by transparent canvas\n  fragColor = deckgl_premultiplied_alpha(fragColor);\n\n  return fragColor;\n}\n`;\n//# sourceMappingURL=line-layer.wgsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `\\\n#version 300 es\n#define SHADER_NAME line-layer-vertex-shader\nin vec3 positions;\nin vec3 instanceSourcePositions;\nin vec3 instanceTargetPositions;\nin vec3 instanceSourcePositions64Low;\nin vec3 instanceTargetPositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin float instanceWidths;\nout vec4 vColor;\nout vec2 uv;\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {\nvec2 dir_screenspace = normalize(line_clipspace * project.viewportSize);\ndir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\nreturn dir_screenspace * offset_direction * width / 2.0;\n}\nvec3 splitLine(vec3 a, vec3 b, float x) {\nfloat t = (x - a.x) / (b.x - a.x);\nreturn vec3(x, mix(a.yz, b.yz, t));\n}\nvoid main(void) {\ngeometry.worldPosition = instanceSourcePositions;\ngeometry.worldPositionAlt = instanceTargetPositions;\nvec3 source_world = instanceSourcePositions;\nvec3 target_world = instanceTargetPositions;\nvec3 source_world_64low = instanceSourcePositions64Low;\nvec3 target_world_64low = instanceTargetPositions64Low;\nif (line.useShortestPath > 0.5 || line.useShortestPath < -0.5) {\nsource_world.x = mod(source_world.x + 180., 360.0) - 180.;\ntarget_world.x = mod(target_world.x + 180., 360.0) - 180.;\nfloat deltaLng = target_world.x - source_world.x;\nif (deltaLng * line.useShortestPath > 180.) {\nsource_world.x += 360. * line.useShortestPath;\nsource_world = splitLine(source_world, target_world, 180. * line.useShortestPath);\nsource_world_64low = vec3(0.0);\n} else if (deltaLng * line.useShortestPath < -180.) {\ntarget_world.x += 360. * line.useShortestPath;\ntarget_world = splitLine(source_world, target_world, 180. * line.useShortestPath);\ntarget_world_64low = vec3(0.0);\n} else if (line.useShortestPath < 0.) {\ngl_Position = vec4(0.);\nreturn;\n}\n}\nvec4 source_commonspace;\nvec4 target_commonspace;\nvec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);\nvec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);\nfloat segmentIndex = positions.x;\nvec4 p = mix(source, target, segmentIndex);\ngeometry.position = mix(source_commonspace, target_commonspace, segmentIndex);\nuv = positions.xy;\ngeometry.uv = uv;\ngeometry.pickingColor = instancePickingColors;\nfloat widthPixels = clamp(\nproject_size_to_pixel(instanceWidths * line.widthScale, line.widthUnits),\nline.widthMinPixels, line.widthMaxPixels\n);\nvec3 offset = vec3(\ngetExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),\n0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\nDECKGL_FILTER_GL_POSITION(p, geometry);\ngl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);\nvColor = vec4(instanceColors.rgb, instanceColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;\n//# sourceMappingURL=line-layer-vertex.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `\\\n#version 300 es\n#define SHADER_NAME line-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nin vec2 uv;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nfragColor = vColor;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;\n//# sourceMappingURL=line-layer-fragment.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Layer, project32, color, picking, UNIT } from '@deck.gl/core';\nimport { Model, Geometry } from '@luma.gl/engine';\nimport { lineUniforms } from \"./line-layer-uniforms.js\";\nimport { shaderWGSL as source } from \"./line-layer.wgsl.js\";\nimport vs from \"./line-layer-vertex.glsl.js\";\nimport fs from \"./line-layer-fragment.glsl.js\";\nconst DEFAULT_COLOR = [0, 0, 0, 255];\nconst defaultProps = {\n    getSourcePosition: { type: 'accessor', value: (x) => x.sourcePosition },\n    getTargetPosition: { type: 'accessor', value: (x) => x.targetPosition },\n    getColor: { type: 'accessor', value: DEFAULT_COLOR },\n    getWidth: { type: 'accessor', value: 1 },\n    widthUnits: 'pixels',\n    widthScale: { type: 'number', value: 1, min: 0 },\n    widthMinPixels: { type: 'number', value: 0, min: 0 },\n    widthMaxPixels: { type: 'number', value: Number.MAX_SAFE_INTEGER, min: 0 }\n};\n/**\n * A layer that renders straight lines joining pairs of source and target coordinates.\n */\nclass LineLayer extends Layer {\n    getBounds() {\n        return this.getAttributeManager()?.getBounds([\n            'instanceSourcePositions',\n            'instanceTargetPositions'\n        ]);\n    }\n    getShaders() {\n        return super.getShaders({ vs, fs, source, modules: [project32, color, picking, lineUniforms] });\n    }\n    // This layer has its own wrapLongitude logic\n    get wrapLongitude() {\n        return false;\n    }\n    initializeState() {\n        const attributeManager = this.getAttributeManager();\n        /* eslint-disable max-len */\n        attributeManager.addInstanced({\n            instanceSourcePositions: {\n                size: 3,\n                type: 'float64',\n                fp64: this.use64bitPositions(),\n                transition: true,\n                accessor: 'getSourcePosition'\n            },\n            instanceTargetPositions: {\n                size: 3,\n                type: 'float64',\n                fp64: this.use64bitPositions(),\n                transition: true,\n                accessor: 'getTargetPosition'\n            },\n            instanceColors: {\n                size: this.props.colorFormat.length,\n                type: 'unorm8',\n                transition: true,\n                accessor: 'getColor',\n                defaultValue: [0, 0, 0, 255]\n            },\n            instanceWidths: {\n                size: 1,\n                transition: true,\n                accessor: 'getWidth',\n                defaultValue: 1\n            }\n        });\n        /* eslint-enable max-len */\n    }\n    updateState(params) {\n        super.updateState(params);\n        if (params.changeFlags.extensionsChanged) {\n            this.state.model?.destroy();\n            this.state.model = this._getModel();\n            this.getAttributeManager().invalidateAll();\n        }\n    }\n    draw({ uniforms }) {\n        const { widthUnits, widthScale, widthMinPixels, widthMaxPixels, wrapLongitude } = this.props;\n        const model = this.state.model;\n        const lineProps = {\n            widthUnits: UNIT[widthUnits],\n            widthScale,\n            widthMinPixels,\n            widthMaxPixels,\n            useShortestPath: wrapLongitude ? 1 : 0\n        };\n        model.shaderInputs.setProps({ line: lineProps });\n        model.draw(this.context.renderPass);\n        if (wrapLongitude) {\n            // Render a second copy for the clipped lines at the 180th meridian\n            model.shaderInputs.setProps({ line: { ...lineProps, useShortestPath: -1 } });\n            model.draw(this.context.renderPass);\n        }\n    }\n    _getModel() {\n        // TODO(ibgreen): WebGPU complication: Matching attachment state of the renderpass requires including a depth buffer\n        const parameters = this.context.device.type === 'webgpu'\n            ? {\n                depthWriteEnabled: true,\n                depthCompare: 'less-equal'\n            }\n            : undefined;\n        /*\n         *  (0, -1)-------------_(1, -1)\n         *       |          _,-\"  |\n         *       o      _,-\"      o\n         *       |  _,-\"          |\n         *   (0, 1)\"-------------(1, 1)\n         */\n        const positions = [0, -1, 0, 0, 1, 0, 1, -1, 0, 1, 1, 0];\n        return new Model(this.context.device, {\n            ...this.getShaders(),\n            id: this.props.id,\n            bufferLayout: this.getAttributeManager().getBufferLayouts(),\n            geometry: new Geometry({\n                topology: 'triangle-strip',\n                attributes: {\n                    positions: { size: 3, value: new Float32Array(positions) }\n                }\n            }),\n            parameters,\n            isInstanced: true\n        });\n    }\n}\nLineLayer.layerName = 'LineLayer';\nLineLayer.defaultProps = defaultProps;\nexport default LineLayer;\n//# sourceMappingURL=line-layer.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst wgslUniformBlock = /* wgsl */ `\\\nstruct PointCloudUniforms {\n  radiusPixels: f32,\n  sizeUnits: i32,\n};\n\n@group(0) @binding(3)\nvar<uniform> pointCloud: PointCloudUniforms;\n`;\nconst glslUniformBlock = `\\\nuniform pointCloudUniforms {\n  float radiusPixels;\n  highp int sizeUnits;\n} pointCloud;\n`;\nexport const pointCloudUniforms = {\n    name: 'pointCloud',\n    source: wgslUniformBlock,\n    vs: glslUniformBlock,\n    fs: glslUniformBlock,\n    uniformTypes: {\n        radiusPixels: 'f32',\n        sizeUnits: 'i32'\n    }\n};\n//# sourceMappingURL=point-cloud-layer-uniforms.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `\\\n#version 300 es\n#define SHADER_NAME point-cloud-layer-vertex-shader\nin vec3 positions;\nin vec3 instanceNormals;\nin vec4 instanceColors;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec3 instancePickingColors;\nout vec4 vColor;\nout vec2 unitPosition;\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.normal = project_normal(instanceNormals);\nunitPosition = positions.xy;\ngeometry.uv = unitPosition;\ngeometry.pickingColor = instancePickingColors;\nvec3 offset = vec3(positions.xy * project_size_to_pixel(pointCloud.radiusPixels, pointCloud.sizeUnits), 0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\nvec3 lightColor = lighting_getLightColor(instanceColors.rgb, project.cameraPosition, geometry.position.xyz, geometry.normal);\nvColor = vec4(lightColor, instanceColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;\n//# sourceMappingURL=point-cloud-layer-vertex.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `\\\n#version 300 es\n#define SHADER_NAME point-cloud-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nin vec2 unitPosition;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = unitPosition.xy;\nfloat distToCenter = length(unitPosition);\nif (distToCenter > 1.0) {\ndiscard;\n}\nfragColor = vColor;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;\n//# sourceMappingURL=point-cloud-layer-fragment.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default /* wgsl */ `\\\nstruct ConstantAttributes {\n  instanceNormals: vec3<f32>,\n  instanceColors: vec4<f32>,\n  instancePositions: vec3<f32>,\n  instancePositions64Low: vec3<f32>,\n  instancePickingColors: vec3<f32>\n};\n\nconst constants = ConstantAttributes(\n  vec3<f32>(1.0, 0.0, 0.0),\n  vec4<f32>(0.0, 0.0, 0.0, 1.0),\n  vec3<f32>(0.0),\n  vec3<f32>(0.0),\n  vec3<f32>(0.0)\n);\n\nstruct Attributes {\n  @builtin(instance_index) instanceIndex : u32,\n  @builtin(vertex_index) vertexIndex : u32,\n  @location(0) positions: vec3<f32>,\n  @location(1) instancePositions: vec3<f32>,\n  @location(2) instancePositions64Low: vec3<f32>,\n  @location(3) instanceNormals: vec3<f32>,\n  @location(4) instanceColors: vec4<f32>,\n  @location(5) instancePickingColors: vec3<f32>\n};\n\nstruct Varyings {\n  @builtin(position) position: vec4<f32>,\n  @location(0) vColor: vec4<f32>,\n  @location(1) unitPosition: vec2<f32>,\n};\n\n@vertex\nfn vertexMain(attributes: Attributes) -> Varyings {\n  var varyings: Varyings;\n  \n  // var geometry: Geometry;\n  // geometry.worldPosition = instancePositions;\n  // geometry.normal = project_normal(instanceNormals);\n\n  // position on the containing square in [-1, 1] space\n  varyings.unitPosition = attributes.positions.xy;\n  geometry.uv = varyings.unitPosition;\n  geometry.pickingColor = attributes.instancePickingColors;\n\n  // Find the center of the point and add the current vertex\n  let offset = vec3<f32>(attributes.positions.xy * project_unit_size_to_pixel(pointCloud.radiusPixels, pointCloud.sizeUnits), 0.0);\n  // DECKGL_FILTER_SIZE(offset, geometry);\n\n  varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, vec3<f32>(0.0)); // TODO , geometry.position);\n  // DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  let clipPixels = project_pixel_size_to_clipspace(offset.xy);\n  varyings.position.x += clipPixels.x;\n  varyings.position.y += clipPixels.y;\n\n  // Apply lighting\n  let lightColor = lighting_getLightColor2(attributes.instanceColors.rgb, project.cameraPosition, geometry.position.xyz, geometry.normal);\n\n  // Apply opacity to instance color, or return instance picking color\n  varyings.vColor = vec4(lightColor, attributes.instanceColors.a * color.opacity);\n  // DECKGL_FILTER_COLOR(vColor, geometry);\n\n  return varyings;\n}\n\n@fragment\nfn fragmentMain(varyings: Varyings) -> @location(0) vec4<f32> {\n  // var geometry: Geometry;\n  // geometry.uv = unitPosition.xy;\n\n  let distToCenter = length(varyings.unitPosition);\n  if (distToCenter > 1.0) {\n    discard;\n  }\n\n  var fragColor: vec4<f32>;\n\n  fragColor = varyings.vColor;\n  // DECKGL_FILTER_COLOR(fragColor, geometry);\n\n  // Apply premultiplied alpha as required by transparent canvas\n  fragColor = deckgl_premultiplied_alpha(fragColor);\n\n  return fragColor;\n}\n`;\n//# sourceMappingURL=point-cloud-layer.wgsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Layer, color, project32, picking, UNIT } from '@deck.gl/core';\nimport { Model, Geometry } from '@luma.gl/engine';\nimport { gouraudMaterial } from '@luma.gl/shadertools';\nimport { pointCloudUniforms } from \"./point-cloud-layer-uniforms.js\";\nimport vs from \"./point-cloud-layer-vertex.glsl.js\";\nimport fs from \"./point-cloud-layer-fragment.glsl.js\";\nimport source from \"./point-cloud-layer.wgsl.js\";\nconst DEFAULT_COLOR = [0, 0, 0, 255];\nconst DEFAULT_NORMAL = [0, 0, 1];\nconst defaultProps = {\n    sizeUnits: 'pixels',\n    pointSize: { type: 'number', min: 0, value: 10 }, //  point radius in pixels\n    getPosition: { type: 'accessor', value: (x) => x.position },\n    getNormal: { type: 'accessor', value: DEFAULT_NORMAL },\n    getColor: { type: 'accessor', value: DEFAULT_COLOR },\n    material: true,\n    // Depreated\n    radiusPixels: { deprecatedFor: 'pointSize' }\n};\n// support loaders.gl point cloud format\nfunction normalizeData(data) {\n    const { header, attributes } = data;\n    if (!header || !attributes) {\n        return;\n    }\n    data.length = header.vertexCount;\n    if (attributes.POSITION) {\n        attributes.instancePositions = attributes.POSITION;\n    }\n    if (attributes.NORMAL) {\n        attributes.instanceNormals = attributes.NORMAL;\n    }\n    if (attributes.COLOR_0) {\n        const { size, value } = attributes.COLOR_0;\n        attributes.instanceColors = { size, type: 'unorm8', value };\n    }\n}\n/** Render a point cloud with 3D positions, normals and colors. */\nclass PointCloudLayer extends Layer {\n    getShaders() {\n        return super.getShaders({\n            vs,\n            fs,\n            source,\n            modules: [project32, color, gouraudMaterial, picking, pointCloudUniforms]\n        });\n    }\n    initializeState() {\n        this.getAttributeManager().addInstanced({\n            instancePositions: {\n                size: 3,\n                type: 'float64',\n                fp64: this.use64bitPositions(),\n                transition: true,\n                accessor: 'getPosition'\n            },\n            instanceNormals: {\n                size: 3,\n                transition: true,\n                accessor: 'getNormal',\n                defaultValue: DEFAULT_NORMAL\n            },\n            instanceColors: {\n                size: this.props.colorFormat.length,\n                type: 'unorm8',\n                transition: true,\n                accessor: 'getColor',\n                defaultValue: DEFAULT_COLOR\n            }\n        });\n    }\n    updateState(params) {\n        const { changeFlags, props } = params;\n        super.updateState(params);\n        if (changeFlags.extensionsChanged) {\n            this.state.model?.destroy();\n            this.state.model = this._getModel();\n            this.getAttributeManager().invalidateAll();\n        }\n        if (changeFlags.dataChanged) {\n            normalizeData(props.data);\n        }\n    }\n    draw({ uniforms }) {\n        const { pointSize, sizeUnits } = this.props;\n        const model = this.state.model;\n        const pointCloudProps = {\n            sizeUnits: UNIT[sizeUnits],\n            radiusPixels: pointSize\n        };\n        model.shaderInputs.setProps({ pointCloud: pointCloudProps });\n        if (this.context.device.type === 'webgpu') {\n            // @ts-expect-error TODO - this line was needed during WebGPU port\n            model.instanceCount = this.props.data.length;\n        }\n        model.draw(this.context.renderPass);\n    }\n    _getModel() {\n        // TODO(ibgreen): WebGPU complication: Matching attachment state of the renderpass requires including a depth buffer\n        const parameters = this.context.device.type === 'webgpu'\n            ? {\n                depthWriteEnabled: true,\n                depthCompare: 'less-equal'\n            }\n            : undefined;\n        // a triangle that minimally cover the unit circle\n        const positions = [];\n        for (let i = 0; i < 3; i++) {\n            const angle = (i / 3) * Math.PI * 2;\n            positions.push(Math.cos(angle) * 2, Math.sin(angle) * 2, 0);\n        }\n        return new Model(this.context.device, {\n            ...this.getShaders(),\n            id: this.props.id,\n            bufferLayout: this.getAttributeManager().getBufferLayouts(),\n            geometry: new Geometry({\n                topology: 'triangle-list',\n                attributes: {\n                    positions: new Float32Array(positions)\n                }\n            }),\n            parameters,\n            isInstanced: true\n        });\n    }\n}\nPointCloudLayer.layerName = 'PointCloudLayer';\nPointCloudLayer.defaultProps = defaultProps;\nexport default PointCloudLayer;\n//# sourceMappingURL=point-cloud-layer.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst glslUniformBlock = `\\\nuniform scatterplotUniforms {\n  float radiusScale;\n  float radiusMinPixels;\n  float radiusMaxPixels;\n  float lineWidthScale;\n  float lineWidthMinPixels;\n  float lineWidthMaxPixels;\n  float stroked;\n  float filled;\n  bool antialiasing;\n  bool billboard;\n  highp int radiusUnits;\n  highp int lineWidthUnits;\n} scatterplot;\n`;\nexport const scatterplotUniforms = {\n    name: 'scatterplot',\n    vs: glslUniformBlock,\n    fs: glslUniformBlock,\n    source: '',\n    uniformTypes: {\n        radiusScale: 'f32',\n        radiusMinPixels: 'f32',\n        radiusMaxPixels: 'f32',\n        lineWidthScale: 'f32',\n        lineWidthMinPixels: 'f32',\n        lineWidthMaxPixels: 'f32',\n        stroked: 'f32',\n        filled: 'f32',\n        antialiasing: 'f32',\n        billboard: 'f32',\n        radiusUnits: 'i32',\n        lineWidthUnits: 'i32'\n    }\n};\n//# sourceMappingURL=scatterplot-layer-uniforms.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default /* glsl */ `\\\n#version 300 es\n#define SHADER_NAME scatterplot-layer-vertex-shader\nin vec3 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin float instanceRadius;\nin float instanceLineWidths;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin vec3 instancePickingColors;\nout vec4 vFillColor;\nout vec4 vLineColor;\nout vec2 unitPosition;\nout float innerUnitRadius;\nout float outerRadiusPixels;\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\nouterRadiusPixels = clamp(\nproject_size_to_pixel(scatterplot.radiusScale * instanceRadius, scatterplot.radiusUnits),\nscatterplot.radiusMinPixels, scatterplot.radiusMaxPixels\n);\nfloat lineWidthPixels = clamp(\nproject_size_to_pixel(scatterplot.lineWidthScale * instanceLineWidths, scatterplot.lineWidthUnits),\nscatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels\n);\nouterRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;\nfloat edgePadding = scatterplot.antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;\nunitPosition = edgePadding * positions.xy;\ngeometry.uv = unitPosition;\ngeometry.pickingColor = instancePickingColors;\ninnerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / outerRadiusPixels;\nif (scatterplot.billboard) {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = edgePadding * positions * outerRadiusPixels;\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vFillColor, geometry);\nvLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n`;\n//# sourceMappingURL=scatterplot-layer-vertex.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default /* glsl */ `\\\n#version 300 es\n#define SHADER_NAME scatterplot-layer-fragment-shader\nprecision highp float;\nin vec4 vFillColor;\nin vec4 vLineColor;\nin vec2 unitPosition;\nin float innerUnitRadius;\nin float outerRadiusPixels;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = unitPosition;\nfloat distToCenter = length(unitPosition) * outerRadiusPixels;\nfloat inCircle = scatterplot.antialiasing ?\nsmoothedge(distToCenter, outerRadiusPixels) :\nstep(distToCenter, outerRadiusPixels);\nif (inCircle == 0.0) {\ndiscard;\n}\nif (scatterplot.stroked > 0.5) {\nfloat isLine = scatterplot.antialiasing ?\nsmoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :\nstep(innerUnitRadius * outerRadiusPixels, distToCenter);\nif (scatterplot.filled > 0.5) {\nfragColor = mix(vFillColor, vLineColor, isLine);\n} else {\nif (isLine == 0.0) {\ndiscard;\n}\nfragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);\n}\n} else if (scatterplot.filled < 0.5) {\ndiscard;\n} else {\nfragColor = vFillColor;\n}\nfragColor.a *= inCircle;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;\n//# sourceMappingURL=scatterplot-layer-fragment.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default /* wgsl */ `\\\n// Main shaders\n\nstruct ScatterplotUniforms {\n  radiusScale: f32,\n  radiusMinPixels: f32,\n  radiusMaxPixels: f32,\n  lineWidthScale: f32,\n  lineWidthMinPixels: f32,\n  lineWidthMaxPixels: f32,\n  stroked: f32,\n  filled: i32,\n  antialiasing: i32,\n  billboard: i32,\n  radiusUnits: i32,\n  lineWidthUnits: i32,\n};\n\nstruct ConstantAttributeUniforms {\n instancePositions: vec3<f32>,\n instancePositions64Low: vec3<f32>,\n instanceRadius: f32,\n instanceLineWidths: f32,\n instanceFillColors: vec4<f32>,\n instanceLineColors: vec4<f32>,\n instancePickingColors: vec3<f32>,\n\n instancePositionsConstant: i32,\n instancePositions64LowConstant: i32,\n instanceRadiusConstant: i32,\n instanceLineWidthsConstant: i32,\n instanceFillColorsConstant: i32,\n instanceLineColorsConstant: i32,\n instancePickingColorsConstant: i32\n};\n\n@group(0) @binding(2) var<uniform> scatterplot: ScatterplotUniforms;\n\nstruct ConstantAttributes {\n  instancePositions: vec3<f32>,\n  instancePositions64Low: vec3<f32>,\n  instanceRadius: f32,\n  instanceLineWidths: f32,\n  instanceFillColors: vec4<f32>,\n  instanceLineColors: vec4<f32>,\n  instancePickingColors: vec3<f32>\n};\n\nconst constants = ConstantAttributes(\n  vec3<f32>(0.0),\n  vec3<f32>(0.0),\n  0.0,\n  0.0,\n  vec4<f32>(0.0, 0.0, 0.0, 1.0),\n  vec4<f32>(0.0, 0.0, 0.0, 1.0),\n  vec3<f32>(0.0)\n);\n\nstruct Attributes {\n  @builtin(instance_index) instanceIndex : u32,\n  @builtin(vertex_index) vertexIndex : u32,\n  @location(0) positions: vec3<f32>,\n  @location(1) instancePositions: vec3<f32>,\n  @location(2) instancePositions64Low: vec3<f32>,\n  @location(3) instanceRadius: f32,\n  @location(4) instanceLineWidths: f32,\n  @location(5) instanceFillColors: vec4<f32>,\n  @location(6) instanceLineColors: vec4<f32>,\n  @location(7) instancePickingColors: vec3<f32>\n};\n\nstruct Varyings {\n  @builtin(position) position: vec4<f32>,\n  @location(0) vFillColor: vec4<f32>,\n  @location(1) vLineColor: vec4<f32>,\n  @location(2) unitPosition: vec2<f32>,\n  @location(3) innerUnitRadius: f32,\n  @location(4) outerRadiusPixels: f32,\n};\n\n@vertex\nfn vertexMain(attributes: Attributes) -> Varyings {\n  var varyings: Varyings;\n\n  // Draw an inline geometry constant array clip space triangle to verify that rendering works.\n  // var positions = array<vec2<f32>, 3>(vec2(0.0, 0.5), vec2(-0.5, -0.5), vec2(0.5, -0.5));\n  // if (attributes.instanceIndex == 0) {\n  //   varyings.position = vec4<f32>(positions[attributes.vertexIndex], 0.0, 1.0);\n  //   return varyings;\n  // }\n\n  // var geometry: Geometry;\n  // geometry.worldPosition = instancePositions;\n\n  // Multiply out radius and clamp to limits\n  varyings.outerRadiusPixels = clamp(\n    project_unit_size_to_pixel(scatterplot.radiusScale * attributes.instanceRadius, scatterplot.radiusUnits),\n    scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels\n  );\n\n  // Multiply out line width and clamp to limits\n  let lineWidthPixels = clamp(\n    project_unit_size_to_pixel(scatterplot.lineWidthScale * attributes.instanceLineWidths, scatterplot.lineWidthUnits),\n    scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels\n  );\n\n  // outer radius needs to offset by half stroke width\n  varyings.outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;\n  // Expand geometry to accommodate edge smoothing\n  let edgePadding = select(\n    (varyings.outerRadiusPixels + SMOOTH_EDGE_RADIUS) / varyings.outerRadiusPixels,\n    1.0,\n    scatterplot.antialiasing != 0\n  );\n\n  // position on the containing square in [-1, 1] space\n  varyings.unitPosition = edgePadding * attributes.positions.xy;\n  geometry.uv = varyings.unitPosition;\n  geometry.pickingColor = attributes.instancePickingColors;\n\n  varyings.innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / varyings.outerRadiusPixels;\n\n  if (scatterplot.billboard != 0) {\n    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, vec3<f32>(0.0)); // TODO , geometry.position);\n    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);\n    let offset = attributes.positions; // * edgePadding * varyings.outerRadiusPixels;\n    // DECKGL_FILTER_SIZE(offset, geometry);\n    let clipPixels = project_pixel_size_to_clipspace(offset.xy);\n    varyings.position.x = clipPixels.x;\n    varyings.position.y = clipPixels.y;\n  } else {\n    let offset = edgePadding * attributes.positions * project_pixel_size_float(varyings.outerRadiusPixels);\n    // DECKGL_FILTER_SIZE(offset, geometry);\n    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, offset); // TODO , geometry.position);\n    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);\n  }\n\n  // Apply opacity to instance color, or return instance picking color\n  varyings.vFillColor = vec4<f32>(attributes.instanceFillColors.rgb, attributes.instanceFillColors.a * color.opacity);\n  // DECKGL_FILTER_COLOR(varyings.vFillColor, geometry);\n  varyings.vLineColor = vec4<f32>(attributes.instanceLineColors.rgb, attributes.instanceLineColors.a * color.opacity);\n  // DECKGL_FILTER_COLOR(varyings.vLineColor, geometry);\n\n  return varyings;\n}\n\n@fragment\nfn fragmentMain(varyings: Varyings) -> @location(0) vec4<f32> {\n  // var geometry: Geometry;\n  // geometry.uv = unitPosition;\n\n  let distToCenter = length(varyings.unitPosition) * varyings.outerRadiusPixels;\n  let inCircle = select(\n    smoothedge(distToCenter, varyings.outerRadiusPixels),\n    step(distToCenter, varyings.outerRadiusPixels),\n    scatterplot.antialiasing != 0\n  );\n\n  if (inCircle == 0.0) {\n    discard;\n  }\n\n  var fragColor: vec4<f32>;\n\n  if (scatterplot.stroked != 0) {\n    let isLine = select(\n      smoothedge(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),\n      step(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),\n      scatterplot.antialiasing != 0\n    );\n\n    if (scatterplot.filled != 0) {\n      fragColor = mix(varyings.vFillColor, varyings.vLineColor, isLine);\n    } else {\n      if (isLine == 0.0) {\n        discard;\n      }\n      fragColor = vec4<f32>(varyings.vLineColor.rgb, varyings.vLineColor.a * isLine);\n    }\n  } else if (scatterplot.filled == 0) {\n    discard;\n  } else {\n    fragColor = varyings.vFillColor;\n  }\n\n  fragColor.a *= inCircle;\n  // DECKGL_FILTER_COLOR(fragColor, geometry);\n\n  // Apply premultiplied alpha as required by transparent canvas\n  fragColor = deckgl_premultiplied_alpha(fragColor);\n\n  return fragColor;\n  // return vec4<f32>(0, 0, 1, 1);\n}\n`;\n//# sourceMappingURL=scatterplot-layer.wgsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Layer, color, project32, picking, UNIT } from '@deck.gl/core';\nimport { Model, Geometry } from '@luma.gl/engine';\nimport { scatterplotUniforms } from \"./scatterplot-layer-uniforms.js\";\nimport vs from \"./scatterplot-layer-vertex.glsl.js\";\nimport fs from \"./scatterplot-layer-fragment.glsl.js\";\nimport source from \"./scatterplot-layer.wgsl.js\";\nconst DEFAULT_COLOR = [0, 0, 0, 255];\nconst defaultProps = {\n    radiusUnits: 'meters',\n    radiusScale: { type: 'number', min: 0, value: 1 },\n    radiusMinPixels: { type: 'number', min: 0, value: 0 }, //  min point radius in pixels\n    radiusMaxPixels: { type: 'number', min: 0, value: Number.MAX_SAFE_INTEGER }, // max point radius in pixels\n    lineWidthUnits: 'meters',\n    lineWidthScale: { type: 'number', min: 0, value: 1 },\n    lineWidthMinPixels: { type: 'number', min: 0, value: 0 },\n    lineWidthMaxPixels: { type: 'number', min: 0, value: Number.MAX_SAFE_INTEGER },\n    stroked: false,\n    filled: true,\n    billboard: false,\n    antialiasing: true,\n    getPosition: { type: 'accessor', value: (x) => x.position },\n    getRadius: { type: 'accessor', value: 1 },\n    getFillColor: { type: 'accessor', value: DEFAULT_COLOR },\n    getLineColor: { type: 'accessor', value: DEFAULT_COLOR },\n    getLineWidth: { type: 'accessor', value: 1 },\n    // deprecated\n    strokeWidth: { deprecatedFor: 'getLineWidth' },\n    outline: { deprecatedFor: 'stroked' },\n    getColor: { deprecatedFor: ['getFillColor', 'getLineColor'] }\n};\n/** Render circles at given coordinates. */\nclass ScatterplotLayer extends Layer {\n    getShaders() {\n        return super.getShaders({\n            vs,\n            fs,\n            source,\n            modules: [project32, color, picking, scatterplotUniforms]\n        });\n    }\n    initializeState() {\n        this.getAttributeManager().addInstanced({\n            instancePositions: {\n                size: 3,\n                type: 'float64',\n                fp64: this.use64bitPositions(),\n                transition: true,\n                accessor: 'getPosition'\n            },\n            instanceRadius: {\n                size: 1,\n                transition: true,\n                accessor: 'getRadius',\n                defaultValue: 1\n            },\n            instanceFillColors: {\n                size: this.props.colorFormat.length,\n                transition: true,\n                type: 'unorm8',\n                accessor: 'getFillColor',\n                defaultValue: [0, 0, 0, 255]\n            },\n            instanceLineColors: {\n                size: this.props.colorFormat.length,\n                transition: true,\n                type: 'unorm8',\n                accessor: 'getLineColor',\n                defaultValue: [0, 0, 0, 255]\n            },\n            instanceLineWidths: {\n                size: 1,\n                transition: true,\n                accessor: 'getLineWidth',\n                defaultValue: 1\n            }\n        });\n    }\n    updateState(params) {\n        super.updateState(params);\n        if (params.changeFlags.extensionsChanged) {\n            this.state.model?.destroy();\n            this.state.model = this._getModel();\n            this.getAttributeManager().invalidateAll();\n        }\n    }\n    draw({ uniforms }) {\n        const { radiusUnits, radiusScale, radiusMinPixels, radiusMaxPixels, stroked, filled, billboard, antialiasing, lineWidthUnits, lineWidthScale, lineWidthMinPixels, lineWidthMaxPixels } = this.props;\n        const scatterplotProps = {\n            stroked,\n            filled,\n            billboard,\n            antialiasing,\n            radiusUnits: UNIT[radiusUnits],\n            radiusScale,\n            radiusMinPixels,\n            radiusMaxPixels,\n            lineWidthUnits: UNIT[lineWidthUnits],\n            lineWidthScale,\n            lineWidthMinPixels,\n            lineWidthMaxPixels\n        };\n        const model = this.state.model;\n        model.shaderInputs.setProps({ scatterplot: scatterplotProps });\n        if (this.context.device.type === 'webgpu') {\n            // @ts-expect-error TODO - this line was needed during WebGPU port\n            model.instanceCount = this.props.data.length;\n        }\n        model.draw(this.context.renderPass);\n    }\n    _getModel() {\n        // TODO(ibgreen): WebGPU complication: Matching attachment state of the renderpass requires including a depth buffer\n        const parameters = this.context.device.type === 'webgpu'\n            ? {\n                depthWriteEnabled: true,\n                depthCompare: 'less-equal'\n            }\n            : undefined;\n        // a square that minimally cover the unit circle\n        const positions = [-1, -1, 0, 1, -1, 0, -1, 1, 0, 1, 1, 0];\n        return new Model(this.context.device, {\n            ...this.getShaders(),\n            id: this.props.id,\n            bufferLayout: this.getAttributeManager().getBufferLayouts(),\n            geometry: new Geometry({\n                topology: 'triangle-strip',\n                attributes: {\n                    positions: { size: 3, value: new Float32Array(positions) }\n                }\n            }),\n            isInstanced: true,\n            parameters\n        });\n    }\n}\nScatterplotLayer.defaultProps = defaultProps;\nScatterplotLayer.layerName = 'ScatterplotLayer';\nexport default ScatterplotLayer;\n//# sourceMappingURL=scatterplot-layer.js.map","// math.gl\n// SPDX-License-Identifier: MIT and ISC\n// Copyright (c) vis.gl contributors\n/* eslint-disable max-statements, max-depth, complexity, no-unused-expressions */\nimport { equals } from '@math.gl/core';\nexport const WINDING = {\n    CLOCKWISE: 1,\n    COUNTER_CLOCKWISE: -1\n};\n/**\n * Checks winding direction of the polygon and reverses the polygon in case of opposite winding direction.\n * Note: points are modified in-place.\n * @param points An array that represents points of the polygon.\n * @param direction Requested winding direction. 1 is for clockwise, -1 for counterclockwise winding direction.\n * @param options Parameters of the polygon.\n * @return Returns true if the winding direction was changed.\n */\nexport function modifyPolygonWindingDirection(points, direction, options = {}) {\n    const windingDirection = getPolygonWindingDirection(points, options);\n    if (windingDirection !== direction) {\n        reversePolygon(points, options);\n        return true;\n    }\n    return false;\n}\n/**\n * Returns winding direction of the polygon.\n * @param points An array that represents points of the polygon.\n * @param options Parameters of the polygon.\n * @returns Winding direction of the polygon.\n */\nexport function getPolygonWindingDirection(points, options = {}) {\n    return Math.sign(getPolygonSignedArea(points, options));\n}\nexport const DimIndex = {\n    x: 0,\n    y: 1,\n    z: 2\n};\n/**\n * Returns signed area of the polygon.\n * @param points An array that represents points of the polygon.\n * @param options Parameters of the polygon.\n * @returns Signed area of the polygon.\n * https://en.wikipedia.org/wiki/Shoelace_formula\n */\nexport function getPolygonSignedArea(points, options = {}) {\n    const { start = 0, end = points.length, plane = 'xy' } = options;\n    const dim = options.size || 2;\n    let area = 0;\n    const i0 = DimIndex[plane[0]];\n    const i1 = DimIndex[plane[1]];\n    for (let i = start, j = end - dim; i < end; i += dim) {\n        area += (points[i + i0] - points[j + i0]) * (points[i + i1] + points[j + i1]);\n        j = i;\n    }\n    return area / 2;\n}\n/**\n * Calls the visitor callback for each segment in the polygon.\n * @param points An array that represents points of the polygon\n * @param visitor A callback to call for each segment.\n * @param options Parameters of the polygon.\n */\nexport function forEachSegmentInPolygon(points, visitor, options = {}) {\n    const { start = 0, end = points.length, size = 2, isClosed } = options;\n    const numPoints = (end - start) / size;\n    for (let i = 0; i < numPoints - 1; ++i) {\n        visitor(points[start + i * size], points[start + i * size + 1], points[start + (i + 1) * size], points[start + (i + 1) * size + 1], i, i + 1);\n    }\n    const endPointIndex = start + (numPoints - 1) * size;\n    const isClosedEx = isClosed ||\n        (equals(points[start], points[endPointIndex]) &&\n            equals(points[start + 1], points[endPointIndex + 1]));\n    if (!isClosedEx) {\n        visitor(points[endPointIndex], points[endPointIndex + 1], points[start], points[start + 1], numPoints - 1, 0);\n    }\n}\nfunction reversePolygon(points, options) {\n    const { start = 0, end = points.length, size = 2 } = options;\n    const numPoints = (end - start) / size;\n    const numSwaps = Math.floor(numPoints / 2);\n    for (let i = 0; i < numSwaps; ++i) {\n        const b1 = start + i * size;\n        const b2 = start + (numPoints - 1 - i) * size;\n        for (let j = 0; j < size; ++j) {\n            const tmp = points[b1 + j];\n            points[b1 + j] = points[b2 + j];\n            points[b2 + j] = tmp;\n        }\n    }\n}\n/**\n * Checks winding direction of the polygon and reverses the polygon in case of opposite winding direction.\n * Note: points are modified in-place.\n * @param points Array of points that represent the polygon.\n * @param direction Requested winding direction. 1 is for clockwise, -1 for counterclockwise winding direction.\n * @param options Parameters of the polygon.\n * @return Returns true if the winding direction was changed.\n */\nexport function modifyPolygonWindingDirectionPoints(points, direction, options = {}) {\n    const currentDirection = getPolygonWindingDirectionPoints(points, options);\n    if (currentDirection !== direction) {\n        points.reverse();\n        return true;\n    }\n    return false;\n}\n/**\n * Returns winding direction of the polygon.\n * @param points Array of points that represent the polygon.\n * @param options Parameters of the polygon.\n * @returns Winding direction of the polygon.\n */\nexport function getPolygonWindingDirectionPoints(points, options = {}) {\n    return Math.sign(getPolygonSignedAreaPoints(points, options));\n}\n/**\n * Returns signed area of the polygon.\n * @param points Array of points that represent the polygon.\n * @param options Parameters of the polygon.\n * @returns Signed area of the polygon.\n */\nexport function getPolygonSignedAreaPoints(points, options = {}) {\n    // https://en.wikipedia.org/wiki/Shoelace_formula\n    const { start = 0, end = points.length, plane = 'xy' } = options;\n    let area = 0;\n    const i0 = DimIndex[plane[0]];\n    const i1 = DimIndex[plane[1]];\n    for (let i = start, j = end - 1; i < end; ++i) {\n        area += (points[i][i0] - points[j][i0]) * (points[i][i1] + points[j][i1]);\n        j = i;\n    }\n    return area / 2;\n}\n/**\n * Calls visitor callback for each segment in the polygon.\n * @param points Array of points that represent the polygon.\n * @param visitor A callback to call for each segment.\n * @param options Parameters of the polygon.\n */\nexport function forEachSegmentInPolygonPoints(points, visitor, options = {}) {\n    const { start = 0, end = points.length, isClosed } = options;\n    for (let i = start; i < end - 1; ++i) {\n        visitor(points[i], points[i + 1], i, i + 1);\n    }\n    const isClosedEx = isClosed || equals(points[end - 1], points[0]);\n    if (!isClosedEx) {\n        visitor(points[end - 1], points[0], end - 1, 0);\n    }\n}\n//# sourceMappingURL=polygon-utils.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport function push(target, source) {\n    const size = source.length;\n    const startIndex = target.length;\n    // dedupe, if source is the same point as the last vertex\n    if (startIndex > 0) {\n        let isDuplicate = true;\n        for (let i = 0; i < size; i++) {\n            if (target[startIndex - size + i] !== source[i]) {\n                isDuplicate = false;\n                break;\n            }\n        }\n        if (isDuplicate) {\n            return false;\n        }\n    }\n    for (let i = 0; i < size; i++) {\n        target[startIndex + i] = source[i];\n    }\n    return true;\n}\nexport function copy(target, source) {\n    const size = source.length;\n    for (let i = 0; i < size; i++) {\n        target[i] = source[i];\n    }\n}\nexport function getPointAtIndex(positions, index, size, offset, out = []) {\n    const startI = offset + index * size;\n    for (let i = 0; i < size; i++) {\n        out[i] = positions[startI + i];\n    }\n    return out;\n}\n//# sourceMappingURL=utils.js.map","// math.gl\n// SPDX-License-Identifier: MIT and ISC\n// Copyright (c) vis.gl contributors\n/*\n  Adapted from https://github.com/mapbox/lineclip to work with flat arrays\n  and 3d positions\n\n  ISC License\n\n  Copyright (c) 2015, Mapbox\n\n  Permission to use, copy, modify, and/or distribute this software for any purpose\n  with or without fee is hereby granted, provided that the above copyright notice\n  and this permission notice appear in all copies.\n\n  THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND\n  FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS\n  OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER\n  TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF\n  THIS SOFTWARE.\n\n */\n/* eslint-disable max-statements, max-depth, complexity */\nimport { push, copy, getPointAtIndex } from \"./utils.js\";\n/**\n * Cohen-Sutherland line clipping algorithm, adapted to efficiently\n * handle polylines rather than just segments\n */\nexport function clipPolyline(positions, bbox, options) {\n    const { size = 2, startIndex = 0, endIndex = positions.length } = options || {};\n    const numPoints = (endIndex - startIndex) / size;\n    const result = [];\n    let part = [];\n    let a;\n    let b;\n    let codeA = -1;\n    let codeB;\n    let lastCode;\n    for (let i = 1; i < numPoints; i++) {\n        a = getPointAtIndex(positions, i - 1, size, startIndex, a);\n        b = getPointAtIndex(positions, i, size, startIndex, b);\n        if (codeA < 0) {\n            codeA = bitCode(a, bbox);\n        }\n        codeB = lastCode = bitCode(b, bbox);\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            if (!(codeA | codeB)) {\n                // accept\n                push(part, a);\n                if (codeB !== lastCode) {\n                    // segment went outside\n                    push(part, b);\n                    if (i < numPoints - 1) {\n                        // start a new line\n                        result.push(part);\n                        part = [];\n                    }\n                }\n                else if (i === numPoints - 1) {\n                    push(part, b);\n                }\n                break;\n            }\n            else if (codeA & codeB) {\n                // trivial reject\n                break;\n            }\n            else if (codeA) {\n                // a outside, intersect with clip edge\n                intersect(a, b, codeA, bbox, a);\n                codeA = bitCode(a, bbox);\n            }\n            else {\n                // b outside\n                intersect(a, b, codeB, bbox, b);\n                codeB = bitCode(b, bbox);\n            }\n        }\n        codeA = lastCode;\n    }\n    if (part.length)\n        result.push(part);\n    return result;\n}\n/**\n * Sutherland-Hodgeman polygon clipping algorithm\n * polygon must be closed (first vertex == last vertex)\n */\nexport function clipPolygon(positions, bbox, options) {\n    const { size = 2, endIndex = positions.length } = options || {};\n    let { startIndex = 0 } = options || {};\n    let numPoints = (endIndex - startIndex) / size;\n    let result;\n    let p;\n    let prev;\n    let inside;\n    let prevInside;\n    // clip against each side of the clip rectangle\n    for (let edge = 1; edge <= 8; edge *= 2) {\n        result = [];\n        prev = getPointAtIndex(positions, numPoints - 1, size, startIndex, prev);\n        prevInside = !(bitCode(prev, bbox) & edge);\n        for (let i = 0; i < numPoints; i++) {\n            p = getPointAtIndex(positions, i, size, startIndex, p);\n            inside = !(bitCode(p, bbox) & edge);\n            // if segment goes through the clip window, add an intersection\n            if (inside !== prevInside)\n                push(result, intersect(prev, p, edge, bbox));\n            if (inside)\n                push(result, p); // add a point if it's inside\n            copy(prev, p);\n            prevInside = inside;\n        }\n        // close loop\n        positions = result;\n        startIndex = 0;\n        numPoints = result.length / size;\n        if (!numPoints)\n            break;\n    }\n    return result;\n}\n/** intersect a segment against one of the 4 lines that make up the bbox */\nexport function intersect(a, b, edge, bbox, out = []) {\n    let t;\n    // Forces out[snapI] to be on the bbox edge\n    // Interpolation introduces precision issue which may cause lineclip to be\n    // stuck in an infinite loop\n    let snap;\n    if (edge & 8) {\n        // top\n        t = (bbox[3] - a[1]) / (b[1] - a[1]);\n        snap = 3;\n    }\n    else if (edge & 4) {\n        // bottom\n        t = (bbox[1] - a[1]) / (b[1] - a[1]);\n        snap = 1;\n    }\n    else if (edge & 2) {\n        // right\n        t = (bbox[2] - a[0]) / (b[0] - a[0]);\n        snap = 2;\n    }\n    else if (edge & 1) {\n        // left\n        t = (bbox[0] - a[0]) / (b[0] - a[0]);\n        snap = 0;\n    }\n    else {\n        return null;\n    }\n    for (let i = 0; i < a.length; i++) {\n        out[i] = (snap & 1) === i ? bbox[snap] : t * (b[i] - a[i]) + a[i];\n    }\n    return out;\n}\n/**\n * bit code reflects the point position relative to the bbox:\n *         left  mid  right\n *    top  1001  1000  1010\n *    mid  0001  0000  0010\n * bottom  0101  0100  0110\n */\nexport function bitCode(p, bbox) {\n    let code = 0;\n    if (p[0] < bbox[0])\n        code |= 1;\n    // left\n    else if (p[0] > bbox[2])\n        code |= 2; // right\n    if (p[1] < bbox[1])\n        code |= 4;\n    // bottom\n    else if (p[1] > bbox[3])\n        code |= 8; // top\n    return code;\n}\n//# sourceMappingURL=lineclip.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/* eslint-disable max-statements, max-depth, complexity, no-unused-expressions */\nimport { bitCode, intersect } from \"./lineclip.js\";\nimport { getPointAtIndex, copy, push } from \"./utils.js\";\nexport function cutPolylineByGrid(positions, options) {\n    const { size = 2, broken = false, gridResolution = 10, gridOffset = [0, 0], startIndex = 0, endIndex = positions.length } = options || {};\n    const numPoints = (endIndex - startIndex) / size;\n    let part = [];\n    const result = [part];\n    const a = getPointAtIndex(positions, 0, size, startIndex);\n    let b;\n    let codeB;\n    const cell = getGridCell(a, gridResolution, gridOffset, []);\n    const scratchPoint = [];\n    push(part, a);\n    for (let i = 1; i < numPoints; i++) {\n        b = getPointAtIndex(positions, i, size, startIndex, b);\n        codeB = bitCode(b, cell);\n        while (codeB) {\n            // find the intersection with the current cell\n            intersect(a, b, codeB, cell, scratchPoint);\n            const codeAlt = bitCode(scratchPoint, cell);\n            if (codeAlt) {\n                intersect(a, scratchPoint, codeAlt, cell, scratchPoint);\n                codeB = codeAlt;\n            }\n            push(part, scratchPoint);\n            // move to the next cell\n            copy(a, scratchPoint);\n            moveToNeighborCell(cell, gridResolution, codeB);\n            if (broken && part.length > size) {\n                part = [];\n                result.push(part);\n                push(part, a);\n            }\n            codeB = bitCode(b, cell);\n        }\n        push(part, b);\n        copy(a, b);\n    }\n    return broken ? result : result[0];\n}\nconst TYPE_INSIDE = 0;\nconst TYPE_BORDER = 1;\n/**\n * Cuts a polygon by a pre-defined grid\n */\nexport function cutPolygonByGrid(positions, holeIndices = null, options) {\n    if (!positions.length) {\n        // input is empty\n        return [];\n    }\n    const { size = 2, gridResolution = 10, gridOffset = [0, 0], edgeTypes = false } = options || {};\n    const result = [];\n    const queue = [\n        {\n            pos: positions,\n            types: edgeTypes ? new Array(positions.length / size).fill(TYPE_BORDER) : null,\n            holes: holeIndices || []\n        }\n    ];\n    const bbox = [[], []];\n    // @ts-ignore\n    let cell = [];\n    // Recursively bisect polygon until every part fit in a single grid cell\n    while (queue.length) {\n        const { pos, types, holes } = queue.shift();\n        // Get the bounding box of the outer polygon\n        getBoundingBox(pos, size, holes[0] || pos.length, bbox);\n        cell = getGridCell(bbox[0], gridResolution, gridOffset, cell);\n        const code = bitCode(bbox[1], cell);\n        if (code) {\n            // Split the outer ring at the boundary\n            let parts = bisectPolygon(pos, types, size, 0, holes[0] || pos.length, cell, code);\n            const polygonLow = { pos: parts[0].pos, types: parts[0].types, holes: [] };\n            const polygonHigh = { pos: parts[1].pos, types: parts[1].types, holes: [] };\n            queue.push(polygonLow, polygonHigh);\n            // Split each hole at the boundary\n            for (let i = 0; i < holes.length; i++) {\n                parts = bisectPolygon(pos, types, size, holes[i], holes[i + 1] || pos.length, cell, code);\n                if (parts[0]) {\n                    polygonLow.holes.push(polygonLow.pos.length);\n                    polygonLow.pos = concatInPlace(polygonLow.pos, parts[0].pos);\n                    if (edgeTypes) {\n                        polygonLow.types = concatInPlace(polygonLow.types, parts[0].types);\n                    }\n                }\n                if (parts[1]) {\n                    polygonHigh.holes.push(polygonHigh.pos.length);\n                    polygonHigh.pos = concatInPlace(polygonHigh.pos, parts[1].pos);\n                    if (edgeTypes) {\n                        polygonHigh.types = concatInPlace(polygonHigh.types, parts[1].types);\n                    }\n                }\n            }\n        }\n        else {\n            // Polygon fits in a single cell, no more processing required\n            const polygon = { positions: pos };\n            if (edgeTypes) {\n                polygon.edgeTypes = types;\n            }\n            if (holes.length) {\n                polygon.holeIndices = holes;\n            }\n            result.push(polygon);\n        }\n    }\n    return result;\n}\n// edgeTypes:\n// TYPE_BORDER - edge from the original polygon\n// TYPE_INSIDE - inside the original polygon\n// eslint-disable-next-line max-params\nfunction bisectPolygon(positions, edgeTypes, size, startIndex, endIndex, bbox, edge) {\n    const numPoints = (endIndex - startIndex) / size;\n    const resultLow = [];\n    const resultHigh = [];\n    const typesLow = [];\n    const typesHigh = [];\n    const scratchPoint = [];\n    let p;\n    let side;\n    let type;\n    const prev = getPointAtIndex(positions, numPoints - 1, size, startIndex);\n    let prevSide = Math.sign(edge & 8 ? prev[1] - bbox[3] : prev[0] - bbox[2]);\n    let prevType = edgeTypes && edgeTypes[numPoints - 1];\n    let lowPointCount = 0;\n    let highPointCount = 0;\n    for (let i = 0; i < numPoints; i++) {\n        p = getPointAtIndex(positions, i, size, startIndex, p);\n        side = Math.sign(edge & 8 ? p[1] - bbox[3] : p[0] - bbox[2]);\n        type = edgeTypes && edgeTypes[startIndex / size + i];\n        // if segment goes through the boundary, add an intersection\n        if (side && prevSide && prevSide !== side) {\n            intersect(prev, p, edge, bbox, scratchPoint);\n            push(resultLow, scratchPoint) && typesLow.push(prevType);\n            push(resultHigh, scratchPoint) && typesHigh.push(prevType);\n        }\n        if (side <= 0) {\n            push(resultLow, p) && typesLow.push(type);\n            lowPointCount -= side;\n        }\n        else if (typesLow.length) {\n            typesLow[typesLow.length - 1] = TYPE_INSIDE;\n        }\n        if (side >= 0) {\n            push(resultHigh, p) && typesHigh.push(type);\n            highPointCount += side;\n        }\n        else if (typesHigh.length) {\n            typesHigh[typesHigh.length - 1] = TYPE_INSIDE;\n        }\n        copy(prev, p);\n        prevSide = side;\n        prevType = type;\n    }\n    return [\n        lowPointCount ? { pos: resultLow, types: edgeTypes && typesLow } : null,\n        highPointCount ? { pos: resultHigh, types: edgeTypes && typesHigh } : null\n    ];\n}\nfunction getGridCell(p, gridResolution, gridOffset, out) {\n    const left = Math.floor((p[0] - gridOffset[0]) / gridResolution) * gridResolution + gridOffset[0];\n    const bottom = Math.floor((p[1] - gridOffset[1]) / gridResolution) * gridResolution + gridOffset[1];\n    out[0] = left;\n    out[1] = bottom;\n    out[2] = left + gridResolution;\n    out[3] = bottom + gridResolution;\n    return out;\n}\nfunction moveToNeighborCell(cell, gridResolution, edge) {\n    if (edge & 8) {\n        // top\n        cell[1] += gridResolution;\n        cell[3] += gridResolution;\n    }\n    else if (edge & 4) {\n        // bottom\n        cell[1] -= gridResolution;\n        cell[3] -= gridResolution;\n    }\n    else if (edge & 2) {\n        // right\n        cell[0] += gridResolution;\n        cell[2] += gridResolution;\n    }\n    else if (edge & 1) {\n        // left\n        cell[0] -= gridResolution;\n        cell[2] -= gridResolution;\n    }\n}\nfunction getBoundingBox(positions, size, endIndex, out) {\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n    for (let i = 0; i < endIndex; i += size) {\n        const x = positions[i];\n        const y = positions[i + 1];\n        minX = x < minX ? x : minX;\n        maxX = x > maxX ? x : maxX;\n        minY = y < minY ? y : minY;\n        maxY = y > maxY ? y : maxY;\n    }\n    out[0][0] = minX;\n    out[0][1] = minY;\n    out[1][0] = maxX;\n    out[1][1] = maxY;\n    return out;\n}\nfunction concatInPlace(arr1, arr2) {\n    for (let i = 0; i < arr2.length; i++) {\n        arr1.push(arr2[i]);\n    }\n    return arr1;\n}\n//# sourceMappingURL=cut-by-grid.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { cutPolylineByGrid, cutPolygonByGrid } from \"./cut-by-grid.js\";\nimport { getPointAtIndex, push } from \"./utils.js\";\n// https://en.wikipedia.org/wiki/Web_Mercator_projection\nconst DEFAULT_MAX_LATITUDE = 85.051129;\n/** https://user-images.githubusercontent.com/2059298/78465769-938b7a00-76ae-11ea-9b95-1f4c26425ab9.png */\nexport function cutPolylineByMercatorBounds(positions, options) {\n    const { size = 2, startIndex = 0, endIndex = positions.length, normalize = true } = options || {};\n    // Remap longitudes so that each segment takes the shorter path\n    const newPositions = positions.slice(startIndex, endIndex);\n    wrapLongitudesForShortestPath(newPositions, size, 0, endIndex - startIndex);\n    const parts = cutPolylineByGrid(newPositions, {\n        size,\n        broken: true,\n        gridResolution: 360,\n        gridOffset: [-180, -180]\n    });\n    if (normalize) {\n        // Each part is guaranteed to be in a single copy of the world\n        // Map longitudes back to [-180, 180]\n        for (const part of parts) {\n            shiftLongitudesIntoRange(part, size);\n        }\n    }\n    return parts;\n}\n/** https://user-images.githubusercontent.com/2059298/78465770-94241080-76ae-11ea-809a-6a8534dac1d9.png */\nexport function cutPolygonByMercatorBounds(positions, holeIndices = null, options) {\n    const { size = 2, normalize = true, edgeTypes = false } = options || {};\n    holeIndices = holeIndices || [];\n    const newPositions = [];\n    const newHoleIndices = [];\n    let srcStartIndex = 0;\n    let targetIndex = 0;\n    for (let ringIndex = 0; ringIndex <= holeIndices.length; ringIndex++) {\n        // srcStartIndex/srcEndIndex define the ring in the original positions\n        const srcEndIndex = holeIndices[ringIndex] || positions.length;\n        // targetStartIndex/targetIndex define the ring in newPositions\n        const targetStartIndex = targetIndex;\n        // In case the ring contains a pole (e.g. Antarctica), we'll have to insert vertices\n        // The insertion point is defined by the vertex closest to the pole\n        // Split the the ring by the insertion point when copying to newPositions\n        const splitIndex = findSplitIndex(positions, size, srcStartIndex, srcEndIndex);\n        for (let i = splitIndex; i < srcEndIndex; i++) {\n            newPositions[targetIndex++] = positions[i];\n        }\n        for (let i = srcStartIndex; i < splitIndex; i++) {\n            newPositions[targetIndex++] = positions[i];\n        }\n        // Remap longitudes so that each segment takes the shorter path\n        wrapLongitudesForShortestPath(newPositions, size, targetStartIndex, targetIndex);\n        // Handle the case when the ring contains a pole\n        insertPoleVertices(newPositions, size, targetStartIndex, targetIndex, options?.maxLatitude);\n        srcStartIndex = srcEndIndex;\n        newHoleIndices[ringIndex] = targetIndex;\n    }\n    newHoleIndices.pop();\n    const parts = cutPolygonByGrid(newPositions, newHoleIndices, {\n        size,\n        gridResolution: 360,\n        gridOffset: [-180, -180],\n        edgeTypes\n    });\n    if (normalize) {\n        // Each part is guaranteed to be in a single copy of the world\n        // Map longitudes back to [-180, 180]\n        for (const part of parts) {\n            // @ts-expect-error (mutates readonly array) May mutate newPositions, which is created by us\n            shiftLongitudesIntoRange(part.positions, size);\n        }\n    }\n    return parts;\n}\n/* Helpers */\n// See comments for insertPoleVertices\nfunction findSplitIndex(positions, size, startIndex, endIndex) {\n    let maxLat = -1;\n    let pointIndex = -1;\n    for (let i = startIndex + 1; i < endIndex; i += size) {\n        const lat = Math.abs(positions[i]);\n        if (lat > maxLat) {\n            maxLat = lat;\n            pointIndex = i - 1;\n        }\n    }\n    return pointIndex;\n}\n// https://user-images.githubusercontent.com/2059298/78857483-5987e400-79de-11ea-98fc-0631287a8431.png\n//\n// If the polygon contains a pole, to tesselate it correctly, we need to insert the edge\n// of map into the polygon. This requires adding two vertices that represent the pole, by\n// drawing a perpendicular line to the Mercator map edge from a selected vertex on the ring.\n//\n// We select the insertion position carefully so that the inserted line segments do not\n// intersect with the ring itself. This is ensured by findSplitIndex, which returns the\n// vertex closest to the pole.\nfunction insertPoleVertices(positions, size, startIndex, endIndex, maxLatitude = DEFAULT_MAX_LATITUDE) {\n    // Check if the ring contains a pole\n    const firstLng = positions[startIndex];\n    const lastLng = positions[endIndex - size];\n    if (Math.abs(firstLng - lastLng) > 180) {\n        // The ring does not make a round trip\n        // Add the nearest pole to the vertices so that the polygon tesselates correctly\n        const p = getPointAtIndex(positions, 0, size, startIndex);\n        // Copy the first vertex to the world of the last vertex\n        p[0] += Math.round((lastLng - firstLng) / 360) * 360;\n        push(positions, p);\n        // Project the copied vertex to the edge of the map\n        p[1] = Math.sign(p[1]) * maxLatitude;\n        push(positions, p);\n        // Project the first vertex to the edge of the map\n        p[0] = firstLng;\n        push(positions, p);\n    }\n}\nfunction wrapLongitudesForShortestPath(positions, size, startIndex, endIndex) {\n    let prevLng = positions[0];\n    let lng;\n    for (let i = startIndex; i < endIndex; i += size) {\n        lng = positions[i];\n        const delta = lng - prevLng;\n        if (delta > 180 || delta < -180) {\n            lng -= Math.round(delta / 360) * 360;\n        }\n        positions[i] = prevLng = lng;\n    }\n}\nfunction shiftLongitudesIntoRange(positions, size) {\n    let refLng;\n    const pointCount = positions.length / size;\n    // Find a longitude that is not on the edge of a world\n    // Which we will use to determine which world copy it is\n    for (let i = 0; i < pointCount; i++) {\n        refLng = positions[i * size];\n        if ((refLng + 180) % 360 !== 0) {\n            break;\n        }\n    }\n    const delta = -Math.round(refLng / 360) * 360;\n    if (delta === 0) {\n        return;\n    }\n    for (let i = 0; i < pointCount; i++) {\n        positions[i * size] += delta;\n    }\n}\n//# sourceMappingURL=cut-by-mercator-bounds.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { log } from '@deck.gl/core';\nimport { Geometry } from '@luma.gl/engine';\nimport { modifyPolygonWindingDirection, WINDING } from '@math.gl/polygon';\nexport default class ColumnGeometry extends Geometry {\n    constructor(props) {\n        const { indices, attributes } = tesselateColumn(props);\n        super({\n            ...props,\n            indices,\n            // @ts-expect-error\n            attributes\n        });\n    }\n}\n/* eslint-disable max-statements, complexity */\nfunction tesselateColumn(props) {\n    const { radius, height = 1, nradial = 10 } = props;\n    let { vertices } = props;\n    if (vertices) {\n        log.assert(vertices.length >= nradial); // `vertices` must contain at least `diskResolution` points\n        vertices = vertices.flatMap(v => [v[0], v[1]]);\n        modifyPolygonWindingDirection(vertices, WINDING.COUNTER_CLOCKWISE);\n    }\n    const isExtruded = height > 0;\n    const vertsAroundEdge = nradial + 1; // loop\n    const numVertices = isExtruded\n        ? vertsAroundEdge * 3 + 1 // top, side top edge, side bottom edge, one additional degenerage vertex\n        : nradial; // top\n    const stepAngle = (Math.PI * 2) / nradial;\n    // Used for wireframe\n    const indices = new Uint16Array(isExtruded ? nradial * 3 * 2 : 0); // top loop, side vertical, bottom loop\n    const positions = new Float32Array(numVertices * 3);\n    const normals = new Float32Array(numVertices * 3);\n    let i = 0;\n    // side tesselation: 0, 1, 2, 3, 4, 5, ...\n    //\n    // 0 - 2 - 4  ... top\n    // | / | / |\n    // 1 - 3 - 5  ... bottom\n    //\n    if (isExtruded) {\n        for (let j = 0; j < vertsAroundEdge; j++) {\n            const a = j * stepAngle;\n            const vertexIndex = j % nradial;\n            const sin = Math.sin(a);\n            const cos = Math.cos(a);\n            for (let k = 0; k < 2; k++) {\n                positions[i + 0] = vertices ? vertices[vertexIndex * 2] : cos * radius;\n                positions[i + 1] = vertices ? vertices[vertexIndex * 2 + 1] : sin * radius;\n                positions[i + 2] = (1 / 2 - k) * height;\n                normals[i + 0] = vertices ? vertices[vertexIndex * 2] : cos;\n                normals[i + 1] = vertices ? vertices[vertexIndex * 2 + 1] : sin;\n                i += 3;\n            }\n        }\n        // duplicate the last vertex to create proper degenerate triangle.\n        positions[i + 0] = positions[i - 3];\n        positions[i + 1] = positions[i - 2];\n        positions[i + 2] = positions[i - 1];\n        i += 3;\n    }\n    // The column geometry is rendered as a triangle strip, so\n    // in order to render sides and top in one go we need to use degenerate triangles.\n    // Duplicate last vertex of side trinagles and first vertex of the top cap to preserve winding order.\n    // top tesselation: 0, -1, 1, -2, 2, -3, 3, ...\n    //\n    //    0 -- 1\n    //   /      \\\n    // -1        2\n    //  |        |\n    // -2        3\n    //   \\      /\n    //   -3 -- 4\n    //\n    for (let j = isExtruded ? 0 : 1; j < vertsAroundEdge; j++) {\n        const v = Math.floor(j / 2) * Math.sign(0.5 - (j % 2));\n        const a = v * stepAngle;\n        const vertexIndex = (v + nradial) % nradial;\n        const sin = Math.sin(a);\n        const cos = Math.cos(a);\n        positions[i + 0] = vertices ? vertices[vertexIndex * 2] : cos * radius;\n        positions[i + 1] = vertices ? vertices[vertexIndex * 2 + 1] : sin * radius;\n        positions[i + 2] = height / 2;\n        normals[i + 2] = 1;\n        i += 3;\n    }\n    if (isExtruded) {\n        let index = 0;\n        for (let j = 0; j < nradial; j++) {\n            // top loop\n            indices[index++] = j * 2 + 0;\n            indices[index++] = j * 2 + 2;\n            // side vertical\n            indices[index++] = j * 2 + 0;\n            indices[index++] = j * 2 + 1;\n            // bottom loop\n            indices[index++] = j * 2 + 1;\n            indices[index++] = j * 2 + 3;\n        }\n    }\n    return {\n        indices,\n        attributes: {\n            POSITION: { size: 3, value: positions },\n            NORMAL: { size: 3, value: normals }\n        }\n    };\n}\n//# sourceMappingURL=column-geometry.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst uniformBlock = `\\\nuniform columnUniforms {\n  float radius;\n  float angle;\n  vec2 offset;\n  bool extruded;\n  bool stroked;\n  bool isStroke;\n  float coverage;\n  float elevationScale;\n  float edgeDistance;\n  float widthScale;\n  float widthMinPixels;\n  float widthMaxPixels;\n  highp int radiusUnits;\n  highp int widthUnits;\n} column;\n`;\nexport const columnUniforms = {\n    name: 'column',\n    vs: uniformBlock,\n    fs: uniformBlock,\n    uniformTypes: {\n        radius: 'f32',\n        angle: 'f32',\n        offset: 'vec2<f32>',\n        extruded: 'f32',\n        stroked: 'f32',\n        isStroke: 'f32',\n        coverage: 'f32',\n        elevationScale: 'f32',\n        edgeDistance: 'f32',\n        widthScale: 'f32',\n        widthMinPixels: 'f32',\n        widthMaxPixels: 'f32',\n        radiusUnits: 'i32',\n        widthUnits: 'i32'\n    }\n};\n//# sourceMappingURL=column-layer-uniforms.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `#version 300 es\n#define SHADER_NAME column-layer-vertex-shader\nin vec3 positions;\nin vec3 normals;\nin vec3 instancePositions;\nin float instanceElevations;\nin vec3 instancePositions64Low;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin float instanceStrokeWidths;\nin vec3 instancePickingColors;\nout vec4 vColor;\n#ifdef FLAT_SHADING\nout vec3 cameraPosition;\nout vec4 position_commonspace;\n#endif\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\nvec4 color = column.isStroke ? instanceLineColors : instanceFillColors;\nmat2 rotationMatrix = mat2(cos(column.angle), sin(column.angle), -sin(column.angle), cos(column.angle));\nfloat elevation = 0.0;\nfloat strokeOffsetRatio = 1.0;\nif (column.extruded) {\nelevation = instanceElevations * (positions.z + 1.0) / 2.0 * column.elevationScale;\n} else if (column.stroked) {\nfloat widthPixels = clamp(\nproject_size_to_pixel(instanceStrokeWidths * column.widthScale, column.widthUnits),\ncolumn.widthMinPixels, column.widthMaxPixels) / 2.0;\nfloat halfOffset = project_pixel_size(widthPixels) / project_size(column.edgeDistance * column.coverage * column.radius);\nif (column.isStroke) {\nstrokeOffsetRatio -= sign(positions.z) * halfOffset;\n} else {\nstrokeOffsetRatio -= halfOffset;\n}\n}\nfloat shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);\nfloat dotRadius = column.radius * column.coverage * shouldRender;\ngeometry.pickingColor = instancePickingColors;\nvec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);\nvec3 centroidPosition64Low = instancePositions64Low;\nvec2 offset = (rotationMatrix * positions.xy * strokeOffsetRatio + column.offset) * dotRadius;\nif (column.radiusUnits == UNIT_METERS) {\noffset = project_size(offset);\n}\nvec3 pos = vec3(offset, 0.);\nDECKGL_FILTER_SIZE(pos, geometry);\ngl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);\ngeometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nif (column.extruded && !column.isStroke) {\n#ifdef FLAT_SHADING\ncameraPosition = project.cameraPosition;\nposition_commonspace = geometry.position;\nvColor = vec4(color.rgb, color.a * layer.opacity);\n#else\nvec3 lightColor = lighting_getLightColor(color.rgb, project.cameraPosition, geometry.position.xyz, geometry.normal);\nvColor = vec4(lightColor, color.a * layer.opacity);\n#endif\n} else {\nvColor = vec4(color.rgb, color.a * layer.opacity);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;\n//# sourceMappingURL=column-layer-vertex.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `#version 300 es\n#define SHADER_NAME column-layer-fragment-shader\nprecision highp float;\nout vec4 fragColor;\nin vec4 vColor;\n#ifdef FLAT_SHADING\nin vec3 cameraPosition;\nin vec4 position_commonspace;\n#endif\nvoid main(void) {\nfragColor = vColor;\ngeometry.uv = vec2(0.);\n#ifdef FLAT_SHADING\nif (column.extruded && !column.isStroke && !bool(picking.isActive)) {\nvec3 normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\nfragColor.rgb = lighting_getLightColor(vColor.rgb, cameraPosition, position_commonspace.xyz, normal);\n}\n#endif\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;\n//# sourceMappingURL=column-layer-fragment.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Layer, project32, picking, UNIT } from '@deck.gl/core';\nimport { gouraudMaterial, phongMaterial } from '@luma.gl/shadertools';\nimport { Model } from '@luma.gl/engine';\nimport ColumnGeometry from \"./column-geometry.js\";\nimport { columnUniforms } from \"./column-layer-uniforms.js\";\nimport vs from \"./column-layer-vertex.glsl.js\";\nimport fs from \"./column-layer-fragment.glsl.js\";\nconst DEFAULT_COLOR = [0, 0, 0, 255];\nconst defaultProps = {\n    diskResolution: { type: 'number', min: 4, value: 20 },\n    vertices: null,\n    radius: { type: 'number', min: 0, value: 1000 },\n    angle: { type: 'number', value: 0 },\n    offset: { type: 'array', value: [0, 0] },\n    coverage: { type: 'number', min: 0, max: 1, value: 1 },\n    elevationScale: { type: 'number', min: 0, value: 1 },\n    radiusUnits: 'meters',\n    lineWidthUnits: 'meters',\n    lineWidthScale: 1,\n    lineWidthMinPixels: 0,\n    lineWidthMaxPixels: Number.MAX_SAFE_INTEGER,\n    extruded: true,\n    wireframe: false,\n    filled: true,\n    stroked: false,\n    flatShading: false,\n    getPosition: { type: 'accessor', value: (x) => x.position },\n    getFillColor: { type: 'accessor', value: DEFAULT_COLOR },\n    getLineColor: { type: 'accessor', value: DEFAULT_COLOR },\n    getLineWidth: { type: 'accessor', value: 1 },\n    getElevation: { type: 'accessor', value: 1000 },\n    material: true,\n    getColor: { deprecatedFor: ['getFillColor', 'getLineColor'] }\n};\n/** Render extruded cylinders (tessellated regular polygons) at given coordinates. */\nclass ColumnLayer extends Layer {\n    getShaders() {\n        const defines = {};\n        const { flatShading } = this.props;\n        if (flatShading) {\n            defines.FLAT_SHADING = 1;\n        }\n        return super.getShaders({\n            vs,\n            fs,\n            defines,\n            modules: [project32, flatShading ? phongMaterial : gouraudMaterial, picking, columnUniforms]\n        });\n    }\n    /**\n     * DeckGL calls initializeState when GL context is available\n     * Essentially a deferred constructor\n     */\n    initializeState() {\n        const attributeManager = this.getAttributeManager();\n        /* eslint-disable max-len */\n        attributeManager.addInstanced({\n            instancePositions: {\n                size: 3,\n                type: 'float64',\n                fp64: this.use64bitPositions(),\n                transition: true,\n                accessor: 'getPosition'\n            },\n            instanceElevations: {\n                size: 1,\n                transition: true,\n                accessor: 'getElevation'\n            },\n            instanceFillColors: {\n                size: this.props.colorFormat.length,\n                type: 'unorm8',\n                transition: true,\n                accessor: 'getFillColor',\n                defaultValue: DEFAULT_COLOR\n            },\n            instanceLineColors: {\n                size: this.props.colorFormat.length,\n                type: 'unorm8',\n                transition: true,\n                accessor: 'getLineColor',\n                defaultValue: DEFAULT_COLOR\n            },\n            instanceStrokeWidths: {\n                size: 1,\n                accessor: 'getLineWidth',\n                transition: true\n            }\n        });\n        /* eslint-enable max-len */\n    }\n    updateState(params) {\n        super.updateState(params);\n        const { props, oldProps, changeFlags } = params;\n        const regenerateModels = changeFlags.extensionsChanged || props.flatShading !== oldProps.flatShading;\n        if (regenerateModels) {\n            this.state.models?.forEach(model => model.destroy());\n            this.setState(this._getModels());\n            this.getAttributeManager().invalidateAll();\n        }\n        const instanceCount = this.getNumInstances();\n        this.state.fillModel.setInstanceCount(instanceCount);\n        this.state.wireframeModel.setInstanceCount(instanceCount);\n        if (regenerateModels ||\n            props.diskResolution !== oldProps.diskResolution ||\n            props.vertices !== oldProps.vertices ||\n            (props.extruded || props.stroked) !== (oldProps.extruded || oldProps.stroked)) {\n            this._updateGeometry(props);\n        }\n    }\n    getGeometry(diskResolution, vertices, hasThinkness) {\n        const geometry = new ColumnGeometry({\n            radius: 1,\n            height: hasThinkness ? 2 : 0,\n            vertices,\n            nradial: diskResolution\n        });\n        let meanVertexDistance = 0;\n        if (vertices) {\n            for (let i = 0; i < diskResolution; i++) {\n                const p = vertices[i];\n                const d = Math.sqrt(p[0] * p[0] + p[1] * p[1]);\n                meanVertexDistance += d / diskResolution;\n            }\n        }\n        else {\n            meanVertexDistance = 1;\n        }\n        this.setState({\n            edgeDistance: Math.cos(Math.PI / diskResolution) * meanVertexDistance\n        });\n        return geometry;\n    }\n    _getModels() {\n        const shaders = this.getShaders();\n        const bufferLayout = this.getAttributeManager().getBufferLayouts();\n        const fillModel = new Model(this.context.device, {\n            ...shaders,\n            id: `${this.props.id}-fill`,\n            bufferLayout,\n            isInstanced: true\n        });\n        const wireframeModel = new Model(this.context.device, {\n            ...shaders,\n            id: `${this.props.id}-wireframe`,\n            bufferLayout,\n            isInstanced: true\n        });\n        return {\n            fillModel,\n            wireframeModel,\n            models: [wireframeModel, fillModel]\n        };\n    }\n    _updateGeometry({ diskResolution, vertices, extruded, stroked }) {\n        const geometry = this.getGeometry(diskResolution, vertices, extruded || stroked);\n        this.setState({\n            fillVertexCount: geometry.attributes.POSITION.value.length / 3\n        });\n        const fillModel = this.state.fillModel;\n        const wireframeModel = this.state.wireframeModel;\n        fillModel.setGeometry(geometry);\n        fillModel.setTopology('triangle-strip');\n        // Disable indices\n        fillModel.setIndexBuffer(null);\n        wireframeModel.setGeometry(geometry);\n        wireframeModel.setTopology('line-list');\n    }\n    draw({ uniforms }) {\n        const { lineWidthUnits, lineWidthScale, lineWidthMinPixels, lineWidthMaxPixels, radiusUnits, elevationScale, extruded, filled, stroked, wireframe, offset, coverage, radius, angle } = this.props;\n        const fillModel = this.state.fillModel;\n        const wireframeModel = this.state.wireframeModel;\n        const { fillVertexCount, edgeDistance } = this.state;\n        const columnProps = {\n            radius,\n            angle: (angle / 180) * Math.PI,\n            offset,\n            extruded,\n            stroked,\n            coverage,\n            elevationScale,\n            edgeDistance,\n            radiusUnits: UNIT[radiusUnits],\n            widthUnits: UNIT[lineWidthUnits],\n            widthScale: lineWidthScale,\n            widthMinPixels: lineWidthMinPixels,\n            widthMaxPixels: lineWidthMaxPixels\n        };\n        // When drawing 3d: draw wireframe first so it doesn't get occluded by depth test\n        if (extruded && wireframe) {\n            wireframeModel.shaderInputs.setProps({\n                column: {\n                    ...columnProps,\n                    isStroke: true\n                }\n            });\n            wireframeModel.draw(this.context.renderPass);\n        }\n        if (filled) {\n            // model.setProps({isIndexed: false});\n            fillModel.setVertexCount(fillVertexCount);\n            fillModel.shaderInputs.setProps({\n                column: {\n                    ...columnProps,\n                    isStroke: false\n                }\n            });\n            fillModel.draw(this.context.renderPass);\n        }\n        // When drawing 2d: draw fill before stroke so that the outline is always on top\n        if (!extruded && stroked) {\n            // model.setProps({isIndexed: false});\n            // The width of the stroke is achieved by flattening the side of the cylinder.\n            // Skip the last 1/3 of the vertices which is the top.\n            fillModel.setVertexCount((fillVertexCount * 2) / 3);\n            fillModel.shaderInputs.setProps({\n                column: {\n                    ...columnProps,\n                    isStroke: true\n                }\n            });\n            fillModel.draw(this.context.renderPass);\n        }\n    }\n}\nColumnLayer.layerName = 'ColumnLayer';\nColumnLayer.defaultProps = defaultProps;\nexport default ColumnLayer;\n//# sourceMappingURL=column-layer.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { UNIT } from '@deck.gl/core';\nimport { CubeGeometry } from '@luma.gl/engine';\nimport ColumnLayer from \"./column-layer.js\";\nconst defaultProps = {\n    cellSize: { type: 'number', min: 0, value: 1000 },\n    offset: { type: 'array', value: [1, 1] }\n};\nclass GridCellLayer extends ColumnLayer {\n    _updateGeometry() {\n        const geometry = new CubeGeometry();\n        this.state.fillModel.setGeometry(geometry);\n    }\n    draw({ uniforms }) {\n        const { elevationScale, extruded, offset, coverage, cellSize, angle, radiusUnits } = this.props;\n        const fillModel = this.state.fillModel;\n        const columnProps = {\n            radius: cellSize / 2,\n            radiusUnits: UNIT[radiusUnits],\n            angle,\n            offset,\n            extruded,\n            stroked: false,\n            coverage,\n            elevationScale,\n            edgeDistance: 1,\n            isStroke: false,\n            widthUnits: 0,\n            widthScale: 0,\n            widthMinPixels: 0,\n            widthMaxPixels: 0\n        };\n        fillModel.shaderInputs.setProps({ column: columnProps });\n        fillModel.draw(this.context.renderPass);\n    }\n}\nGridCellLayer.layerName = 'GridCellLayer';\nGridCellLayer.defaultProps = defaultProps;\nexport default GridCellLayer;\n//# sourceMappingURL=grid-cell-layer.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { cutPolylineByGrid, cutPolylineByMercatorBounds } from '@math.gl/polygon';\n/**\n * Flattens a nested path object\n * Cut the feature if needed (globe projection, wrap longitude, etc.)\n * Returns a flat array of path positions, or a list of flat arrays representing multiple paths\n */\nexport function normalizePath(path, size, gridResolution, wrapLongitude) {\n    let flatPath;\n    if (Array.isArray(path[0])) {\n        const length = path.length * size;\n        flatPath = new Array(length);\n        for (let i = 0; i < path.length; i++) {\n            for (let j = 0; j < size; j++) {\n                flatPath[i * size + j] = path[i][j] || 0;\n            }\n        }\n    }\n    else {\n        flatPath = path;\n    }\n    if (gridResolution) {\n        return cutPolylineByGrid(flatPath, { size, gridResolution });\n    }\n    if (wrapLongitude) {\n        return cutPolylineByMercatorBounds(flatPath, { size });\n    }\n    return flatPath;\n}\n//# sourceMappingURL=path.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Tesselator } from '@deck.gl/core';\nimport { normalizePath } from \"./path.js\";\nconst START_CAP = 1;\nconst END_CAP = 2;\nconst INVALID = 4;\n// This class is set up to allow querying one attribute at a time\n// the way the AttributeManager expects it\nexport default class PathTesselator extends Tesselator {\n    constructor(opts) {\n        super({\n            ...opts,\n            attributes: {\n                // Padding covers shaderAttributes for last segment in largest case fp64\n                // additional vertex + hi & low parts, 3 * 6\n                positions: {\n                    size: 3,\n                    padding: 18,\n                    initialize: true,\n                    type: opts.fp64 ? Float64Array : Float32Array\n                },\n                segmentTypes: { size: 1, type: Uint8ClampedArray }\n            }\n        });\n    }\n    /** Get packed attribute by name */\n    get(attributeName) {\n        return this.attributes[attributeName];\n    }\n    /* Implement base Tesselator interface */\n    getGeometryFromBuffer(buffer) {\n        if (this.normalize) {\n            return super.getGeometryFromBuffer(buffer);\n        }\n        // we don't need to read the positions if no normalization\n        return null;\n    }\n    /* Implement base Tesselator interface */\n    normalizeGeometry(path) {\n        if (this.normalize) {\n            return normalizePath(path, this.positionSize, this.opts.resolution, this.opts.wrapLongitude);\n        }\n        return path;\n    }\n    /* Implement base Tesselator interface */\n    getGeometrySize(path) {\n        if (isCut(path)) {\n            let size = 0;\n            for (const subPath of path) {\n                size += this.getGeometrySize(subPath);\n            }\n            return size;\n        }\n        const numPoints = this.getPathLength(path);\n        if (numPoints < 2) {\n            // invalid path\n            return 0;\n        }\n        if (this.isClosed(path)) {\n            // minimum 3 vertices\n            return numPoints < 3 ? 0 : numPoints + 2;\n        }\n        return numPoints;\n    }\n    /* Implement base Tesselator interface */\n    updateGeometryAttributes(path, context) {\n        if (context.geometrySize === 0) {\n            return;\n        }\n        if (path && isCut(path)) {\n            for (const subPath of path) {\n                const geometrySize = this.getGeometrySize(subPath);\n                context.geometrySize = geometrySize;\n                this.updateGeometryAttributes(subPath, context);\n                context.vertexStart += geometrySize;\n            }\n        }\n        else {\n            this._updateSegmentTypes(path, context);\n            this._updatePositions(path, context);\n        }\n    }\n    _updateSegmentTypes(path, context) {\n        const segmentTypes = this.attributes.segmentTypes;\n        const isPathClosed = path ? this.isClosed(path) : false;\n        const { vertexStart, geometrySize } = context;\n        // positions   --  A0 A1 B0 B1 B2 B3 B0 B1 B2 --\n        // segmentTypes     3  4  4  0  0  0  0  4  4\n        segmentTypes.fill(0, vertexStart, vertexStart + geometrySize);\n        if (isPathClosed) {\n            segmentTypes[vertexStart] = INVALID;\n            segmentTypes[vertexStart + geometrySize - 2] = INVALID;\n        }\n        else {\n            segmentTypes[vertexStart] += START_CAP;\n            segmentTypes[vertexStart + geometrySize - 2] += END_CAP;\n        }\n        segmentTypes[vertexStart + geometrySize - 1] = INVALID;\n    }\n    _updatePositions(path, context) {\n        const { positions } = this.attributes;\n        if (!positions || !path) {\n            return;\n        }\n        const { vertexStart, geometrySize } = context;\n        const p = new Array(3);\n        // positions   --  A0 A1 B0 B1 B2 B3 B0 B1 B2 --\n        // segmentTypes     3  4  4  0  0  0  0  4  4\n        for (let i = vertexStart, ptIndex = 0; ptIndex < geometrySize; i++, ptIndex++) {\n            this.getPointOnPath(path, ptIndex, p);\n            positions[i * 3] = p[0];\n            positions[i * 3 + 1] = p[1];\n            positions[i * 3 + 2] = p[2];\n        }\n    }\n    // Utilities\n    /** Returns the number of points in the path */\n    getPathLength(path) {\n        return path.length / this.positionSize;\n    }\n    /** Returns a point on the path at the specified index */\n    getPointOnPath(path, index, target = []) {\n        const { positionSize } = this;\n        if (index * positionSize >= path.length) {\n            // loop\n            index += 1 - path.length / positionSize;\n        }\n        const i = index * positionSize;\n        target[0] = path[i];\n        target[1] = path[i + 1];\n        target[2] = (positionSize === 3 && path[i + 2]) || 0;\n        return target;\n    }\n    // Returns true if the first and last points are identical\n    isClosed(path) {\n        if (!this.normalize) {\n            return Boolean(this.opts.loop);\n        }\n        const { positionSize } = this;\n        const lastPointIndex = path.length - positionSize;\n        return (path[0] === path[lastPointIndex] &&\n            path[1] === path[lastPointIndex + 1] &&\n            (positionSize === 2 || path[2] === path[lastPointIndex + 2]));\n    }\n}\nfunction isCut(path) {\n    return Array.isArray(path[0]);\n}\n//# sourceMappingURL=path-tesselator.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst uniformBlock = `\\\nuniform pathUniforms {\n  float widthScale;\n  float widthMinPixels;\n  float widthMaxPixels;\n  float jointType;\n  float capType;\n  float miterLimit;\n  bool billboard;\n  highp int widthUnits;\n} path;\n`;\nexport const pathUniforms = {\n    name: 'path',\n    vs: uniformBlock,\n    fs: uniformBlock,\n    uniformTypes: {\n        widthScale: 'f32',\n        widthMinPixels: 'f32',\n        widthMaxPixels: 'f32',\n        jointType: 'f32',\n        capType: 'f32',\n        miterLimit: 'f32',\n        billboard: 'f32',\n        widthUnits: 'i32'\n    }\n};\n//# sourceMappingURL=path-layer-uniforms.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `\\\n#version 300 es\n#define SHADER_NAME path-layer-vertex-shader\nin vec2 positions;\nin float instanceTypes;\nin vec3 instanceStartPositions;\nin vec3 instanceEndPositions;\nin vec3 instanceLeftPositions;\nin vec3 instanceRightPositions;\nin vec3 instanceLeftPositions64Low;\nin vec3 instanceStartPositions64Low;\nin vec3 instanceEndPositions64Low;\nin vec3 instanceRightPositions64Low;\nin float instanceStrokeWidths;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nuniform float opacity;\nout vec4 vColor;\nout vec2 vCornerOffset;\nout float vMiterLength;\nout vec2 vPathPosition;\nout float vPathLength;\nout float vJointType;\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\nfloat flipIfTrue(bool flag) {\nreturn -(float(flag) * 2. - 1.);\n}\nvec3 getLineJoinOffset(\nvec3 prevPoint, vec3 currPoint, vec3 nextPoint,\nvec2 width\n) {\nbool isEnd = positions.x > 0.0;\nfloat sideOfPath = positions.y;\nfloat isJoint = float(sideOfPath == 0.0);\nvec3 deltaA3 = (currPoint - prevPoint);\nvec3 deltaB3 = (nextPoint - currPoint);\nmat3 rotationMatrix;\nbool needsRotation = !path.billboard && project_needs_rotation(currPoint, rotationMatrix);\nif (needsRotation) {\ndeltaA3 = deltaA3 * rotationMatrix;\ndeltaB3 = deltaB3 * rotationMatrix;\n}\nvec2 deltaA = deltaA3.xy / width;\nvec2 deltaB = deltaB3.xy / width;\nfloat lenA = length(deltaA);\nfloat lenB = length(deltaB);\nvec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\nvec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\nvec2 perpA = vec2(-dirA.y, dirA.x);\nvec2 perpB = vec2(-dirB.y, dirB.x);\nvec2 tangent = dirA + dirB;\ntangent = length(tangent) > 0. ? normalize(tangent) : perpA;\nvec2 miterVec = vec2(-tangent.y, tangent.x);\nvec2 dir = isEnd ? dirA : dirB;\nvec2 perp = isEnd ? perpA : perpB;\nfloat L = isEnd ? lenA : lenB;\nfloat sinHalfA = abs(dot(miterVec, perp));\nfloat cosHalfA = abs(dot(dirA, miterVec));\nfloat turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);\nfloat cornerPosition = sideOfPath * turnDirection;\nfloat miterSize = 1.0 / max(sinHalfA, EPSILON);\nmiterSize = mix(\nmin(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),\nmiterSize,\nstep(0.0, cornerPosition)\n);\nvec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))\n* (sideOfPath + isJoint * turnDirection);\nbool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\nbool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\nbool isCap = isStartCap || isEndCap;\nif (isCap) {\noffsetVec = mix(perp * sideOfPath, dir * path.capType * 4.0 * flipIfTrue(isStartCap), isJoint);\nvJointType = path.capType;\n} else {\nvJointType = path.jointType;\n}\nvPathLength = L;\nvCornerOffset = offsetVec;\nvMiterLength = dot(vCornerOffset, miterVec * turnDirection);\nvMiterLength = isCap ? isJoint : vMiterLength;\nvec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);\nvPathPosition = vec2(\ndot(offsetFromStartOfPath, perp),\ndot(offsetFromStartOfPath, dir)\n);\ngeometry.uv = vPathPosition;\nfloat isValid = step(instanceTypes, 3.5);\nvec3 offset = vec3(offsetVec * width * isValid, 0.0);\nif (needsRotation) {\noffset = rotationMatrix * offset;\n}\nreturn offset;\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\nif (position.w < EPSILON) {\nfloat r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\nposition = refPosition + (position - refPosition) * r;\n}\n}\nvoid main() {\ngeometry.pickingColor = instancePickingColors;\nvColor = vec4(instanceColors.rgb, instanceColors.a * layer.opacity);\nfloat isEnd = positions.x;\nvec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\nvec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\nvec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\nvec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\nvec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\nvec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\ngeometry.worldPosition = currPosition;\nvec2 widthPixels = vec2(clamp(\nproject_size_to_pixel(instanceStrokeWidths * path.widthScale, path.widthUnits),\npath.widthMinPixels, path.widthMaxPixels) / 2.0);\nvec3 width;\nif (path.billboard) {\nvec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\nvec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\nvec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\nclipLine(prevPositionScreen, currPositionScreen);\nclipLine(nextPositionScreen, currPositionScreen);\nclipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\nwidth = vec3(widthPixels, 0.0);\nDECKGL_FILTER_SIZE(width, geometry);\nvec3 offset = getLineJoinOffset(\nprevPositionScreen.xyz / prevPositionScreen.w,\ncurrPositionScreen.xyz / currPositionScreen.w,\nnextPositionScreen.xyz / nextPositionScreen.w,\nproject_pixel_size_to_clipspace(width.xy)\n);\nDECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);\ngl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);\n} else {\nprevPosition = project_position(prevPosition, prevPosition64Low);\ncurrPosition = project_position(currPosition, currPosition64Low);\nnextPosition = project_position(nextPosition, nextPosition64Low);\nwidth = vec3(project_pixel_size(widthPixels), 0.0);\nDECKGL_FILTER_SIZE(width, geometry);\nvec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);\ngeometry.position = vec4(currPosition + offset, 1.0);\ngl_Position = project_common_position_to_clipspace(geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;\n//# sourceMappingURL=path-layer-vertex.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `\\\n#version 300 es\n#define SHADER_NAME path-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nin vec2 vCornerOffset;\nin float vMiterLength;\nin vec2 vPathPosition;\nin float vPathLength;\nin float vJointType;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = vPathPosition;\nif (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {\nif (vJointType > 0.5 && length(vCornerOffset) > 1.0) {\ndiscard;\n}\nif (vJointType < 0.5 && vMiterLength > path.miterLimit + 1.0) {\ndiscard;\n}\n}\nfragColor = vColor;\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;\n//# sourceMappingURL=path-layer-fragment.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Layer, project32, picking, UNIT } from '@deck.gl/core';\nimport { Geometry } from '@luma.gl/engine';\nimport { Model } from '@luma.gl/engine';\nimport PathTesselator from \"./path-tesselator.js\";\nimport { pathUniforms } from \"./path-layer-uniforms.js\";\nimport vs from \"./path-layer-vertex.glsl.js\";\nimport fs from \"./path-layer-fragment.glsl.js\";\nconst DEFAULT_COLOR = [0, 0, 0, 255];\nconst defaultProps = {\n    widthUnits: 'meters',\n    widthScale: { type: 'number', min: 0, value: 1 },\n    widthMinPixels: { type: 'number', min: 0, value: 0 },\n    widthMaxPixels: { type: 'number', min: 0, value: Number.MAX_SAFE_INTEGER },\n    jointRounded: false,\n    capRounded: false,\n    miterLimit: { type: 'number', min: 0, value: 4 },\n    billboard: false,\n    _pathType: null,\n    getPath: { type: 'accessor', value: (object) => object.path },\n    getColor: { type: 'accessor', value: DEFAULT_COLOR },\n    getWidth: { type: 'accessor', value: 1 },\n    // deprecated props\n    rounded: { deprecatedFor: ['jointRounded', 'capRounded'] }\n};\nconst ATTRIBUTE_TRANSITION = {\n    enter: (value, chunk) => {\n        return chunk.length ? chunk.subarray(chunk.length - value.length) : value;\n    }\n};\n/** Render lists of coordinate points as extruded polylines with mitering. */\nclass PathLayer extends Layer {\n    getShaders() {\n        return super.getShaders({ vs, fs, modules: [project32, picking, pathUniforms] }); // 'project' module added by default.\n    }\n    get wrapLongitude() {\n        return false;\n    }\n    getBounds() {\n        return this.getAttributeManager()?.getBounds(['vertexPositions']);\n    }\n    initializeState() {\n        const noAlloc = true;\n        const attributeManager = this.getAttributeManager();\n        /* eslint-disable max-len */\n        attributeManager.addInstanced({\n            vertexPositions: {\n                size: 3,\n                // Start filling buffer from 1 vertex in\n                vertexOffset: 1,\n                type: 'float64',\n                fp64: this.use64bitPositions(),\n                transition: ATTRIBUTE_TRANSITION,\n                accessor: 'getPath',\n                // eslint-disable-next-line @typescript-eslint/unbound-method\n                update: this.calculatePositions,\n                noAlloc,\n                shaderAttributes: {\n                    instanceLeftPositions: {\n                        vertexOffset: 0\n                    },\n                    instanceStartPositions: {\n                        vertexOffset: 1\n                    },\n                    instanceEndPositions: {\n                        vertexOffset: 2\n                    },\n                    instanceRightPositions: {\n                        vertexOffset: 3\n                    }\n                }\n            },\n            instanceTypes: {\n                size: 1,\n                type: 'uint8',\n                // eslint-disable-next-line @typescript-eslint/unbound-method\n                update: this.calculateSegmentTypes,\n                noAlloc\n            },\n            instanceStrokeWidths: {\n                size: 1,\n                accessor: 'getWidth',\n                transition: ATTRIBUTE_TRANSITION,\n                defaultValue: 1\n            },\n            instanceColors: {\n                size: this.props.colorFormat.length,\n                type: 'unorm8',\n                accessor: 'getColor',\n                transition: ATTRIBUTE_TRANSITION,\n                defaultValue: DEFAULT_COLOR\n            },\n            instancePickingColors: {\n                size: 4,\n                type: 'uint8',\n                accessor: (object, { index, target: value }) => this.encodePickingColor(object && object.__source ? object.__source.index : index, value)\n            }\n        });\n        /* eslint-enable max-len */\n        this.setState({\n            pathTesselator: new PathTesselator({\n                fp64: this.use64bitPositions()\n            })\n        });\n    }\n    updateState(params) {\n        super.updateState(params);\n        const { props, changeFlags } = params;\n        const attributeManager = this.getAttributeManager();\n        const geometryChanged = changeFlags.dataChanged ||\n            (changeFlags.updateTriggersChanged &&\n                (changeFlags.updateTriggersChanged.all || changeFlags.updateTriggersChanged.getPath));\n        if (geometryChanged) {\n            const { pathTesselator } = this.state;\n            const buffers = props.data.attributes || {};\n            pathTesselator.updateGeometry({\n                data: props.data,\n                geometryBuffer: buffers.getPath,\n                buffers,\n                normalize: !props._pathType,\n                loop: props._pathType === 'loop',\n                getGeometry: props.getPath,\n                positionFormat: props.positionFormat,\n                wrapLongitude: props.wrapLongitude,\n                // TODO - move the flag out of the viewport\n                resolution: this.context.viewport.resolution,\n                dataChanged: changeFlags.dataChanged\n            });\n            this.setState({\n                numInstances: pathTesselator.instanceCount,\n                startIndices: pathTesselator.vertexStarts\n            });\n            if (!changeFlags.dataChanged) {\n                // Base `layer.updateState` only invalidates all attributes on data change\n                // Cover the rest of the scenarios here\n                attributeManager.invalidateAll();\n            }\n        }\n        if (changeFlags.extensionsChanged) {\n            this.state.model?.destroy();\n            this.state.model = this._getModel();\n            attributeManager.invalidateAll();\n        }\n    }\n    getPickingInfo(params) {\n        const info = super.getPickingInfo(params);\n        const { index } = info;\n        const data = this.props.data;\n        // Check if data comes from a composite layer, wrapped with getSubLayerRow\n        if (data[0] && data[0].__source) {\n            // index decoded from picking color refers to the source index\n            info.object = data.find(d => d.__source.index === index);\n        }\n        return info;\n    }\n    /** Override base Layer method */\n    disablePickingIndex(objectIndex) {\n        const data = this.props.data;\n        // Check if data comes from a composite layer, wrapped with getSubLayerRow\n        if (data[0] && data[0].__source) {\n            // index decoded from picking color refers to the source index\n            for (let i = 0; i < data.length; i++) {\n                if (data[i].__source.index === objectIndex) {\n                    this._disablePickingIndex(i);\n                }\n            }\n        }\n        else {\n            super.disablePickingIndex(objectIndex);\n        }\n    }\n    draw({ uniforms }) {\n        const { jointRounded, capRounded, billboard, miterLimit, widthUnits, widthScale, widthMinPixels, widthMaxPixels } = this.props;\n        const model = this.state.model;\n        const pathProps = {\n            jointType: Number(jointRounded),\n            capType: Number(capRounded),\n            billboard,\n            widthUnits: UNIT[widthUnits],\n            widthScale,\n            miterLimit,\n            widthMinPixels,\n            widthMaxPixels\n        };\n        model.shaderInputs.setProps({ path: pathProps });\n        model.draw(this.context.renderPass);\n    }\n    _getModel() {\n        /*\n         *       _\n         *        \"-_ 1                   3                       5\n         *     _     \"o---------------------o-------------------_-o\n         *       -   / \"\"--..__              '.             _.-' /\n         *   _     \"@- - - - - \"\"--..__- - - - x - - - -_.@'    /\n         *    \"-_  /                   \"\"--..__ '.  _,-` :     /\n         *       \"o----------------------------\"\"-o'    :     /\n         *      0,2                            4 / '.  :     /\n         *                                      /   '.:     /\n         *                                     /     :'.   /\n         *                                    /     :  ', /\n         *                                   /     :     o\n         */\n        // prettier-ignore\n        const SEGMENT_INDICES = [\n            // start corner\n            0, 1, 2,\n            // body\n            1, 4, 2,\n            1, 3, 4,\n            // end corner\n            3, 5, 4\n        ];\n        // [0] position on segment - 0: start, 1: end\n        // [1] side of path - -1: left, 0: center (joint), 1: right\n        // prettier-ignore\n        const SEGMENT_POSITIONS = [\n            // bevel start corner\n            0, 0,\n            // start inner corner\n            0, -1,\n            // start outer corner\n            0, 1,\n            // end inner corner\n            1, -1,\n            // end outer corner\n            1, 1,\n            // bevel end corner\n            1, 0\n        ];\n        return new Model(this.context.device, {\n            ...this.getShaders(),\n            id: this.props.id,\n            bufferLayout: this.getAttributeManager().getBufferLayouts(),\n            geometry: new Geometry({\n                topology: 'triangle-list',\n                attributes: {\n                    indices: new Uint16Array(SEGMENT_INDICES),\n                    positions: { value: new Float32Array(SEGMENT_POSITIONS), size: 2 }\n                }\n            }),\n            isInstanced: true\n        });\n    }\n    calculatePositions(attribute) {\n        const { pathTesselator } = this.state;\n        attribute.startIndices = pathTesselator.vertexStarts;\n        attribute.value = pathTesselator.get('positions');\n    }\n    calculateSegmentTypes(attribute) {\n        const { pathTesselator } = this.state;\n        attribute.startIndices = pathTesselator.vertexStarts;\n        attribute.value = pathTesselator.get('segmentTypes');\n    }\n}\nPathLayer.defaultProps = defaultProps;\nPathLayer.layerName = 'PathLayer';\nexport default PathLayer;\n//# sourceMappingURL=path-layer.js.map","'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 32767 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim | 0);\n            triangles.push(ear.i / dim | 0);\n            triangles.push(next.i / dim | 0);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    var p = c.next;\n    while (p !== a) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(x0, y0, minX, minY, invSize),\n        maxZ = zOrder(x1, y1, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim | 0);\n            triangles.push(p.i / dim | 0);\n            triangles.push(b.i / dim | 0);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize, 0);\n                earcutLinked(c, triangles, dim, minX, minY, invSize, 0);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        outerNode = eliminateHole(queue[i], outerNode);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    var bridge = findHoleBridge(hole, outerNode);\n    if (!bridge) {\n        return outerNode;\n    }\n\n    var bridgeReverse = splitPolygon(bridge, hole);\n\n    // filter collinear points around the cuts\n    filterPoints(bridgeReverse, bridgeReverse.next);\n    return filterPoints(bridge, bridge.next);\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                m = p.x < p.next.x ? p : p.next;\n                if (x === hx) return m; // hole touches outer segment; pick leftmost endpoint\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === 0) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = (x - minX) * invSize | 0;\n    y = (y - minY) * invSize | 0;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) >= (ax - px) * (cy - py) &&\n           (ax - px) * (by - py) >= (bx - px) * (ay - py) &&\n           (bx - px) * (cy - py) >= (cx - px) * (by - py);\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = 0;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/* eslint-disable max-params */\nimport earcut from 'earcut';\nimport { modifyPolygonWindingDirection, WINDING } from '@math.gl/polygon';\nconst OUTER_POLYGON_WINDING = WINDING.CLOCKWISE;\nconst HOLE_POLYGON_WINDING = WINDING.COUNTER_CLOCKWISE;\n/** A scratch object for sending winding options */\nconst windingOptions = {\n    isClosed: true\n};\n/**\n * Ensure a polygon is valid format\n */\nfunction validate(polygon) {\n    polygon = (polygon && polygon.positions) || polygon;\n    if (!Array.isArray(polygon) && !ArrayBuffer.isView(polygon)) {\n        throw new Error('invalid polygon');\n    }\n}\n/** Get the positions from a normalized polygon */\nexport function getPositions(polygon) {\n    return 'positions' in polygon ? polygon.positions : polygon;\n}\n/** Get the hole indices from a normalized polygon */\nexport function getHoleIndices(polygon) {\n    return 'holeIndices' in polygon ? polygon.holeIndices : null;\n}\n/**\n * Check if a polygon is nested or flat\n * Returns true if the polygon is a flat polygon (i.e. not an array of polygons)\n */\nfunction isNested(polygon) {\n    return Array.isArray(polygon[0]);\n}\n/**\n * Check if a polygon is simple or complex\n * Returns true if the polygon is a simple polygon (i.e. not an array of polygons)\n */\nfunction isSimple(polygon) {\n    return polygon.length >= 1 && polygon[0].length >= 2 && Number.isFinite(polygon[0][0]);\n}\n/**\n * Check if a simple polygon is a closed ring\n * Returns true if the simple polygon is a closed ring\n */\nfunction isNestedRingClosed(simplePolygon) {\n    // check if first and last vertex are the same\n    const p0 = simplePolygon[0];\n    const p1 = simplePolygon[simplePolygon.length - 1];\n    return p0[0] === p1[0] && p0[1] === p1[1] && p0[2] === p1[2];\n}\n/**\n * Check if a simple flat array is a closed ring\n * Returns true if the simple flat array is a closed ring\n */\nfunction isFlatRingClosed(positions, \n/** size of a position, 2 (xy) or 3 (xyz) */\nsize, \n/** start index of the path in the positions array */\nstartIndex, \n/** end index of the path in the positions array */\nendIndex) {\n    for (let i = 0; i < size; i++) {\n        if (positions[startIndex + i] !== positions[endIndex - size + i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Copy a simple polygon coordinates into a flat array, closes the ring if needed.\n * Returns the index of the write head in the destination\n */\nfunction copyNestedRing(\n/** destination */\ntarget, \n/** index in the destination to start copying into */\ntargetStartIndex, \n/** the source polygon */\nsimplePolygon, \n/** size of a position, 2 (xy) or 3 (xyz) */\nsize, \n/** modify polygon to be of the specified winding direction */\nwindingDirection) {\n    let targetIndex = targetStartIndex;\n    const len = simplePolygon.length;\n    for (let i = 0; i < len; i++) {\n        for (let j = 0; j < size; j++) {\n            target[targetIndex++] = simplePolygon[i][j] || 0;\n        }\n    }\n    if (!isNestedRingClosed(simplePolygon)) {\n        for (let j = 0; j < size; j++) {\n            target[targetIndex++] = simplePolygon[0][j] || 0;\n        }\n    }\n    windingOptions.start = targetStartIndex;\n    windingOptions.end = targetIndex;\n    windingOptions.size = size;\n    modifyPolygonWindingDirection(target, windingDirection, windingOptions);\n    return targetIndex;\n}\n/**\n * Copy a simple flat array into another flat array, closes the ring if needed.\n * Returns the index of the write head in the destination\n */\nfunction copyFlatRing(\n/** destination */\ntarget, \n/** index in the destination to start copying into */\ntargetStartIndex, \n/** the source polygon */\npositions, \n/** size of a position, 2 (xy) or 3 (xyz) */\nsize, \n/** start index of the path in the positions array */\nsrcStartIndex = 0, \n/** end index of the path in the positions array */\nsrcEndIndex, windingDirection) {\n    srcEndIndex = srcEndIndex || positions.length;\n    const srcLength = srcEndIndex - srcStartIndex;\n    if (srcLength <= 0) {\n        return targetStartIndex;\n    }\n    let targetIndex = targetStartIndex;\n    for (let i = 0; i < srcLength; i++) {\n        target[targetIndex++] = positions[srcStartIndex + i];\n    }\n    if (!isFlatRingClosed(positions, size, srcStartIndex, srcEndIndex)) {\n        for (let i = 0; i < size; i++) {\n            target[targetIndex++] = positions[srcStartIndex + i];\n        }\n    }\n    windingOptions.start = targetStartIndex;\n    windingOptions.end = targetIndex;\n    windingOptions.size = size;\n    modifyPolygonWindingDirection(target, windingDirection, windingOptions);\n    return targetIndex;\n}\n/**\n * Normalize any polygon representation into the \"complex flat\" format\n */\n/* eslint-disable max-statements */\nexport function normalize(polygon, positionSize) {\n    validate(polygon);\n    const positions = [];\n    const holeIndices = [];\n    if ('positions' in polygon) {\n        // complex flat\n        const { positions: srcPositions, holeIndices: srcHoleIndices } = polygon;\n        if (srcHoleIndices) {\n            let targetIndex = 0;\n            // split the positions array into `holeIndices.length + 1` rings\n            // holeIndices[-1] falls back to 0\n            // holeIndices[holeIndices.length] falls back to positions.length\n            for (let i = 0; i <= srcHoleIndices.length; i++) {\n                targetIndex = copyFlatRing(positions, targetIndex, srcPositions, positionSize, srcHoleIndices[i - 1], srcHoleIndices[i], i === 0 ? OUTER_POLYGON_WINDING : HOLE_POLYGON_WINDING);\n                holeIndices.push(targetIndex);\n            }\n            // The last one is not a starting index of a hole, remove\n            holeIndices.pop();\n            return { positions, holeIndices };\n        }\n        polygon = srcPositions;\n    }\n    if (!isNested(polygon)) {\n        // simple flat\n        copyFlatRing(positions, 0, polygon, positionSize, 0, positions.length, OUTER_POLYGON_WINDING);\n        return positions;\n    }\n    if (!isSimple(polygon)) {\n        // complex polygon\n        let targetIndex = 0;\n        for (const [polygonIndex, simplePolygon] of polygon.entries()) {\n            targetIndex = copyNestedRing(positions, targetIndex, simplePolygon, positionSize, polygonIndex === 0 ? OUTER_POLYGON_WINDING : HOLE_POLYGON_WINDING);\n            holeIndices.push(targetIndex);\n        }\n        // The last one is not a starting index of a hole, remove\n        holeIndices.pop();\n        // last index points to the end of the array, remove it\n        return { positions, holeIndices };\n    }\n    // simple polygon\n    copyNestedRing(positions, 0, polygon, positionSize, OUTER_POLYGON_WINDING);\n    return positions;\n}\n/* eslint-enable max-statements */\n/*\n * Calculate the area of a single plane of the polygon\n */\nfunction getPlaneArea(positions, xIndex, yIndex) {\n    const numVerts = positions.length / 3;\n    let area = 0;\n    for (let i = 0; i < numVerts; i++) {\n        const j = (i + 1) % numVerts;\n        area += positions[i * 3 + xIndex] * positions[j * 3 + yIndex];\n        area -= positions[j * 3 + xIndex] * positions[i * 3 + yIndex];\n    }\n    return Math.abs(area / 2);\n}\nfunction permutePositions(positions, xIndex, yIndex, zIndex) {\n    const numVerts = positions.length / 3;\n    for (let i = 0; i < numVerts; i++) {\n        const o = i * 3;\n        const x = positions[o + 0];\n        const y = positions[o + 1];\n        const z = positions[o + 2];\n        positions[o + xIndex] = x;\n        positions[o + yIndex] = y;\n        positions[o + zIndex] = z;\n    }\n}\n/**\n * Get vertex indices for drawing polygon mesh (triangulation)\n */\n// eslint-disable-next-line complexity, max-statements\nexport function getSurfaceIndices(polygon, positionSize, preproject, full3d) {\n    let holeIndices = getHoleIndices(polygon);\n    if (holeIndices) {\n        holeIndices = holeIndices.map(positionIndex => positionIndex / positionSize);\n    }\n    let positions = getPositions(polygon);\n    const is3d = full3d && positionSize === 3;\n    if (preproject) {\n        // When tesselating lnglat coordinates, project them to the common space for accuracy\n        const n = positions.length;\n        // Clone the array\n        positions = positions.slice();\n        const p = [];\n        for (let i = 0; i < n; i += positionSize) {\n            p[0] = positions[i];\n            p[1] = positions[i + 1];\n            if (is3d) {\n                p[2] = positions[i + 2];\n            }\n            const xy = preproject(p);\n            positions[i] = xy[0];\n            positions[i + 1] = xy[1];\n            if (is3d) {\n                positions[i + 2] = xy[2];\n            }\n        }\n    }\n    if (is3d) {\n        // calculate plane with largest area\n        const xyArea = getPlaneArea(positions, 0, 1);\n        const xzArea = getPlaneArea(positions, 0, 2);\n        const yzArea = getPlaneArea(positions, 1, 2);\n        if (!xyArea && !xzArea && !yzArea) {\n            return []; // no planes have area, nothing we can do\n        }\n        // permute positions to make the largest plane xy for earcut\n        if (xyArea > xzArea && xyArea > yzArea) {\n            // xy plane largest, nothing to do\n        }\n        else if (xzArea > yzArea) {\n            // xz plane largest, permute to make xyz -> xzy\n            if (!preproject) {\n                positions = positions.slice();\n            }\n            permutePositions(positions, 0, 2, 1);\n        }\n        else {\n            // yz plane largest, permute to make xyz -> yzx\n            if (!preproject) {\n                positions = positions.slice();\n            }\n            permutePositions(positions, 2, 0, 1);\n        }\n    }\n    // Let earcut triangulate the polygon\n    return earcut(positions, holeIndices, positionSize);\n}\n//# sourceMappingURL=polygon.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Handles tesselation of polygons with holes\n// - 2D surfaces\n// - 2D outlines\n// - 3D surfaces (top and sides only)\n// - 3D wireframes (not yet)\nimport * as Polygon from \"./polygon.js\";\nimport { Tesselator } from '@deck.gl/core';\nimport { cutPolygonByGrid, cutPolygonByMercatorBounds } from '@math.gl/polygon';\n// This class is set up to allow querying one attribute at a time\n// the way the AttributeManager expects it\nexport default class PolygonTesselator extends Tesselator {\n    constructor(opts) {\n        const { fp64, IndexType = Uint32Array } = opts;\n        super({\n            ...opts,\n            attributes: {\n                positions: { size: 3, type: fp64 ? Float64Array : Float32Array },\n                vertexValid: { type: Uint16Array, size: 1 },\n                indices: { type: IndexType, size: 1 }\n            }\n        });\n    }\n    /** Get attribute by name */\n    get(attributeName) {\n        const { attributes } = this;\n        if (attributeName === 'indices') {\n            return attributes.indices && attributes.indices.subarray(0, this.vertexCount);\n        }\n        return attributes[attributeName];\n    }\n    /** Override base Tesselator method */\n    updateGeometry(opts) {\n        super.updateGeometry(opts);\n        const externalIndices = this.buffers.indices;\n        if (externalIndices) {\n            // @ts-ignore (2339) value is not defined on TypedArray (fall through)\n            this.vertexCount = (externalIndices.value || externalIndices).length;\n        }\n        else if (this.data && !this.getGeometry) {\n            throw new Error('missing indices buffer');\n        }\n    }\n    /** Implement base Tesselator interface */\n    normalizeGeometry(polygon) {\n        if (this.normalize) {\n            const normalizedPolygon = Polygon.normalize(polygon, this.positionSize);\n            if (this.opts.resolution) {\n                return cutPolygonByGrid(Polygon.getPositions(normalizedPolygon), Polygon.getHoleIndices(normalizedPolygon), {\n                    size: this.positionSize,\n                    gridResolution: this.opts.resolution,\n                    edgeTypes: true\n                });\n            }\n            if (this.opts.wrapLongitude) {\n                return cutPolygonByMercatorBounds(Polygon.getPositions(normalizedPolygon), Polygon.getHoleIndices(normalizedPolygon), {\n                    size: this.positionSize,\n                    maxLatitude: 86,\n                    edgeTypes: true\n                });\n            }\n            return normalizedPolygon;\n        }\n        // normalize is explicitly set to false, assume that user passed in already normalized polygons\n        return polygon;\n    }\n    /** Implement base Tesselator interface */\n    getGeometrySize(polygon) {\n        if (isCut(polygon)) {\n            let size = 0;\n            for (const subPolygon of polygon) {\n                size += this.getGeometrySize(subPolygon);\n            }\n            return size;\n        }\n        return Polygon.getPositions(polygon).length / this.positionSize;\n    }\n    /** Override base Tesselator method */\n    getGeometryFromBuffer(buffer) {\n        if (this.normalize || !this.buffers.indices) {\n            return super.getGeometryFromBuffer(buffer);\n        }\n        // we don't need to read the positions if no normalization/tesselation\n        return null;\n    }\n    /** Implement base Tesselator interface */\n    updateGeometryAttributes(polygon, context) {\n        if (polygon && isCut(polygon)) {\n            for (const subPolygon of polygon) {\n                const geometrySize = this.getGeometrySize(subPolygon);\n                context.geometrySize = geometrySize;\n                this.updateGeometryAttributes(subPolygon, context);\n                context.vertexStart += geometrySize;\n                context.indexStart = this.indexStarts[context.geometryIndex + 1];\n            }\n        }\n        else {\n            const normalizedPolygon = polygon;\n            this._updateIndices(normalizedPolygon, context);\n            this._updatePositions(normalizedPolygon, context);\n            this._updateVertexValid(normalizedPolygon, context);\n        }\n    }\n    // Flatten the indices array\n    _updateIndices(polygon, { geometryIndex, vertexStart: offset, indexStart }) {\n        const { attributes, indexStarts, typedArrayManager } = this;\n        let target = attributes.indices;\n        if (!target || !polygon) {\n            return;\n        }\n        let i = indexStart;\n        // 1. get triangulated indices for the internal areas\n        const indices = Polygon.getSurfaceIndices(polygon, this.positionSize, this.opts.preproject, this.opts.full3d);\n        // make sure the buffer is large enough\n        target = typedArrayManager.allocate(target, indexStart + indices.length, {\n            copy: true\n        });\n        // 2. offset each index by the number of indices in previous polygons\n        for (let j = 0; j < indices.length; j++) {\n            target[i++] = indices[j] + offset;\n        }\n        indexStarts[geometryIndex + 1] = indexStart + indices.length;\n        attributes.indices = target;\n    }\n    // Flatten out all the vertices of all the sub subPolygons\n    _updatePositions(polygon, { vertexStart, geometrySize }) {\n        const { attributes: { positions }, positionSize } = this;\n        if (!positions || !polygon) {\n            return;\n        }\n        const polygonPositions = Polygon.getPositions(polygon);\n        for (let i = vertexStart, j = 0; j < geometrySize; i++, j++) {\n            const x = polygonPositions[j * positionSize];\n            const y = polygonPositions[j * positionSize + 1];\n            const z = positionSize > 2 ? polygonPositions[j * positionSize + 2] : 0;\n            positions[i * 3] = x;\n            positions[i * 3 + 1] = y;\n            positions[i * 3 + 2] = z;\n        }\n    }\n    _updateVertexValid(polygon, { vertexStart, geometrySize }) {\n        const { positionSize } = this;\n        const vertexValid = this.attributes.vertexValid;\n        const holeIndices = polygon && Polygon.getHoleIndices(polygon);\n        /* We are reusing the some buffer for `nextPositions` by offseting one vertex\n         * to the left. As a result,\n         * the last vertex of each ring overlaps with the first vertex of the next ring.\n         * `vertexValid` is used to mark the end of each ring so we don't draw these\n         * segments:\n          positions      A0 A1 A2 A3 A4 B0 B1 B2 C0 ...\n          nextPositions  A1 A2 A3 A4 B0 B1 B2 C0 C1 ...\n          vertexValid    1  1  1  1  0  1  1  0  1 ...\n         */\n        if (polygon && polygon.edgeTypes) {\n            vertexValid.set(polygon.edgeTypes, vertexStart);\n        }\n        else {\n            vertexValid.fill(1, vertexStart, vertexStart + geometrySize);\n        }\n        if (holeIndices) {\n            for (let j = 0; j < holeIndices.length; j++) {\n                vertexValid[vertexStart + holeIndices[j] / positionSize - 1] = 0;\n            }\n        }\n        vertexValid[vertexStart + geometrySize - 1] = 0;\n    }\n}\nfunction isCut(polygon) {\n    return Array.isArray(polygon) && polygon.length > 0 && !Number.isFinite(polygon[0]);\n}\n//# sourceMappingURL=polygon-tesselator.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst uniformBlock = `\\\nuniform solidPolygonUniforms {\n  bool extruded;\n  bool isWireframe;\n  float elevationScale;\n} solidPolygon;\n`;\nexport const solidPolygonUniforms = {\n    name: 'solidPolygon',\n    vs: uniformBlock,\n    fs: uniformBlock,\n    uniformTypes: {\n        extruded: 'f32',\n        isWireframe: 'f32',\n        elevationScale: 'f32'\n    }\n};\n//# sourceMappingURL=solid-polygon-layer-uniforms.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `\\\nin vec4 fillColors;\nin vec4 lineColors;\nin vec3 pickingColors;\nout vec4 vColor;\nstruct PolygonProps {\nvec3 positions;\nvec3 positions64Low;\nvec3 normal;\nfloat elevations;\n};\nvec3 project_offset_normal(vec3 vector) {\nif (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\nproject.coordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\nreturn normalize(vector * project.commonUnitsPerWorldUnit);\n}\nreturn project_normal(vector);\n}\nvoid calculatePosition(PolygonProps props) {\nvec3 pos = props.positions;\nvec3 pos64Low = props.positions64Low;\nvec3 normal = props.normal;\nvec4 colors = solidPolygon.isWireframe ? lineColors : fillColors;\ngeometry.worldPosition = props.positions;\ngeometry.pickingColor = pickingColors;\nif (solidPolygon.extruded) {\npos.z += props.elevations * solidPolygon.elevationScale;\n}\ngl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nif (solidPolygon.extruded) {\n#ifdef IS_SIDE_VERTEX\nnormal = project_offset_normal(normal);\n#else\nnormal = project_normal(normal);\n#endif\ngeometry.normal = normal;\nvec3 lightColor = lighting_getLightColor(colors.rgb, project.cameraPosition, geometry.position.xyz, geometry.normal);\nvColor = vec4(lightColor, colors.a * layer.opacity);\n} else {\nvColor = vec4(colors.rgb, colors.a * layer.opacity);\n}\nDECKGL_FILTER_COLOR(vColor, geometry);\n}\n`;\n//# sourceMappingURL=solid-polygon-layer-vertex-main.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport main from \"./solid-polygon-layer-vertex-main.glsl.js\";\nexport default `\\\n#version 300 es\n#define SHADER_NAME solid-polygon-layer-vertex-shader\nin vec3 vertexPositions;\nin vec3 vertexPositions64Low;\nin float elevations;\n${main}\nvoid main(void) {\nPolygonProps props;\nprops.positions = vertexPositions;\nprops.positions64Low = vertexPositions64Low;\nprops.elevations = elevations;\nprops.normal = vec3(0.0, 0.0, 1.0);\ncalculatePosition(props);\n}\n`;\n//# sourceMappingURL=solid-polygon-layer-vertex-top.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport main from \"./solid-polygon-layer-vertex-main.glsl.js\";\nexport default `\\\n#version 300 es\n#define SHADER_NAME solid-polygon-layer-vertex-shader-side\n#define IS_SIDE_VERTEX\nin vec2 positions;\nin vec3 vertexPositions;\nin vec3 nextVertexPositions;\nin vec3 vertexPositions64Low;\nin vec3 nextVertexPositions64Low;\nin float elevations;\nin float instanceVertexValid;\n${main}\nvoid main(void) {\nif(instanceVertexValid < 0.5){\ngl_Position = vec4(0.);\nreturn;\n}\nPolygonProps props;\nvec3 pos;\nvec3 pos64Low;\nvec3 nextPos;\nvec3 nextPos64Low;\n#if RING_WINDING_ORDER_CW == 1\npos = vertexPositions;\npos64Low = vertexPositions64Low;\nnextPos = nextVertexPositions;\nnextPos64Low = nextVertexPositions64Low;\n#else\npos = nextVertexPositions;\npos64Low = nextVertexPositions64Low;\nnextPos = vertexPositions;\nnextPos64Low = vertexPositions64Low;\n#endif\nprops.positions = mix(pos, nextPos, positions.x);\nprops.positions64Low = mix(pos64Low, nextPos64Low, positions.x);\nprops.normal = vec3(\npos.y - nextPos.y + (pos64Low.y - nextPos64Low.y),\nnextPos.x - pos.x + (nextPos64Low.x - pos64Low.x),\n0.0);\nprops.elevations = elevations * positions.y;\ncalculatePosition(props);\n}\n`;\n//# sourceMappingURL=solid-polygon-layer-vertex-side.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `\\\n#version 300 es\n#define SHADER_NAME solid-polygon-layer-fragment-shader\nprecision highp float;\nin vec4 vColor;\nout vec4 fragColor;\nvoid main(void) {\nfragColor = vColor;\ngeometry.uv = vec2(0.);\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;\n//# sourceMappingURL=solid-polygon-layer-fragment.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Layer, project32, picking, COORDINATE_SYSTEM } from '@deck.gl/core';\nimport { Model, Geometry } from '@luma.gl/engine';\nimport { gouraudMaterial } from '@luma.gl/shadertools';\n// Polygon geometry generation is managed by the polygon tesselator\nimport PolygonTesselator from \"./polygon-tesselator.js\";\nimport { solidPolygonUniforms } from \"./solid-polygon-layer-uniforms.js\";\nimport vsTop from \"./solid-polygon-layer-vertex-top.glsl.js\";\nimport vsSide from \"./solid-polygon-layer-vertex-side.glsl.js\";\nimport fs from \"./solid-polygon-layer-fragment.glsl.js\";\nconst DEFAULT_COLOR = [0, 0, 0, 255];\nconst defaultProps = {\n    filled: true,\n    extruded: false,\n    wireframe: false,\n    _normalize: true,\n    _windingOrder: 'CW',\n    _full3d: false,\n    elevationScale: { type: 'number', min: 0, value: 1 },\n    getPolygon: { type: 'accessor', value: (f) => f.polygon },\n    getElevation: { type: 'accessor', value: 1000 },\n    getFillColor: { type: 'accessor', value: DEFAULT_COLOR },\n    getLineColor: { type: 'accessor', value: DEFAULT_COLOR },\n    material: true\n};\nconst ATTRIBUTE_TRANSITION = {\n    enter: (value, chunk) => {\n        return chunk.length ? chunk.subarray(chunk.length - value.length) : value;\n    }\n};\nclass SolidPolygonLayer extends Layer {\n    getShaders(type) {\n        return super.getShaders({\n            vs: type === 'top' ? vsTop : vsSide,\n            fs,\n            defines: {\n                RING_WINDING_ORDER_CW: !this.props._normalize && this.props._windingOrder === 'CCW' ? 0 : 1\n            },\n            modules: [project32, gouraudMaterial, picking, solidPolygonUniforms]\n        });\n    }\n    get wrapLongitude() {\n        return false;\n    }\n    getBounds() {\n        return this.getAttributeManager()?.getBounds(['vertexPositions']);\n    }\n    initializeState() {\n        const { viewport } = this.context;\n        let { coordinateSystem } = this.props;\n        const { _full3d } = this.props;\n        if (viewport.isGeospatial && coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n            coordinateSystem = COORDINATE_SYSTEM.LNGLAT;\n        }\n        let preproject;\n        if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT) {\n            if (_full3d) {\n                preproject = viewport.projectPosition.bind(viewport);\n            }\n            else {\n                preproject = viewport.projectFlat.bind(viewport);\n            }\n        }\n        this.setState({\n            numInstances: 0,\n            polygonTesselator: new PolygonTesselator({\n                // Lnglat coordinates are usually projected non-linearly, which affects tesselation results\n                // Provide a preproject function if the coordinates are in lnglat\n                preproject,\n                fp64: this.use64bitPositions(),\n                IndexType: Uint32Array\n            })\n        });\n        const attributeManager = this.getAttributeManager();\n        const noAlloc = true;\n        attributeManager.remove(['instancePickingColors']);\n        /* eslint-disable max-len */\n        attributeManager.add({\n            indices: {\n                size: 1,\n                isIndexed: true,\n                // eslint-disable-next-line @typescript-eslint/unbound-method\n                update: this.calculateIndices,\n                noAlloc\n            },\n            vertexPositions: {\n                size: 3,\n                type: 'float64',\n                stepMode: 'dynamic',\n                fp64: this.use64bitPositions(),\n                transition: ATTRIBUTE_TRANSITION,\n                accessor: 'getPolygon',\n                // eslint-disable-next-line @typescript-eslint/unbound-method\n                update: this.calculatePositions,\n                noAlloc,\n                shaderAttributes: {\n                    nextVertexPositions: {\n                        vertexOffset: 1\n                    }\n                }\n            },\n            instanceVertexValid: {\n                size: 1,\n                type: 'uint16',\n                stepMode: 'instance',\n                // eslint-disable-next-line @typescript-eslint/unbound-method\n                update: this.calculateVertexValid,\n                noAlloc\n            },\n            elevations: {\n                size: 1,\n                stepMode: 'dynamic',\n                transition: ATTRIBUTE_TRANSITION,\n                accessor: 'getElevation'\n            },\n            fillColors: {\n                size: this.props.colorFormat.length,\n                type: 'unorm8',\n                stepMode: 'dynamic',\n                transition: ATTRIBUTE_TRANSITION,\n                accessor: 'getFillColor',\n                defaultValue: DEFAULT_COLOR\n            },\n            lineColors: {\n                size: this.props.colorFormat.length,\n                type: 'unorm8',\n                stepMode: 'dynamic',\n                transition: ATTRIBUTE_TRANSITION,\n                accessor: 'getLineColor',\n                defaultValue: DEFAULT_COLOR\n            },\n            pickingColors: {\n                size: 4,\n                type: 'uint8',\n                stepMode: 'dynamic',\n                accessor: (object, { index, target: value }) => this.encodePickingColor(object && object.__source ? object.__source.index : index, value)\n            }\n        });\n        /* eslint-enable max-len */\n    }\n    getPickingInfo(params) {\n        const info = super.getPickingInfo(params);\n        const { index } = info;\n        const data = this.props.data;\n        // Check if data comes from a composite layer, wrapped with getSubLayerRow\n        if (data[0] && data[0].__source) {\n            // index decoded from picking color refers to the source index\n            info.object = data.find(d => d.__source.index === index);\n        }\n        return info;\n    }\n    disablePickingIndex(objectIndex) {\n        const data = this.props.data;\n        // Check if data comes from a composite layer, wrapped with getSubLayerRow\n        if (data[0] && data[0].__source) {\n            // index decoded from picking color refers to the source index\n            for (let i = 0; i < data.length; i++) {\n                if (data[i].__source.index === objectIndex) {\n                    this._disablePickingIndex(i);\n                }\n            }\n        }\n        else {\n            super.disablePickingIndex(objectIndex);\n        }\n    }\n    draw({ uniforms }) {\n        const { extruded, filled, wireframe, elevationScale } = this.props;\n        const { topModel, sideModel, wireframeModel, polygonTesselator } = this.state;\n        const renderUniforms = {\n            extruded: Boolean(extruded),\n            elevationScale,\n            isWireframe: false\n        };\n        // Note - the order is important\n        if (wireframeModel && wireframe) {\n            wireframeModel.setInstanceCount(polygonTesselator.instanceCount - 1);\n            wireframeModel.shaderInputs.setProps({ solidPolygon: { ...renderUniforms, isWireframe: true } });\n            wireframeModel.draw(this.context.renderPass);\n        }\n        if (sideModel && filled) {\n            sideModel.setInstanceCount(polygonTesselator.instanceCount - 1);\n            sideModel.shaderInputs.setProps({ solidPolygon: renderUniforms });\n            sideModel.draw(this.context.renderPass);\n        }\n        if (topModel && filled) {\n            topModel.setVertexCount(polygonTesselator.vertexCount);\n            topModel.shaderInputs.setProps({ solidPolygon: renderUniforms });\n            topModel.draw(this.context.renderPass);\n        }\n    }\n    updateState(updateParams) {\n        super.updateState(updateParams);\n        this.updateGeometry(updateParams);\n        const { props, oldProps, changeFlags } = updateParams;\n        const attributeManager = this.getAttributeManager();\n        const regenerateModels = changeFlags.extensionsChanged ||\n            props.filled !== oldProps.filled ||\n            props.extruded !== oldProps.extruded;\n        if (regenerateModels) {\n            this.state.models?.forEach(model => model.destroy());\n            this.setState(this._getModels());\n            attributeManager.invalidateAll();\n        }\n    }\n    updateGeometry({ props, oldProps, changeFlags }) {\n        const geometryConfigChanged = changeFlags.dataChanged ||\n            (changeFlags.updateTriggersChanged &&\n                (changeFlags.updateTriggersChanged.all || changeFlags.updateTriggersChanged.getPolygon));\n        // When the geometry config  or the data is changed,\n        // tessellator needs to be invoked\n        if (geometryConfigChanged) {\n            const { polygonTesselator } = this.state;\n            const buffers = props.data.attributes || {};\n            polygonTesselator.updateGeometry({\n                data: props.data,\n                normalize: props._normalize,\n                geometryBuffer: buffers.getPolygon,\n                buffers,\n                getGeometry: props.getPolygon,\n                positionFormat: props.positionFormat,\n                wrapLongitude: props.wrapLongitude,\n                // TODO - move the flag out of the viewport\n                resolution: this.context.viewport.resolution,\n                fp64: this.use64bitPositions(),\n                dataChanged: changeFlags.dataChanged,\n                full3d: props._full3d\n            });\n            this.setState({\n                numInstances: polygonTesselator.instanceCount,\n                startIndices: polygonTesselator.vertexStarts\n            });\n            if (!changeFlags.dataChanged) {\n                // Base `layer.updateState` only invalidates all attributes on data change\n                // Cover the rest of the scenarios here\n                this.getAttributeManager().invalidateAll();\n            }\n        }\n    }\n    _getModels() {\n        const { id, filled, extruded } = this.props;\n        let topModel;\n        let sideModel;\n        let wireframeModel;\n        if (filled) {\n            const shaders = this.getShaders('top');\n            shaders.defines.NON_INSTANCED_MODEL = 1;\n            const bufferLayout = this.getAttributeManager().getBufferLayouts({ isInstanced: false });\n            topModel = new Model(this.context.device, {\n                ...shaders,\n                id: `${id}-top`,\n                topology: 'triangle-list',\n                bufferLayout,\n                isIndexed: true,\n                userData: {\n                    excludeAttributes: { instanceVertexValid: true }\n                }\n            });\n        }\n        if (extruded) {\n            const bufferLayout = this.getAttributeManager().getBufferLayouts({ isInstanced: true });\n            sideModel = new Model(this.context.device, {\n                ...this.getShaders('side'),\n                id: `${id}-side`,\n                bufferLayout,\n                geometry: new Geometry({\n                    topology: 'triangle-strip',\n                    attributes: {\n                        // top right - top left - bottom right - bottom left\n                        positions: {\n                            size: 2,\n                            value: new Float32Array([1, 0, 0, 0, 1, 1, 0, 1])\n                        }\n                    }\n                }),\n                isInstanced: true,\n                userData: {\n                    excludeAttributes: { indices: true }\n                }\n            });\n            wireframeModel = new Model(this.context.device, {\n                ...this.getShaders('side'),\n                id: `${id}-wireframe`,\n                bufferLayout,\n                geometry: new Geometry({\n                    topology: 'line-strip',\n                    attributes: {\n                        // top right - top left - bottom left - bottom right\n                        positions: {\n                            size: 2,\n                            value: new Float32Array([1, 0, 0, 0, 0, 1, 1, 1])\n                        }\n                    }\n                }),\n                isInstanced: true,\n                userData: {\n                    excludeAttributes: { indices: true }\n                }\n            });\n        }\n        return {\n            models: [sideModel, wireframeModel, topModel].filter(Boolean),\n            topModel,\n            sideModel,\n            wireframeModel\n        };\n    }\n    calculateIndices(attribute) {\n        const { polygonTesselator } = this.state;\n        attribute.startIndices = polygonTesselator.indexStarts;\n        attribute.value = polygonTesselator.get('indices');\n    }\n    calculatePositions(attribute) {\n        const { polygonTesselator } = this.state;\n        attribute.startIndices = polygonTesselator.vertexStarts;\n        attribute.value = polygonTesselator.get('positions');\n    }\n    calculateVertexValid(attribute) {\n        attribute.value = this.state.polygonTesselator.get('vertexValid');\n    }\n}\nSolidPolygonLayer.defaultProps = defaultProps;\nSolidPolygonLayer.layerName = 'SolidPolygonLayer';\nexport default SolidPolygonLayer;\n//# sourceMappingURL=solid-polygon-layer.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Assume data array is sorted by <accessor>\n// Replaces the specified range with a new subarray\n// Mutates the data array\n// Returns {startRow, endRow} of the inserted items\nexport function replaceInRange({ data, getIndex, dataRange, replace }) {\n    const { startRow = 0, endRow = Infinity } = dataRange;\n    const count = data.length;\n    let replaceStart = count;\n    let replaceEnd = count;\n    for (let i = 0; i < count; i++) {\n        const row = getIndex(data[i]);\n        if (replaceStart > i && row >= startRow) {\n            replaceStart = i;\n        }\n        if (row >= endRow) {\n            replaceEnd = i;\n            break;\n        }\n    }\n    let index = replaceStart;\n    const dataLengthChanged = replaceEnd - replaceStart !== replace.length;\n    // Save the items after replaceEnd before we overwrite data\n    const endChunk = dataLengthChanged ? data.slice(replaceEnd) : undefined;\n    // Insert new items\n    for (let i = 0; i < replace.length; i++) {\n        data[index++] = replace[i];\n    }\n    if (endChunk) {\n        // Append items after replaceEnd\n        for (let i = 0; i < endChunk.length; i++) {\n            data[index++] = endChunk[i];\n        }\n        // Trim additional items\n        data.length = index;\n    }\n    return {\n        startRow: replaceStart,\n        endRow: replaceStart + replace.length\n    };\n}\n//# sourceMappingURL=utils.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { CompositeLayer, createIterable, log } from '@deck.gl/core';\nimport SolidPolygonLayer from \"../solid-polygon-layer/solid-polygon-layer.js\";\nimport PathLayer from \"../path-layer/path-layer.js\";\nimport * as Polygon from \"../solid-polygon-layer/polygon.js\";\nimport { replaceInRange } from \"../utils.js\";\nconst defaultLineColor = [0, 0, 0, 255];\nconst defaultFillColor = [0, 0, 0, 255];\nconst defaultProps = {\n    stroked: true,\n    filled: true,\n    extruded: false,\n    elevationScale: 1,\n    wireframe: false,\n    _normalize: true,\n    _windingOrder: 'CW',\n    lineWidthUnits: 'meters',\n    lineWidthScale: 1,\n    lineWidthMinPixels: 0,\n    lineWidthMaxPixels: Number.MAX_SAFE_INTEGER,\n    lineJointRounded: false,\n    lineMiterLimit: 4,\n    getPolygon: { type: 'accessor', value: (f) => f.polygon },\n    // Polygon fill color\n    getFillColor: { type: 'accessor', value: defaultFillColor },\n    // Point, line and polygon outline color\n    getLineColor: { type: 'accessor', value: defaultLineColor },\n    // Line and polygon outline accessors\n    getLineWidth: { type: 'accessor', value: 1 },\n    // Polygon extrusion accessor\n    getElevation: { type: 'accessor', value: 1000 },\n    // Optional material for 'lighting' shader module\n    material: true\n};\n/** A composite layer that renders filled, stroked and/or extruded polygons. */\nclass PolygonLayer extends CompositeLayer {\n    initializeState() {\n        this.state = {\n            paths: [],\n            pathsDiff: null\n        };\n        if (this.props.getLineDashArray) {\n            log.removed('getLineDashArray', 'PathStyleExtension')();\n        }\n    }\n    updateState({ changeFlags }) {\n        const geometryChanged = changeFlags.dataChanged ||\n            (changeFlags.updateTriggersChanged &&\n                (changeFlags.updateTriggersChanged.all || changeFlags.updateTriggersChanged.getPolygon));\n        if (geometryChanged && Array.isArray(changeFlags.dataChanged)) {\n            const paths = this.state.paths.slice();\n            const pathsDiff = changeFlags.dataChanged.map(dataRange => replaceInRange({\n                data: paths,\n                getIndex: p => p.__source.index,\n                dataRange,\n                replace: this._getPaths(dataRange)\n            }));\n            this.setState({ paths, pathsDiff });\n        }\n        else if (geometryChanged) {\n            this.setState({\n                paths: this._getPaths(),\n                pathsDiff: null\n            });\n        }\n    }\n    _getPaths(dataRange = {}) {\n        const { data, getPolygon, positionFormat, _normalize } = this.props;\n        const paths = [];\n        const positionSize = positionFormat === 'XY' ? 2 : 3;\n        const { startRow, endRow } = dataRange;\n        const { iterable, objectInfo } = createIterable(data, startRow, endRow);\n        for (const object of iterable) {\n            objectInfo.index++;\n            let polygon = getPolygon(object, objectInfo);\n            if (_normalize) {\n                polygon = Polygon.normalize(polygon, positionSize);\n            }\n            const { holeIndices } = polygon;\n            const positions = polygon.positions || polygon;\n            if (holeIndices) {\n                // split the positions array into `holeIndices.length + 1` rings\n                // holeIndices[-1] falls back to 0\n                // holeIndices[holeIndices.length] falls back to positions.length\n                for (let i = 0; i <= holeIndices.length; i++) {\n                    const path = positions.slice(holeIndices[i - 1] || 0, holeIndices[i] || positions.length);\n                    paths.push(this.getSubLayerRow({ path }, object, objectInfo.index));\n                }\n            }\n            else {\n                paths.push(this.getSubLayerRow({ path: positions }, object, objectInfo.index));\n            }\n        }\n        return paths;\n    }\n    /* eslint-disable complexity */\n    renderLayers() {\n        // Layer composition props\n        const { data, _dataDiff, stroked, filled, extruded, wireframe, _normalize, _windingOrder, elevationScale, transitions, positionFormat } = this.props;\n        // Rendering props underlying layer\n        const { lineWidthUnits, lineWidthScale, lineWidthMinPixels, lineWidthMaxPixels, lineJointRounded, lineMiterLimit, lineDashJustified } = this.props;\n        // Accessor props for underlying layers\n        const { getFillColor, getLineColor, getLineWidth, getLineDashArray, getElevation, getPolygon, updateTriggers, material } = this.props;\n        const { paths, pathsDiff } = this.state;\n        const FillLayer = this.getSubLayerClass('fill', SolidPolygonLayer);\n        const StrokeLayer = this.getSubLayerClass('stroke', PathLayer);\n        // Filled Polygon Layer\n        const polygonLayer = this.shouldRenderSubLayer('fill', paths) &&\n            new FillLayer({\n                _dataDiff,\n                extruded,\n                elevationScale,\n                filled,\n                wireframe,\n                _normalize,\n                _windingOrder,\n                getElevation,\n                getFillColor,\n                getLineColor: extruded && wireframe ? getLineColor : defaultLineColor,\n                material,\n                transitions\n            }, this.getSubLayerProps({\n                id: 'fill',\n                updateTriggers: updateTriggers && {\n                    getPolygon: updateTriggers.getPolygon,\n                    getElevation: updateTriggers.getElevation,\n                    getFillColor: updateTriggers.getFillColor,\n                    // using a legacy API to invalid lineColor attributes\n                    // if (extruded && wireframe) has changed\n                    lineColors: extruded && wireframe,\n                    getLineColor: updateTriggers.getLineColor\n                }\n            }), {\n                data,\n                positionFormat,\n                getPolygon\n            });\n        // Polygon line layer\n        const polygonLineLayer = !extruded &&\n            stroked &&\n            this.shouldRenderSubLayer('stroke', paths) &&\n            new StrokeLayer({\n                _dataDiff: pathsDiff && (() => pathsDiff),\n                widthUnits: lineWidthUnits,\n                widthScale: lineWidthScale,\n                widthMinPixels: lineWidthMinPixels,\n                widthMaxPixels: lineWidthMaxPixels,\n                jointRounded: lineJointRounded,\n                miterLimit: lineMiterLimit,\n                dashJustified: lineDashJustified,\n                // Already normalized\n                _pathType: 'loop',\n                transitions: transitions && {\n                    getWidth: transitions.getLineWidth,\n                    getColor: transitions.getLineColor,\n                    getPath: transitions.getPolygon\n                },\n                getColor: this.getSubLayerAccessor(getLineColor),\n                getWidth: this.getSubLayerAccessor(getLineWidth),\n                getDashArray: this.getSubLayerAccessor(getLineDashArray)\n            }, this.getSubLayerProps({\n                id: 'stroke',\n                updateTriggers: updateTriggers && {\n                    getWidth: updateTriggers.getLineWidth,\n                    getColor: updateTriggers.getLineColor,\n                    getDashArray: updateTriggers.getLineDashArray\n                }\n            }), {\n                data: paths,\n                positionFormat,\n                getPath: x => x.path\n            });\n        return [\n            // If not extruded: flat fill layer is drawn below outlines\n            !extruded && polygonLayer,\n            polygonLineLayer,\n            // If extruded: draw fill layer last for correct blending behavior\n            extruded && polygonLayer\n        ];\n    }\n}\nPolygonLayer.layerName = 'PolygonLayer';\nPolygonLayer.defaultProps = defaultProps;\nexport default PolygonLayer;\n//# sourceMappingURL=polygon-layer.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/**\n * Return the feature for an accesor\n */\nexport function binaryToFeatureForAccesor(data, index) {\n    if (!data) {\n        return null;\n    }\n    const featureIndex = 'startIndices' in data ? data.startIndices[index] : index;\n    const geometryIndex = data.featureIds.value[featureIndex];\n    if (featureIndex !== -1) {\n        return getPropertiesForIndex(data, geometryIndex, featureIndex);\n    }\n    return null;\n}\nfunction getPropertiesForIndex(data, propertiesIndex, numericPropsIndex) {\n    const feature = {\n        properties: { ...data.properties[propertiesIndex] }\n    };\n    for (const prop in data.numericProps) {\n        feature.properties[prop] = data.numericProps[prop].value[numericPropsIndex];\n    }\n    return feature;\n}\n// Custom picking color to keep binary indexes\nexport function calculatePickingColors(geojsonBinary, encodePickingColor) {\n    const pickingColors = {\n        points: null,\n        lines: null,\n        polygons: null\n    };\n    for (const key in pickingColors) {\n        const featureIds = geojsonBinary[key].globalFeatureIds.value;\n        pickingColors[key] = new Uint8ClampedArray(featureIds.length * 4);\n        const pickingColor = [];\n        for (let i = 0; i < featureIds.length; i++) {\n            encodePickingColor(featureIds[i], pickingColor);\n            pickingColors[key][i * 4 + 0] = pickingColor[0];\n            pickingColors[key][i * 4 + 1] = pickingColor[1];\n            pickingColors[key][i * 4 + 2] = pickingColor[2];\n            pickingColors[key][i * 4 + 3] = 255;\n        }\n    }\n    return pickingColors;\n}\n//# sourceMappingURL=geojson-binary.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst uniformBlock = `\\\nuniform sdfUniforms {\n  float gamma;\n  bool enabled;\n  float buffer;\n  float outlineBuffer;\n  vec4 outlineColor;\n} sdf;\n`;\nexport const sdfUniforms = {\n    name: 'sdf',\n    vs: uniformBlock,\n    fs: uniformBlock,\n    uniformTypes: {\n        gamma: 'f32',\n        enabled: 'f32',\n        buffer: 'f32',\n        outlineBuffer: 'f32',\n        outlineColor: 'vec4<f32>'\n    }\n};\n//# sourceMappingURL=sdf-uniforms.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `\\\n#version 300 es\n#define SHADER_NAME multi-icon-layer-fragment-shader\nprecision highp float;\nuniform sampler2D iconsTexture;\nin vec4 vColor;\nin vec2 vTextureCoords;\nin vec2 uv;\nout vec4 fragColor;\nvoid main(void) {\ngeometry.uv = uv;\nif (!bool(picking.isActive)) {\nfloat alpha = texture(iconsTexture, vTextureCoords).a;\nvec4 color = vColor;\nif (sdf.enabled) {\nfloat distance = alpha;\nalpha = smoothstep(sdf.buffer - sdf.gamma, sdf.buffer + sdf.gamma, distance);\nif (sdf.outlineBuffer > 0.0) {\nfloat inFill = alpha;\nfloat inBorder = smoothstep(sdf.outlineBuffer - sdf.gamma, sdf.outlineBuffer + sdf.gamma, distance);\ncolor = mix(sdf.outlineColor, vColor, inFill);\nalpha = inBorder;\n}\n}\nfloat a = alpha * color.a;\nif (a < icon.alphaCutoff) {\ndiscard;\n}\nfragColor = vec4(color.rgb, a * layer.opacity);\n}\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;\n//# sourceMappingURL=multi-icon-layer-fragment.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { log } from '@deck.gl/core';\nimport IconLayer from \"../../icon-layer/icon-layer.js\";\nimport { sdfUniforms } from \"./sdf-uniforms.js\";\nimport fs from \"./multi-icon-layer-fragment.glsl.js\";\n// TODO expose as layer properties\nconst DEFAULT_BUFFER = 192.0 / 256;\nconst EMPTY_ARRAY = [];\nconst defaultProps = {\n    getIconOffsets: { type: 'accessor', value: (x) => x.offsets },\n    alphaCutoff: 0.001,\n    smoothing: 0.1,\n    outlineWidth: 0,\n    outlineColor: { type: 'color', value: [0, 0, 0, 255] }\n};\nclass MultiIconLayer extends IconLayer {\n    getShaders() {\n        const shaders = super.getShaders();\n        return { ...shaders, modules: [...shaders.modules, sdfUniforms], fs };\n    }\n    initializeState() {\n        super.initializeState();\n        const attributeManager = this.getAttributeManager();\n        attributeManager.addInstanced({\n            instanceOffsets: {\n                size: 2,\n                accessor: 'getIconOffsets'\n            },\n            instancePickingColors: {\n                type: 'uint8',\n                size: 3,\n                accessor: (object, { index, target: value }) => this.encodePickingColor(index, value)\n            }\n        });\n    }\n    updateState(params) {\n        super.updateState(params);\n        const { props, oldProps } = params;\n        let { outlineColor } = props;\n        if (outlineColor !== oldProps.outlineColor) {\n            outlineColor = outlineColor.map(x => x / 255);\n            outlineColor[3] = Number.isFinite(outlineColor[3]) ? outlineColor[3] : 1;\n            this.setState({\n                outlineColor\n            });\n        }\n        if (!props.sdf && props.outlineWidth) {\n            log.warn(`${this.id}: fontSettings.sdf is required to render outline`)();\n        }\n    }\n    draw(params) {\n        const { sdf, smoothing, outlineWidth } = this.props;\n        const { outlineColor } = this.state;\n        const outlineBuffer = outlineWidth\n            ? Math.max(smoothing, DEFAULT_BUFFER * (1 - outlineWidth))\n            : -1;\n        const model = this.state.model;\n        const sdfProps = {\n            buffer: DEFAULT_BUFFER,\n            outlineBuffer,\n            gamma: smoothing,\n            enabled: Boolean(sdf),\n            outlineColor\n        };\n        model.shaderInputs.setProps({ sdf: sdfProps });\n        super.draw(params);\n        // draw text without outline on top to ensure a thick outline won't occlude other characters\n        if (sdf && outlineWidth) {\n            const { iconManager } = this.state;\n            const iconsTexture = iconManager.getTexture();\n            if (iconsTexture) {\n                model.shaderInputs.setProps({ sdf: { ...sdfProps, outlineBuffer: DEFAULT_BUFFER } });\n                model.draw(this.context.renderPass);\n            }\n        }\n    }\n    getInstanceOffset(icons) {\n        return icons ? Array.from(icons).flatMap(icon => super.getInstanceOffset(icon)) : EMPTY_ARRAY;\n    }\n    getInstanceColorMode(icons) {\n        return 1; // mask\n    }\n    getInstanceIconFrame(icons) {\n        return icons\n            ? Array.from(icons).flatMap(icon => super.getInstanceIconFrame(icon))\n            : EMPTY_ARRAY;\n    }\n}\nMultiIconLayer.defaultProps = defaultProps;\nMultiIconLayer.layerName = 'MultiIconLayer';\nexport default MultiIconLayer;\n//# sourceMappingURL=multi-icon-layer.js.map","const INF = 1e20;\n\nexport default class TinySDF {\n    constructor({\n        fontSize = 24,\n        buffer = 3,\n        radius = 8,\n        cutoff = 0.25,\n        fontFamily = 'sans-serif',\n        fontWeight = 'normal',\n        fontStyle = 'normal',\n        lang = null\n    } = {}) {\n        this.buffer = buffer;\n        this.cutoff = cutoff;\n        this.radius = radius;\n        this.lang = lang;\n\n        // make the canvas size big enough to both have the specified buffer around the glyph\n        // for \"halo\", and account for some glyphs possibly being larger than their font size\n        const size = this.size = fontSize + buffer * 4;\n\n        const canvas = this._createCanvas(size);\n        const ctx = this.ctx = canvas.getContext('2d', {willReadFrequently: true});\n        ctx.font = `${fontStyle} ${fontWeight} ${fontSize}px ${fontFamily}`;\n\n        ctx.textBaseline = 'alphabetic';\n        ctx.textAlign = 'left'; // Necessary so that RTL text doesn't have different alignment\n        ctx.fillStyle = 'black';\n\n        // temporary arrays for the distance transform\n        this.gridOuter = new Float64Array(size * size);\n        this.gridInner = new Float64Array(size * size);\n        this.f = new Float64Array(size);\n        this.z = new Float64Array(size + 1);\n        this.v = new Uint16Array(size);\n    }\n\n    _createCanvas(size) {\n        const canvas = document.createElement('canvas');\n        canvas.width = canvas.height = size;\n        return canvas;\n    }\n\n    draw(char) {\n        const {\n            width: glyphAdvance,\n            actualBoundingBoxAscent,\n            actualBoundingBoxDescent,\n            actualBoundingBoxLeft,\n            actualBoundingBoxRight\n        } = this.ctx.measureText(char);\n\n        // The integer/pixel part of the top alignment is encoded in metrics.glyphTop\n        // The remainder is implicitly encoded in the rasterization\n        const glyphTop = Math.ceil(actualBoundingBoxAscent);\n        const glyphLeft = 0;\n\n        // If the glyph overflows the canvas size, it will be clipped at the bottom/right\n        const glyphWidth = Math.max(0, Math.min(this.size - this.buffer, Math.ceil(actualBoundingBoxRight - actualBoundingBoxLeft)));\n        const glyphHeight = Math.min(this.size - this.buffer, glyphTop + Math.ceil(actualBoundingBoxDescent));\n\n        const width = glyphWidth + 2 * this.buffer;\n        const height = glyphHeight + 2 * this.buffer;\n\n        const len = Math.max(width * height, 0);\n        const data = new Uint8ClampedArray(len);\n        const glyph = {data, width, height, glyphWidth, glyphHeight, glyphTop, glyphLeft, glyphAdvance};\n        if (glyphWidth === 0 || glyphHeight === 0) return glyph;\n\n        const {ctx, buffer, gridInner, gridOuter} = this;\n        if (this.lang) ctx.lang = this.lang;\n        ctx.clearRect(buffer, buffer, glyphWidth, glyphHeight);\n        ctx.fillText(char, buffer, buffer + glyphTop);\n        const imgData = ctx.getImageData(buffer, buffer, glyphWidth, glyphHeight);\n\n        // Initialize grids outside the glyph range to alpha 0\n        gridOuter.fill(INF, 0, len);\n        gridInner.fill(0, 0, len);\n\n        for (let y = 0; y < glyphHeight; y++) {\n            for (let x = 0; x < glyphWidth; x++) {\n                const a = imgData.data[4 * (y * glyphWidth + x) + 3] / 255; // alpha value\n                if (a === 0) continue; // empty pixels\n\n                const j = (y + buffer) * width + x + buffer;\n\n                if (a === 1) { // fully drawn pixels\n                    gridOuter[j] = 0;\n                    gridInner[j] = INF;\n\n                } else { // aliased pixels\n                    const d = 0.5 - a;\n                    gridOuter[j] = d > 0 ? d * d : 0;\n                    gridInner[j] = d < 0 ? d * d : 0;\n                }\n            }\n        }\n\n        edt(gridOuter, 0, 0, width, height, width, this.f, this.v, this.z);\n        edt(gridInner, buffer, buffer, glyphWidth, glyphHeight, width, this.f, this.v, this.z);\n\n        for (let i = 0; i < len; i++) {\n            const d = Math.sqrt(gridOuter[i]) - Math.sqrt(gridInner[i]);\n            data[i] = Math.round(255 - 255 * (d / this.radius + this.cutoff));\n        }\n\n        return glyph;\n    }\n}\n\n// 2D Euclidean squared distance transform by Felzenszwalb & Huttenlocher https://cs.brown.edu/~pff/papers/dt-final.pdf\nfunction edt(data, x0, y0, width, height, gridSize, f, v, z) {\n    for (let x = x0; x < x0 + width; x++) edt1d(data, y0 * gridSize + x, gridSize, height, f, v, z);\n    for (let y = y0; y < y0 + height; y++) edt1d(data, y * gridSize + x0, 1, width, f, v, z);\n}\n\n// 1D squared distance transform\nfunction edt1d(grid, offset, stride, length, f, v, z) {\n    v[0] = 0;\n    z[0] = -INF;\n    z[1] = INF;\n    f[0] = grid[offset];\n\n    for (let q = 1, k = 0, s = 0; q < length; q++) {\n        f[q] = grid[offset + q * stride];\n        const q2 = q * q;\n        do {\n            const r = v[k];\n            s = (f[q] - f[r] + q2 - r * r) / (q - r) / 2;\n        } while (s <= z[k] && --k > -1);\n\n        k++;\n        v[k] = q;\n        z[k] = s;\n        z[k + 1] = INF;\n    }\n\n    for (let q = 0, k = 0; q < length; q++) {\n        while (z[k + 1] < q) k++;\n        const r = v[k];\n        const qr = q - r;\n        grid[offset + q * stride] = f[r] + qr * qr;\n    }\n}\n","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/* eslint-disable max-statements, max-params, complexity, max-depth */\n// TODO merge with icon-layer/icon-manager\nimport { log } from '@deck.gl/core';\nconst MISSING_CHAR_WIDTH = 32;\nconst SINGLE_LINE = [];\nexport function nextPowOfTwo(number) {\n    return Math.pow(2, Math.ceil(Math.log2(number)));\n}\n/**\n * Generate character mapping table or update from an existing mapping table\n */\nexport function buildMapping({ characterSet, getFontWidth, fontHeight, buffer, maxCanvasWidth, mapping = {}, xOffset = 0, yOffset = 0 }) {\n    let row = 0;\n    // continue from x position of last character in the old mapping\n    let x = xOffset;\n    const rowHeight = fontHeight + buffer * 2;\n    for (const char of characterSet) {\n        if (!mapping[char]) {\n            // measure texts\n            // TODO - use Advanced text metrics when they are adopted:\n            // https://developer.mozilla.org/en-US/docs/Web/API/TextMetrics\n            const width = getFontWidth(char);\n            if (x + width + buffer * 2 > maxCanvasWidth) {\n                x = 0;\n                row++;\n            }\n            mapping[char] = {\n                x: x + buffer,\n                y: yOffset + row * rowHeight + buffer,\n                width,\n                height: rowHeight,\n                layoutWidth: width,\n                layoutHeight: fontHeight\n            };\n            x += width + buffer * 2;\n        }\n    }\n    return {\n        mapping,\n        xOffset: x,\n        yOffset: yOffset + row * rowHeight,\n        canvasHeight: nextPowOfTwo(yOffset + (row + 1) * rowHeight)\n    };\n}\nfunction getTextWidth(text, startIndex, endIndex, mapping) {\n    let width = 0;\n    for (let i = startIndex; i < endIndex; i++) {\n        const character = text[i];\n        width += mapping[character]?.layoutWidth || 0;\n    }\n    return width;\n}\nfunction breakAll(text, startIndex, endIndex, maxWidth, iconMapping, target) {\n    let rowStartCharIndex = startIndex;\n    let rowOffsetLeft = 0;\n    for (let i = startIndex; i < endIndex; i++) {\n        // 2. figure out where to break lines\n        const textWidth = getTextWidth(text, i, i + 1, iconMapping);\n        if (rowOffsetLeft + textWidth > maxWidth) {\n            if (rowStartCharIndex < i) {\n                target.push(i);\n            }\n            rowStartCharIndex = i;\n            rowOffsetLeft = 0;\n        }\n        rowOffsetLeft += textWidth;\n    }\n    return rowOffsetLeft;\n}\nfunction breakWord(text, startIndex, endIndex, maxWidth, iconMapping, target) {\n    let rowStartCharIndex = startIndex;\n    let groupStartCharIndex = startIndex;\n    let groupEndCharIndex = startIndex;\n    let rowOffsetLeft = 0;\n    for (let i = startIndex; i < endIndex; i++) {\n        // 1. break text into word groups\n        //  - if current char is white space\n        //  - else if next char is white space\n        //  - else if reach last char\n        if (text[i] === ' ') {\n            groupEndCharIndex = i + 1;\n        }\n        else if (text[i + 1] === ' ' || i + 1 === endIndex) {\n            groupEndCharIndex = i + 1;\n        }\n        if (groupEndCharIndex > groupStartCharIndex) {\n            // 2. break text into next row at maxWidth\n            let groupWidth = getTextWidth(text, groupStartCharIndex, groupEndCharIndex, iconMapping);\n            if (rowOffsetLeft + groupWidth > maxWidth) {\n                if (rowStartCharIndex < groupStartCharIndex) {\n                    target.push(groupStartCharIndex);\n                    rowStartCharIndex = groupStartCharIndex;\n                    rowOffsetLeft = 0;\n                }\n                // if a single text group is bigger than maxWidth, then `break-all`\n                if (groupWidth > maxWidth) {\n                    groupWidth = breakAll(text, groupStartCharIndex, groupEndCharIndex, maxWidth, iconMapping, target);\n                    // move reference to last row\n                    rowStartCharIndex = target[target.length - 1];\n                }\n            }\n            groupStartCharIndex = groupEndCharIndex;\n            rowOffsetLeft += groupWidth;\n        }\n    }\n    return rowOffsetLeft;\n}\n/**\n * Wrap the given text so that each line does not exceed the given max width.\n * Returns a list of indices where line breaks should be inserted.\n */\nexport function autoWrapping(text, wordBreak, maxWidth, iconMapping, startIndex = 0, endIndex) {\n    if (endIndex === undefined) {\n        endIndex = text.length;\n    }\n    const result = [];\n    if (wordBreak === 'break-all') {\n        breakAll(text, startIndex, endIndex, maxWidth, iconMapping, result);\n    }\n    else {\n        breakWord(text, startIndex, endIndex, maxWidth, iconMapping, result);\n    }\n    return result;\n}\nfunction transformRow(line, startIndex, endIndex, iconMapping, leftOffsets, rowSize) {\n    let x = 0;\n    let rowHeight = 0;\n    for (let i = startIndex; i < endIndex; i++) {\n        const character = line[i];\n        const frame = iconMapping[character];\n        if (frame) {\n            if (!rowHeight) {\n                // frame.height should be a constant\n                rowHeight = frame.layoutHeight;\n            }\n            leftOffsets[i] = x + frame.layoutWidth / 2;\n            x += frame.layoutWidth;\n        }\n        else {\n            log.warn(`Missing character: ${character} (${character.codePointAt(0)})`)();\n            leftOffsets[i] = x;\n            x += MISSING_CHAR_WIDTH;\n        }\n    }\n    rowSize[0] = x;\n    rowSize[1] = rowHeight;\n}\n/**\n * Transform a text paragraph to an array of characters, each character contains\n */\nexport function transformParagraph(paragraph, \n/** CSS line-height */\nlineHeight, \n/** CSS word-break option */\nwordBreak, \n/** CSS max-width */\nmaxWidth, \n/** character mapping table for retrieving a character from font atlas */\niconMapping) {\n    // Break into an array of characters\n    // When dealing with double-length unicode characters, `str.length` or `str[i]` do not work\n    const characters = Array.from(paragraph);\n    const numCharacters = characters.length;\n    const x = new Array(numCharacters);\n    const y = new Array(numCharacters);\n    const rowWidth = new Array(numCharacters);\n    const autoWrappingEnabled = (wordBreak === 'break-word' || wordBreak === 'break-all') && isFinite(maxWidth) && maxWidth > 0;\n    // maxWidth and height of the paragraph\n    const size = [0, 0];\n    const rowSize = [0, 0];\n    let rowOffsetTop = 0;\n    let lineStartIndex = 0;\n    let lineEndIndex = 0;\n    for (let i = 0; i <= numCharacters; i++) {\n        const char = characters[i];\n        if (char === '\\n' || i === numCharacters) {\n            lineEndIndex = i;\n        }\n        if (lineEndIndex > lineStartIndex) {\n            const rows = autoWrappingEnabled\n                ? autoWrapping(characters, wordBreak, maxWidth, iconMapping, lineStartIndex, lineEndIndex)\n                : SINGLE_LINE;\n            for (let rowIndex = 0; rowIndex <= rows.length; rowIndex++) {\n                const rowStart = rowIndex === 0 ? lineStartIndex : rows[rowIndex - 1];\n                const rowEnd = rowIndex < rows.length ? rows[rowIndex] : lineEndIndex;\n                transformRow(characters, rowStart, rowEnd, iconMapping, x, rowSize);\n                for (let j = rowStart; j < rowEnd; j++) {\n                    // const rowOffsetLeft = x[j] - rowSize[0] / 2;\n                    // eslint-disable-next-line @typescript-eslint/no-shadow\n                    const char = characters[j];\n                    const layoutOffsetY = iconMapping[char]?.layoutOffsetY || 0;\n                    y[j] = rowOffsetTop + rowSize[1] / 2 + layoutOffsetY;\n                    rowWidth[j] = rowSize[0];\n                }\n                rowOffsetTop = rowOffsetTop + rowSize[1] * lineHeight;\n                size[0] = Math.max(size[0], rowSize[0]);\n            }\n            lineStartIndex = lineEndIndex;\n        }\n        if (char === '\\n') {\n            // Make sure result.length matches paragraph.length\n            x[lineStartIndex] = 0;\n            y[lineStartIndex] = 0;\n            rowWidth[lineStartIndex] = 0;\n            lineStartIndex++;\n        }\n    }\n    // last row\n    size[1] = rowOffsetTop;\n    return { x, y, rowWidth, size };\n}\nexport function getTextFromBuffer({ value, length, stride, offset, startIndices, characterSet }) {\n    const bytesPerElement = value.BYTES_PER_ELEMENT;\n    const elementStride = stride ? stride / bytesPerElement : 1;\n    const elementOffset = offset ? offset / bytesPerElement : 0;\n    const characterCount = startIndices[length] || Math.ceil((value.length - elementOffset) / elementStride);\n    const autoCharacterSet = characterSet && new Set();\n    const texts = new Array(length);\n    let codes = value;\n    if (elementStride > 1 || elementOffset > 0) {\n        const ArrayType = value.constructor;\n        codes = new ArrayType(characterCount);\n        for (let i = 0; i < characterCount; i++) {\n            codes[i] = value[i * elementStride + elementOffset];\n        }\n    }\n    for (let index = 0; index < length; index++) {\n        const startIndex = startIndices[index];\n        const endIndex = startIndices[index + 1] || characterCount;\n        const codesAtIndex = codes.subarray(startIndex, endIndex);\n        // @ts-ignore TS wants the argument to be number[] but typed array works too\n        texts[index] = String.fromCodePoint.apply(null, codesAtIndex);\n        if (autoCharacterSet) {\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            codesAtIndex.forEach(autoCharacterSet.add, autoCharacterSet);\n        }\n    }\n    if (autoCharacterSet) {\n        for (const charCode of autoCharacterSet) {\n            characterSet.add(String.fromCodePoint(charCode));\n        }\n    }\n    return { texts, characterCount };\n}\n//# sourceMappingURL=utils.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/**\n * LRU Cache class with limit\n *\n * Update order for each get/set operation\n * Delete oldest when reach given limit\n */\nexport default class LRUCache {\n    constructor(limit = 5) {\n        this._cache = {};\n        /** access/update order, first item is oldest, last item is newest */\n        this._order = [];\n        this.limit = limit;\n    }\n    get(key) {\n        const value = this._cache[key];\n        if (value) {\n            // update order\n            this._deleteOrder(key);\n            this._appendOrder(key);\n        }\n        return value;\n    }\n    set(key, value) {\n        if (!this._cache[key]) {\n            // if reach limit, delete the oldest\n            if (Object.keys(this._cache).length === this.limit) {\n                this.delete(this._order[0]);\n            }\n            this._cache[key] = value;\n            this._appendOrder(key);\n        }\n        else {\n            // if found in cache, delete the old one, insert new one to the first of list\n            this.delete(key);\n            this._cache[key] = value;\n            this._appendOrder(key);\n        }\n    }\n    delete(key) {\n        const value = this._cache[key];\n        if (value) {\n            delete this._cache[key];\n            this._deleteOrder(key);\n        }\n    }\n    _deleteOrder(key) {\n        const index = this._order.indexOf(key);\n        if (index >= 0) {\n            this._order.splice(index, 1);\n        }\n    }\n    _appendOrder(key) {\n        this._order.push(key);\n    }\n}\n//# sourceMappingURL=lru-cache.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/* global document */\nimport TinySDF from '@mapbox/tiny-sdf';\nimport { log } from '@deck.gl/core';\nimport { buildMapping } from \"./utils.js\";\nimport LRUCache from \"./lru-cache.js\";\n// import type {Texture} from '@deck.gl/core';\nfunction getDefaultCharacterSet() {\n    const charSet = [];\n    for (let i = 32; i < 128; i++) {\n        charSet.push(String.fromCharCode(i));\n    }\n    return charSet;\n}\nexport const DEFAULT_FONT_SETTINGS = {\n    fontFamily: 'Monaco, monospace',\n    fontWeight: 'normal',\n    characterSet: getDefaultCharacterSet(),\n    fontSize: 64,\n    buffer: 4,\n    sdf: false,\n    cutoff: 0.25,\n    radius: 12,\n    smoothing: 0.1\n};\nconst MAX_CANVAS_WIDTH = 1024;\nconst BASELINE_SCALE = 0.9;\nconst HEIGHT_SCALE = 1.2;\n// only preserve latest three fontAtlas\nconst CACHE_LIMIT = 3;\nlet cache = new LRUCache(CACHE_LIMIT);\n/**\n * get all the chars not in cache\n * @returns chars not in cache\n */\nfunction getNewChars(cacheKey, characterSet) {\n    let newCharSet;\n    if (typeof characterSet === 'string') {\n        newCharSet = new Set(Array.from(characterSet));\n    }\n    else {\n        newCharSet = new Set(characterSet);\n    }\n    const cachedFontAtlas = cache.get(cacheKey);\n    if (!cachedFontAtlas) {\n        return newCharSet;\n    }\n    for (const char in cachedFontAtlas.mapping) {\n        if (newCharSet.has(char)) {\n            newCharSet.delete(char);\n        }\n    }\n    return newCharSet;\n}\nfunction populateAlphaChannel(alphaChannel, imageData) {\n    // populate distance value from tinySDF to image alpha channel\n    for (let i = 0; i < alphaChannel.length; i++) {\n        imageData.data[4 * i + 3] = alphaChannel[i];\n    }\n}\nfunction setTextStyle(ctx, fontFamily, fontSize, fontWeight) {\n    ctx.font = `${fontWeight} ${fontSize}px ${fontFamily}`;\n    ctx.fillStyle = '#000';\n    ctx.textBaseline = 'alphabetic';\n    ctx.textAlign = 'left';\n}\n/**\n * Sets the Font Atlas LRU Cache Limit\n * @param {number} limit LRU Cache limit\n */\nexport function setFontAtlasCacheLimit(limit) {\n    log.assert(Number.isFinite(limit) && limit >= CACHE_LIMIT, 'Invalid cache limit');\n    cache = new LRUCache(limit);\n}\nexport default class FontAtlasManager {\n    constructor() {\n        /** Font settings */\n        this.props = { ...DEFAULT_FONT_SETTINGS };\n    }\n    get atlas() {\n        return this._atlas;\n    }\n    // TODO - cut during v9 porting as types reveal this is not correct\n    // get texture(): Texture | undefined {\n    //   return this._atlas;\n    // }\n    get mapping() {\n        return this._atlas && this._atlas.mapping;\n    }\n    get scale() {\n        const { fontSize, buffer } = this.props;\n        return (fontSize * HEIGHT_SCALE + buffer * 2) / fontSize;\n    }\n    setProps(props = {}) {\n        Object.assign(this.props, props);\n        // update cache key\n        this._key = this._getKey();\n        const charSet = getNewChars(this._key, this.props.characterSet);\n        const cachedFontAtlas = cache.get(this._key);\n        // if a fontAtlas associated with the new settings is cached and\n        // there are no new chars\n        if (cachedFontAtlas && charSet.size === 0) {\n            // update texture with cached fontAtlas\n            if (this._atlas !== cachedFontAtlas) {\n                this._atlas = cachedFontAtlas;\n            }\n            return;\n        }\n        // update fontAtlas with new settings\n        const fontAtlas = this._generateFontAtlas(charSet, cachedFontAtlas);\n        this._atlas = fontAtlas;\n        // update cache\n        cache.set(this._key, fontAtlas);\n    }\n    // eslint-disable-next-line max-statements\n    _generateFontAtlas(characterSet, cachedFontAtlas) {\n        const { fontFamily, fontWeight, fontSize, buffer, sdf, radius, cutoff } = this.props;\n        let canvas = cachedFontAtlas && cachedFontAtlas.data;\n        if (!canvas) {\n            canvas = document.createElement('canvas');\n            canvas.width = MAX_CANVAS_WIDTH;\n        }\n        const ctx = canvas.getContext('2d', { willReadFrequently: true });\n        setTextStyle(ctx, fontFamily, fontSize, fontWeight);\n        // 1. build mapping\n        const { mapping, canvasHeight, xOffset, yOffset } = buildMapping({\n            getFontWidth: char => ctx.measureText(char).width,\n            fontHeight: fontSize * HEIGHT_SCALE,\n            buffer,\n            characterSet,\n            maxCanvasWidth: MAX_CANVAS_WIDTH,\n            ...(cachedFontAtlas && {\n                mapping: cachedFontAtlas.mapping,\n                xOffset: cachedFontAtlas.xOffset,\n                yOffset: cachedFontAtlas.yOffset\n            })\n        });\n        // 2. update canvas\n        // copy old canvas data to new canvas only when height changed\n        if (canvas.height !== canvasHeight) {\n            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n            canvas.height = canvasHeight;\n            ctx.putImageData(imageData, 0, 0);\n        }\n        setTextStyle(ctx, fontFamily, fontSize, fontWeight);\n        // 3. layout characters\n        if (sdf) {\n            const tinySDF = new TinySDF({\n                fontSize,\n                buffer,\n                radius,\n                cutoff,\n                fontFamily,\n                fontWeight: `${fontWeight}`\n            });\n            for (const char of characterSet) {\n                const { data, width, height, glyphTop } = tinySDF.draw(char);\n                mapping[char].width = width;\n                mapping[char].layoutOffsetY = fontSize * BASELINE_SCALE - glyphTop;\n                const imageData = ctx.createImageData(width, height);\n                populateAlphaChannel(data, imageData);\n                ctx.putImageData(imageData, mapping[char].x, mapping[char].y);\n            }\n        }\n        else {\n            for (const char of characterSet) {\n                ctx.fillText(char, mapping[char].x, mapping[char].y + buffer + fontSize * BASELINE_SCALE);\n            }\n        }\n        return {\n            xOffset,\n            yOffset,\n            mapping,\n            data: canvas,\n            width: canvas.width,\n            height: canvas.height\n        };\n    }\n    _getKey() {\n        const { fontFamily, fontWeight, fontSize, buffer, sdf, radius, cutoff } = this.props;\n        if (sdf) {\n            return `${fontFamily} ${fontWeight} ${fontSize} ${buffer} ${radius} ${cutoff}`;\n        }\n        return `${fontFamily} ${fontWeight} ${fontSize} ${buffer}`;\n    }\n}\n//# sourceMappingURL=font-atlas-manager.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst uniformBlock = `\\\nuniform textBackgroundUniforms {\n  bool billboard;\n  float sizeScale;\n  float sizeMinPixels;\n  float sizeMaxPixels;\n  vec4 borderRadius;\n  vec4 padding;\n  highp int sizeUnits;\n  bool stroked;\n} textBackground;\n`;\nexport const textBackgroundUniforms = {\n    name: 'textBackground',\n    vs: uniformBlock,\n    fs: uniformBlock,\n    uniformTypes: {\n        billboard: 'f32',\n        sizeScale: 'f32',\n        sizeMinPixels: 'f32',\n        sizeMaxPixels: 'f32',\n        borderRadius: 'vec4<f32>',\n        padding: 'vec4<f32>',\n        sizeUnits: 'i32',\n        stroked: 'f32'\n    }\n};\n//# sourceMappingURL=text-background-layer-uniforms.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `\\\n#version 300 es\n#define SHADER_NAME text-background-layer-vertex-shader\nin vec2 positions;\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceRects;\nin float instanceSizes;\nin float instanceAngles;\nin vec2 instancePixelOffsets;\nin float instanceLineWidths;\nin vec4 instanceFillColors;\nin vec4 instanceLineColors;\nin vec3 instancePickingColors;\nout vec4 vFillColor;\nout vec4 vLineColor;\nout float vLineWidth;\nout vec2 uv;\nout vec2 dimensions;\nvec2 rotate_by_angle(vec2 vertex, float angle) {\nfloat angle_radian = radians(angle);\nfloat cos_angle = cos(angle_radian);\nfloat sin_angle = sin(angle_radian);\nmat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\nreturn rotationMatrix * vertex;\n}\nvoid main(void) {\ngeometry.worldPosition = instancePositions;\ngeometry.uv = positions;\ngeometry.pickingColor = instancePickingColors;\nuv = positions;\nvLineWidth = instanceLineWidths;\nfloat sizePixels = clamp(\nproject_size_to_pixel(instanceSizes * textBackground.sizeScale, textBackground.sizeUnits),\ntextBackground.sizeMinPixels, textBackground.sizeMaxPixels\n);\ndimensions = instanceRects.zw * sizePixels + textBackground.padding.xy + textBackground.padding.zw;\nvec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-textBackground.padding.xy, textBackground.padding.zw, positions);\npixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\npixelOffset += instancePixelOffsets;\npixelOffset.y *= -1.0;\nif (textBackground.billboard)  {\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\nvec3 offset = vec3(pixelOffset, 0.0);\nDECKGL_FILTER_SIZE(offset, geometry);\ngl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n} else {\nvec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\nDECKGL_FILTER_SIZE(offset_common, geometry);\ngl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\nDECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n}\nvFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vFillColor, geometry);\nvLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);\nDECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n`;\n//# sourceMappingURL=text-background-layer-vertex.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default `\\\n#version 300 es\n#define SHADER_NAME text-background-layer-fragment-shader\nprecision highp float;\nin vec4 vFillColor;\nin vec4 vLineColor;\nin float vLineWidth;\nin vec2 uv;\nin vec2 dimensions;\nout vec4 fragColor;\nfloat round_rect(vec2 p, vec2 size, vec4 radii) {\nvec2 pixelPositionCB = (p - 0.5) * size;\nvec2 sizeCB = size * 0.5;\nfloat maxBorderRadius = min(size.x, size.y) * 0.5;\nvec4 borderRadius = vec4(min(radii, maxBorderRadius));\nborderRadius.xy =\n(pixelPositionCB.x > 0.0) ? borderRadius.xy : borderRadius.zw;\nborderRadius.x = (pixelPositionCB.y > 0.0) ? borderRadius.x : borderRadius.y;\nvec2 q = abs(pixelPositionCB) - sizeCB + borderRadius.x;\nreturn -(min(max(q.x, q.y), 0.0) + length(max(q, 0.0)) - borderRadius.x);\n}\nfloat rect(vec2 p, vec2 size) {\nvec2 pixelPosition = p * size;\nreturn min(min(pixelPosition.x, size.x - pixelPosition.x),\nmin(pixelPosition.y, size.y - pixelPosition.y));\n}\nvec4 get_stroked_fragColor(float dist) {\nfloat isBorder = smoothedge(dist, vLineWidth);\nreturn mix(vFillColor, vLineColor, isBorder);\n}\nvoid main(void) {\ngeometry.uv = uv;\nif (textBackground.borderRadius != vec4(0.0)) {\nfloat distToEdge = round_rect(uv, dimensions, textBackground.borderRadius);\nif (textBackground.stroked) {\nfragColor = get_stroked_fragColor(distToEdge);\n} else {\nfragColor = vFillColor;\n}\nfloat shapeAlpha = smoothedge(-distToEdge, 0.0);\nfragColor.a *= shapeAlpha;\n} else {\nif (textBackground.stroked) {\nfloat distToEdge = rect(uv, dimensions);\nfragColor = get_stroked_fragColor(distToEdge);\n} else {\nfragColor = vFillColor;\n}\n}\nDECKGL_FILTER_COLOR(fragColor, geometry);\n}\n`;\n//# sourceMappingURL=text-background-layer-fragment.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Layer, project32, picking, UNIT } from '@deck.gl/core';\nimport { Geometry } from '@luma.gl/engine';\nimport { Model } from '@luma.gl/engine';\nimport { textBackgroundUniforms } from \"./text-background-layer-uniforms.js\";\nimport vs from \"./text-background-layer-vertex.glsl.js\";\nimport fs from \"./text-background-layer-fragment.glsl.js\";\nconst defaultProps = {\n    billboard: true,\n    sizeScale: 1,\n    sizeUnits: 'pixels',\n    sizeMinPixels: 0,\n    sizeMaxPixels: Number.MAX_SAFE_INTEGER,\n    borderRadius: { type: 'object', value: 0 },\n    padding: { type: 'array', value: [0, 0, 0, 0] },\n    getPosition: { type: 'accessor', value: (x) => x.position },\n    getSize: { type: 'accessor', value: 1 },\n    getAngle: { type: 'accessor', value: 0 },\n    getPixelOffset: { type: 'accessor', value: [0, 0] },\n    getBoundingRect: { type: 'accessor', value: [0, 0, 0, 0] },\n    getFillColor: { type: 'accessor', value: [0, 0, 0, 255] },\n    getLineColor: { type: 'accessor', value: [0, 0, 0, 255] },\n    getLineWidth: { type: 'accessor', value: 1 }\n};\nclass TextBackgroundLayer extends Layer {\n    getShaders() {\n        return super.getShaders({ vs, fs, modules: [project32, picking, textBackgroundUniforms] });\n    }\n    initializeState() {\n        this.getAttributeManager().addInstanced({\n            instancePositions: {\n                size: 3,\n                type: 'float64',\n                fp64: this.use64bitPositions(),\n                transition: true,\n                accessor: 'getPosition'\n            },\n            instanceSizes: {\n                size: 1,\n                transition: true,\n                accessor: 'getSize',\n                defaultValue: 1\n            },\n            instanceAngles: {\n                size: 1,\n                transition: true,\n                accessor: 'getAngle'\n            },\n            instanceRects: {\n                size: 4,\n                accessor: 'getBoundingRect'\n            },\n            instancePixelOffsets: {\n                size: 2,\n                transition: true,\n                accessor: 'getPixelOffset'\n            },\n            instanceFillColors: {\n                size: 4,\n                transition: true,\n                type: 'unorm8',\n                accessor: 'getFillColor',\n                defaultValue: [0, 0, 0, 255]\n            },\n            instanceLineColors: {\n                size: 4,\n                transition: true,\n                type: 'unorm8',\n                accessor: 'getLineColor',\n                defaultValue: [0, 0, 0, 255]\n            },\n            instanceLineWidths: {\n                size: 1,\n                transition: true,\n                accessor: 'getLineWidth',\n                defaultValue: 1\n            }\n        });\n    }\n    updateState(params) {\n        super.updateState(params);\n        const { changeFlags } = params;\n        if (changeFlags.extensionsChanged) {\n            this.state.model?.destroy();\n            this.state.model = this._getModel();\n            this.getAttributeManager().invalidateAll();\n        }\n    }\n    draw({ uniforms }) {\n        const { billboard, sizeScale, sizeUnits, sizeMinPixels, sizeMaxPixels, getLineWidth } = this.props;\n        let { padding, borderRadius } = this.props;\n        if (padding.length < 4) {\n            padding = [padding[0], padding[1], padding[0], padding[1]];\n        }\n        if (!Array.isArray(borderRadius)) {\n            borderRadius = [borderRadius, borderRadius, borderRadius, borderRadius];\n        }\n        const model = this.state.model;\n        const textBackgroundProps = {\n            billboard,\n            stroked: Boolean(getLineWidth),\n            borderRadius,\n            padding: padding,\n            sizeUnits: UNIT[sizeUnits],\n            sizeScale,\n            sizeMinPixels,\n            sizeMaxPixels\n        };\n        model.shaderInputs.setProps({ textBackground: textBackgroundProps });\n        model.draw(this.context.renderPass);\n    }\n    _getModel() {\n        // a square that minimally cover the unit circle\n        const positions = [0, 0, 1, 0, 0, 1, 1, 1];\n        return new Model(this.context.device, {\n            ...this.getShaders(),\n            id: this.props.id,\n            bufferLayout: this.getAttributeManager().getBufferLayouts(),\n            geometry: new Geometry({\n                topology: 'triangle-strip',\n                vertexCount: 4,\n                attributes: {\n                    positions: { size: 2, value: new Float32Array(positions) }\n                }\n            }),\n            isInstanced: true\n        });\n    }\n}\nTextBackgroundLayer.defaultProps = defaultProps;\nTextBackgroundLayer.layerName = 'TextBackgroundLayer';\nexport default TextBackgroundLayer;\n//# sourceMappingURL=text-background-layer.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { CompositeLayer, createIterable, log } from '@deck.gl/core';\nimport MultiIconLayer from \"./multi-icon-layer/multi-icon-layer.js\";\nimport FontAtlasManager, { DEFAULT_FONT_SETTINGS, setFontAtlasCacheLimit } from \"./font-atlas-manager.js\";\nimport { transformParagraph, getTextFromBuffer } from \"./utils.js\";\nimport TextBackgroundLayer from \"./text-background-layer/text-background-layer.js\";\nconst TEXT_ANCHOR = {\n    start: 1,\n    middle: 0,\n    end: -1\n};\nconst ALIGNMENT_BASELINE = {\n    top: 1,\n    center: 0,\n    bottom: -1\n};\nconst DEFAULT_COLOR = [0, 0, 0, 255];\nconst DEFAULT_LINE_HEIGHT = 1.0;\nconst defaultProps = {\n    billboard: true,\n    sizeScale: 1,\n    sizeUnits: 'pixels',\n    sizeMinPixels: 0,\n    sizeMaxPixels: Number.MAX_SAFE_INTEGER,\n    background: false,\n    getBackgroundColor: { type: 'accessor', value: [255, 255, 255, 255] },\n    getBorderColor: { type: 'accessor', value: DEFAULT_COLOR },\n    getBorderWidth: { type: 'accessor', value: 0 },\n    backgroundBorderRadius: { type: 'object', value: 0 },\n    backgroundPadding: { type: 'array', value: [0, 0, 0, 0] },\n    characterSet: { type: 'object', value: DEFAULT_FONT_SETTINGS.characterSet },\n    fontFamily: DEFAULT_FONT_SETTINGS.fontFamily,\n    fontWeight: DEFAULT_FONT_SETTINGS.fontWeight,\n    lineHeight: DEFAULT_LINE_HEIGHT,\n    outlineWidth: { type: 'number', value: 0, min: 0 },\n    outlineColor: { type: 'color', value: DEFAULT_COLOR },\n    fontSettings: { type: 'object', value: {}, compare: 1 },\n    // auto wrapping options\n    wordBreak: 'break-word',\n    maxWidth: { type: 'number', value: -1 },\n    getText: { type: 'accessor', value: (x) => x.text },\n    getPosition: { type: 'accessor', value: (x) => x.position },\n    getColor: { type: 'accessor', value: DEFAULT_COLOR },\n    getSize: { type: 'accessor', value: 32 },\n    getAngle: { type: 'accessor', value: 0 },\n    getTextAnchor: { type: 'accessor', value: 'middle' },\n    getAlignmentBaseline: { type: 'accessor', value: 'center' },\n    getPixelOffset: { type: 'accessor', value: [0, 0] },\n    // deprecated\n    backgroundColor: { deprecatedFor: ['background', 'getBackgroundColor'] }\n};\n/** Render text labels at given coordinates. */\nclass TextLayer extends CompositeLayer {\n    constructor() {\n        super(...arguments);\n        /** Returns the x, y, width, height of each text string, relative to pixel size.\n         * Used to render the background.\n         */\n        this.getBoundingRect = (object, objectInfo) => {\n            let { size: [width, height] } = this.transformParagraph(object, objectInfo);\n            const { fontSize } = this.state.fontAtlasManager.props;\n            width /= fontSize;\n            height /= fontSize;\n            const { getTextAnchor, getAlignmentBaseline } = this.props;\n            const anchorX = TEXT_ANCHOR[typeof getTextAnchor === 'function' ? getTextAnchor(object, objectInfo) : getTextAnchor];\n            const anchorY = ALIGNMENT_BASELINE[typeof getAlignmentBaseline === 'function'\n                ? getAlignmentBaseline(object, objectInfo)\n                : getAlignmentBaseline];\n            return [((anchorX - 1) * width) / 2, ((anchorY - 1) * height) / 2, width, height];\n        };\n        /** Returns the x, y offsets of each character in a text string, in texture size.\n         * Used to layout characters in the vertex shader.\n         */\n        this.getIconOffsets = (object, objectInfo) => {\n            const { getTextAnchor, getAlignmentBaseline } = this.props;\n            const { x, y, rowWidth, size: [width, height] } = this.transformParagraph(object, objectInfo);\n            const anchorX = TEXT_ANCHOR[typeof getTextAnchor === 'function' ? getTextAnchor(object, objectInfo) : getTextAnchor];\n            const anchorY = ALIGNMENT_BASELINE[typeof getAlignmentBaseline === 'function'\n                ? getAlignmentBaseline(object, objectInfo)\n                : getAlignmentBaseline];\n            const numCharacters = x.length;\n            const offsets = new Array(numCharacters * 2);\n            let index = 0;\n            for (let i = 0; i < numCharacters; i++) {\n                // For a multi-line object, offset in x-direction needs consider\n                // the row offset in the paragraph and the object offset in the row\n                const rowOffset = ((1 - anchorX) * (width - rowWidth[i])) / 2;\n                offsets[index++] = ((anchorX - 1) * width) / 2 + rowOffset + x[i];\n                offsets[index++] = ((anchorY - 1) * height) / 2 + y[i];\n            }\n            return offsets;\n        };\n    }\n    initializeState() {\n        this.state = {\n            styleVersion: 0,\n            fontAtlasManager: new FontAtlasManager()\n        };\n        // Breaking change in v8.9\n        if (this.props.maxWidth > 0) {\n            log.once(1, 'v8.9 breaking change: TextLayer maxWidth is now relative to text size')();\n        }\n    }\n    // eslint-disable-next-line complexity\n    updateState(params) {\n        const { props, oldProps, changeFlags } = params;\n        const textChanged = changeFlags.dataChanged ||\n            (changeFlags.updateTriggersChanged &&\n                (changeFlags.updateTriggersChanged.all || changeFlags.updateTriggersChanged.getText));\n        if (textChanged) {\n            this._updateText();\n        }\n        const fontChanged = this._updateFontAtlas();\n        const styleChanged = fontChanged ||\n            props.lineHeight !== oldProps.lineHeight ||\n            props.wordBreak !== oldProps.wordBreak ||\n            props.maxWidth !== oldProps.maxWidth;\n        if (styleChanged) {\n            this.setState({\n                styleVersion: this.state.styleVersion + 1\n            });\n        }\n    }\n    getPickingInfo({ info }) {\n        // because `TextLayer` assign the same pickingInfoIndex for one text label,\n        // here info.index refers the index of text label in props.data\n        info.object = info.index >= 0 ? this.props.data[info.index] : null;\n        return info;\n    }\n    /** Returns true if font has changed */\n    _updateFontAtlas() {\n        const { fontSettings, fontFamily, fontWeight } = this.props;\n        const { fontAtlasManager, characterSet } = this.state;\n        const fontProps = {\n            ...fontSettings,\n            characterSet,\n            fontFamily,\n            fontWeight\n        };\n        if (!fontAtlasManager.mapping) {\n            // This is the first update\n            fontAtlasManager.setProps(fontProps);\n            return true;\n        }\n        for (const key in fontProps) {\n            if (fontProps[key] !== fontAtlasManager.props[key]) {\n                fontAtlasManager.setProps(fontProps);\n                return true;\n            }\n        }\n        return false;\n    }\n    // Text strings are variable width objects\n    // Count characters and start offsets\n    _updateText() {\n        const { data, characterSet } = this.props;\n        const textBuffer = data.attributes?.getText;\n        let { getText } = this.props;\n        let startIndices = data.startIndices;\n        let numInstances;\n        const autoCharacterSet = characterSet === 'auto' && new Set();\n        if (textBuffer && startIndices) {\n            const { texts, characterCount } = getTextFromBuffer({\n                ...(ArrayBuffer.isView(textBuffer) ? { value: textBuffer } : textBuffer),\n                // @ts-ignore if data.attribute is defined then length is expected\n                length: data.length,\n                startIndices,\n                characterSet: autoCharacterSet\n            });\n            numInstances = characterCount;\n            getText = (_, { index }) => texts[index];\n        }\n        else {\n            const { iterable, objectInfo } = createIterable(data);\n            startIndices = [0];\n            numInstances = 0;\n            for (const object of iterable) {\n                objectInfo.index++;\n                // Break into an array of characters\n                // When dealing with double-length unicode characters, `str.length` or `str[i]` do not work\n                const text = Array.from(getText(object, objectInfo) || '');\n                if (autoCharacterSet) {\n                    // eslint-disable-next-line @typescript-eslint/unbound-method\n                    text.forEach(autoCharacterSet.add, autoCharacterSet);\n                }\n                numInstances += text.length;\n                startIndices.push(numInstances);\n            }\n        }\n        this.setState({\n            getText,\n            startIndices,\n            numInstances,\n            characterSet: autoCharacterSet || characterSet\n        });\n    }\n    /** There are two size systems in this layer:\n  \n      + Pixel size: user-specified text size, via getSize, sizeScale, sizeUnits etc.\n        The layer roughly matches the output of the layer to CSS pixels, e.g. getSize: 12, sizeScale: 2\n        in layer props is roughly equivalent to font-size: 24px in CSS.\n      + Texture size: internally, character positions in a text blob are calculated using the sizes of iconMapping,\n        which depends on how large each character is drawn into the font atlas. This is controlled by\n        fontSettings.fontSize (default 64) and most users do not set it manually.\n        These numbers are intended to be used in the vertex shader and never to be exposed to the end user.\n  \n      All surfaces exposed to the user should either use the pixel size or a multiplier relative to the pixel size. */\n    /** Calculate the size and position of each character in a text string.\n     * Values are in texture size */\n    transformParagraph(object, objectInfo) {\n        const { fontAtlasManager } = this.state;\n        const iconMapping = fontAtlasManager.mapping;\n        const getText = this.state.getText;\n        const { wordBreak, lineHeight, maxWidth } = this.props;\n        const paragraph = getText(object, objectInfo) || '';\n        return transformParagraph(paragraph, lineHeight, wordBreak, maxWidth * fontAtlasManager.props.fontSize, iconMapping);\n    }\n    renderLayers() {\n        const { startIndices, numInstances, getText, fontAtlasManager: { scale, atlas, mapping }, styleVersion } = this.state;\n        const { data, _dataDiff, getPosition, getColor, getSize, getAngle, getPixelOffset, getBackgroundColor, getBorderColor, getBorderWidth, backgroundBorderRadius, backgroundPadding, background, billboard, fontSettings, outlineWidth, outlineColor, sizeScale, sizeUnits, sizeMinPixels, sizeMaxPixels, transitions, updateTriggers } = this.props;\n        const CharactersLayerClass = this.getSubLayerClass('characters', MultiIconLayer);\n        const BackgroundLayerClass = this.getSubLayerClass('background', TextBackgroundLayer);\n        return [\n            background &&\n                new BackgroundLayerClass({\n                    // background props\n                    getFillColor: getBackgroundColor,\n                    getLineColor: getBorderColor,\n                    getLineWidth: getBorderWidth,\n                    borderRadius: backgroundBorderRadius,\n                    padding: backgroundPadding,\n                    // props shared with characters layer\n                    getPosition,\n                    getSize,\n                    getAngle,\n                    getPixelOffset,\n                    billboard,\n                    sizeScale,\n                    sizeUnits,\n                    sizeMinPixels,\n                    sizeMaxPixels,\n                    transitions: transitions && {\n                        getPosition: transitions.getPosition,\n                        getAngle: transitions.getAngle,\n                        getSize: transitions.getSize,\n                        getFillColor: transitions.getBackgroundColor,\n                        getLineColor: transitions.getBorderColor,\n                        getLineWidth: transitions.getBorderWidth,\n                        getPixelOffset: transitions.getPixelOffset\n                    }\n                }, this.getSubLayerProps({\n                    id: 'background',\n                    updateTriggers: {\n                        getPosition: updateTriggers.getPosition,\n                        getAngle: updateTriggers.getAngle,\n                        getSize: updateTriggers.getSize,\n                        getFillColor: updateTriggers.getBackgroundColor,\n                        getLineColor: updateTriggers.getBorderColor,\n                        getLineWidth: updateTriggers.getBorderWidth,\n                        getPixelOffset: updateTriggers.getPixelOffset,\n                        getBoundingRect: {\n                            getText: updateTriggers.getText,\n                            getTextAnchor: updateTriggers.getTextAnchor,\n                            getAlignmentBaseline: updateTriggers.getAlignmentBaseline,\n                            styleVersion\n                        }\n                    }\n                }), {\n                    data: \n                    // @ts-ignore (2339) attribute is not defined on all data types\n                    data.attributes && data.attributes.background\n                        ? // @ts-ignore (2339) attribute is not defined on all data types\n                            { length: data.length, attributes: data.attributes.background }\n                        : data,\n                    _dataDiff,\n                    // Maintain the same background behavior as <=8.3. Remove in v9?\n                    autoHighlight: false,\n                    getBoundingRect: this.getBoundingRect\n                }),\n            new CharactersLayerClass({\n                sdf: fontSettings.sdf,\n                smoothing: Number.isFinite(fontSettings.smoothing)\n                    ? fontSettings.smoothing\n                    : DEFAULT_FONT_SETTINGS.smoothing,\n                outlineWidth: outlineWidth / (fontSettings.radius || DEFAULT_FONT_SETTINGS.radius),\n                outlineColor,\n                iconAtlas: atlas,\n                iconMapping: mapping,\n                getPosition,\n                getColor,\n                getSize,\n                getAngle,\n                getPixelOffset,\n                billboard,\n                sizeScale: sizeScale * scale,\n                sizeUnits,\n                sizeMinPixels: sizeMinPixels * scale,\n                sizeMaxPixels: sizeMaxPixels * scale,\n                transitions: transitions && {\n                    getPosition: transitions.getPosition,\n                    getAngle: transitions.getAngle,\n                    getColor: transitions.getColor,\n                    getSize: transitions.getSize,\n                    getPixelOffset: transitions.getPixelOffset\n                }\n            }, this.getSubLayerProps({\n                id: 'characters',\n                updateTriggers: {\n                    all: updateTriggers.getText,\n                    getPosition: updateTriggers.getPosition,\n                    getAngle: updateTriggers.getAngle,\n                    getColor: updateTriggers.getColor,\n                    getSize: updateTriggers.getSize,\n                    getPixelOffset: updateTriggers.getPixelOffset,\n                    getIconOffsets: {\n                        getTextAnchor: updateTriggers.getTextAnchor,\n                        getAlignmentBaseline: updateTriggers.getAlignmentBaseline,\n                        styleVersion\n                    }\n                }\n            }), {\n                data,\n                _dataDiff,\n                startIndices,\n                numInstances,\n                getIconOffsets: this.getIconOffsets,\n                getIcon: getText\n            })\n        ];\n    }\n    static set fontAtlasCacheLimit(limit) {\n        setFontAtlasCacheLimit(limit);\n    }\n}\nTextLayer.defaultProps = defaultProps;\nTextLayer.layerName = 'TextLayer';\nexport default TextLayer;\n//# sourceMappingURL=text-layer.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport IconLayer from \"../icon-layer/icon-layer.js\";\nimport ScatterplotLayer from \"../scatterplot-layer/scatterplot-layer.js\";\nimport TextLayer from \"../text-layer/text-layer.js\";\nimport PathLayer from \"../path-layer/path-layer.js\";\nimport SolidPolygonLayer from \"../solid-polygon-layer/solid-polygon-layer.js\";\nexport const POINT_LAYER = {\n    circle: {\n        type: ScatterplotLayer,\n        props: {\n            filled: 'filled',\n            stroked: 'stroked',\n            lineWidthMaxPixels: 'lineWidthMaxPixels',\n            lineWidthMinPixels: 'lineWidthMinPixels',\n            lineWidthScale: 'lineWidthScale',\n            lineWidthUnits: 'lineWidthUnits',\n            pointRadiusMaxPixels: 'radiusMaxPixels',\n            pointRadiusMinPixels: 'radiusMinPixels',\n            pointRadiusScale: 'radiusScale',\n            pointRadiusUnits: 'radiusUnits',\n            pointAntialiasing: 'antialiasing',\n            pointBillboard: 'billboard',\n            getFillColor: 'getFillColor',\n            getLineColor: 'getLineColor',\n            getLineWidth: 'getLineWidth',\n            getPointRadius: 'getRadius'\n        }\n    },\n    icon: {\n        type: IconLayer,\n        props: {\n            iconAtlas: 'iconAtlas',\n            iconMapping: 'iconMapping',\n            iconSizeMaxPixels: 'sizeMaxPixels',\n            iconSizeMinPixels: 'sizeMinPixels',\n            iconSizeScale: 'sizeScale',\n            iconSizeUnits: 'sizeUnits',\n            iconAlphaCutoff: 'alphaCutoff',\n            iconBillboard: 'billboard',\n            getIcon: 'getIcon',\n            getIconAngle: 'getAngle',\n            getIconColor: 'getColor',\n            getIconPixelOffset: 'getPixelOffset',\n            getIconSize: 'getSize'\n        }\n    },\n    text: {\n        type: TextLayer,\n        props: {\n            textSizeMaxPixels: 'sizeMaxPixels',\n            textSizeMinPixels: 'sizeMinPixels',\n            textSizeScale: 'sizeScale',\n            textSizeUnits: 'sizeUnits',\n            textBackground: 'background',\n            textBackgroundPadding: 'backgroundPadding',\n            textFontFamily: 'fontFamily',\n            textFontWeight: 'fontWeight',\n            textLineHeight: 'lineHeight',\n            textMaxWidth: 'maxWidth',\n            textOutlineColor: 'outlineColor',\n            textOutlineWidth: 'outlineWidth',\n            textWordBreak: 'wordBreak',\n            textCharacterSet: 'characterSet',\n            textBillboard: 'billboard',\n            textFontSettings: 'fontSettings',\n            getText: 'getText',\n            getTextAngle: 'getAngle',\n            getTextColor: 'getColor',\n            getTextPixelOffset: 'getPixelOffset',\n            getTextSize: 'getSize',\n            getTextAnchor: 'getTextAnchor',\n            getTextAlignmentBaseline: 'getAlignmentBaseline',\n            getTextBackgroundColor: 'getBackgroundColor',\n            getTextBorderColor: 'getBorderColor',\n            getTextBorderWidth: 'getBorderWidth'\n        }\n    }\n};\nexport const LINE_LAYER = {\n    type: PathLayer,\n    props: {\n        lineWidthUnits: 'widthUnits',\n        lineWidthScale: 'widthScale',\n        lineWidthMinPixels: 'widthMinPixels',\n        lineWidthMaxPixels: 'widthMaxPixels',\n        lineJointRounded: 'jointRounded',\n        lineCapRounded: 'capRounded',\n        lineMiterLimit: 'miterLimit',\n        lineBillboard: 'billboard',\n        getLineColor: 'getColor',\n        getLineWidth: 'getWidth'\n    }\n};\nexport const POLYGON_LAYER = {\n    type: SolidPolygonLayer,\n    props: {\n        extruded: 'extruded',\n        filled: 'filled',\n        wireframe: 'wireframe',\n        elevationScale: 'elevationScale',\n        material: 'material',\n        _full3d: '_full3d',\n        getElevation: 'getElevation',\n        getFillColor: 'getFillColor',\n        getLineColor: 'getLineColor'\n    }\n};\nexport function getDefaultProps({ type, props }) {\n    const result = {};\n    for (const key in props) {\n        result[key] = type.defaultProps[props[key]];\n    }\n    return result;\n}\nexport function forwardProps(layer, mapping) {\n    const { transitions, updateTriggers } = layer.props;\n    const result = {\n        updateTriggers: {},\n        transitions: transitions && {\n            getPosition: transitions.geometry\n        }\n    };\n    for (const sourceKey in mapping) {\n        const targetKey = mapping[sourceKey];\n        let value = layer.props[sourceKey];\n        if (sourceKey.startsWith('get')) {\n            // isAccessor\n            value = layer.getSubLayerAccessor(value);\n            result.updateTriggers[targetKey] = updateTriggers[sourceKey];\n            if (transitions) {\n                result.transitions[targetKey] = transitions[sourceKey];\n            }\n        }\n        result[targetKey] = value;\n    }\n    return result;\n}\n//# sourceMappingURL=sub-layer-map.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { log } from '@deck.gl/core';\n/**\n * \"Normalizes\" complete or partial GeoJSON data into iterable list of features\n * Can accept GeoJSON geometry or \"Feature\", \"FeatureCollection\" in addition\n * to plain arrays and iterables.\n * Works by extracting the feature array or wrapping single objects in an array,\n * so that subsequent code can simply iterate over features.\n *\n * @param {object} geojson - geojson data\n * @param {Object|Array} data - geojson object (FeatureCollection, Feature or\n *  Geometry) or array of features\n * @return {Array|\"iteratable\"} - iterable list of features\n */\nexport function getGeojsonFeatures(geojson) {\n    // If array, assume this is a list of features\n    if (Array.isArray(geojson)) {\n        return geojson;\n    }\n    log.assert(geojson.type, 'GeoJSON does not have type');\n    switch (geojson.type) {\n        case 'Feature':\n            // Wrap the feature in a 'Features' array\n            return [geojson];\n        case 'FeatureCollection':\n            // Just return the 'Features' array from the collection\n            log.assert(Array.isArray(geojson.features), 'GeoJSON does not have features array');\n            return geojson.features;\n        default:\n            // Assume it's a geometry, we'll check type in separateGeojsonFeatures\n            // Wrap the geometry object in a 'Feature' object and wrap in an array\n            return [{ geometry: geojson }];\n    }\n}\n// Linearize\nexport function separateGeojsonFeatures(features, wrapFeature, dataRange = {}) {\n    const separated = {\n        pointFeatures: [],\n        lineFeatures: [],\n        polygonFeatures: [],\n        polygonOutlineFeatures: []\n    };\n    const { startRow = 0, endRow = features.length } = dataRange;\n    for (let featureIndex = startRow; featureIndex < endRow; featureIndex++) {\n        const feature = features[featureIndex];\n        const { geometry } = feature;\n        if (!geometry) {\n            // geometry can be null per specification\n            continue; // eslint-disable-line no-continue\n        }\n        if (geometry.type === 'GeometryCollection') {\n            log.assert(Array.isArray(geometry.geometries), 'GeoJSON does not have geometries array');\n            const { geometries } = geometry;\n            for (let i = 0; i < geometries.length; i++) {\n                const subGeometry = geometries[i];\n                separateGeometry(subGeometry, separated, wrapFeature, feature, featureIndex);\n            }\n        }\n        else {\n            separateGeometry(geometry, separated, wrapFeature, feature, featureIndex);\n        }\n    }\n    return separated;\n}\nfunction separateGeometry(geometry, separated, wrapFeature, sourceFeature, sourceFeatureIndex) {\n    const { type, coordinates } = geometry;\n    const { pointFeatures, lineFeatures, polygonFeatures, polygonOutlineFeatures } = separated;\n    if (!validateGeometry(type, coordinates)) {\n        // Avoid hard failure if some features are malformed\n        log.warn(`${type} coordinates are malformed`)();\n        return;\n    }\n    // Split each feature, but keep track of the source feature and index (for Multi* geometries)\n    switch (type) {\n        case 'Point':\n            pointFeatures.push(wrapFeature({\n                geometry\n            }, sourceFeature, sourceFeatureIndex));\n            break;\n        case 'MultiPoint':\n            coordinates.forEach(point => {\n                pointFeatures.push(wrapFeature({\n                    geometry: { type: 'Point', coordinates: point }\n                }, sourceFeature, sourceFeatureIndex));\n            });\n            break;\n        case 'LineString':\n            lineFeatures.push(wrapFeature({\n                geometry\n            }, sourceFeature, sourceFeatureIndex));\n            break;\n        case 'MultiLineString':\n            // Break multilinestrings into multiple lines\n            coordinates.forEach(path => {\n                lineFeatures.push(wrapFeature({\n                    geometry: { type: 'LineString', coordinates: path }\n                }, sourceFeature, sourceFeatureIndex));\n            });\n            break;\n        case 'Polygon':\n            polygonFeatures.push(wrapFeature({\n                geometry\n            }, sourceFeature, sourceFeatureIndex));\n            // Break polygon into multiple lines\n            coordinates.forEach(path => {\n                polygonOutlineFeatures.push(wrapFeature({\n                    geometry: { type: 'LineString', coordinates: path }\n                }, sourceFeature, sourceFeatureIndex));\n            });\n            break;\n        case 'MultiPolygon':\n            // Break multipolygons into multiple polygons\n            coordinates.forEach(polygon => {\n                polygonFeatures.push(wrapFeature({\n                    geometry: { type: 'Polygon', coordinates: polygon }\n                }, sourceFeature, sourceFeatureIndex));\n                // Break polygon into multiple lines\n                polygon.forEach(path => {\n                    polygonOutlineFeatures.push(wrapFeature({\n                        geometry: { type: 'LineString', coordinates: path }\n                    }, sourceFeature, sourceFeatureIndex));\n                });\n            });\n            break;\n        default:\n    }\n}\n/**\n * Simple GeoJSON validation util. For perf reasons we do not validate against the full spec,\n * only the following:\n   - geometry.type is supported\n   - geometry.coordinate has correct nesting level\n */\nconst COORDINATE_NEST_LEVEL = {\n    Point: 1,\n    MultiPoint: 2,\n    LineString: 2,\n    MultiLineString: 3,\n    Polygon: 3,\n    MultiPolygon: 4\n};\nexport function validateGeometry(type, coordinates) {\n    let nestLevel = COORDINATE_NEST_LEVEL[type];\n    log.assert(nestLevel, `Unknown GeoJSON type ${type}`);\n    while (coordinates && --nestLevel > 0) {\n        coordinates = coordinates[0];\n    }\n    return coordinates && Number.isFinite(coordinates[0]);\n}\n//# sourceMappingURL=geojson.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { calculatePickingColors } from \"./geojson-binary.js\";\nfunction createEmptyLayerProps() {\n    return {\n        points: {},\n        lines: {},\n        polygons: {},\n        polygonsOutline: {}\n    };\n}\nfunction getCoordinates(f) {\n    return f.geometry.coordinates;\n}\nexport function createLayerPropsFromFeatures(features, featuresDiff) {\n    const layerProps = createEmptyLayerProps();\n    const { pointFeatures, lineFeatures, polygonFeatures, polygonOutlineFeatures } = features;\n    layerProps.points.data = pointFeatures;\n    layerProps.points._dataDiff = featuresDiff.pointFeatures && (() => featuresDiff.pointFeatures);\n    layerProps.points.getPosition = getCoordinates;\n    layerProps.lines.data = lineFeatures;\n    layerProps.lines._dataDiff = featuresDiff.lineFeatures && (() => featuresDiff.lineFeatures);\n    layerProps.lines.getPath = getCoordinates;\n    layerProps.polygons.data = polygonFeatures;\n    layerProps.polygons._dataDiff =\n        featuresDiff.polygonFeatures && (() => featuresDiff.polygonFeatures);\n    layerProps.polygons.getPolygon = getCoordinates;\n    layerProps.polygonsOutline.data = polygonOutlineFeatures;\n    layerProps.polygonsOutline._dataDiff =\n        featuresDiff.polygonOutlineFeatures && (() => featuresDiff.polygonOutlineFeatures);\n    layerProps.polygonsOutline.getPath = getCoordinates;\n    return layerProps;\n}\nexport function createLayerPropsFromBinary(geojsonBinary, encodePickingColor) {\n    // The binary data format is documented here\n    // https://github.com/visgl/loaders.gl/blob/master/modules/gis/docs/api-reference/geojson-to-binary.md\n    // It is the default output from the `MVTLoader` and can also be obtained\n    // from GeoJSON by using the `geojsonToBinary` utility function.\n    const layerProps = createEmptyLayerProps();\n    const { points, lines, polygons } = geojsonBinary;\n    const customPickingColors = calculatePickingColors(geojsonBinary, encodePickingColor);\n    layerProps.points.data = {\n        length: points.positions.value.length / points.positions.size,\n        attributes: {\n            ...points.attributes,\n            getPosition: points.positions,\n            instancePickingColors: {\n                size: 4,\n                value: customPickingColors.points\n            }\n        },\n        properties: points.properties,\n        numericProps: points.numericProps,\n        featureIds: points.featureIds\n    };\n    layerProps.lines.data = {\n        length: lines.pathIndices.value.length - 1,\n        startIndices: lines.pathIndices.value,\n        attributes: {\n            ...lines.attributes,\n            getPath: lines.positions,\n            instancePickingColors: {\n                size: 4,\n                value: customPickingColors.lines\n            }\n        },\n        properties: lines.properties,\n        numericProps: lines.numericProps,\n        featureIds: lines.featureIds\n    };\n    layerProps.lines._pathType = 'open';\n    const vertexCount = polygons.positions.value.length / polygons.positions.size;\n    const vertexValid = Array(vertexCount).fill(1);\n    for (const index of polygons.primitivePolygonIndices.value) {\n        vertexValid[index - 1] = 0;\n    }\n    layerProps.polygons.data = {\n        length: polygons.polygonIndices.value.length - 1,\n        startIndices: polygons.polygonIndices.value,\n        attributes: {\n            ...polygons.attributes,\n            getPolygon: polygons.positions,\n            instanceVertexValid: {\n                size: 1,\n                value: new Uint16Array(vertexValid)\n            },\n            pickingColors: {\n                size: 4,\n                value: customPickingColors.polygons\n            }\n        },\n        properties: polygons.properties,\n        numericProps: polygons.numericProps,\n        featureIds: polygons.featureIds\n    };\n    layerProps.polygons._normalize = false;\n    if (polygons.triangles) {\n        layerProps.polygons.data.attributes.indices = polygons.triangles.value;\n    }\n    layerProps.polygonsOutline.data = {\n        length: polygons.primitivePolygonIndices.value.length - 1,\n        startIndices: polygons.primitivePolygonIndices.value,\n        attributes: {\n            ...polygons.attributes,\n            getPath: polygons.positions,\n            instancePickingColors: {\n                size: 4,\n                value: customPickingColors.polygons\n            }\n        },\n        properties: polygons.properties,\n        numericProps: polygons.numericProps,\n        featureIds: polygons.featureIds\n    };\n    layerProps.polygonsOutline._pathType = 'open';\n    return layerProps;\n}\n//# sourceMappingURL=geojson-layer-props.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { CompositeLayer } from '@deck.gl/core';\nimport { replaceInRange } from \"../utils.js\";\nimport { binaryToFeatureForAccesor } from \"./geojson-binary.js\";\nimport { POINT_LAYER, LINE_LAYER, POLYGON_LAYER, getDefaultProps, forwardProps } from \"./sub-layer-map.js\";\nimport { getGeojsonFeatures, separateGeojsonFeatures } from \"./geojson.js\";\nimport { createLayerPropsFromFeatures, createLayerPropsFromBinary } from \"./geojson-layer-props.js\";\nconst FEATURE_TYPES = ['points', 'linestrings', 'polygons'];\nconst defaultProps = {\n    ...getDefaultProps(POINT_LAYER.circle),\n    ...getDefaultProps(POINT_LAYER.icon),\n    ...getDefaultProps(POINT_LAYER.text),\n    ...getDefaultProps(LINE_LAYER),\n    ...getDefaultProps(POLYGON_LAYER),\n    // Overwrite sub layer defaults\n    stroked: true,\n    filled: true,\n    extruded: false,\n    wireframe: false,\n    _full3d: false,\n    iconAtlas: { type: 'object', value: null },\n    iconMapping: { type: 'object', value: {} },\n    getIcon: { type: 'accessor', value: f => f.properties.icon },\n    getText: { type: 'accessor', value: f => f.properties.text },\n    // Self props\n    pointType: 'circle',\n    // TODO: deprecated, remove in v9\n    getRadius: { deprecatedFor: 'getPointRadius' }\n};\n/** Render GeoJSON formatted data as polygons, lines and points (circles, icons and/or texts). */\nclass GeoJsonLayer extends CompositeLayer {\n    initializeState() {\n        this.state = {\n            layerProps: {},\n            features: {},\n            featuresDiff: {}\n        };\n    }\n    updateState({ props, changeFlags }) {\n        if (!changeFlags.dataChanged) {\n            return;\n        }\n        const { data } = this.props;\n        const binary = data && 'points' in data && 'polygons' in data && 'lines' in data;\n        this.setState({ binary });\n        if (binary) {\n            this._updateStateBinary({ props, changeFlags });\n        }\n        else {\n            this._updateStateJSON({ props, changeFlags });\n        }\n    }\n    _updateStateBinary({ props, changeFlags }) {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        const layerProps = createLayerPropsFromBinary(props.data, this.encodePickingColor);\n        this.setState({ layerProps });\n    }\n    _updateStateJSON({ props, changeFlags }) {\n        const features = getGeojsonFeatures(props.data);\n        const wrapFeature = this.getSubLayerRow.bind(this);\n        let newFeatures = {};\n        const featuresDiff = {};\n        if (Array.isArray(changeFlags.dataChanged)) {\n            const oldFeatures = this.state.features;\n            for (const key in oldFeatures) {\n                newFeatures[key] = oldFeatures[key].slice();\n                featuresDiff[key] = [];\n            }\n            for (const dataRange of changeFlags.dataChanged) {\n                const partialFeatures = separateGeojsonFeatures(features, wrapFeature, dataRange);\n                for (const key in oldFeatures) {\n                    featuresDiff[key].push(replaceInRange({\n                        data: newFeatures[key],\n                        getIndex: f => f.__source.index,\n                        dataRange,\n                        replace: partialFeatures[key]\n                    }));\n                }\n            }\n        }\n        else {\n            newFeatures = separateGeojsonFeatures(features, wrapFeature);\n        }\n        const layerProps = createLayerPropsFromFeatures(newFeatures, featuresDiff);\n        this.setState({\n            features: newFeatures,\n            featuresDiff,\n            layerProps\n        });\n    }\n    getPickingInfo(params) {\n        const info = super.getPickingInfo(params);\n        const { index, sourceLayer } = info;\n        info.featureType = FEATURE_TYPES.find(ft => sourceLayer.id.startsWith(`${this.id}-${ft}-`));\n        if (index >= 0 && sourceLayer.id.startsWith(`${this.id}-points-text`) && this.state.binary) {\n            info.index = this.props.data.points.globalFeatureIds.value[index];\n        }\n        return info;\n    }\n    _updateAutoHighlight(info) {\n        // All sub layers except the points layer use source feature index to encode the picking color\n        // The points layer uses indices from the points data array.\n        const pointLayerIdPrefix = `${this.id}-points-`;\n        const sourceIsPoints = info.featureType === 'points';\n        for (const layer of this.getSubLayers()) {\n            if (layer.id.startsWith(pointLayerIdPrefix) === sourceIsPoints) {\n                layer.updateAutoHighlight(info);\n            }\n        }\n    }\n    _renderPolygonLayer() {\n        const { extruded, wireframe } = this.props;\n        const { layerProps } = this.state;\n        const id = 'polygons-fill';\n        const PolygonFillLayer = this.shouldRenderSubLayer(id, layerProps.polygons?.data) &&\n            this.getSubLayerClass(id, POLYGON_LAYER.type);\n        if (PolygonFillLayer) {\n            const forwardedProps = forwardProps(this, POLYGON_LAYER.props);\n            // Avoid building the lineColors attribute if wireframe is off\n            const useLineColor = extruded && wireframe;\n            if (!useLineColor) {\n                delete forwardedProps.getLineColor;\n            }\n            // using a legacy API to invalid lineColor attributes\n            forwardedProps.updateTriggers.lineColors = useLineColor;\n            return new PolygonFillLayer(forwardedProps, this.getSubLayerProps({\n                id,\n                updateTriggers: forwardedProps.updateTriggers\n            }), layerProps.polygons);\n        }\n        return null;\n    }\n    _renderLineLayers() {\n        const { extruded, stroked } = this.props;\n        const { layerProps } = this.state;\n        const polygonStrokeLayerId = 'polygons-stroke';\n        const lineStringsLayerId = 'linestrings';\n        const PolygonStrokeLayer = !extruded &&\n            stroked &&\n            this.shouldRenderSubLayer(polygonStrokeLayerId, layerProps.polygonsOutline?.data) &&\n            this.getSubLayerClass(polygonStrokeLayerId, LINE_LAYER.type);\n        const LineStringsLayer = this.shouldRenderSubLayer(lineStringsLayerId, layerProps.lines?.data) &&\n            this.getSubLayerClass(lineStringsLayerId, LINE_LAYER.type);\n        if (PolygonStrokeLayer || LineStringsLayer) {\n            const forwardedProps = forwardProps(this, LINE_LAYER.props);\n            return [\n                PolygonStrokeLayer &&\n                    new PolygonStrokeLayer(forwardedProps, this.getSubLayerProps({\n                        id: polygonStrokeLayerId,\n                        updateTriggers: forwardedProps.updateTriggers\n                    }), layerProps.polygonsOutline),\n                LineStringsLayer &&\n                    new LineStringsLayer(forwardedProps, this.getSubLayerProps({\n                        id: lineStringsLayerId,\n                        updateTriggers: forwardedProps.updateTriggers\n                    }), layerProps.lines)\n            ];\n        }\n        return null;\n    }\n    _renderPointLayers() {\n        const { pointType } = this.props;\n        const { layerProps, binary } = this.state;\n        let { highlightedObjectIndex } = this.props;\n        if (!binary && Number.isFinite(highlightedObjectIndex)) {\n            // @ts-expect-error TODO - type non-binary data\n            highlightedObjectIndex = layerProps.points.data.findIndex(d => d.__source.index === highlightedObjectIndex);\n        }\n        // Avoid duplicate sub layer ids\n        const types = new Set(pointType.split('+'));\n        const pointLayers = [];\n        for (const type of types) {\n            const id = `points-${type}`;\n            const PointLayerMapping = POINT_LAYER[type];\n            const PointsLayer = PointLayerMapping &&\n                this.shouldRenderSubLayer(id, layerProps.points?.data) &&\n                this.getSubLayerClass(id, PointLayerMapping.type);\n            if (PointsLayer) {\n                const forwardedProps = forwardProps(this, PointLayerMapping.props);\n                let pointsLayerProps = layerProps.points;\n                if (type === 'text' && binary) {\n                    // Picking colors are per-point but for text per-character are required\n                    // getPickingInfo() maps back to the correct index\n                    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                    // @ts-expect-error TODO - type binary data\n                    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                    const { instancePickingColors, ...rest } = pointsLayerProps.data.attributes;\n                    pointsLayerProps = {\n                        ...pointsLayerProps,\n                        // @ts-expect-error TODO - type binary data\n                        data: { ...pointsLayerProps.data, attributes: rest }\n                    };\n                }\n                pointLayers.push(new PointsLayer(forwardedProps, this.getSubLayerProps({\n                    id,\n                    updateTriggers: forwardedProps.updateTriggers,\n                    highlightedObjectIndex\n                }), pointsLayerProps));\n            }\n        }\n        return pointLayers;\n    }\n    renderLayers() {\n        const { extruded } = this.props;\n        const polygonFillLayer = this._renderPolygonLayer();\n        const lineLayers = this._renderLineLayers();\n        const pointLayers = this._renderPointLayers();\n        return [\n            // If not extruded: flat fill layer is drawn below outlines\n            !extruded && polygonFillLayer,\n            lineLayers,\n            pointLayers,\n            // If extruded: draw fill layer last for correct blending behavior\n            extruded && polygonFillLayer\n        ];\n    }\n    getSubLayerAccessor(accessor) {\n        const { binary } = this.state;\n        if (!binary || typeof accessor !== 'function') {\n            return super.getSubLayerAccessor(accessor);\n        }\n        return (object, info) => {\n            const { data, index } = info;\n            const feature = binaryToFeatureForAccesor(data, index);\n            // @ts-ignore (TS2349) accessor is always function\n            return accessor(feature, info);\n        };\n    }\n}\nGeoJsonLayer.layerName = 'GeoJsonLayer';\nGeoJsonLayer.defaultProps = defaultProps;\nexport default GeoJsonLayer;\n//# sourceMappingURL=geojson-layer.js.map"],"x_google_ignoreList":[112],"mappings":"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"}
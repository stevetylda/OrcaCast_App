{"version":3,"file":"assert-Cv_uMGxh.js","names":["assert","globals","self_","window_","global_","document_","matches","nodeVersion","VERSION","log","assert","window_","isBrowser","isBrowser","source","isBrowser","isBrowser","version","isBrowser","length","filename","toArrayBuffer","isBuffer","node.toArrayBuffer","matches","matches","defaultOptions","path.filename","length","DEFAULT_CHUNK_SIZE","DEFAULT_CHUNK_SIZE","path.filename","path.dirname","fetch","deckLog","assert","len","source","source","source","version","vs","fs","source","log","defines","getUniforms","source","source","len","RADIANS_TO_DEGREES","DEGREES_TO_RADIANS","value","lerp","scale","length","assert","length","create","glMatrix.ARRAY_TYPE","negate","lerp","forEach","create","glMatrix.ARRAY_TYPE","transformMat4","rotateX","rotateY","rotateZ","forEach","ZERO","vec3_angle","len","glMatrix.EPSILON","glMatrix.ARRAY_TYPE","scale","transformMat4","IDENTITY_MATRIX","mat4_determinant","scale","vec4_transformMat4","length","vec2_transformMat4","vec3_transformMat4","IDENTITY","vs","fs","getUniforms","source","vs","Input","Input","add","EVENT_NAMES","MOUSE_EVENTS","HammerManager","Pan","Pinch","Tap","len","ZERO_VECTOR","vec4.transformMat4","mat4.multiply","geometry","project","createMat4","vec4.transformMat4","mod","clamp","assert","DEGREES_TO_RADIANS","TILE_SIZE","scale","unitsPerMeter","createMat4","vec3.negate","clamp","vec2.lerp","clamp","DEGREES_TO_RADIANS","vec2.lerp","mod","typedArrayManager","mat4.invert","Viewport","scale","translate","vec2.add","vec2.negate","length","source"],"sources":["../../@loaders.gl/loader-utils/dist/lib/env-utils/assert.js","../../@loaders.gl/loader-utils/dist/lib/env-utils/globals.js","../../@loaders.gl/loader-utils/dist/lib/log-utils/log.js","../../@loaders.gl/loader-utils/dist/lib/option-utils/merge-loader-options.js","../../@loaders.gl/worker-utils/dist/lib/env-utils/version.js","../../@loaders.gl/worker-utils/dist/lib/env-utils/assert.js","../../@loaders.gl/worker-utils/dist/lib/env-utils/globals.js","../../@loaders.gl/worker-utils/dist/lib/worker-farm/worker-job.js","../../@loaders.gl/worker-utils/dist/lib/node/worker_threads-browser.js","../../@loaders.gl/worker-utils/dist/lib/worker-utils/get-loadable-worker-url.js","../../@loaders.gl/worker-utils/dist/lib/worker-utils/get-transfer-list.js","../../@loaders.gl/worker-utils/dist/lib/worker-farm/worker-thread.js","../../@loaders.gl/worker-utils/dist/lib/worker-farm/worker-pool.js","../../@loaders.gl/worker-utils/dist/lib/worker-farm/worker-farm.js","../../@loaders.gl/worker-utils/dist/lib/worker-api/get-worker-url.js","../../@loaders.gl/worker-utils/dist/lib/worker-api/validate-worker-version.js","../../@loaders.gl/loader-utils/dist/lib/worker-loader-utils/parse-with-worker.js","../../@loaders.gl/loader-utils/dist/lib/binary-utils/array-buffer-utils.js","../../@loaders.gl/loader-utils/dist/lib/iterators/async-iteration.js","../../@loaders.gl/loader-utils/dist/lib/path-utils/file-aliases.js","../../@loaders.gl/loader-utils/dist/lib/node/buffer.browser.js","../../@loaders.gl/loader-utils/dist/lib/binary-utils/memory-conversion-utils.js","../../@loaders.gl/loader-utils/dist/lib/path-utils/path.js","../../@loaders.gl/core/dist/javascript-utils/is-type.js","../../@loaders.gl/core/dist/lib/fetch/fetch-error.js","../../@loaders.gl/core/dist/lib/utils/mime-type-utils.js","../../@loaders.gl/core/dist/lib/utils/url-utils.js","../../@loaders.gl/core/dist/lib/utils/resource-utils.js","../../@loaders.gl/core/dist/lib/utils/response-utils.js","../../@loaders.gl/core/dist/lib/fetch/fetch-file.js","../../@loaders.gl/core/dist/lib/loader-utils/loggers.js","../../@loaders.gl/core/dist/lib/loader-utils/option-defaults.js","../../@loaders.gl/core/dist/lib/loader-utils/option-utils.js","../../@loaders.gl/core/dist/lib/loader-utils/normalize-loader.js","../../@loaders.gl/core/dist/lib/api/register-loaders.js","../../@loaders.gl/core/dist/lib/api/select-loader.js","../../@loaders.gl/core/dist/iterators/make-iterator/make-string-iterator.js","../../@loaders.gl/core/dist/iterators/make-iterator/make-array-buffer-iterator.js","../../@loaders.gl/core/dist/iterators/make-iterator/make-blob-iterator.js","../../@loaders.gl/core/dist/iterators/make-iterator/make-stream-iterator.js","../../@loaders.gl/core/dist/iterators/make-iterator/make-iterator.js","../../@loaders.gl/core/dist/lib/loader-utils/get-data.js","../../@loaders.gl/core/dist/lib/loader-utils/get-fetch-function.js","../../@loaders.gl/core/dist/lib/loader-utils/loader-context.js","../../@loaders.gl/core/dist/lib/api/parse.js","../../@loaders.gl/core/dist/lib/api/load.js","../../@deck.gl/core/dist/utils/log.js","../../@deck.gl/core/dist/debug/loggers.js","../../@deck.gl/core/dist/debug/index.js","../../@luma.gl/shadertools/dist/lib/utils/assert.js","../../@luma.gl/shadertools/dist/lib/filters/prop-types.js","../../@luma.gl/shadertools/dist/module-injectors.js","../../@luma.gl/shadertools/dist/lib/shader-assembly/shader-injections.js","../../@luma.gl/shadertools/dist/lib/shader-module/shader-module.js","../../@luma.gl/shadertools/dist/lib/shader-module/shader-module-dependencies.js","../../@luma.gl/shadertools/dist/lib/shader-assembly/platform-defines.js","../../@luma.gl/shadertools/dist/lib/shader-transpiler/transpile-glsl-shader.js","../../@luma.gl/shadertools/dist/lib/shader-assembly/shader-hooks.js","../../@luma.gl/shadertools/dist/lib/glsl-utils/get-shader-info.js","../../@luma.gl/shadertools/dist/lib/shader-assembly/assemble-shaders.js","../../@luma.gl/shadertools/dist/lib/preprocessor/preprocessor.js","../../@luma.gl/shadertools/dist/lib/shader-assembler.js","../../@math.gl/core/dist/lib/common.js","../../@math.gl/core/dist/classes/base/math-array.js","../../@math.gl/core/dist/lib/validators.js","../../@math.gl/core/dist/lib/assert.js","../../@math.gl/core/dist/classes/base/vector.js","../../@math.gl/core/dist/gl-matrix/common.js","../../@math.gl/core/dist/gl-matrix/vec2.js","../../@math.gl/core/dist/lib/gl-matrix-extras.js","../../@math.gl/core/dist/gl-matrix/vec3.js","../../@math.gl/core/dist/classes/vector3.js","../../@math.gl/core/dist/classes/base/matrix.js","../../@math.gl/core/dist/gl-matrix/mat4.js","../../@math.gl/core/dist/gl-matrix/vec4.js","../../@math.gl/core/dist/classes/matrix4.js","../../@luma.gl/shadertools/dist/modules/math/fp32/fp32.js","../../@luma.gl/shadertools/dist/modules/engine/picking/picking.js","../../@deck.gl/core/dist/shaderlib/color/color.js","../../@deck.gl/core/dist/shaderlib/misc/geometry.js","../../mjolnir.js/dist/hammerjs/input/input-consts.js","../../mjolnir.js/dist/hammerjs/recognizer/recognizer-state.js","../../mjolnir.js/dist/hammerjs/touchaction/touchaction-Consts.js","../../mjolnir.js/dist/hammerjs/touchaction/clean-touch-actions.js","../../mjolnir.js/dist/hammerjs/touchaction/touchaction.js","../../mjolnir.js/dist/hammerjs/utils/split-str.js","../../mjolnir.js/dist/hammerjs/utils/event-listeners.js","../../mjolnir.js/dist/hammerjs/utils/get-window-for-element.js","../../mjolnir.js/dist/hammerjs/utils/has-parent.js","../../mjolnir.js/dist/hammerjs/input/get-center.js","../../mjolnir.js/dist/hammerjs/input/simple-clone-input-data.js","../../mjolnir.js/dist/hammerjs/input/get-distance.js","../../mjolnir.js/dist/hammerjs/input/get-angle.js","../../mjolnir.js/dist/hammerjs/input/get-direction.js","../../mjolnir.js/dist/hammerjs/input/get-delta-xy.js","../../mjolnir.js/dist/hammerjs/input/get-velocity.js","../../mjolnir.js/dist/hammerjs/input/get-scale.js","../../mjolnir.js/dist/hammerjs/input/get-rotation.js","../../mjolnir.js/dist/hammerjs/input/compute-interval-input-data.js","../../mjolnir.js/dist/hammerjs/input/compute-input-data.js","../../mjolnir.js/dist/hammerjs/input/input-handler.js","../../mjolnir.js/dist/hammerjs/input/input.js","../../mjolnir.js/dist/hammerjs/inputs/pointerevent.js","../../mjolnir.js/dist/hammerjs/utils/prefixed.js","../../mjolnir.js/dist/hammerjs/manager.js","../../mjolnir.js/dist/hammerjs/utils/unique-id.js","../../mjolnir.js/dist/hammerjs/recognizer/state-str.js","../../mjolnir.js/dist/hammerjs/recognizer/recognizer.js","../../mjolnir.js/dist/hammerjs/recognizers/attribute.js","../../mjolnir.js/dist/hammerjs/recognizers/tap.js","../../mjolnir.js/dist/hammerjs/recognizers/pan.js","../../mjolnir.js/dist/hammerjs/recognizers/pinch.js","../../mjolnir.js/dist/inputs/input.js","../../mjolnir.js/dist/utils/globals.js","../../mjolnir.js/dist/inputs/wheel-input.js","../../mjolnir.js/dist/inputs/move-input.js","../../mjolnir.js/dist/inputs/key-input.js","../../mjolnir.js/dist/inputs/contextmenu-input.js","../../mjolnir.js/dist/utils/event-utils.js","../../mjolnir.js/dist/utils/event-registrar.js","../../mjolnir.js/dist/event-manager.js","../../@deck.gl/core/dist/lib/constants.js","../../@deck.gl/core/dist/utils/memoize.js","../../@deck.gl/core/dist/shaderlib/project/viewport-uniforms.js","../../@deck.gl/core/dist/shaderlib/project/project.wgsl.js","../../@deck.gl/core/dist/shaderlib/project/project.glsl.js","../../@deck.gl/core/dist/shaderlib/project/project.js","../../@deck.gl/core/dist/shaderlib/project32/project32.js","../../@math.gl/web-mercator/dist/math-utils.js","../../@math.gl/web-mercator/dist/assert.js","../../@math.gl/web-mercator/dist/web-mercator-utils.js","../../@math.gl/web-mercator/dist/fit-bounds.js","../../@math.gl/web-mercator/dist/get-bounds.js","../../@math.gl/web-mercator/dist/normalize-viewport-props.js","../../@deck.gl/core/dist/shaderlib/picking/picking.js","../../@deck.gl/core/dist/utils/typed-array-manager.js","../../@deck.gl/core/dist/utils/math-utils.js","../../@deck.gl/core/dist/viewports/viewport.js","../../@deck.gl/core/dist/viewports/web-mercator-viewport.js","../../@deck.gl/core/dist/lifecycle/constants.js","../../@deck.gl/core/dist/utils/flatten.js","../../@deck.gl/core/dist/utils/deep-equal.js","../../@deck.gl/core/dist/transitions/transition.js","../../@deck.gl/core/dist/utils/assert.js"],"sourcesContent":["/**\n * Throws an `Error` with the optional `message` if `condition` is falsy\n * @note Replacement for the external assert method to reduce bundle size\n */\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new Error(message || 'loader assertion failed.');\n    }\n}\n","// Purpose: include this in your module to avoid\n// dependencies on micro modules like 'global' and 'is-browser';\n/* eslint-disable no-restricted-globals */\nconst globals = {\n    self: typeof self !== 'undefined' && self,\n    window: typeof window !== 'undefined' && window,\n    global: typeof global !== 'undefined' && global,\n    document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\n/** true if running in a browser */\nexport const isBrowser = \n// @ts-ignore process does not exist on browser\nBoolean(typeof process !== 'object' || String(process) !== '[object process]' || process.browser);\n/** true if running in a worker thread */\nexport const isWorker = typeof importScripts === 'function';\n// Extract node major version\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\n/** Major Node version (as a number) */\nexport const nodeVersion = (matches && parseFloat(matches[1])) || 0;\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Log } from '@probe.gl/log';\n// Version constant cannot be imported, it needs to correspond to the build version of **this** module.\n// __VERSION__ is injected by babel-plugin-version-inline\n// @ts-ignore TS2304: Cannot find name '__VERSION__'.\nexport const VERSION = typeof \"4.3.3\" !== 'undefined' ? \"4.3.3\" : 'latest';\nconst version = VERSION[0] >= '0' && VERSION[0] <= '9' ? `v${VERSION}` : '';\n// Make sure we set the global variable\nfunction createLog() {\n    const log = new Log({ id: 'loaders.gl' });\n    globalThis.loaders = globalThis.loaders || {};\n    globalThis.loaders.log = log;\n    globalThis.loaders.version = version;\n    globalThis.probe = globalThis.probe || {};\n    globalThis.probe.loaders = log;\n    return log;\n}\nexport const log = createLog();\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/**\n *\n * @param baseOptions Can be undefined, in which case a fresh options object will be minted\n * @param newOptions\n * @returns\n */\nexport function mergeLoaderOptions(baseOptions, newOptions) {\n    return mergeOptionsRecursively(baseOptions || {}, newOptions);\n}\nfunction mergeOptionsRecursively(baseOptions, newOptions, level = 0) {\n    // Sanity check (jest test runner overwrites the console object which can lead to infinite recursion)\n    if (level > 3) {\n        return newOptions;\n    }\n    const options = { ...baseOptions };\n    for (const [key, newValue] of Object.entries(newOptions)) {\n        if (newValue && typeof newValue === 'object' && !Array.isArray(newValue)) {\n            options[key] = mergeOptionsRecursively(options[key] || {}, newOptions[key], level + 1);\n            // Object.assign(options[key] as object, newOptions[key]);\n        }\n        else {\n            options[key] = newOptions[key];\n        }\n    }\n    return options;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Version constant cannot be imported, it needs to correspond to the build version of **this** module.\n/**\n * TODO - unpkg.com doesn't seem to have a `latest` specifier for alpha releases...\n * 'beta' on beta branch, 'latest' on prod branch\n */\nexport const NPM_TAG = 'latest';\nfunction getVersion() {\n    if (!globalThis._loadersgl_?.version) {\n        globalThis._loadersgl_ = globalThis._loadersgl_ || {};\n        // __VERSION__ is injected by babel-plugin-version-inline\n        if (typeof \"4.3.3\" === 'undefined') {\n            // eslint-disable-next-line\n            console.warn('loaders.gl: The __VERSION__ variable is not injected using babel plugin. Latest unstable workers would be fetched from the CDN.');\n            globalThis._loadersgl_.version = NPM_TAG;\n        }\n        else {\n            globalThis._loadersgl_.version = \"4.3.3\";\n        }\n    }\n    return globalThis._loadersgl_.version;\n}\nexport const VERSION = getVersion();\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Replacement for the external assert method to reduce bundle size\n// Note: We don't use the second \"message\" argument in calling code,\n// so no need to support it here\n/** Throws an `Error` with the optional `message` if `condition` is falsy */\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new Error(message || 'loaders.gl assertion failed.');\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Purpose: include this in your module to avoids adding dependencies on\n// micro modules like 'global' and 'is-browser';\n/* eslint-disable no-restricted-globals */\nconst globals = {\n    self: typeof self !== 'undefined' && self,\n    window: typeof window !== 'undefined' && window,\n    global: typeof global !== 'undefined' && global,\n    document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\n/** true if running in the browser, false if running in Node.js */\nexport const isBrowser = \n// @ts-ignore process.browser\ntypeof process !== 'object' || String(process) !== '[object process]' || process.browser;\n/** true if running on a worker thread */\nexport const isWorker = typeof importScripts === 'function';\n/** true if running on a mobile device */\nexport const isMobile = typeof window !== 'undefined' && typeof window.orientation !== 'undefined';\n// Extract node major version\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\n/** Version of Node.js if running under Node, otherwise 0 */\nexport const nodeVersion = (matches && parseFloat(matches[1])) || 0;\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { assert } from \"../env-utils/assert.js\";\n/**\n * Represents one Job handled by a WorkerPool or WorkerFarm\n */\nexport default class WorkerJob {\n    name;\n    workerThread;\n    isRunning = true;\n    /** Promise that resolves when Job is done */\n    result;\n    _resolve = () => { };\n    _reject = () => { };\n    constructor(jobName, workerThread) {\n        this.name = jobName;\n        this.workerThread = workerThread;\n        this.result = new Promise((resolve, reject) => {\n            this._resolve = resolve;\n            this._reject = reject;\n        });\n    }\n    /**\n     * Send a message to the job's worker thread\n     * @param data any data structure, ideally consisting mostly of transferrable objects\n     */\n    postMessage(type, payload) {\n        this.workerThread.postMessage({\n            source: 'loaders.gl', // Lets worker ignore unrelated messages\n            type,\n            payload\n        });\n    }\n    /**\n     * Call to resolve the `result` Promise with the supplied value\n     */\n    done(value) {\n        assert(this.isRunning);\n        this.isRunning = false;\n        this._resolve(value);\n    }\n    /**\n     * Call to reject the `result` Promise with the supplied error\n     */\n    error(error) {\n        assert(this.isRunning);\n        this.isRunning = false;\n        this._reject(error);\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/** Browser polyfill for Node.js built-in `worker_threads` module.\n * These fills are non-functional, and just intended to ensure that\n * `import 'worker_threads` doesn't break browser builds.\n * The replacement is done in package.json browser field\n */\nexport class NodeWorker {\n    terminate() { }\n}\nexport const parentPort = null;\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { assert } from \"../env-utils/assert.js\";\nconst workerURLCache = new Map();\n/**\n * Creates a loadable URL from worker source or URL\n * that can be used to create `Worker` instances.\n * Due to CORS issues it may be necessary to wrap a URL in a small importScripts\n * @param props\n * @param props.source Worker source\n * @param props.url Worker URL\n * @returns loadable url\n */\nexport function getLoadableWorkerURL(props) {\n    assert((props.source && !props.url) || (!props.source && props.url)); // Either source or url must be defined\n    let workerURL = workerURLCache.get(props.source || props.url);\n    if (!workerURL) {\n        // Differentiate worker urls from worker source code\n        if (props.url) {\n            workerURL = getLoadableWorkerURLFromURL(props.url);\n            workerURLCache.set(props.url, workerURL);\n        }\n        if (props.source) {\n            workerURL = getLoadableWorkerURLFromSource(props.source);\n            workerURLCache.set(props.source, workerURL);\n        }\n    }\n    assert(workerURL);\n    return workerURL;\n}\n/**\n * Build a loadable worker URL from worker URL\n * @param url\n * @returns loadable URL\n */\nfunction getLoadableWorkerURLFromURL(url) {\n    // A local script url, we can use it to initialize a Worker directly\n    if (!url.startsWith('http')) {\n        return url;\n    }\n    // A remote script, we need to use `importScripts` to load from different origin\n    const workerSource = buildScriptSource(url);\n    return getLoadableWorkerURLFromSource(workerSource);\n}\n/**\n * Build a loadable worker URL from worker source\n * @param workerSource\n * @returns loadable url\n */\nfunction getLoadableWorkerURLFromSource(workerSource) {\n    const blob = new Blob([workerSource], { type: 'application/javascript' });\n    return URL.createObjectURL(blob);\n}\n/**\n * Per spec, worker cannot be initialized with a script from a different origin\n * However a local worker script can still import scripts from other origins,\n * so we simply build a wrapper script.\n *\n * @param workerUrl\n * @returns source\n */\nfunction buildScriptSource(workerUrl) {\n    return `\\\ntry {\n  importScripts('${workerUrl}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// NOTE - there is a copy of this function is both in core and loader-utils\n// core does not need all the utils in loader-utils, just this one.\n/**\n * Returns an array of Transferrable objects that can be used with postMessage\n * https://developer.mozilla.org/en-US/docs/Web/API/Worker/postMessage\n * @param object data to be sent via postMessage\n * @param recursive - not for application use\n * @param transfers - not for application use\n * @returns a transfer list that can be passed to postMessage\n */\nexport function getTransferList(object, recursive = true, transfers) {\n    // Make sure that items in the transfer list is unique\n    const transfersSet = transfers || new Set();\n    if (!object) {\n        // ignore\n    }\n    else if (isTransferable(object)) {\n        transfersSet.add(object);\n    }\n    else if (isTransferable(object.buffer)) {\n        // Typed array\n        transfersSet.add(object.buffer);\n    }\n    else if (ArrayBuffer.isView(object)) {\n        // object is a TypeArray viewing into a SharedArrayBuffer (not transferable)\n        // Do not iterate through the content in this case\n    }\n    else if (recursive && typeof object === 'object') {\n        for (const key in object) {\n            // Avoid perf hit - only go one level deep\n            getTransferList(object[key], recursive, transfersSet);\n        }\n    }\n    // If transfers is defined, is internal recursive call\n    // Otherwise it's called by the user\n    return transfers === undefined ? Array.from(transfersSet) : [];\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/Transferable\nfunction isTransferable(object) {\n    if (!object) {\n        return false;\n    }\n    if (object instanceof ArrayBuffer) {\n        return true;\n    }\n    if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n        return true;\n    }\n    if (typeof ImageBitmap !== 'undefined' && object instanceof ImageBitmap) {\n        return true;\n    }\n    // @ts-ignore\n    if (typeof OffscreenCanvas !== 'undefined' && object instanceof OffscreenCanvas) {\n        return true;\n    }\n    return false;\n}\n/**\n * Recursively drop non serializable values like functions and regexps.\n * @param object\n */\nexport function getTransferListForWriter(object) {\n    if (object === null) {\n        return {};\n    }\n    const clone = Object.assign({}, object);\n    Object.keys(clone).forEach((key) => {\n        // Typed Arrays and Arrays are passed with no change\n        if (typeof object[key] === 'object' &&\n            !ArrayBuffer.isView(object[key]) &&\n            !(object[key] instanceof Array)) {\n            clone[key] = getTransferListForWriter(object[key]);\n        }\n        else if (typeof clone[key] === 'function' || clone[key] instanceof RegExp) {\n            clone[key] = {};\n        }\n        else {\n            clone[key] = object[key];\n        }\n    });\n    return clone;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { NodeWorker } from \"../node/worker_threads.js\";\nimport { isBrowser } from \"../env-utils/globals.js\";\nimport { assert } from \"../env-utils/assert.js\";\nimport { getLoadableWorkerURL } from \"../worker-utils/get-loadable-worker-url.js\";\nimport { getTransferList } from \"../worker-utils/get-transfer-list.js\";\nconst NOOP = () => { };\n/**\n * Represents one worker thread\n */\nexport default class WorkerThread {\n    name;\n    source;\n    url;\n    terminated = false;\n    worker;\n    onMessage;\n    onError;\n    _loadableURL = '';\n    /** Checks if workers are supported on this platform */\n    static isSupported() {\n        return ((typeof Worker !== 'undefined' && isBrowser) ||\n            (typeof NodeWorker !== 'undefined' && !isBrowser));\n    }\n    constructor(props) {\n        const { name, source, url } = props;\n        assert(source || url); // Either source or url must be defined\n        this.name = name;\n        this.source = source;\n        this.url = url;\n        this.onMessage = NOOP;\n        this.onError = (error) => console.log(error); // eslint-disable-line\n        this.worker = isBrowser ? this._createBrowserWorker() : this._createNodeWorker();\n    }\n    /**\n     * Terminate this worker thread\n     * @note Can free up significant memory\n     */\n    destroy() {\n        this.onMessage = NOOP;\n        this.onError = NOOP;\n        this.worker.terminate(); // eslint-disable-line @typescript-eslint/no-floating-promises\n        this.terminated = true;\n    }\n    get isRunning() {\n        return Boolean(this.onMessage);\n    }\n    /**\n     * Send a message to this worker thread\n     * @param data any data structure, ideally consisting mostly of transferrable objects\n     * @param transferList If not supplied, calculated automatically by traversing data\n     */\n    postMessage(data, transferList) {\n        transferList = transferList || getTransferList(data);\n        // @ts-ignore\n        this.worker.postMessage(data, transferList);\n    }\n    // PRIVATE\n    /**\n     * Generate a standard Error from an ErrorEvent\n     * @param event\n     */\n    _getErrorFromErrorEvent(event) {\n        // Note Error object does not have the expected fields if loading failed completely\n        // https://developer.mozilla.org/en-US/docs/Web/API/Worker#Event_handlers\n        // https://developer.mozilla.org/en-US/docs/Web/API/ErrorEvent\n        let message = 'Failed to load ';\n        message += `worker ${this.name} from ${this.url}. `;\n        if (event.message) {\n            message += `${event.message} in `;\n        }\n        // const hasFilename = event.filename && !event.filename.startsWith('blob:');\n        // message += hasFilename ? event.filename : this.source.slice(0, 100);\n        if (event.lineno) {\n            message += `:${event.lineno}:${event.colno}`;\n        }\n        return new Error(message);\n    }\n    /**\n     * Creates a worker thread on the browser\n     */\n    _createBrowserWorker() {\n        this._loadableURL = getLoadableWorkerURL({ source: this.source, url: this.url });\n        const worker = new Worker(this._loadableURL, { name: this.name });\n        worker.onmessage = (event) => {\n            if (!event.data) {\n                this.onError(new Error('No data received'));\n            }\n            else {\n                this.onMessage(event.data);\n            }\n        };\n        // This callback represents an uncaught exception in the worker thread\n        worker.onerror = (error) => {\n            this.onError(this._getErrorFromErrorEvent(error));\n            this.terminated = true;\n        };\n        // TODO - not clear when this would be called, for now just log in case it happens\n        worker.onmessageerror = (event) => console.error(event); // eslint-disable-line\n        return worker;\n    }\n    /**\n     * Creates a worker thread in node.js\n     * @todo https://nodejs.org/api/async_hooks.html#async-resource-worker-pool\n     */\n    _createNodeWorker() {\n        let worker;\n        if (this.url) {\n            // Make sure relative URLs start with './'\n            const absolute = this.url.includes(':/') || this.url.startsWith('/');\n            const url = absolute ? this.url : `./${this.url}`;\n            // console.log('Starting work from', url);\n            worker = new NodeWorker(url, { eval: false });\n        }\n        else if (this.source) {\n            worker = new NodeWorker(this.source, { eval: true });\n        }\n        else {\n            throw new Error('no worker');\n        }\n        worker.on('message', (data) => {\n            // console.error('message', data);\n            this.onMessage(data);\n        });\n        worker.on('error', (error) => {\n            // console.error('error', error);\n            this.onError(error);\n        });\n        worker.on('exit', (code) => {\n            // console.error('exit', code);\n        });\n        return worker;\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { isMobile, isBrowser } from \"../env-utils/globals.js\";\nimport WorkerThread from \"./worker-thread.js\";\nimport WorkerJob from \"./worker-job.js\";\n/**\n * Process multiple data messages with small pool of identical workers\n */\nexport default class WorkerPool {\n    name = 'unnamed';\n    source; // | Function;\n    url;\n    maxConcurrency = 1;\n    maxMobileConcurrency = 1;\n    onDebug = () => { };\n    reuseWorkers = true;\n    props = {};\n    jobQueue = [];\n    idleQueue = [];\n    count = 0;\n    isDestroyed = false;\n    /** Checks if workers are supported on this platform */\n    static isSupported() {\n        return WorkerThread.isSupported();\n    }\n    /**\n     * @param processor - worker function\n     * @param maxConcurrency - max count of workers\n     */\n    constructor(props) {\n        this.source = props.source;\n        this.url = props.url;\n        this.setProps(props);\n    }\n    /**\n     * Terminates all workers in the pool\n     * @note Can free up significant memory\n     */\n    destroy() {\n        // Destroy idle workers, active Workers will be destroyed on completion\n        this.idleQueue.forEach((worker) => worker.destroy());\n        this.isDestroyed = true;\n    }\n    setProps(props) {\n        this.props = { ...this.props, ...props };\n        if (props.name !== undefined) {\n            this.name = props.name;\n        }\n        if (props.maxConcurrency !== undefined) {\n            this.maxConcurrency = props.maxConcurrency;\n        }\n        if (props.maxMobileConcurrency !== undefined) {\n            this.maxMobileConcurrency = props.maxMobileConcurrency;\n        }\n        if (props.reuseWorkers !== undefined) {\n            this.reuseWorkers = props.reuseWorkers;\n        }\n        if (props.onDebug !== undefined) {\n            this.onDebug = props.onDebug;\n        }\n    }\n    async startJob(name, onMessage = (job, type, data) => job.done(data), onError = (job, error) => job.error(error)) {\n        // Promise resolves when thread starts working on this job\n        const startPromise = new Promise((onStart) => {\n            // Promise resolves when thread completes or fails working on this job\n            this.jobQueue.push({ name, onMessage, onError, onStart });\n            return this;\n        });\n        this._startQueuedJob(); // eslint-disable-line @typescript-eslint/no-floating-promises\n        return await startPromise;\n    }\n    // PRIVATE\n    /**\n     * Starts first queued job if worker is available or can be created\n     * Called when job is started and whenever a worker returns to the idleQueue\n     */\n    async _startQueuedJob() {\n        if (!this.jobQueue.length) {\n            return;\n        }\n        const workerThread = this._getAvailableWorker();\n        if (!workerThread) {\n            return;\n        }\n        // We have a worker, dequeue and start the job\n        const queuedJob = this.jobQueue.shift();\n        if (queuedJob) {\n            // Emit a debug event\n            // @ts-ignore\n            this.onDebug({\n                message: 'Starting job',\n                name: queuedJob.name,\n                workerThread,\n                backlog: this.jobQueue.length\n            });\n            // Create a worker job to let the app access thread and manage job completion\n            const job = new WorkerJob(queuedJob.name, workerThread);\n            // Set the worker thread's message handlers\n            workerThread.onMessage = (data) => queuedJob.onMessage(job, data.type, data.payload);\n            workerThread.onError = (error) => queuedJob.onError(job, error);\n            // Resolve the start promise so that the app can start sending messages to worker\n            queuedJob.onStart(job);\n            // Wait for the app to signal that the job is complete, then return worker to queue\n            try {\n                await job.result;\n            }\n            catch (error) {\n                // eslint-disable-next-line no-console\n                console.error(`Worker exception: ${error}`);\n            }\n            finally {\n                this.returnWorkerToQueue(workerThread);\n            }\n        }\n    }\n    /**\n     * Returns a worker to the idle queue\n     * Destroys the worker if\n     *  - pool is destroyed\n     *  - if this pool doesn't reuse workers\n     *  - if maxConcurrency has been lowered\n     * @param worker\n     */\n    returnWorkerToQueue(worker) {\n        const shouldDestroyWorker = \n        // Workers on Node.js prevent the process from exiting.\n        // Until we figure out how to close them before exit, we always destroy them\n        !isBrowser ||\n            // If the pool is destroyed, there is no reason to keep the worker around\n            this.isDestroyed ||\n            // If the app has disabled worker reuse, any completed workers should be destroyed\n            !this.reuseWorkers ||\n            // If concurrency has been lowered, this worker might be surplus to requirements\n            this.count > this._getMaxConcurrency();\n        if (shouldDestroyWorker) {\n            worker.destroy();\n            this.count--;\n        }\n        else {\n            this.idleQueue.push(worker);\n        }\n        if (!this.isDestroyed) {\n            this._startQueuedJob(); // eslint-disable-line @typescript-eslint/no-floating-promises\n        }\n    }\n    /**\n     * Returns idle worker or creates new worker if maxConcurrency has not been reached\n     */\n    _getAvailableWorker() {\n        // If a worker has completed and returned to the queue, it can be used\n        if (this.idleQueue.length > 0) {\n            return this.idleQueue.shift() || null;\n        }\n        // Create fresh worker if we haven't yet created the max amount of worker threads for this worker source\n        if (this.count < this._getMaxConcurrency()) {\n            this.count++;\n            const name = `${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;\n            return new WorkerThread({ name, source: this.source, url: this.url });\n        }\n        // No worker available, have to wait\n        return null;\n    }\n    _getMaxConcurrency() {\n        return isMobile ? this.maxMobileConcurrency : this.maxConcurrency;\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport WorkerPool from \"./worker-pool.js\";\nimport WorkerThread from \"./worker-thread.js\";\nconst DEFAULT_PROPS = {\n    maxConcurrency: 3,\n    maxMobileConcurrency: 1,\n    reuseWorkers: true,\n    onDebug: () => { }\n};\n/**\n * Process multiple jobs with a \"farm\" of different workers in worker pools.\n */\nexport default class WorkerFarm {\n    props;\n    workerPools = new Map();\n    // singleton\n    static _workerFarm;\n    /** Checks if workers are supported on this platform */\n    static isSupported() {\n        return WorkerThread.isSupported();\n    }\n    /** Get the singleton instance of the global worker farm */\n    static getWorkerFarm(props = {}) {\n        WorkerFarm._workerFarm = WorkerFarm._workerFarm || new WorkerFarm({});\n        WorkerFarm._workerFarm.setProps(props);\n        return WorkerFarm._workerFarm;\n    }\n    /** get global instance with WorkerFarm.getWorkerFarm() */\n    constructor(props) {\n        this.props = { ...DEFAULT_PROPS };\n        this.setProps(props);\n        /** @type Map<string, WorkerPool>} */\n        this.workerPools = new Map();\n    }\n    /**\n     * Terminate all workers in the farm\n     * @note Can free up significant memory\n     */\n    destroy() {\n        for (const workerPool of this.workerPools.values()) {\n            workerPool.destroy();\n        }\n        this.workerPools = new Map();\n    }\n    /**\n     * Set props used when initializing worker pools\n     * @param props\n     */\n    setProps(props) {\n        this.props = { ...this.props, ...props };\n        // Update worker pool props\n        for (const workerPool of this.workerPools.values()) {\n            workerPool.setProps(this._getWorkerPoolProps());\n        }\n    }\n    /**\n     * Returns a worker pool for the specified worker\n     * @param options - only used first time for a specific worker name\n     * @param options.name - the name of the worker - used to identify worker pool\n     * @param options.url -\n     * @param options.source -\n     * @example\n     *   const job = WorkerFarm.getWorkerFarm().getWorkerPool({name, url}).startJob(...);\n     */\n    getWorkerPool(options) {\n        const { name, source, url } = options;\n        let workerPool = this.workerPools.get(name);\n        if (!workerPool) {\n            workerPool = new WorkerPool({\n                name,\n                source,\n                url\n            });\n            workerPool.setProps(this._getWorkerPoolProps());\n            this.workerPools.set(name, workerPool);\n        }\n        return workerPool;\n    }\n    _getWorkerPoolProps() {\n        return {\n            maxConcurrency: this.props.maxConcurrency,\n            maxMobileConcurrency: this.props.maxMobileConcurrency,\n            reuseWorkers: this.props.reuseWorkers,\n            onDebug: this.props.onDebug\n        };\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { assert } from \"../env-utils/assert.js\";\nimport { isBrowser } from \"../env-utils/globals.js\";\nimport { VERSION, NPM_TAG } from \"../env-utils/version.js\";\n/**\n * Gets worker object's name (for debugging in Chrome thread inspector window)\n */\nexport function getWorkerName(worker) {\n    const warning = worker.version !== VERSION ? ` (worker-utils@${VERSION})` : '';\n    return `${worker.name}@${worker.version}${warning}`;\n}\n/**\n * Generate a worker URL based on worker object and options\n * @returns A URL to one of the following:\n * - a published worker on unpkg CDN\n * - a local test worker\n * - a URL provided by the user in options\n */\nexport function getWorkerURL(worker, options = {}) {\n    const workerOptions = options[worker.id] || {};\n    const workerFile = isBrowser ? `${worker.id}-worker.js` : `${worker.id}-worker-node.js`;\n    let url = workerOptions.workerUrl;\n    // HACK: Allow for non-nested workerUrl for the CompressionWorker.\n    // For the compression worker, workerOptions is currently not nested correctly. For most loaders,\n    // you'd have options within an object, i.e. `{mvt: {coordinates: ...}}` but the CompressionWorker\n    // puts options at the top level, not within a `compression` key (its `id`). For this reason, the\n    // above `workerOptions` will always be a string (i.e. `'gzip'`) for the CompressionWorker. To not\n    // break backwards compatibility, we allow the CompressionWorker to have options at the top level.\n    if (!url && worker.id === 'compression') {\n        url = options.workerUrl;\n    }\n    // If URL is test, generate local loaders.gl url\n    // @ts-ignore _workerType\n    if (options._workerType === 'test') {\n        if (isBrowser) {\n            url = `modules/${worker.module}/dist/${workerFile}`;\n        }\n        else {\n            // In the test environment the ts-node loader requires TypeScript code\n            url = `modules/${worker.module}/src/workers/${worker.id}-worker-node.ts`;\n        }\n    }\n    // If url override is not provided, generate a URL to published version on npm CDN unpkg.com\n    if (!url) {\n        // GENERATE\n        let version = worker.version;\n        // On master we need to load npm alpha releases published with the `beta` tag\n        if (version === 'latest') {\n            // throw new Error('latest worker version specified');\n            version = NPM_TAG;\n        }\n        const versionTag = version ? `@${version}` : '';\n        url = `https://unpkg.com/@loaders.gl/${worker.module}${versionTag}/dist/${workerFile}`;\n    }\n    assert(url);\n    // Allow user to override location\n    return url;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { assert } from \"../env-utils/assert.js\";\nimport { VERSION } from \"../env-utils/version.js\";\n/**\n * Check if worker is compatible with this library version\n * @param worker\n * @param libVersion\n * @returns `true` if the two versions are compatible\n */\nexport function validateWorkerVersion(worker, coreVersion = VERSION) {\n    assert(worker, 'no worker provided');\n    const workerVersion = worker.version;\n    if (!coreVersion || !workerVersion) {\n        return false;\n    }\n    // TODO enable when fix the __version__ injection\n    // const coreVersions = parseVersion(coreVersion);\n    // const workerVersions = parseVersion(workerVersion);\n    // assert(\n    //   coreVersion.major === workerVersion.major && coreVersion.minor <= workerVersion.minor,\n    //   `worker: ${worker.name} is not compatible. ${coreVersion.major}.${\n    //     coreVersion.minor\n    //   }+ is required.`\n    // );\n    return true;\n}\n// @ts-ignore\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction parseVersion(version) {\n    const parts = version.split('.').map(Number);\n    return { major: parts[0], minor: parts[1] };\n}\n","import { isBrowser, WorkerFarm, getWorkerURL } from '@loaders.gl/worker-utils';\n/**\n * Determines if a loader can parse with worker\n * @param loader\n * @param options\n */\nexport function canParseWithWorker(loader, options) {\n    if (!WorkerFarm.isSupported()) {\n        return false;\n    }\n    // Node workers are still experimental\n    if (!isBrowser && !options?._nodeWorkers) {\n        return false;\n    }\n    return loader.worker && options?.worker;\n}\n/**\n * this function expects that the worker function sends certain messages,\n * this can be automated if the worker is wrapper by a call to createLoaderWorker in @loaders.gl/loader-utils.\n */\nexport async function parseWithWorker(loader, data, options, context, parseOnMainThread) {\n    const name = loader.id; // TODO\n    const url = getWorkerURL(loader, options);\n    const workerFarm = WorkerFarm.getWorkerFarm(options);\n    const workerPool = workerFarm.getWorkerPool({ name, url });\n    // options.log object contains functions which cannot be transferred\n    // context.fetch & context.parse functions cannot be transferred\n    // TODO - decide how to handle logging on workers\n    options = JSON.parse(JSON.stringify(options));\n    context = JSON.parse(JSON.stringify(context || {}));\n    const job = await workerPool.startJob('process-on-worker', \n    // @ts-expect-error\n    onMessage.bind(null, parseOnMainThread) // eslint-disable-line @typescript-eslint/no-misused-promises\n    );\n    job.postMessage('process', {\n        // @ts-ignore\n        input: data,\n        options,\n        context\n    });\n    const result = await job.result;\n    // TODO - what is going on here?\n    return await result.result;\n}\n/**\n * Handle worker's responses to the main thread\n * @param job\n * @param type\n * @param payload\n */\nasync function onMessage(parseOnMainThread, job, type, payload) {\n    switch (type) {\n        case 'done':\n            job.done(payload);\n            break;\n        case 'error':\n            job.error(new Error(payload.error));\n            break;\n        case 'process':\n            // Worker is asking for main thread to parseO\n            const { id, input, options } = payload;\n            try {\n                const result = await parseOnMainThread(input, options);\n                job.postMessage('done', { id, result });\n            }\n            catch (error) {\n                const message = error instanceof Error ? error.message : 'unknown error';\n                job.postMessage('error', { id, error: message });\n            }\n            break;\n        default:\n            // eslint-disable-next-line\n            console.warn(`parse-with-worker unknown message ${type}`);\n    }\n}\n","/**\n * compare two binary arrays for equality\n * @param a\n * @param b\n * @param byteLength\n */\nexport function compareArrayBuffers(arrayBuffer1, arrayBuffer2, byteLength) {\n    byteLength = byteLength || arrayBuffer1.byteLength;\n    if (arrayBuffer1.byteLength < byteLength || arrayBuffer2.byteLength < byteLength) {\n        return false;\n    }\n    const array1 = new Uint8Array(arrayBuffer1);\n    const array2 = new Uint8Array(arrayBuffer2);\n    for (let i = 0; i < array1.length; ++i) {\n        if (array1[i] !== array2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Concatenate a sequence of ArrayBuffers from arguments\n * @return A concatenated ArrayBuffer\n */\nexport function concatenateArrayBuffers(...sources) {\n    return concatenateArrayBuffersFromArray(sources);\n}\n/**\n * Concatenate a sequence of ArrayBuffers from array\n * @return A concatenated ArrayBuffer\n */\nexport function concatenateArrayBuffersFromArray(sources) {\n    // Make sure all inputs are wrapped in typed arrays\n    const sourceArrays = sources.map((source2) => source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2);\n    // Get length of all inputs\n    const byteLength = sourceArrays.reduce((length, typedArray) => length + typedArray.byteLength, 0);\n    // Allocate array with space for all inputs\n    const result = new Uint8Array(byteLength);\n    // Copy the subarrays\n    let offset = 0;\n    for (const sourceArray of sourceArrays) {\n        result.set(sourceArray, offset);\n        offset += sourceArray.byteLength;\n    }\n    // We work with ArrayBuffers, discard the typed array wrapper\n    return result.buffer;\n}\n/**\n * Concatenate arbitrary count of typed arrays\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays\n * @param - list of arrays. All arrays should be the same type\n * @return A concatenated TypedArray\n */\nexport function concatenateTypedArrays(...typedArrays) {\n    // @ts-ignore\n    const arrays = typedArrays;\n    // @ts-ignore\n    const TypedArrayConstructor = (arrays && arrays.length > 1 && arrays[0].constructor) || null;\n    if (!TypedArrayConstructor) {\n        throw new Error('\"concatenateTypedArrays\" - incorrect quantity of arguments or arguments have incompatible data types');\n    }\n    const sumLength = arrays.reduce((acc, value) => acc + value.length, 0);\n    // @ts-ignore typescript does not like dynamic constructors\n    const result = new TypedArrayConstructor(sumLength);\n    let offset = 0;\n    for (const array of arrays) {\n        result.set(array, offset);\n        offset += array.length;\n    }\n    return result;\n}\n/**\n * Copy a view of an ArrayBuffer into new ArrayBuffer with byteOffset = 0\n * @param arrayBuffer\n * @param byteOffset\n * @param byteLength\n */\nexport function sliceArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n    const subArray = byteLength !== undefined\n        ? new Uint8Array(arrayBuffer).subarray(byteOffset, byteOffset + byteLength)\n        : new Uint8Array(arrayBuffer).subarray(byteOffset);\n    const arrayCopy = new Uint8Array(subArray);\n    return arrayCopy.buffer;\n}\n","import { concatenateArrayBuffers } from \"../binary-utils/array-buffer-utils.js\";\n// GENERAL UTILITIES\n/**\n * Iterate over async iterator, without resetting iterator if end is not reached\n * - forEach intentionally does not reset iterator if exiting loop prematurely\n *   so that iteration can continue in a second loop\n * - It is recommended to use a standard for-await as last loop to ensure\n *   iterator gets properly reset\n *\n * TODO - optimize using sync iteration if argument is an Iterable?\n *\n * @param iterator\n * @param visitor\n */\nexport async function forEach(iterator, visitor) {\n    // eslint-disable-next-line\n    while (true) {\n        const { done, value } = await iterator.next();\n        if (done) {\n            iterator.return();\n            return;\n        }\n        const cancel = visitor(value);\n        if (cancel) {\n            return;\n        }\n    }\n}\n// Breaking big data into iterable chunks, concatenating iterable chunks into big data objects\n/**\n * Concatenates all data chunks yielded by an (async) iterator\n * This function can e.g. be used to enable atomic parsers to work on (async) iterator inputs\n */\nexport async function concatenateArrayBuffersAsync(asyncIterator) {\n    const arrayBuffers = [];\n    for await (const chunk of asyncIterator) {\n        arrayBuffers.push(chunk);\n    }\n    return concatenateArrayBuffers(...arrayBuffers);\n}\nexport async function concatenateStringsAsync(asyncIterator) {\n    const strings = [];\n    for await (const chunk of asyncIterator) {\n        strings.push(chunk);\n    }\n    return strings.join('');\n}\n","// Simple file alias mechanisms for tests.\nlet pathPrefix = '';\nconst fileAliases = {};\n/*\n * Set a relative path prefix\n */\nexport function setPathPrefix(prefix) {\n    pathPrefix = prefix;\n}\n/*\n * Get the relative path prefix\n */\nexport function getPathPrefix() {\n    return pathPrefix;\n}\n/**\n *\n * @param aliases\n *\n * Note: addAliases are an experimental export, they are only for testing of loaders.gl loaders\n * not intended as a generic aliasing mechanism\n */\nexport function addAliases(aliases) {\n    Object.assign(fileAliases, aliases);\n}\n/**\n * Resolves aliases and adds path-prefix to paths\n */\nexport function resolvePath(filename) {\n    for (const alias in fileAliases) {\n        if (filename.startsWith(alias)) {\n            const replacement = fileAliases[alias];\n            filename = filename.replace(alias, replacement);\n        }\n    }\n    if (!filename.startsWith('http://') && !filename.startsWith('https://')) {\n        filename = `${pathPrefix}${filename}`;\n    }\n    return filename;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Isolates Buffer references to ensure they are only bundled under Node.js (avoids big webpack polyfill)\n// this file is selected by the package.json \"browser\" field).\n/**\n * Convert Buffer to ArrayBuffer\n * Converts Node.js `Buffer` to `ArrayBuffer` (without triggering bundler to include Buffer polyfill on browser)\n * @todo better data type\n */\nexport function toArrayBuffer(buffer) {\n    return buffer;\n}\n/**\n * Convert (copy) ArrayBuffer to Buffer\n */\nexport function toBuffer(binaryData) {\n    throw new Error('Buffer not supported in browser');\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport * as node from \"../node/buffer.js\";\n/**\n * Check for Node.js `Buffer` (without triggering bundler to include Buffer polyfill on browser)\n */\nexport function isBuffer(value) {\n    return value && typeof value === 'object' && value.isBuffer;\n}\n/**\n * Converts to Node.js `Buffer` (without triggering bundler to include Buffer polyfill on browser)\n * @todo better data type\n */\nexport function toBuffer(data) {\n    return node.toBuffer ? node.toBuffer(data) : data;\n}\n/**\n * Convert an object to an array buffer\n */\nexport function toArrayBuffer(data) {\n    // Note: Should be called first, Buffers can trigger other detections below\n    if (isBuffer(data)) {\n        return node.toArrayBuffer(data);\n    }\n    if (data instanceof ArrayBuffer) {\n        return data;\n    }\n    // Careful - Node Buffers look like Uint8Arrays (keep after isBuffer)\n    if (ArrayBuffer.isView(data)) {\n        if (data.byteOffset === 0 && data.byteLength === data.buffer.byteLength) {\n            return data.buffer;\n        }\n        return data.buffer.slice(data.byteOffset, data.byteOffset + data.byteLength);\n    }\n    if (typeof data === 'string') {\n        const text = data;\n        const uint8Array = new TextEncoder().encode(text);\n        return uint8Array.buffer;\n    }\n    // HACK to support Blob polyfill\n    if (data && typeof data === 'object' && data._toArrayBuffer) {\n        return data._toArrayBuffer();\n    }\n    throw new Error('toArrayBuffer');\n}\n","// Beginning of a minimal implementation of the Node.js path API, that doesn't pull in big polyfills.\nimport { getCWD } from \"./get-cwd.js\";\n/**\n * Replacement for Node.js path.filename\n * @param url\n */\nexport function filename(url) {\n    const slashIndex = url ? url.lastIndexOf('/') : -1;\n    return slashIndex >= 0 ? url.substr(slashIndex + 1) : '';\n}\n/**\n * Replacement for Node.js path.dirname\n * @param url\n */\nexport function dirname(url) {\n    const slashIndex = url ? url.lastIndexOf('/') : -1;\n    return slashIndex >= 0 ? url.substr(0, slashIndex) : '';\n}\n/**\n * Replacement for Node.js path.join\n * @param parts\n */\nexport function join(...parts) {\n    const separator = '/';\n    parts = parts.map((part, index) => {\n        if (index) {\n            part = part.replace(new RegExp(`^${separator}`), '');\n        }\n        if (index !== parts.length - 1) {\n            part = part.replace(new RegExp(`${separator}$`), '');\n        }\n        return part;\n    });\n    return parts.join(separator);\n}\n/* eslint-disable no-continue */\n/**\n * https://nodejs.org/api/path.html#path_path_resolve_paths\n * @param paths A sequence of paths or path segments.\n * @return resolved path\n * Forked from BTOdell/path-resolve under MIT license\n * @see https://github.com/BTOdell/path-resolve/blob/master/LICENSE\n */\nexport function resolve(...components) {\n    const paths = [];\n    for (let _i = 0; _i < components.length; _i++) {\n        paths[_i] = components[_i];\n    }\n    let resolvedPath = '';\n    let resolvedAbsolute = false;\n    let cwd;\n    for (let i = paths.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n        let path;\n        if (i >= 0) {\n            path = paths[i];\n        }\n        else {\n            if (cwd === undefined) {\n                cwd = getCWD();\n            }\n            path = cwd;\n        }\n        // Skip empty entries\n        if (path.length === 0) {\n            continue;\n        }\n        resolvedPath = `${path}/${resolvedPath}`;\n        resolvedAbsolute = path.charCodeAt(0) === SLASH;\n    }\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n    // Normalize the path (removes leading slash)\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n    if (resolvedAbsolute) {\n        return `/${resolvedPath}`;\n    }\n    else if (resolvedPath.length > 0) {\n        return resolvedPath;\n    }\n    return '.';\n}\nconst SLASH = 47;\nconst DOT = 46;\n/**\n * Resolves . and .. elements in a path with directory names\n * Forked from BTOdell/path-resolve under MIT license\n * @see https://github.com/BTOdell/path-resolve/blob/master/LICENSE\n */\n/* eslint-disable max-depth */\n// eslint-disable-next-line complexity, max-statements\nfunction normalizeStringPosix(path, allowAboveRoot) {\n    let res = '';\n    let lastSlash = -1;\n    let dots = 0;\n    let code;\n    let isAboveRoot = false;\n    for (let i = 0; i <= path.length; ++i) {\n        if (i < path.length) {\n            code = path.charCodeAt(i);\n        }\n        else if (code === SLASH) {\n            break;\n        }\n        else {\n            code = SLASH;\n        }\n        if (code === SLASH) {\n            if (lastSlash === i - 1 || dots === 1) {\n                // NOOP\n            }\n            else if (lastSlash !== i - 1 && dots === 2) {\n                if (res.length < 2 ||\n                    !isAboveRoot ||\n                    res.charCodeAt(res.length - 1) !== DOT ||\n                    res.charCodeAt(res.length - 2) !== DOT) {\n                    if (res.length > 2) {\n                        const start = res.length - 1;\n                        let j = start;\n                        for (; j >= 0; --j) {\n                            if (res.charCodeAt(j) === SLASH) {\n                                break;\n                            }\n                        }\n                        if (j !== start) {\n                            res = j === -1 ? '' : res.slice(0, j);\n                            lastSlash = i;\n                            dots = 0;\n                            isAboveRoot = false;\n                            continue;\n                        }\n                    }\n                    else if (res.length === 2 || res.length === 1) {\n                        res = '';\n                        lastSlash = i;\n                        dots = 0;\n                        isAboveRoot = false;\n                        continue;\n                    }\n                }\n                if (allowAboveRoot) {\n                    if (res.length > 0) {\n                        res += '/..';\n                    }\n                    else {\n                        res = '..';\n                    }\n                    isAboveRoot = true;\n                }\n            }\n            else {\n                const slice = path.slice(lastSlash + 1, i);\n                if (res.length > 0) {\n                    res += `/${slice}`;\n                }\n                else {\n                    res = slice;\n                }\n                isAboveRoot = false;\n            }\n            lastSlash = i;\n            dots = 0;\n        }\n        else if (code === DOT && dots !== -1) {\n            ++dots;\n        }\n        else {\n            dots = -1;\n        }\n    }\n    return res;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst isBoolean = (x) => typeof x === 'boolean';\nconst isFunction = (x) => typeof x === 'function';\nexport const isObject = (x) => x !== null && typeof x === 'object';\nexport const isPureObject = (x) => isObject(x) && x.constructor === {}.constructor;\nexport const isPromise = (x) => isObject(x) && isFunction(x.then);\nexport const isIterable = (x) => Boolean(x) && typeof x[Symbol.iterator] === 'function';\nexport const isAsyncIterable = (x) => x && typeof x[Symbol.asyncIterator] === 'function';\nexport const isIterator = (x) => x && isFunction(x.next);\nexport const isResponse = (x) => (typeof Response !== 'undefined' && x instanceof Response) ||\n    (x && x.arrayBuffer && x.text && x.json);\nexport const isFile = (x) => typeof File !== 'undefined' && x instanceof File;\nexport const isBlob = (x) => typeof Blob !== 'undefined' && x instanceof Blob;\n/** Check for Node.js `Buffer` without triggering bundler to include buffer polyfill */\nexport const isBuffer = (x) => x && typeof x === 'object' && x.isBuffer;\nexport const isWritableDOMStream = (x) => isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\nexport const isReadableDOMStream = (x) => (typeof ReadableStream !== 'undefined' && x instanceof ReadableStream) ||\n    (isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.getReader));\n// Not implemented in Firefox: && isFunction(x.pipeTo)\nexport const isWritableNodeStream = (x) => isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\nexport const isReadableNodeStream = (x) => isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\nexport const isReadableStream = (x) => isReadableDOMStream(x) || isReadableNodeStream(x);\nexport const isWritableStream = (x) => isWritableDOMStream(x) || isWritableNodeStream(x);\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport class FetchError extends Error {\n    constructor(message, info) {\n        super(message);\n        this.reason = info.reason;\n        this.url = info.url;\n        this.response = info.response;\n    }\n    /** A best effort reason for why the fetch failed */\n    reason;\n    /** The URL that failed to load. Empty string if not available. */\n    url;\n    /** The Response object, if any. */\n    response;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// TODO - build/integrate proper MIME type parsing\n// https://mimesniff.spec.whatwg.org/\nconst DATA_URL_PATTERN = /^data:([-\\w.]+\\/[-\\w.+]+)(;|,)/;\nconst MIME_TYPE_PATTERN = /^([-\\w.]+\\/[-\\w.+]+)/;\n/**\n * Compare two MIME types, case insensitively etc.\n * @param mimeType1\n * @param mimeType2\n * @returns true if the MIME types are equivalent\n * @see https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types#structure_of_a_mime_type\n */\nexport function compareMIMETypes(mimeType1, mimeType2) {\n    if (mimeType1.toLowerCase() === mimeType2.toLowerCase()) {\n        return true;\n    }\n    return false;\n}\n/**\n * Remove extra data like `charset` from MIME types\n * @param mimeString\n * @returns A clean MIME type, or an empty string\n *\n * @todo - handle more advanced MIMETYpes, multiple types\n * @todo - extract charset etc\n */\nexport function parseMIMEType(mimeString) {\n    // If resource is a data url, extract any embedded mime type\n    const matches = MIME_TYPE_PATTERN.exec(mimeString);\n    if (matches) {\n        return matches[1];\n    }\n    return mimeString;\n}\n/**\n * Extract MIME type from data URL\n *\n * @param mimeString\n * @returns A clean MIME type, or an empty string\n *\n * @todo - handle more advanced MIMETYpes, multiple types\n * @todo - extract charset etc\n */\nexport function parseMIMETypeFromURL(url) {\n    // If resource is a data URL, extract any embedded mime type\n    const matches = DATA_URL_PATTERN.exec(url);\n    if (matches) {\n        return matches[1];\n    }\n    return '';\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst QUERY_STRING_PATTERN = /\\?.*/;\nexport function extractQueryString(url) {\n    const matches = url.match(QUERY_STRING_PATTERN);\n    return matches && matches[0];\n}\nexport function stripQueryString(url) {\n    return url.replace(QUERY_STRING_PATTERN, '');\n}\nexport function shortenUrlForDisplay(url) {\n    if (url.length < 50) {\n        return url;\n    }\n    const urlEnd = url.slice(url.length - 15);\n    const urlStart = url.substr(0, 32);\n    return `${urlStart}...${urlEnd}`;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { isResponse, isBlob } from \"../../javascript-utils/is-type.js\";\nimport { parseMIMEType, parseMIMETypeFromURL } from \"./mime-type-utils.js\";\nimport { stripQueryString } from \"./url-utils.js\";\n/**\n * Returns the URL associated with this resource.\n * The returned value may include a query string and need further processing.\n * If it cannot determine url, the corresponding value will be an empty string\n *\n * @todo string parameters are assumed to be URLs\n */\nexport function getResourceUrl(resource) {\n    // If resource is a `Response`, it contains the information directly as a field\n    if (isResponse(resource)) {\n        const response = resource;\n        return response.url;\n    }\n    // If the resource is a Blob or a File (subclass of Blob)\n    if (isBlob(resource)) {\n        const blob = resource;\n        // File objects have a \"name\" property. Blob objects don't have any\n        // url (name) information\n        return blob.name || '';\n    }\n    if (typeof resource === 'string') {\n        return resource;\n    }\n    // Unknown\n    return '';\n}\n/**\n * Returns the URL associated with this resource.\n * The returned value may include a query string and need further processing.\n * If it cannot determine url, the corresponding value will be an empty string\n *\n * @todo string parameters are assumed to be URLs\n */\nexport function getResourceMIMEType(resource) {\n    // If resource is a response, it contains the information directly\n    if (isResponse(resource)) {\n        const response = resource;\n        const contentTypeHeader = response.headers.get('content-type') || '';\n        const noQueryUrl = stripQueryString(response.url);\n        return parseMIMEType(contentTypeHeader) || parseMIMETypeFromURL(noQueryUrl);\n    }\n    // If the resource is a Blob or a File (subclass of Blob)\n    if (isBlob(resource)) {\n        const blob = resource;\n        return blob.type || '';\n    }\n    if (typeof resource === 'string') {\n        return parseMIMETypeFromURL(resource);\n    }\n    // Unknown\n    return '';\n}\n/**\n  * Returns (approximate) content length for a resource if it can be determined.\n  * Returns -1 if content length cannot be determined.\n  * @param resource\n\n  * @note string parameters are NOT assumed to be URLs\n  */\nexport function getResourceContentLength(resource) {\n    if (isResponse(resource)) {\n        const response = resource;\n        return response.headers['content-length'] || -1;\n    }\n    if (isBlob(resource)) {\n        const blob = resource;\n        return blob.size;\n    }\n    if (typeof resource === 'string') {\n        // TODO - handle data URL?\n        return resource.length;\n    }\n    if (resource instanceof ArrayBuffer) {\n        return resource.byteLength;\n    }\n    if (ArrayBuffer.isView(resource)) {\n        return resource.byteLength;\n    }\n    return -1;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { isResponse } from \"../../javascript-utils/is-type.js\";\nimport { FetchError } from \"../fetch/fetch-error.js\";\nimport { getResourceContentLength, getResourceUrl, getResourceMIMEType } from \"./resource-utils.js\";\nimport { shortenUrlForDisplay } from \"./url-utils.js\";\n/**\n * Returns a Response object\n * Adds content-length header when possible\n *\n * @param resource\n */\nexport async function makeResponse(resource) {\n    if (isResponse(resource)) {\n        return resource;\n    }\n    // Add content-length header if possible\n    const headers = {};\n    const contentLength = getResourceContentLength(resource);\n    if (contentLength >= 0) {\n        headers['content-length'] = String(contentLength);\n    }\n    // `new Response(File)` does not preserve content-type and URL\n    // so we add them here\n    const url = getResourceUrl(resource);\n    const type = getResourceMIMEType(resource);\n    if (type) {\n        headers['content-type'] = type;\n    }\n    // Add a custom header with initial bytes if available\n    const initialDataUrl = await getInitialDataUrl(resource);\n    if (initialDataUrl) {\n        headers['x-first-bytes'] = initialDataUrl;\n    }\n    // TODO - is this the best way of handling strings?\n    // Maybe package as data URL instead?\n    if (typeof resource === 'string') {\n        // Convert to ArrayBuffer to avoid Response treating it as a URL\n        resource = new TextEncoder().encode(resource);\n    }\n    // Attempt to create a Response from the resource, adding headers and setting url\n    const response = new Response(resource, { headers });\n    // We can't control `Response.url` via constructor, use a property override to record URL.\n    Object.defineProperty(response, 'url', { value: url });\n    return response;\n}\n/**\n * Checks response status (async) and throws a helpful error message if status is not OK.\n * @param response\n */\nexport async function checkResponse(response) {\n    if (!response.ok) {\n        const error = await getResponseError(response);\n        throw error;\n    }\n}\n/**\n * Checks response status (sync) and throws a helpful error message if status is not OK.\n * @param response\n */\nexport function checkResponseSync(response) {\n    if (!response.ok) {\n        let message = `${response.status} ${response.statusText}`;\n        message = message.length > 60 ? `${message.slice(0, 60)}...` : message;\n        throw new Error(message);\n    }\n}\n// HELPERS\nasync function getResponseError(response) {\n    const shortUrl = shortenUrlForDisplay(response.url);\n    let message = `Failed to fetch resource (${response.status}) ${response.statusText}: ${shortUrl}`;\n    message = message.length > 100 ? `${message.slice(0, 100)}...` : message;\n    const info = {\n        reason: response.statusText,\n        url: response.url,\n        response\n    };\n    // See if we got an error message in the body\n    try {\n        const contentType = response.headers.get('Content-Type');\n        info.reason =\n            !response.bodyUsed && contentType?.includes('application/json')\n                ? await response.json()\n                : await response.text();\n    }\n    catch (error) {\n        // eslint forbids return in a finally statement, so we just catch here\n    }\n    return new FetchError(message, info);\n}\nasync function getInitialDataUrl(resource) {\n    const INITIAL_DATA_LENGTH = 5;\n    if (typeof resource === 'string') {\n        return `data:,${resource.slice(0, INITIAL_DATA_LENGTH)}`;\n    }\n    if (resource instanceof Blob) {\n        const blobSlice = resource.slice(0, 5);\n        return await new Promise((resolve) => {\n            const reader = new FileReader();\n            reader.onload = (event) => resolve(event?.target?.result);\n            reader.readAsDataURL(blobSlice);\n        });\n    }\n    if (resource instanceof ArrayBuffer) {\n        const slice = resource.slice(0, INITIAL_DATA_LENGTH);\n        const base64 = arrayBufferToBase64(slice);\n        return `data:base64,${base64}`;\n    }\n    return null;\n}\n// https://stackoverflow.com/questions/9267899/arraybuffer-to-base64-encoded-string\nfunction arrayBufferToBase64(buffer) {\n    let binary = '';\n    const bytes = new Uint8Array(buffer);\n    for (let i = 0; i < bytes.byteLength; i++) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return btoa(binary);\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { resolvePath } from '@loaders.gl/loader-utils';\nimport { makeResponse } from \"../utils/response-utils.js\";\n// import {FetchError} from './fetch-error';\nexport function isNodePath(url) {\n    return !isRequestURL(url) && !isDataURL(url);\n}\nexport function isRequestURL(url) {\n    return url.startsWith('http:') || url.startsWith('https:');\n}\nexport function isDataURL(url) {\n    return url.startsWith('data:');\n}\n/**\n * fetch API compatible function\n * - Supports fetching from Node.js local file system paths\n * - Respects pathPrefix and file aliases\n */\nexport async function fetchFile(urlOrData, fetchOptions) {\n    if (typeof urlOrData === 'string') {\n        const url = resolvePath(urlOrData);\n        // Support fetching from local file system\n        if (isNodePath(url)) {\n            if (globalThis.loaders?.fetchNode) {\n                return globalThis.loaders?.fetchNode(url, fetchOptions);\n            }\n            // throw new Error(\n            //   'fetchFile: globalThis.loaders.fetchNode not defined. Install @loaders.gl/polyfills'\n            // );\n        }\n        // Call global fetch\n        return await fetch(url, fetchOptions);\n    }\n    // TODO - should we still call fetch on non-URL inputs?\n    return await makeResponse(urlOrData);\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// probe.gl Log compatible loggers\nimport { Log } from '@probe.gl/log';\nexport const probeLog = new Log({ id: 'loaders.gl' });\n// Logs nothing\nexport class NullLog {\n    log() {\n        return () => { };\n    }\n    info() {\n        return () => { };\n    }\n    warn() {\n        return () => { };\n    }\n    error() {\n        return () => { };\n    }\n}\n// Logs to console\nexport class ConsoleLog {\n    console;\n    constructor() {\n        this.console = console; // eslint-disable-line\n    }\n    log(...args) {\n        return this.console.log.bind(this.console, ...args);\n    }\n    info(...args) {\n        return this.console.info.bind(this.console, ...args);\n    }\n    warn(...args) {\n        return this.console.warn.bind(this.console, ...args);\n    }\n    error(...args) {\n        return this.console.error.bind(this.console, ...args);\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { isBrowser } from '@loaders.gl/loader-utils';\nimport { ConsoleLog } from \"./loggers.js\";\nexport const DEFAULT_LOADER_OPTIONS = {\n    // baseUri\n    fetch: null,\n    mimeType: undefined,\n    nothrow: false,\n    log: new ConsoleLog(), // A probe.gl compatible (`log.log()()` syntax) that just logs to console\n    useLocalLibraries: false,\n    CDN: 'https://unpkg.com/@loaders.gl',\n    worker: true, // By default, use worker if provided by loader.\n    maxConcurrency: 3, // How many worker instances should be created for each loader.\n    maxMobileConcurrency: 1, // How many worker instances should be created for each loader on mobile devices.\n    reuseWorkers: isBrowser, // By default reuse workers in browser (Node.js refuses to terminate if browsers are running)\n    _nodeWorkers: false, // By default do not support node workers\n    _workerType: '', // 'test' to use locally generated workers\n    limit: 0,\n    _limitMB: 0,\n    batchSize: 'auto',\n    batchDebounceMs: 0,\n    metadata: false, // TODO - currently only implemented for parseInBatches, adds initial metadata batch,\n    transforms: []\n};\nexport const REMOVED_LOADER_OPTIONS = {\n    throws: 'nothrow',\n    dataType: '(no longer used)',\n    uri: 'baseUri',\n    // Warn if fetch options are used on top-level\n    method: 'fetch.method',\n    headers: 'fetch.headers',\n    body: 'fetch.body',\n    mode: 'fetch.mode',\n    credentials: 'fetch.credentials',\n    cache: 'fetch.cache',\n    redirect: 'fetch.redirect',\n    referrer: 'fetch.referrer',\n    referrerPolicy: 'fetch.referrerPolicy',\n    integrity: 'fetch.integrity',\n    keepalive: 'fetch.keepalive',\n    signal: 'fetch.signal'\n};\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { registerJSModules } from '@loaders.gl/loader-utils';\nimport { isPureObject, isObject } from \"../../javascript-utils/is-type.js\";\nimport { probeLog, NullLog } from \"./loggers.js\";\nimport { DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS } from \"./option-defaults.js\";\n/**\n * Helper for safely accessing global loaders.gl variables\n * Wraps initialization of global variable in function to defeat overly aggressive tree-shakers\n */\nexport function getGlobalLoaderState() {\n    // @ts-ignore\n    globalThis.loaders = globalThis.loaders || {};\n    // @ts-ignore\n    const { loaders } = globalThis;\n    // Add _state object to keep separate from modules added to globalThis.loaders\n    if (!loaders._state) {\n        loaders._state = {};\n    }\n    return loaders._state;\n}\n/**\n * Store global loader options on the global object to increase chances of cross loaders-version interoperability\n * NOTE: This use case is not reliable but can help when testing new versions of loaders.gl with existing frameworks\n * @returns global loader options merged with default loader options\n */\nexport function getGlobalLoaderOptions() {\n    const state = getGlobalLoaderState();\n    // Ensure all default loader options from this library are mentioned\n    state.globalOptions = state.globalOptions || { ...DEFAULT_LOADER_OPTIONS };\n    return state.globalOptions;\n}\n/**\n * Set global loader options\n * @param options\n */\nexport function setGlobalOptions(options) {\n    const state = getGlobalLoaderState();\n    const globalOptions = getGlobalLoaderOptions();\n    // @ts-expect-error First param looks incorrect\n    state.globalOptions = normalizeOptionsInternal(globalOptions, options);\n    // Make sure any new modules are registered\n    registerJSModules(options.modules);\n}\n/**\n * Merges options with global opts and loader defaults, also injects baseUri\n * @param options\n * @param loader\n * @param loaders\n * @param url\n */\nexport function normalizeOptions(options, loader, loaders, url) {\n    loaders = loaders || [];\n    loaders = Array.isArray(loaders) ? loaders : [loaders];\n    validateOptions(options, loaders);\n    return normalizeOptionsInternal(loader, options, url);\n}\n// VALIDATE OPTIONS\n/**\n * Warn for unsupported options\n * @param options\n * @param loaders\n */\nfunction validateOptions(options, loaders) {\n    // Check top level options\n    validateOptionsObject(options, null, DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS, loaders);\n    for (const loader of loaders) {\n        // Get the scoped, loader specific options from the user supplied options\n        const idOptions = ((options && options[loader.id]) || {});\n        // Get scoped, loader specific default and deprecated options from the selected loader\n        const loaderOptions = (loader.options && loader.options[loader.id]) || {};\n        const deprecatedOptions = (loader.deprecatedOptions && loader.deprecatedOptions[loader.id]) || {};\n        // Validate loader specific options\n        // @ts-ignore\n        validateOptionsObject(idOptions, loader.id, loaderOptions, deprecatedOptions, loaders);\n    }\n}\n// eslint-disable-next-line max-params, complexity\nfunction validateOptionsObject(options, id, defaultOptions, deprecatedOptions, loaders) {\n    const loaderName = id || 'Top level';\n    const prefix = id ? `${id}.` : '';\n    for (const key in options) {\n        // If top level option value is an object it could options for a loader, so ignore\n        const isSubOptions = !id && isObject(options[key]);\n        const isBaseUriOption = key === 'baseUri' && !id;\n        const isWorkerUrlOption = key === 'workerUrl' && id;\n        // <loader>.workerUrl requires special handling as it is now auto-generated and no longer specified as a default option.\n        if (!(key in defaultOptions) && !isBaseUriOption && !isWorkerUrlOption) {\n            // Issue deprecation warnings\n            if (key in deprecatedOptions) {\n                probeLog.warn(`${loaderName} loader option \\'${prefix}${key}\\' no longer supported, use \\'${deprecatedOptions[key]}\\'`)();\n            }\n            else if (!isSubOptions) {\n                const suggestion = findSimilarOption(key, loaders);\n                probeLog.warn(`${loaderName} loader option \\'${prefix}${key}\\' not recognized. ${suggestion}`)();\n            }\n        }\n    }\n}\nfunction findSimilarOption(optionKey, loaders) {\n    const lowerCaseOptionKey = optionKey.toLowerCase();\n    let bestSuggestion = '';\n    for (const loader of loaders) {\n        for (const key in loader.options) {\n            if (optionKey === key) {\n                return `Did you mean \\'${loader.id}.${key}\\'?`;\n            }\n            const lowerCaseKey = key.toLowerCase();\n            const isPartialMatch = lowerCaseOptionKey.startsWith(lowerCaseKey) || lowerCaseKey.startsWith(lowerCaseOptionKey);\n            if (isPartialMatch) {\n                bestSuggestion = bestSuggestion || `Did you mean \\'${loader.id}.${key}\\'?`;\n            }\n        }\n    }\n    return bestSuggestion;\n}\nfunction normalizeOptionsInternal(loader, options, url) {\n    const loaderDefaultOptions = loader.options || {};\n    const mergedOptions = { ...loaderDefaultOptions };\n    addUrlOptions(mergedOptions, url);\n    // LOGGING: options.log can be set to `null` to defeat logging\n    if (mergedOptions.log === null) {\n        mergedOptions.log = new NullLog();\n    }\n    mergeNestedFields(mergedOptions, getGlobalLoaderOptions());\n    mergeNestedFields(mergedOptions, options);\n    return mergedOptions;\n}\n// Merge nested options objects\nfunction mergeNestedFields(mergedOptions, options) {\n    for (const key in options) {\n        // Check for nested options\n        // object in options => either no key in defaultOptions or object in defaultOptions\n        if (key in options) {\n            const value = options[key];\n            if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n                mergedOptions[key] = {\n                    ...mergedOptions[key],\n                    ...options[key]\n                };\n            }\n            else {\n                mergedOptions[key] = options[key];\n            }\n        }\n        // else: No need to merge nested opts, and the initial merge already copied over the nested options\n    }\n}\n/**\n * Harvest information from the url\n * @deprecated This is mainly there to support a hack in the GLTFLoader\n * TODO - baseUri should be a directory, i.e. remove file component from baseUri\n * TODO - extract extension?\n * TODO - extract query parameters?\n * TODO - should these be injected on context instead of options?\n */\nfunction addUrlOptions(options, url) {\n    if (url && !('baseUri' in options)) {\n        options.baseUri = url;\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { assert } from '@loaders.gl/loader-utils';\nexport function isLoaderObject(loader) {\n    if (!loader) {\n        return false;\n    }\n    if (Array.isArray(loader)) {\n        loader = loader[0];\n    }\n    const hasExtensions = Array.isArray(loader?.extensions);\n    /* Now handled by types and worker loaders do not have these\n    let hasParser =\n      loader.parseTextSync ||\n      loader.parseSync ||\n      loader.parse ||\n      loader.parseStream || // TODO Remove, Replace with parseInBatches\n      loader.parseInBatches;\n    */\n    return hasExtensions;\n}\nexport function normalizeLoader(loader) {\n    // This error is fairly easy to trigger by mixing up import statements etc\n    // So we make an exception and add a developer error message for this case\n    // To help new users from getting stuck here\n    assert(loader, 'null loader');\n    assert(isLoaderObject(loader), 'invalid loader');\n    // NORMALIZE [LOADER, OPTIONS] => LOADER\n    // If [loader, options], create a new loaders object with options merged in\n    let options;\n    if (Array.isArray(loader)) {\n        options = loader[1];\n        loader = loader[0];\n        loader = {\n            ...loader,\n            options: { ...loader.options, ...options }\n        };\n    }\n    // NORMALIZE text and binary flags\n    // Ensure at least one of text/binary flags are properly set\n    // @ts-expect-error\n    if (loader?.parseTextSync || loader?.parseText) {\n        loader.text = true;\n    }\n    if (!loader.text) {\n        loader.binary = true;\n    }\n    return loader;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { normalizeLoader } from \"../loader-utils/normalize-loader.js\";\nimport { getGlobalLoaderState } from \"../loader-utils/option-utils.js\";\n/**\n * Store global registered loaders on the global object to increase chances of cross loaders-version interoperability\n * This use case is not reliable but can help when testing new versions of loaders.gl with existing frameworks\n */\nconst getGlobalLoaderRegistry = () => {\n    const state = getGlobalLoaderState();\n    state.loaderRegistry = state.loaderRegistry || [];\n    return state.loaderRegistry;\n};\n/**\n * Register a list of global loaders\n * @note Registration erases loader type information.\n * @deprecated It is recommended that applications manage loader registration. This function will likely be remove in loaders.gl v5\n */\nexport function registerLoaders(loaders) {\n    const loaderRegistry = getGlobalLoaderRegistry();\n    loaders = Array.isArray(loaders) ? loaders : [loaders];\n    for (const loader of loaders) {\n        const normalizedLoader = normalizeLoader(loader);\n        if (!loaderRegistry.find((registeredLoader) => normalizedLoader === registeredLoader)) {\n            // add to the beginning of the loaderRegistry, so the last registeredLoader get picked\n            loaderRegistry.unshift(normalizedLoader);\n        }\n    }\n}\n/**\n * @deprecated It is recommended that applications manage loader registration. This function will likely be remove in loaders.gl v5\n */\nexport function getRegisteredLoaders() {\n    return getGlobalLoaderRegistry();\n}\n/** @deprecated For testing only  */\nexport function _unregisterLoaders() {\n    const state = getGlobalLoaderState();\n    state.loaderRegistry = [];\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { compareArrayBuffers, path, log } from '@loaders.gl/loader-utils';\nimport { normalizeLoader } from \"../loader-utils/normalize-loader.js\";\nimport { getResourceUrl, getResourceMIMEType } from \"../utils/resource-utils.js\";\nimport { compareMIMETypes } from \"../utils/mime-type-utils.js\";\nimport { getRegisteredLoaders } from \"./register-loaders.js\";\nimport { isBlob } from \"../../javascript-utils/is-type.js\";\nimport { stripQueryString } from \"../utils/url-utils.js\";\nconst EXT_PATTERN = /\\.([^.]+)$/;\n// TODO - Need a variant that peeks at streams for parseInBatches\n// TODO - Detect multiple matching loaders? Use heuristics to grade matches?\n// TODO - Allow apps to pass context to disambiguate between multiple matches (e.g. multiple .json formats)?\n/**\n * Find a loader that matches file extension and/or initial file content\n * Search the loaders array argument for a loader that matches url extension or initial data\n * Returns: a normalized loader\n * @param data data to assist\n * @param loaders\n * @param options\n * @param context used internally, applications should not provide this parameter\n */\nexport async function selectLoader(data, loaders = [], options, context) {\n    if (!validHTTPResponse(data)) {\n        return null;\n    }\n    // First make a sync attempt, disabling exceptions\n    let loader = selectLoaderSync(data, loaders, { ...options, nothrow: true }, context);\n    if (loader) {\n        return loader;\n    }\n    // For Blobs and Files, try to asynchronously read a small initial slice and test again with that\n    // to see if we can detect by initial content\n    if (isBlob(data)) {\n        data = await data.slice(0, 10).arrayBuffer();\n        loader = selectLoaderSync(data, loaders, options, context);\n    }\n    // no loader available\n    if (!loader && !options?.nothrow) {\n        throw new Error(getNoValidLoaderMessage(data));\n    }\n    return loader;\n}\n/**\n * Find a loader that matches file extension and/or initial file content\n * Search the loaders array argument for a loader that matches url extension or initial data\n * Returns: a normalized loader\n * @param data data to assist\n * @param loaders\n * @param options\n * @param context used internally, applications should not provide this parameter\n */\nexport function selectLoaderSync(data, loaders = [], options, context) {\n    if (!validHTTPResponse(data)) {\n        return null;\n    }\n    // eslint-disable-next-line complexity\n    // if only a single loader was provided (not as array), force its use\n    // TODO - Should this behavior be kept and documented?\n    if (loaders && !Array.isArray(loaders)) {\n        // TODO - remove support for legacy loaders\n        return normalizeLoader(loaders);\n    }\n    // Build list of candidate loaders that will be searched in order for a match\n    let candidateLoaders = [];\n    // First search supplied loaders\n    if (loaders) {\n        candidateLoaders = candidateLoaders.concat(loaders);\n    }\n    // Then fall back to registered loaders\n    if (!options?.ignoreRegisteredLoaders) {\n        candidateLoaders.push(...getRegisteredLoaders());\n    }\n    // TODO - remove support for legacy loaders\n    normalizeLoaders(candidateLoaders);\n    const loader = selectLoaderInternal(data, candidateLoaders, options, context);\n    // no loader available\n    if (!loader && !options?.nothrow) {\n        throw new Error(getNoValidLoaderMessage(data));\n    }\n    return loader;\n}\n/** Implements loaders selection logic */\n// eslint-disable-next-line complexity\nfunction selectLoaderInternal(data, loaders, options, context) {\n    const url = getResourceUrl(data);\n    const type = getResourceMIMEType(data);\n    const testUrl = stripQueryString(url) || context?.url;\n    let loader = null;\n    let reason = '';\n    // if options.mimeType is supplied, it takes precedence\n    if (options?.mimeType) {\n        loader = findLoaderByMIMEType(loaders, options?.mimeType);\n        reason = `match forced by supplied MIME type ${options?.mimeType}`;\n    }\n    // Look up loader by url\n    loader = loader || findLoaderByUrl(loaders, testUrl);\n    reason = reason || (loader ? `matched url ${testUrl}` : '');\n    // Look up loader by mime type\n    loader = loader || findLoaderByMIMEType(loaders, type);\n    reason = reason || (loader ? `matched MIME type ${type}` : '');\n    // Look for loader via initial bytes (Note: not always accessible (e.g. Response, stream, async iterator)\n    // @ts-ignore Blob | Response\n    loader = loader || findLoaderByInitialBytes(loaders, data);\n    // @ts-ignore Blob | Response\n    reason = reason || (loader ? `matched initial data ${getFirstCharacters(data)}` : '');\n    // Look up loader by fallback mime type\n    if (options?.fallbackMimeType) {\n        loader = loader || findLoaderByMIMEType(loaders, options?.fallbackMimeType);\n        reason = reason || (loader ? `matched fallback MIME type ${type}` : '');\n    }\n    if (reason) {\n        log.log(1, `selectLoader selected ${loader?.name}: ${reason}.`);\n    }\n    return loader;\n}\n/** Check HTTP Response */\nfunction validHTTPResponse(data) {\n    // HANDLE HTTP status\n    if (data instanceof Response) {\n        // 204 - NO CONTENT. This handles cases where e.g. a tile server responds with 204 for a missing tile\n        if (data.status === 204) {\n            return false;\n        }\n    }\n    return true;\n}\n/** Generate a helpful message to help explain why loader selection failed. */\nfunction getNoValidLoaderMessage(data) {\n    const url = getResourceUrl(data);\n    const type = getResourceMIMEType(data);\n    let message = 'No valid loader found (';\n    message += url ? `${path.filename(url)}, ` : 'no url provided, ';\n    message += `MIME type: ${type ? `\"${type}\"` : 'not provided'}, `;\n    // First characters are only accessible when called on data (string or arrayBuffer).\n    // @ts-ignore Blob | Response\n    const firstCharacters = data ? getFirstCharacters(data) : '';\n    message += firstCharacters ? ` first bytes: \"${firstCharacters}\"` : 'first bytes: not available';\n    message += ')';\n    return message;\n}\nfunction normalizeLoaders(loaders) {\n    for (const loader of loaders) {\n        normalizeLoader(loader);\n    }\n}\n// TODO - Would be nice to support http://example.com/file.glb?parameter=1\n// E.g: x = new URL('http://example.com/file.glb?load=1'; x.pathname\nfunction findLoaderByUrl(loaders, url) {\n    // Get extension\n    const match = url && EXT_PATTERN.exec(url);\n    const extension = match && match[1];\n    return extension ? findLoaderByExtension(loaders, extension) : null;\n}\nfunction findLoaderByExtension(loaders, extension) {\n    extension = extension.toLowerCase();\n    for (const loader of loaders) {\n        for (const loaderExtension of loader.extensions) {\n            if (loaderExtension.toLowerCase() === extension) {\n                return loader;\n            }\n        }\n    }\n    return null;\n}\nfunction findLoaderByMIMEType(loaders, mimeType) {\n    for (const loader of loaders) {\n        if (loader.mimeTypes?.some((mimeType1) => compareMIMETypes(mimeType, mimeType1))) {\n            return loader;\n        }\n        // Support referring to loaders using the \"unregistered tree\"\n        // https://en.wikipedia.org/wiki/Media_type#Unregistered_tree\n        if (compareMIMETypes(mimeType, `application/x.${loader.id}`)) {\n            return loader;\n        }\n    }\n    return null;\n}\nfunction findLoaderByInitialBytes(loaders, data) {\n    if (!data) {\n        return null;\n    }\n    for (const loader of loaders) {\n        if (typeof data === 'string') {\n            if (testDataAgainstText(data, loader)) {\n                return loader;\n            }\n        }\n        else if (ArrayBuffer.isView(data)) {\n            // Typed Arrays can have offsets into underlying buffer\n            if (testDataAgainstBinary(data.buffer, data.byteOffset, loader)) {\n                return loader;\n            }\n        }\n        else if (data instanceof ArrayBuffer) {\n            const byteOffset = 0;\n            if (testDataAgainstBinary(data, byteOffset, loader)) {\n                return loader;\n            }\n        }\n        // TODO Handle streaming case (requires creating a new AsyncIterator)\n    }\n    return null;\n}\nfunction testDataAgainstText(data, loader) {\n    if (loader.testText) {\n        return loader.testText(data);\n    }\n    const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n    return tests.some((test) => data.startsWith(test));\n}\nfunction testDataAgainstBinary(data, byteOffset, loader) {\n    const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n    return tests.some((test) => testBinary(data, byteOffset, loader, test));\n}\nfunction testBinary(data, byteOffset, loader, test) {\n    if (test instanceof ArrayBuffer) {\n        return compareArrayBuffers(test, data, test.byteLength);\n    }\n    switch (typeof test) {\n        case 'function':\n            return test(data);\n        case 'string':\n            // Magic bytes check: If `test` is a string, check if binary data starts with that strings\n            const magic = getMagicString(data, byteOffset, test.length);\n            return test === magic;\n        default:\n            return false;\n    }\n}\nfunction getFirstCharacters(data, length = 5) {\n    if (typeof data === 'string') {\n        return data.slice(0, length);\n    }\n    else if (ArrayBuffer.isView(data)) {\n        // Typed Arrays can have offsets into underlying buffer\n        return getMagicString(data.buffer, data.byteOffset, length);\n    }\n    else if (data instanceof ArrayBuffer) {\n        const byteOffset = 0;\n        return getMagicString(data, byteOffset, length);\n    }\n    return '';\n}\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n    if (arrayBuffer.byteLength < byteOffset + length) {\n        return '';\n    }\n    const dataView = new DataView(arrayBuffer);\n    let magic = '';\n    for (let i = 0; i < length; i++) {\n        magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n    }\n    return magic;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst DEFAULT_CHUNK_SIZE = 256 * 1024;\n/**\n * Returns an iterator that breaks a big string into chunks and yields them one-by-one as ArrayBuffers\n * @param blob string to iterate over\n * @param options\n * @param options.chunkSize\n */\nexport function* makeStringIterator(string, options) {\n    const chunkSize = options?.chunkSize || DEFAULT_CHUNK_SIZE;\n    let offset = 0;\n    const textEncoder = new TextEncoder();\n    while (offset < string.length) {\n        // Create a chunk of the right size\n        const chunkLength = Math.min(string.length - offset, chunkSize);\n        const chunk = string.slice(offset, offset + chunkLength);\n        offset += chunkLength;\n        // yield an ArrayBuffer chunk\n        yield textEncoder.encode(chunk);\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst DEFAULT_CHUNK_SIZE = 256 * 1024;\n/**\n * Returns an iterator that breaks a big ArrayBuffer into chunks and yields them one-by-one\n * @param blob ArrayBuffer to iterate over\n * @param options\n * @param options.chunkSize\n */\nexport function* makeArrayBufferIterator(arrayBuffer, options = {}) {\n    const { chunkSize = DEFAULT_CHUNK_SIZE } = options;\n    let byteOffset = 0;\n    while (byteOffset < arrayBuffer.byteLength) {\n        // Create a chunk of the right size\n        const chunkByteLength = Math.min(arrayBuffer.byteLength - byteOffset, chunkSize);\n        const chunk = new ArrayBuffer(chunkByteLength);\n        // Copy data from the big chunk\n        const sourceArray = new Uint8Array(arrayBuffer, byteOffset, chunkByteLength);\n        const chunkArray = new Uint8Array(chunk);\n        chunkArray.set(sourceArray);\n        // yield the chunk\n        byteOffset += chunkByteLength;\n        yield chunk;\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst DEFAULT_CHUNK_SIZE = 1024 * 1024; // 1MB  biggest value that keeps UI responsive\n/**\n * Returns an iterator that breaks a big Blob into chunks and yields them one-by-one\n * @param blob Blob or File object\n * @param options\n * @param options.chunkSize\n */\nexport async function* makeBlobIterator(blob, options) {\n    const chunkSize = options?.chunkSize || DEFAULT_CHUNK_SIZE;\n    let offset = 0;\n    while (offset < blob.size) {\n        const end = offset + chunkSize;\n        const chunk = await blob.slice(offset, end).arrayBuffer();\n        offset = end;\n        yield chunk;\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { isBrowser, toArrayBuffer } from '@loaders.gl/loader-utils';\n/**\n * Returns an async iterable that reads from a stream (works in both Node.js and browsers)\n * @param stream stream to iterator over\n */\nexport function makeStreamIterator(stream, options) {\n    return isBrowser\n        ? makeBrowserStreamIterator(stream, options)\n        : makeNodeStreamIterator(stream, options);\n}\n/**\n * Returns an async iterable that reads from a DOM (browser) stream\n * @param stream stream to iterate from\n * @see https://jakearchibald.com/2017/async-iterators-and-generators/#making-streams-iterate\n */\nasync function* makeBrowserStreamIterator(stream, options) {\n    // WhatWG: stream is supposed to have a `getIterator` method\n    // if (typeof stream.getIterator === 'function') {\n    //   return stream.getIterator();\n    // }\n    // if (typeof stream[Symbol.asyncIterator] === 'function') {\n    //   return makeToArrayBufferIterator(stream);\n    // }\n    // In the browser, we first need to get a lock on the stream\n    const reader = stream.getReader();\n    let nextBatchPromise;\n    try {\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            const currentBatchPromise = nextBatchPromise || reader.read();\n            // Issue a read for an additional batch, while we await the next batch\n            // Idea is to make fetching happen in parallel with processing / parsing\n            if (options?._streamReadAhead) {\n                nextBatchPromise = reader.read();\n            }\n            // Read from the stream\n            // value is a Uint8Array\n            const { done, value } = await currentBatchPromise;\n            // Exit if we're done\n            if (done) {\n                return;\n            }\n            // Else yield the chunk\n            yield toArrayBuffer(value);\n        }\n    }\n    catch (error) {\n        // TODO - examples makes it look like this should always be called,\n        // but that generates exceptions so only call it if we do not reach the end\n        reader.releaseLock();\n    }\n}\n/**\n * Returns an async iterable that reads from a DOM (browser) stream\n * @param stream stream to iterate from\n * @note Requires Node.js >= 10\n */\nasync function* makeNodeStreamIterator(stream, options) {\n    // Hacky test for node version to ensure we don't call bad polyfills\n    // NODE 10+: stream is an asyncIterator\n    for await (const chunk of stream) {\n        yield toArrayBuffer(chunk); // Coerce each chunk to ArrayBuffer\n    }\n}\n/* TODO - remove NODE < 10\n * @see https://github.com/bustle/streaming-iterables, MIT license\n *\n  if (typeof stream[Symbol.asyncIterator] === 'function') {\n    return;\n  }\n\n  // TODO - check if is this ever used in Node 10+?\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const data = stream.read();\n    if (data !== null) {\n      yield toArrayBuffer(data);\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    if (stream._readableState?.ended) {\n      return;\n    }\n    await onceReadable(stream);\n  }\n\nasync function onceReadable(stream: Readable): Promise<any> {\n  return new Promise((resolve) => {\n    stream.once('readable', resolve);\n  });\n}\n  */\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { makeStringIterator } from \"./make-string-iterator.js\";\nimport { makeArrayBufferIterator } from \"./make-array-buffer-iterator.js\";\nimport { makeBlobIterator } from \"./make-blob-iterator.js\";\nimport { makeStreamIterator } from \"./make-stream-iterator.js\";\nimport { isBlob, isReadableStream, isResponse } from \"../../javascript-utils/is-type.js\";\n/**\n * Returns an iterator that breaks its input into chunks and yields them one-by-one.\n * @param data\n * @param options\n * @returns\n * This function can e.g. be used to enable data sources that can only be read atomically\n * (such as `Blob` and `File` via `FileReader`) to still be parsed in batches.\n */\nexport function makeIterator(data, options) {\n    if (typeof data === 'string') {\n        // Note: Converts string chunks to binary\n        return makeStringIterator(data, options);\n    }\n    if (data instanceof ArrayBuffer) {\n        return makeArrayBufferIterator(data, options);\n    }\n    if (isBlob(data)) {\n        return makeBlobIterator(data, options);\n    }\n    if (isReadableStream(data)) {\n        return makeStreamIterator(data, options);\n    }\n    if (isResponse(data)) {\n        const response = data;\n        return makeStreamIterator(response.body, options);\n    }\n    throw new Error('makeIterator');\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { concatenateArrayBuffersAsync } from '@loaders.gl/loader-utils';\nimport { isResponse, isReadableStream, isAsyncIterable, isIterable, isIterator, isBlob, isBuffer } from \"../../javascript-utils/is-type.js\";\nimport { makeIterator } from \"../../iterators/make-iterator/make-iterator.js\";\nimport { checkResponse, makeResponse } from \"../utils/response-utils.js\";\nconst ERR_DATA = 'Cannot convert supplied data type';\n// eslint-disable-next-line complexity\nexport function getArrayBufferOrStringFromDataSync(data, loader, options) {\n    if (loader.text && typeof data === 'string') {\n        return data;\n    }\n    if (isBuffer(data)) {\n        // @ts-ignore\n        data = data.buffer;\n    }\n    if (data instanceof ArrayBuffer) {\n        const arrayBuffer = data;\n        if (loader.text && !loader.binary) {\n            const textDecoder = new TextDecoder('utf8');\n            return textDecoder.decode(arrayBuffer);\n        }\n        return arrayBuffer;\n    }\n    // We may need to handle offsets\n    if (ArrayBuffer.isView(data)) {\n        // TextDecoder is invoked on typed arrays and will handle offsets\n        if (loader.text && !loader.binary) {\n            const textDecoder = new TextDecoder('utf8');\n            return textDecoder.decode(data);\n        }\n        let arrayBuffer = data.buffer;\n        // Since we are returning the underlying arrayBuffer, we must create a new copy\n        // if this typed array / Buffer is a partial view into the ArryayBuffer\n        // TODO - this is a potentially unnecessary copy\n        const byteLength = data.byteLength || data.length;\n        if (data.byteOffset !== 0 || byteLength !== arrayBuffer.byteLength) {\n            // console.warn(`loaders.gl copying arraybuffer of length ${byteLength}`);\n            arrayBuffer = arrayBuffer.slice(data.byteOffset, data.byteOffset + byteLength);\n        }\n        return arrayBuffer;\n    }\n    throw new Error(ERR_DATA);\n}\n// Convert async iterator to a promise\nexport async function getArrayBufferOrStringFromData(data, loader, options) {\n    const isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n    if (typeof data === 'string' || isArrayBuffer) {\n        return getArrayBufferOrStringFromDataSync(data, loader, options);\n    }\n    // Blobs and files are FileReader compatible\n    if (isBlob(data)) {\n        data = await makeResponse(data);\n    }\n    if (isResponse(data)) {\n        const response = data;\n        await checkResponse(response);\n        return loader.binary ? await response.arrayBuffer() : await response.text();\n    }\n    if (isReadableStream(data)) {\n        // @ts-expect-error TS2559 options type\n        data = makeIterator(data, options);\n    }\n    if (isIterable(data) || isAsyncIterable(data)) {\n        // Assume arrayBuffer iterator - attempt to concatenate\n        return concatenateArrayBuffersAsync(data);\n    }\n    throw new Error(ERR_DATA);\n}\nexport async function getAsyncIterableFromData(data, options) {\n    if (isIterator(data)) {\n        return data;\n    }\n    if (isResponse(data)) {\n        const response = data;\n        // Note Since this function is not async, we currently can't load error message, just status\n        await checkResponse(response);\n        // TODO - bug in polyfill, body can be a Promise under Node.js\n        // eslint-disable-next-line @typescript-eslint/await-thenable\n        const body = await response.body;\n        // TODO - body can be null?\n        return makeIterator(body, options);\n    }\n    if (isBlob(data) || isReadableStream(data)) {\n        return makeIterator(data, options);\n    }\n    if (isAsyncIterable(data)) {\n        return data;\n    }\n    return getIterableFromData(data);\n}\nexport async function getReadableStream(data) {\n    if (isReadableStream(data)) {\n        return data;\n    }\n    if (isResponse(data)) {\n        // @ts-ignore\n        return data.body;\n    }\n    const response = await makeResponse(data);\n    // @ts-ignore\n    return response.body;\n}\n// HELPERS\nfunction getIterableFromData(data) {\n    // generate an iterator that emits a single chunk\n    if (ArrayBuffer.isView(data)) {\n        return (function* oneChunk() {\n            yield data.buffer;\n        })();\n    }\n    if (data instanceof ArrayBuffer) {\n        return (function* oneChunk() {\n            yield data;\n        })();\n    }\n    if (isIterator(data)) {\n        return data;\n    }\n    if (isIterable(data)) {\n        return data[Symbol.iterator]();\n    }\n    throw new Error(ERR_DATA);\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { isObject } from \"../../javascript-utils/is-type.js\";\nimport { fetchFile } from \"../fetch/fetch-file.js\";\nimport { getGlobalLoaderOptions } from \"./option-utils.js\";\n/**\n * Gets the current fetch function from options and context\n * @param options\n * @param context\n */\nexport function getFetchFunction(options, context) {\n    const globalOptions = getGlobalLoaderOptions();\n    const loaderOptions = options || globalOptions;\n    // options.fetch can be a function\n    if (typeof loaderOptions.fetch === 'function') {\n        return loaderOptions.fetch;\n    }\n    // options.fetch can be an options object\n    if (isObject(loaderOptions.fetch)) {\n        return (url) => fetchFile(url, loaderOptions.fetch);\n    }\n    // else refer to context (from parent loader) if available\n    if (context?.fetch) {\n        return context?.fetch;\n    }\n    // else return the default fetch function\n    return fetchFile;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { getFetchFunction } from \"./get-fetch-function.js\";\nimport { extractQueryString, stripQueryString } from \"../utils/url-utils.js\";\nimport { path } from '@loaders.gl/loader-utils';\n/**\n * \"sub\" loaders invoked by other loaders get a \"context\" injected on `this`\n * The context will inject core methods like `parse` and contain information\n * about loaders and options passed in to the top-level `parse` call.\n *\n * @param context\n * @param options\n * @param previousContext\n */\nexport function getLoaderContext(context, options, parentContext) {\n    // For recursive calls, we already have a context\n    // TODO - add any additional loaders to context?\n    if (parentContext) {\n        return parentContext;\n    }\n    const newContext = {\n        fetch: getFetchFunction(options, context),\n        ...context\n    };\n    // Parse URLs so that subloaders can easily generate correct strings\n    if (newContext.url) {\n        const baseUrl = stripQueryString(newContext.url);\n        newContext.baseUrl = baseUrl;\n        newContext.queryString = extractQueryString(newContext.url);\n        newContext.filename = path.filename(baseUrl);\n        newContext.baseUrl = path.dirname(baseUrl);\n    }\n    // Recursive loading does not use single loader\n    if (!Array.isArray(newContext.loaders)) {\n        newContext.loaders = null;\n    }\n    return newContext;\n}\n// eslint-disable-next-line complexity\nexport function getLoadersFromContext(loaders, context) {\n    // A single loader (non-array) indicates no selection desired. Force select.\n    if (loaders && !Array.isArray(loaders)) {\n        return loaders;\n    }\n    // Create a merged list\n    let candidateLoaders;\n    if (loaders) {\n        candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n    }\n    if (context && context.loaders) {\n        const contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n        candidateLoaders = candidateLoaders ? [...candidateLoaders, ...contextLoaders] : contextLoaders;\n    }\n    // If no loaders, return null to look in globally registered loaders\n    return candidateLoaders && candidateLoaders.length ? candidateLoaders : undefined;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { parseWithWorker, canParseWithWorker, mergeLoaderOptions } from '@loaders.gl/loader-utils';\nimport { assert, validateWorkerVersion } from '@loaders.gl/worker-utils';\nimport { isLoaderObject } from \"../loader-utils/normalize-loader.js\";\nimport { isResponse } from \"../../javascript-utils/is-type.js\";\nimport { normalizeOptions } from \"../loader-utils/option-utils.js\";\nimport { getArrayBufferOrStringFromData } from \"../loader-utils/get-data.js\";\nimport { getLoaderContext, getLoadersFromContext } from \"../loader-utils/loader-context.js\";\nimport { getResourceUrl } from \"../utils/resource-utils.js\";\nimport { selectLoader } from \"./select-loader.js\";\n/**\n * Parses `data` using a specified loader\n * @param data\n * @param loaders\n * @param options\n * @param context\n */\n// implementation signature\nexport async function parse(data, loaders, options, context) {\n    // Signature: parse(data, options, context | url)\n    // Uses registered loaders\n    if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n        context = undefined; // context not supported in short signature\n        options = loaders;\n        loaders = undefined;\n    }\n    data = await data; // Resolve any promise\n    options = options || {}; // Could be invalid...\n    // Extract a url for auto detection\n    const url = getResourceUrl(data);\n    // Chooses a loader (and normalizes it)\n    // Also use any loaders in the context, new loaders take priority\n    const typedLoaders = loaders;\n    const candidateLoaders = getLoadersFromContext(typedLoaders, context);\n    // todo hacky type cast\n    const loader = await selectLoader(data, candidateLoaders, options);\n    // Note: if no loader was found, if so just return null\n    if (!loader) {\n        return null;\n    }\n    // Normalize options\n    // @ts-expect-error\n    options = normalizeOptions(options, loader, candidateLoaders, url); // Could be invalid...\n    // Get a context (if already present, will be unchanged)\n    context = getLoaderContext(\n    // @ts-expect-error\n    { url, _parse: parse, loaders: candidateLoaders }, options, context || null);\n    return await parseWithLoader(loader, data, options, context);\n}\n// TODO: support progress and abort\n// TODO - should accept loader.parseAsyncIterator and concatenate.\nasync function parseWithLoader(loader, data, options, context) {\n    validateWorkerVersion(loader);\n    options = mergeLoaderOptions(loader.options, options);\n    if (isResponse(data)) {\n        // Serialize to support passing the response to web worker\n        const response = data;\n        const { ok, redirected, status, statusText, type, url } = response;\n        const headers = Object.fromEntries(response.headers.entries());\n        // @ts-expect-error TODO - fix this\n        context.response = { headers, ok, redirected, status, statusText, type, url };\n    }\n    data = await getArrayBufferOrStringFromData(data, loader, options);\n    const loaderWithParser = loader;\n    // First check for synchronous text parser, wrap results in promises\n    if (loaderWithParser.parseTextSync && typeof data === 'string') {\n        return loaderWithParser.parseTextSync(data, options, context);\n    }\n    // If we have a workerUrl and the loader can parse the given options efficiently in a worker\n    if (canParseWithWorker(loader, options)) {\n        return await parseWithWorker(loader, data, options, context, parse);\n    }\n    // Check for asynchronous parser\n    if (loaderWithParser.parseText && typeof data === 'string') {\n        return await loaderWithParser.parseText(data, options, context);\n    }\n    if (loaderWithParser.parse) {\n        return await loaderWithParser.parse(data, options, context);\n    }\n    // This should not happen, all sync loaders should also offer `parse` function\n    assert(!loaderWithParser.parseSync);\n    // TBD - If asynchronous parser not available, return null\n    throw new Error(`${loader.id} loader - no parser found and worker is disabled`);\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { isBlob } from \"../../javascript-utils/is-type.js\";\nimport { isLoaderObject } from \"../loader-utils/normalize-loader.js\";\nimport { getFetchFunction } from \"../loader-utils/get-fetch-function.js\";\nimport { parse } from \"./parse.js\";\n// export async function load(url: string | DataType, loaders: LoaderOptions): Promise<any>;\n// implementation signature\nexport async function load(url, loaders, options, context) {\n    let resolvedLoaders;\n    let resolvedOptions;\n    // Signature: load(url, options)\n    if (!Array.isArray(loaders) && !isLoaderObject(loaders)) {\n        resolvedLoaders = [];\n        resolvedOptions = loaders;\n        context = undefined; // context not supported in short signature\n    }\n    else {\n        resolvedLoaders = loaders;\n        resolvedOptions = options;\n    }\n    // Select fetch function\n    const fetch = getFetchFunction(resolvedOptions);\n    // at this point, `url` could be already loaded binary data\n    let data = url;\n    // url is a string, fetch the url\n    if (typeof url === 'string') {\n        data = await fetch(url);\n        // URL is Blob or File, fetchFile handles it (alt: we could generate ObjectURL here)\n    }\n    if (isBlob(url)) {\n        // The fetch response object will contain blob.name\n        // @ts-expect-error TODO - This may not work for overridden fetch functions\n        data = await fetch(url);\n    }\n    // Data is loaded (at least we have a `Response` object) so time to hand over to `parse`\n    // return await parse(data, loaders as Loader[], options);\n    return Array.isArray(resolvedLoaders)\n        ? await parse(data, resolvedLoaders, resolvedOptions) // loader array overload\n        : await parse(data, resolvedLoaders, resolvedOptions); // single loader overload\n}\n","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Log } from '@probe.gl/log';\nconst defaultLogger = new Log({ id: 'deck' });\nexport default defaultLogger;\n//# sourceMappingURL=log.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst logState = {\n    attributeUpdateStart: -1,\n    attributeManagerUpdateStart: -1,\n    attributeUpdateMessages: []\n};\nconst LOG_LEVEL_MAJOR_UPDATE = 1; // Events with direct perf impact\nconst LOG_LEVEL_MINOR_UPDATE = 2; // Events that may affect perf\nconst LOG_LEVEL_UPDATE_DETAIL = 3;\nconst LOG_LEVEL_INFO = 4;\nconst LOG_LEVEL_DRAW = 2;\nexport const getLoggers = (log) => ({\n    /* Layer events */\n    'layer.changeFlag': (layer, key, flags) => {\n        log.log(LOG_LEVEL_UPDATE_DETAIL, `${layer.id} ${key}: `, flags[key])();\n    },\n    'layer.initialize': layer => {\n        log.log(LOG_LEVEL_MAJOR_UPDATE, `Initializing ${layer}`)();\n    },\n    'layer.update': (layer, needsUpdate) => {\n        if (needsUpdate) {\n            const flags = layer.getChangeFlags();\n            log.log(LOG_LEVEL_MINOR_UPDATE, `Updating ${layer} because: ${Object.keys(flags)\n                .filter(key => flags[key])\n                .join(', ')}`)();\n        }\n        else {\n            log.log(LOG_LEVEL_INFO, `${layer} does not need update`)();\n        }\n    },\n    'layer.matched': (layer, changed) => {\n        if (changed) {\n            log.log(LOG_LEVEL_INFO, `Matched ${layer}, state transfered`)();\n        }\n    },\n    'layer.finalize': layer => {\n        log.log(LOG_LEVEL_MAJOR_UPDATE, `Finalizing ${layer}`)();\n    },\n    /* CompositeLayer events */\n    'compositeLayer.renderLayers': (layer, updated, subLayers) => {\n        if (updated) {\n            log.log(LOG_LEVEL_MINOR_UPDATE, `Composite layer rendered new subLayers ${layer}`, subLayers)();\n        }\n        else {\n            log.log(LOG_LEVEL_INFO, `Composite layer reused subLayers ${layer}`, subLayers)();\n        }\n    },\n    /* LayerManager events */\n    'layerManager.setLayers': (layerManager, updated, layers) => {\n        if (updated) {\n            log.log(LOG_LEVEL_MINOR_UPDATE, `Updating ${layers.length} deck layers`)();\n        }\n    },\n    'layerManager.activateViewport': (layerManager, viewport) => {\n        log.log(LOG_LEVEL_UPDATE_DETAIL, 'Viewport changed', viewport)();\n    },\n    /* AttributeManager events */\n    'attributeManager.invalidate': (attributeManager, trigger, attributeNames) => {\n        log.log(LOG_LEVEL_MAJOR_UPDATE, attributeNames\n            ? `invalidated attributes ${attributeNames} (${trigger}) for ${attributeManager.id}`\n            : `invalidated all attributes for ${attributeManager.id}`)();\n    },\n    'attributeManager.updateStart': attributeManager => {\n        logState.attributeUpdateMessages.length = 0;\n        logState.attributeManagerUpdateStart = Date.now();\n    },\n    'attributeManager.updateEnd': (attributeManager, numInstances) => {\n        const timeMs = Math.round(Date.now() - logState.attributeManagerUpdateStart);\n        log.groupCollapsed(LOG_LEVEL_MINOR_UPDATE, `Updated attributes for ${numInstances} instances in ${attributeManager.id} in ${timeMs}ms`)();\n        for (const updateMessage of logState.attributeUpdateMessages) {\n            log.log(LOG_LEVEL_UPDATE_DETAIL, updateMessage)();\n        }\n        log.groupEnd(LOG_LEVEL_MINOR_UPDATE)();\n    },\n    /* Attribute events */\n    'attribute.updateStart': attribute => {\n        logState.attributeUpdateStart = Date.now();\n    },\n    'attribute.allocate': (attribute, numInstances) => {\n        const message = `${attribute.id} allocated ${numInstances}`;\n        logState.attributeUpdateMessages.push(message);\n    },\n    'attribute.updateEnd': (attribute, numInstances) => {\n        const timeMs = Math.round(Date.now() - logState.attributeUpdateStart);\n        const message = `${attribute.id} updated ${numInstances} in ${timeMs}ms`;\n        logState.attributeUpdateMessages.push(message);\n    },\n    /* Render events */\n    'deckRenderer.renderLayers': (deckRenderer, renderStats, opts) => {\n        const { pass, redrawReason, stats } = opts;\n        for (const status of renderStats) {\n            const { totalCount, visibleCount, compositeCount, pickableCount } = status;\n            const primitiveCount = totalCount - compositeCount;\n            const hiddenCount = primitiveCount - visibleCount;\n            log.log(LOG_LEVEL_DRAW, `RENDER #${deckRenderer.renderCount} \\\n  ${visibleCount} (of ${totalCount} layers) to ${pass} because ${redrawReason} \\\n  (${hiddenCount} hidden, ${compositeCount} composite ${pickableCount} pickable)`)();\n            if (stats) {\n                stats.get('Redraw Layers').add(visibleCount);\n            }\n        }\n    }\n});\n//# sourceMappingURL=loggers.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport deckLog from \"../utils/log.js\";\nimport { getLoggers } from \"./loggers.js\";\n/* debug utility */\nlet loggers = {};\n// Conditionally load default loggers in development mode\n// eslint-disable-next-line\nif (process.env.NODE_ENV !== 'production') {\n    loggers = getLoggers(deckLog);\n}\nexport function register(handlers) {\n    loggers = handlers;\n}\nexport default function debug(eventType, arg1, arg2, arg3) {\n    if (deckLog.level > 0 && loggers[eventType]) {\n        // Not using rest parameters to defeat perf hit from array construction\n        loggers[eventType].call(null, arg1, arg2, arg3);\n    }\n}\n//# sourceMappingURL=index.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Recommendation is to ignore message but current test suite checks agains the\n// message so keep it for now.\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new Error(message || 'shadertools: assertion failed.');\n    }\n}\n//# sourceMappingURL=assert.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { assert } from \"../utils/assert.js\";\n/** Minimal validators for number and array types */\nconst DEFAULT_PROP_VALIDATORS = {\n    number: {\n        type: 'number',\n        validate(value, propType) {\n            return (Number.isFinite(value) &&\n                typeof propType === 'object' &&\n                (propType.max === undefined || value <= propType.max) &&\n                (propType.min === undefined || value >= propType.min));\n        }\n    },\n    array: {\n        type: 'array',\n        validate(value, propType) {\n            return Array.isArray(value) || ArrayBuffer.isView(value);\n        }\n    }\n};\n/**\n * Parse a list of property types into property definitions that can be used to validate\n * values passed in by applications.\n * @param propTypes\n * @returns\n */\nexport function makePropValidators(propTypes) {\n    const propValidators = {};\n    for (const [name, propType] of Object.entries(propTypes)) {\n        propValidators[name] = makePropValidator(propType);\n    }\n    return propValidators;\n}\n/**\n * Validate a map of user supplied properties against a map of validators\n * Inject default values when user doesn't supply a property\n * @param properties\n * @param propValidators\n * @returns\n */\nexport function getValidatedProperties(properties, propValidators, errorMessage) {\n    const validated = {};\n    for (const [key, propsValidator] of Object.entries(propValidators)) {\n        if (properties && key in properties && !propsValidator.private) {\n            if (propsValidator.validate) {\n                assert(propsValidator.validate(properties[key], propsValidator), `${errorMessage}: invalid ${key}`);\n            }\n            validated[key] = properties[key];\n        }\n        else {\n            // property not supplied - use default value\n            validated[key] = propsValidator.value;\n        }\n    }\n    // TODO - warn for unused properties that don't match a validator?\n    return validated;\n}\n/**\n * Creates a property validator for a prop type. Either contains:\n * - a valid prop type object ({type, ...})\n * - or just a default value, in which case type and name inference is used\n */\nfunction makePropValidator(propType) {\n    let type = getTypeOf(propType);\n    if (type !== 'object') {\n        return { value: propType, ...DEFAULT_PROP_VALIDATORS[type], type };\n    }\n    // Special handling for objects\n    if (typeof propType === 'object') {\n        if (!propType) {\n            return { type: 'object', value: null };\n        }\n        if (propType.type !== undefined) {\n            return { ...propType, ...DEFAULT_PROP_VALIDATORS[propType.type], type: propType.type };\n        }\n        // If no type and value this object is likely the value\n        if (propType.value === undefined) {\n            return { type: 'object', value: propType };\n        }\n        type = getTypeOf(propType.value);\n        return { ...propType, ...DEFAULT_PROP_VALIDATORS[type], type };\n    }\n    throw new Error('props');\n}\n/**\n * \"improved\" version of javascript typeof that can distinguish arrays and null values\n */\nfunction getTypeOf(value) {\n    if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n        return 'array';\n    }\n    return typeof value;\n}\n//# sourceMappingURL=prop-types.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport const MODULE_INJECTORS_VS = /* glsl */ `\\\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n`;\nexport const MODULE_INJECTORS_FS = /* glsl */ `\\\n#ifdef MODULE_MATERIAL\n  fragColor = material_filterColor(fragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  fragColor = lighting_filterColor(fragColor);\n#endif\n\n#ifdef MODULE_FOG\n  fragColor = fog_filterColor(fragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  fragColor = picking_filterHighlightColor(fragColor);\n  fragColor = picking_filterPickingColor(fragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n`;\n//# sourceMappingURL=module-injectors.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { MODULE_INJECTORS_VS, MODULE_INJECTORS_FS } from \"../../module-injectors.js\";\nimport { assert } from \"../utils/assert.js\";\n// TODO - experimental\nconst MODULE_INJECTORS = {\n    vertex: MODULE_INJECTORS_VS,\n    fragment: MODULE_INJECTORS_FS\n};\nconst REGEX_START_OF_MAIN = /void\\s+main\\s*\\([^)]*\\)\\s*\\{\\n?/; // Beginning of main\nconst REGEX_END_OF_MAIN = /}\\n?[^{}]*$/; // End of main, assumes main is last function\nconst fragments = [];\nexport const DECLARATION_INJECT_MARKER = '__LUMA_INJECT_DECLARATIONS__';\n/**\n *\n */\nexport function normalizeInjections(injections) {\n    const result = { vertex: {}, fragment: {} };\n    for (const hook in injections) {\n        let injection = injections[hook];\n        const stage = getHookStage(hook);\n        if (typeof injection === 'string') {\n            injection = {\n                order: 0,\n                injection\n            };\n        }\n        result[stage][hook] = injection;\n    }\n    return result;\n}\nfunction getHookStage(hook) {\n    const type = hook.slice(0, 2);\n    switch (type) {\n        case 'vs':\n            return 'vertex';\n        case 'fs':\n            return 'fragment';\n        default:\n            throw new Error(type);\n    }\n}\n/**\n// A minimal shader injection/templating system.\n// RFC: https://github.com/visgl/luma.gl/blob/7.0-release/dev-docs/RFCs/v6.0/shader-injection-rfc.md\n * @param source\n * @param type\n * @param inject\n * @param injectStandardStubs\n * @returns\n */\n// eslint-disable-next-line complexity\nexport function injectShader(source, stage, inject, injectStandardStubs = false) {\n    const isVertex = stage === 'vertex';\n    for (const key in inject) {\n        const fragmentData = inject[key];\n        fragmentData.sort((a, b) => a.order - b.order);\n        fragments.length = fragmentData.length;\n        for (let i = 0, len = fragmentData.length; i < len; ++i) {\n            fragments[i] = fragmentData[i].injection;\n        }\n        const fragmentString = `${fragments.join('\\n')}\\n`;\n        switch (key) {\n            // declarations are injected before the main function\n            case 'vs:#decl':\n                if (isVertex) {\n                    source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n                }\n                break;\n            // inject code at the beginning of the main function\n            case 'vs:#main-start':\n                if (isVertex) {\n                    source = source.replace(REGEX_START_OF_MAIN, (match) => match + fragmentString);\n                }\n                break;\n            // inject code at the end of main function\n            case 'vs:#main-end':\n                if (isVertex) {\n                    source = source.replace(REGEX_END_OF_MAIN, (match) => fragmentString + match);\n                }\n                break;\n            // declarations are injected before the main function\n            case 'fs:#decl':\n                if (!isVertex) {\n                    source = source.replace(DECLARATION_INJECT_MARKER, fragmentString);\n                }\n                break;\n            // inject code at the beginning of the main function\n            case 'fs:#main-start':\n                if (!isVertex) {\n                    source = source.replace(REGEX_START_OF_MAIN, (match) => match + fragmentString);\n                }\n                break;\n            // inject code at the end of main function\n            case 'fs:#main-end':\n                if (!isVertex) {\n                    source = source.replace(REGEX_END_OF_MAIN, (match) => fragmentString + match);\n                }\n                break;\n            default:\n                // TODO(Tarek): I think this usage should be deprecated.\n                // inject code after key, leaving key in place\n                source = source.replace(key, (match) => match + fragmentString);\n        }\n    }\n    // Remove if it hasn't already been replaced\n    source = source.replace(DECLARATION_INJECT_MARKER, '');\n    // Finally, if requested, insert an automatic module injector chunk\n    if (injectStandardStubs) {\n        source = source.replace(/\\}\\s*$/, (match) => match + MODULE_INJECTORS[stage]);\n    }\n    return source;\n}\n// Takes an array of inject objects and combines them into one\nexport function combineInjects(injects) {\n    const result = {};\n    assert(Array.isArray(injects) && injects.length > 1);\n    injects.forEach(inject => {\n        for (const key in inject) {\n            result[key] = result[key] ? `${result[key]}\\n${inject[key]}` : inject[key];\n        }\n    });\n    return result;\n}\n//# sourceMappingURL=shader-injections.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { makePropValidators, getValidatedProperties } from \"../filters/prop-types.js\";\nimport { normalizeInjections } from \"../shader-assembly/shader-injections.js\";\n// SHNDER MODULE API\nexport function initializeShaderModules(modules) {\n    modules.map((module) => initializeShaderModule(module));\n}\nexport function initializeShaderModule(module) {\n    if (module.instance) {\n        return;\n    }\n    initializeShaderModules(module.dependencies || []);\n    const { propTypes = {}, deprecations = [], \n    // defines = {},\n    inject = {} } = module;\n    const instance = {\n        normalizedInjections: normalizeInjections(inject),\n        parsedDeprecations: parseDeprecationDefinitions(deprecations)\n    };\n    if (propTypes) {\n        instance.propValidators = makePropValidators(propTypes);\n    }\n    module.instance = instance;\n    // TODO(ib) - we need to apply the original prop types to the default uniforms\n    let defaultProps = {};\n    if (propTypes) {\n        defaultProps = Object.entries(propTypes).reduce((obj, [key, propType]) => {\n            // @ts-expect-error\n            const value = propType?.value;\n            if (value) {\n                // @ts-expect-error\n                obj[key] = value;\n            }\n            return obj;\n        }, {});\n    }\n    module.defaultUniforms = { ...module.defaultUniforms, ...defaultProps };\n}\n/** Convert module props to uniforms */\nexport function getShaderModuleUniforms(module, props, oldUniforms) {\n    initializeShaderModule(module);\n    const uniforms = oldUniforms || { ...module.defaultUniforms };\n    // If module has a getUniforms function, use it\n    if (props && module.getUniforms) {\n        return module.getUniforms(props, uniforms);\n    }\n    // Build uniforms from the uniforms array\n    // @ts-expect-error\n    return getValidatedProperties(props, module.instance?.propValidators, module.name);\n}\n/* TODO this looks like it was unused code\n  _defaultGetUniforms(opts: Record<string, any> = {}): Record<string, any> {\n    const uniforms: Record<string, any> = {};\n    const propTypes = this.uniforms;\n\n    for (const key in propTypes) {\n      const propDef = propTypes[key];\n      if (key in opts && !propDef.private) {\n        if (propDef.validate) {\n          assert(propDef.validate(opts[key], propDef), `${this.name}: invalid ${key}`);\n        }\n        uniforms[key] = opts[key];\n      } else {\n        uniforms[key] = propDef.value;\n      }\n    }\n\n    return uniforms;\n  }\n}\n*/\n// Warn about deprecated uniforms or functions\nexport function checkShaderModuleDeprecations(shaderModule, shaderSource, log) {\n    shaderModule.deprecations?.forEach(def => {\n        if (def.regex?.test(shaderSource)) {\n            if (def.deprecated) {\n                log.deprecated(def.old, def.new)();\n            }\n            else {\n                log.removed(def.old, def.new)();\n            }\n        }\n    });\n}\n// HELPERS\nfunction parseDeprecationDefinitions(deprecations) {\n    deprecations.forEach(def => {\n        switch (def.type) {\n            case 'function':\n                def.regex = new RegExp(`\\\\b${def.old}\\\\(`);\n                break;\n            default:\n                def.regex = new RegExp(`${def.type} ${def.old};`);\n        }\n    });\n    return deprecations;\n}\n//# sourceMappingURL=shader-module.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { initializeShaderModules } from \"./shader-module.js\";\n/**\n * Takes a list of shader module names and returns a new list of\n * shader module names that includes all dependencies, sorted so\n * that modules that are dependencies of other modules come first.\n *\n * If the shader glsl code from the returned modules is concatenated\n * in the reverse order, it is guaranteed that all functions be resolved and\n * that all function and variable definitions come before use.\n *\n * @param modules - Array of modules (inline modules or module names)\n * @return - Array of modules\n */\nexport function getShaderModuleDependencies(modules) {\n    initializeShaderModules(modules);\n    const moduleMap = {};\n    const moduleDepth = {};\n    getDependencyGraph({ modules, level: 0, moduleMap, moduleDepth });\n    // Return a reverse sort so that dependencies come before the modules that use them\n    const dependencies = Object.keys(moduleDepth)\n        .sort((a, b) => moduleDepth[b] - moduleDepth[a])\n        .map(name => moduleMap[name]);\n    initializeShaderModules(dependencies);\n    return dependencies;\n}\n/**\n * Recursively checks module dependencies to calculate dependency level of each module.\n *\n * @param options.modules - Array of modules\n * @param options.level - Current level\n * @param options.moduleMap -\n * @param options.moduleDepth - Current level\n * @return - Map of module name to its level\n */\n// Adds another level of dependencies to the result map\nexport function getDependencyGraph(options) {\n    const { modules, level, moduleMap, moduleDepth } = options;\n    if (level >= 5) {\n        throw new Error('Possible loop in shader dependency graph');\n    }\n    // Update level on all current modules\n    for (const module of modules) {\n        moduleMap[module.name] = module;\n        if (moduleDepth[module.name] === undefined || moduleDepth[module.name] < level) {\n            moduleDepth[module.name] = level;\n        }\n    }\n    // Recurse\n    for (const module of modules) {\n        if (module.dependencies) {\n            getDependencyGraph({ modules: module.dependencies, level: level + 1, moduleMap, moduleDepth });\n        }\n    }\n}\n/**\n * Takes a list of shader module names and returns a new list of\n * shader module names that includes all dependencies, sorted so\n * that modules that are dependencies of other modules come first.\n *\n * If the shader glsl code from the returned modules is concatenated\n * in the reverse order, it is guaranteed that all functions be resolved and\n * that all function and variable definitions come before use.\n *\n * @param modules - Array of modules (inline modules or module names)\n * @return - Array of modules\n */\nexport function getShaderDependencies(modules) {\n    initializeShaderModules(modules);\n    const moduleMap = {};\n    const moduleDepth = {};\n    getDependencyGraph({ modules, level: 0, moduleMap, moduleDepth });\n    // Return a reverse sort so that dependencies come before the modules that use them\n    modules = Object.keys(moduleDepth)\n        .sort((a, b) => moduleDepth[b] - moduleDepth[a])\n        .map(name => moduleMap[name]);\n    initializeShaderModules(modules);\n    return modules;\n}\n// DEPRECATED\n/**\n * Instantiate shader modules and resolve any dependencies\n * @deprecated Use getShaderDpendencies\n */\nexport function resolveModules(modules) {\n    return getShaderDependencies(modules);\n}\n//# sourceMappingURL=shader-module-dependencies.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/** Adds defines to help identify GPU architecture / platform */\nexport function getPlatformShaderDefines(platformInfo) {\n    switch (platformInfo?.gpu.toLowerCase()) {\n        case 'apple':\n            return /* glsl */ `\\\n#define APPLE_GPU\n// Apple optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n`;\n        case 'nvidia':\n            return /* glsl */ `\\\n#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n`;\n        case 'intel':\n            return /* glsl */ `\\\n#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n`;\n        case 'amd':\n            // AMD Does not eliminate fp64 code\n            return /* glsl */ `\\\n#define AMD_GPU\n`;\n        default:\n            // We don't know what GPU it is, could be that the GPU driver or\n            // browser is not implementing UNMASKED_RENDERER constant and not\n            // reporting a correct name\n            return /* glsl */ `\\\n#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Headless Chrome's software shader 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// If the GPU doesn't have full 32 bits precision, will causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n`;\n    }\n}\n//# sourceMappingURL=platform-defines.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// TRANSPILATION TABLES\n/**\n * Transpiles GLSL 3.00 shader source code to target GLSL version (3.00 or 1.00)\n *\n * @note We always run transpiler even if same version e.g. 3.00 => 3.00\n * @note For texture sampling transpilation, apps need to use non-standard texture* calls in GLSL 3.00 source\n * RFC: https://github.com/visgl/luma.gl/blob/7.0-release/dev-docs/RFCs/v6.0/portable-glsl-300-rfc.md\n */\nexport function transpileGLSLShader(source, stage) {\n    const sourceGLSLVersion = Number(source.match(/^#version[ \\t]+(\\d+)/m)?.[1] || 100);\n    if (sourceGLSLVersion !== 300) {\n        // TODO - we splurge on a longer error message to help deck.gl custom layer developers\n        throw new Error('luma.gl v9 only supports GLSL 3.00 shader sources');\n    }\n    switch (stage) {\n        case 'vertex':\n            source = convertShader(source, ES300_VERTEX_REPLACEMENTS);\n            return source;\n        case 'fragment':\n            source = convertShader(source, ES300_FRAGMENT_REPLACEMENTS);\n            return source;\n        default:\n            // Unknown shader stage\n            throw new Error(stage);\n    }\n}\n/** Simple regex replacements for GLSL ES 1.00 syntax that has changed in GLSL ES 3.00 */\nconst ES300_REPLACEMENTS = [\n    // Fix poorly formatted version directive\n    [/^(#version[ \\t]+(100|300[ \\t]+es))?[ \\t]*\\n/, '#version 300 es\\n'],\n    // The individual `texture...()` functions were replaced with `texture()` overloads\n    [/\\btexture(2D|2DProj|Cube)Lod(EXT)?\\(/g, 'textureLod('],\n    [/\\btexture(2D|2DProj|Cube)(EXT)?\\(/g, 'texture(']\n];\nconst ES300_VERTEX_REPLACEMENTS = [\n    ...ES300_REPLACEMENTS,\n    // `attribute` keyword replaced with `in`\n    [makeVariableTextRegExp('attribute'), 'in $1'],\n    // `varying` keyword replaced with `out`\n    [makeVariableTextRegExp('varying'), 'out $1']\n];\n/** Simple regex replacements for GLSL ES 1.00 syntax that has changed in GLSL ES 3.00 */\nconst ES300_FRAGMENT_REPLACEMENTS = [\n    ...ES300_REPLACEMENTS,\n    // `varying` keyword replaced with `in`\n    [makeVariableTextRegExp('varying'), 'in $1']\n];\nfunction convertShader(source, replacements) {\n    for (const [pattern, replacement] of replacements) {\n        source = source.replace(pattern, replacement);\n    }\n    return source;\n}\n/**\n * Creates a regexp that tests for a specific variable type\n * @example\n *   should match:\n *     in float weight;\n *     out vec4 positions[2];\n *   should not match:\n *     void f(out float a, in float b) {}\n */\nfunction makeVariableTextRegExp(qualifier) {\n    return new RegExp(`\\\\b${qualifier}[ \\\\t]+(\\\\w+[ \\\\t]+\\\\w+(\\\\[\\\\w+\\\\])?;)`, 'g');\n}\n//# sourceMappingURL=transpile-glsl-shader.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/** Generate hook source code */\nexport function getShaderHooks(hookFunctions, hookInjections) {\n    let result = '';\n    for (const hookName in hookFunctions) {\n        const hookFunction = hookFunctions[hookName];\n        result += `void ${hookFunction.signature} {\\n`;\n        if (hookFunction.header) {\n            result += `  ${hookFunction.header}`;\n        }\n        if (hookInjections[hookName]) {\n            const injections = hookInjections[hookName];\n            injections.sort((a, b) => a.order - b.order);\n            for (const injection of injections) {\n                result += `  ${injection.injection}\\n`;\n            }\n        }\n        if (hookFunction.footer) {\n            result += `  ${hookFunction.footer}`;\n        }\n        result += '}\\n';\n    }\n    return result;\n}\n/**\n * Parse string based hook functions\n * And split per shader\n */\nexport function normalizeShaderHooks(hookFunctions) {\n    const result = { vertex: {}, fragment: {} };\n    for (const hookFunction of hookFunctions) {\n        let opts;\n        let hook;\n        if (typeof hookFunction !== 'string') {\n            opts = hookFunction;\n            hook = opts.hook;\n        }\n        else {\n            opts = {};\n            hook = hookFunction;\n        }\n        hook = hook.trim();\n        const [shaderStage, signature] = hook.split(':');\n        const name = hook.replace(/\\(.+/, '');\n        const normalizedHook = Object.assign(opts, { signature });\n        switch (shaderStage) {\n            case 'vs':\n                result.vertex[name] = normalizedHook;\n                break;\n            case 'fs':\n                result.fragment[name] = normalizedHook;\n                break;\n            default:\n                throw new Error(shaderStage);\n        }\n    }\n    return result;\n}\n//# sourceMappingURL=shader-hooks.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/** Extracts information from shader source code */\nexport function getShaderInfo(source, defaultName) {\n    return {\n        name: getShaderName(source, defaultName),\n        language: 'glsl',\n        version: getShaderVersion(source)\n    };\n}\n/** Extracts GLSLIFY style naming of shaders: `#define SHADER_NAME ...` */\nfunction getShaderName(shader, defaultName = 'unnamed') {\n    const SHADER_NAME_REGEXP = /#define[^\\S\\r\\n]*SHADER_NAME[^\\S\\r\\n]*([A-Za-z0-9_-]+)\\s*/;\n    const match = SHADER_NAME_REGEXP.exec(shader);\n    return match ? match[1] : defaultName;\n}\n/** returns GLSL shader version of given shader string */\nfunction getShaderVersion(source) {\n    let version = 100;\n    const words = source.match(/[^\\s]+/g);\n    if (words && words.length >= 2 && words[0] === '#version') {\n        const parsedVersion = parseInt(words[1], 10);\n        if (Number.isFinite(parsedVersion)) {\n            version = parsedVersion;\n        }\n    }\n    if (version !== 100 && version !== 300) {\n        throw new Error(`Invalid GLSL version ${version}`);\n    }\n    return version;\n}\n//# sourceMappingURL=get-shader-info.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { getShaderModuleDependencies } from \"../shader-module/shader-module-dependencies.js\";\nimport { getPlatformShaderDefines } from \"./platform-defines.js\";\nimport { injectShader, DECLARATION_INJECT_MARKER } from \"./shader-injections.js\";\nimport { transpileGLSLShader } from \"../shader-transpiler/transpile-glsl-shader.js\";\nimport { checkShaderModuleDeprecations } from \"../shader-module/shader-module.js\";\nimport { normalizeShaderHooks, getShaderHooks } from \"./shader-hooks.js\";\nimport { assert } from \"../utils/assert.js\";\nimport { getShaderInfo } from \"../glsl-utils/get-shader-info.js\";\nconst INJECT_SHADER_DECLARATIONS = `\\n\\n${DECLARATION_INJECT_MARKER}\\n`;\n/**\n * Precision prologue to inject before functions are injected in shader\n * TODO - extract any existing prologue in the fragment source and move it up...\n */\nconst FRAGMENT_SHADER_PROLOGUE = /* glsl */ `\\\nprecision highp float;\n`;\n/**\n * Inject a list of shader modules into a single shader source for WGSL\n */\nexport function assembleWGSLShader(options) {\n    const modules = getShaderModuleDependencies(options.modules || []);\n    return {\n        source: assembleShaderWGSL(options.platformInfo, {\n            ...options,\n            source: options.source,\n            stage: 'vertex',\n            modules\n        }),\n        getUniforms: assembleGetUniforms(modules)\n    };\n}\n/**\n * Injects dependent shader module sources into pair of main vertex/fragment shader sources for GLSL\n */\nexport function assembleGLSLShaderPair(options) {\n    const { vs, fs } = options;\n    const modules = getShaderModuleDependencies(options.modules || []);\n    return {\n        vs: assembleShaderGLSL(options.platformInfo, {\n            ...options,\n            source: vs,\n            stage: 'vertex',\n            modules\n        }),\n        fs: assembleShaderGLSL(options.platformInfo, {\n            ...options,\n            // @ts-expect-error\n            source: fs,\n            stage: 'fragment',\n            modules\n        }),\n        getUniforms: assembleGetUniforms(modules)\n    };\n}\n/**\n * Pulls together complete source code for either a vertex or a fragment shader\n * adding prologues, requested module chunks, and any final injections.\n * @param gl\n * @param options\n * @returns\n */\nexport function assembleShaderWGSL(platformInfo, options) {\n    const { \n    // id,\n    source, stage, modules, \n    // defines = {},\n    hookFunctions = [], inject = {}, log } = options;\n    assert(typeof source === 'string', 'shader source must be a string');\n    // const isVertex = type === 'vs';\n    // const sourceLines = source.split('\\n');\n    const coreSource = source;\n    // Combine Module and Application Defines\n    // const allDefines = {};\n    // modules.forEach(module => {\n    //   Object.assign(allDefines, module.getDefines());\n    // });\n    // Object.assign(allDefines, defines);\n    // Add platform defines (use these to work around platform-specific bugs and limitations)\n    // Add common defines (GLSL version compatibility, feature detection)\n    // Add precision declaration for fragment shaders\n    let assembledSource = '';\n    //   prologue\n    //     ? `\\\n    // ${getShaderNameDefine({id, source, type})}\n    // ${getShaderType(type)}\n    // ${getPlatformShaderDefines(platformInfo)}\n    // ${getApplicationDefines(allDefines)}\n    // ${isVertex ? '' : FRAGMENT_SHADER_PROLOGUE}\n    // `\n    // `;\n    const hookFunctionMap = normalizeShaderHooks(hookFunctions);\n    // Add source of dependent modules in resolved order\n    const hookInjections = {};\n    const declInjections = {};\n    const mainInjections = {};\n    for (const key in inject) {\n        const injection = typeof inject[key] === 'string' ? { injection: inject[key], order: 0 } : inject[key];\n        const match = /^(v|f)s:(#)?([\\w-]+)$/.exec(key);\n        if (match) {\n            const hash = match[2];\n            const name = match[3];\n            if (hash) {\n                if (name === 'decl') {\n                    declInjections[key] = [injection];\n                }\n                else {\n                    mainInjections[key] = [injection];\n                }\n            }\n            else {\n                hookInjections[key] = [injection];\n            }\n        }\n        else {\n            // Regex injection\n            mainInjections[key] = [injection];\n        }\n    }\n    // TODO - hack until shadertool modules support WebGPU\n    const modulesToInject = modules;\n    for (const module of modulesToInject) {\n        if (log) {\n            checkShaderModuleDeprecations(module, coreSource, log);\n        }\n        const moduleSource = getShaderModuleSource(module, 'wgsl');\n        // Add the module source, and a #define that declares it presence\n        assembledSource += moduleSource;\n        const injections = module.injections?.[stage] || {};\n        for (const key in injections) {\n            const match = /^(v|f)s:#([\\w-]+)$/.exec(key);\n            if (match) {\n                const name = match[2];\n                const injectionType = name === 'decl' ? declInjections : mainInjections;\n                injectionType[key] = injectionType[key] || [];\n                injectionType[key].push(injections[key]);\n            }\n            else {\n                hookInjections[key] = hookInjections[key] || [];\n                hookInjections[key].push(injections[key]);\n            }\n        }\n    }\n    // For injectShader\n    assembledSource += INJECT_SHADER_DECLARATIONS;\n    assembledSource = injectShader(assembledSource, stage, declInjections);\n    assembledSource += getShaderHooks(hookFunctionMap[stage], hookInjections);\n    // Add the version directive and actual source of this shader\n    assembledSource += coreSource;\n    // Apply any requested shader injections\n    assembledSource = injectShader(assembledSource, stage, mainInjections);\n    return assembledSource;\n}\n/**\n * Pulls together complete source code for either a vertex or a fragment shader\n * adding prologues, requested module chunks, and any final injections.\n * @param gl\n * @param options\n * @returns\n */\nfunction assembleShaderGLSL(platformInfo, options) {\n    const { source, stage, language = 'glsl', modules, defines = {}, hookFunctions = [], inject = {}, prologue = true, log } = options;\n    assert(typeof source === 'string', 'shader source must be a string');\n    const sourceVersion = language === 'glsl' ? getShaderInfo(source).version : -1;\n    const targetVersion = platformInfo.shaderLanguageVersion;\n    const sourceVersionDirective = sourceVersion === 100 ? '#version 100' : '#version 300 es';\n    const sourceLines = source.split('\\n');\n    // TODO : keep all pre-processor statements at the beginning of the shader.\n    const coreSource = sourceLines.slice(1).join('\\n');\n    // Combine Module and Application Defines\n    const allDefines = {};\n    modules.forEach(module => {\n        Object.assign(allDefines, module.defines);\n    });\n    Object.assign(allDefines, defines);\n    // Add platform defines (use these to work around platform-specific bugs and limitations)\n    // Add common defines (GLSL version compatibility, feature detection)\n    // Add precision declaration for fragment shaders\n    let assembledSource = '';\n    switch (language) {\n        case 'wgsl':\n            break;\n        case 'glsl':\n            assembledSource = prologue\n                ? `\\\n${sourceVersionDirective}\n\n// ----- PROLOGUE -------------------------\n${`#define SHADER_TYPE_${stage.toUpperCase()}`}\n\n${getPlatformShaderDefines(platformInfo)}\n${stage === 'fragment' ? FRAGMENT_SHADER_PROLOGUE : ''}\n\n// ----- APPLICATION DEFINES -------------------------\n\n${getApplicationDefines(allDefines)}\n\n`\n                : `${sourceVersionDirective}\n`;\n            break;\n    }\n    const hookFunctionMap = normalizeShaderHooks(hookFunctions);\n    // Add source of dependent modules in resolved order\n    const hookInjections = {};\n    const declInjections = {};\n    const mainInjections = {};\n    for (const key in inject) {\n        const injection = typeof inject[key] === 'string' ? { injection: inject[key], order: 0 } : inject[key];\n        const match = /^(v|f)s:(#)?([\\w-]+)$/.exec(key);\n        if (match) {\n            const hash = match[2];\n            const name = match[3];\n            if (hash) {\n                if (name === 'decl') {\n                    declInjections[key] = [injection];\n                }\n                else {\n                    mainInjections[key] = [injection];\n                }\n            }\n            else {\n                hookInjections[key] = [injection];\n            }\n        }\n        else {\n            // Regex injection\n            mainInjections[key] = [injection];\n        }\n    }\n    for (const module of modules) {\n        if (log) {\n            checkShaderModuleDeprecations(module, coreSource, log);\n        }\n        const moduleSource = getShaderModuleSource(module, stage);\n        // Add the module source, and a #define that declares it presence\n        assembledSource += moduleSource;\n        const injections = module.instance?.normalizedInjections[stage] || {};\n        for (const key in injections) {\n            const match = /^(v|f)s:#([\\w-]+)$/.exec(key);\n            if (match) {\n                const name = match[2];\n                const injectionType = name === 'decl' ? declInjections : mainInjections;\n                injectionType[key] = injectionType[key] || [];\n                injectionType[key].push(injections[key]);\n            }\n            else {\n                hookInjections[key] = hookInjections[key] || [];\n                hookInjections[key].push(injections[key]);\n            }\n        }\n    }\n    assembledSource += '// ----- MAIN SHADER SOURCE -------------------------';\n    // For injectShader\n    assembledSource += INJECT_SHADER_DECLARATIONS;\n    assembledSource = injectShader(assembledSource, stage, declInjections);\n    assembledSource += getShaderHooks(hookFunctionMap[stage], hookInjections);\n    // Add the version directive and actual source of this shader\n    assembledSource += coreSource;\n    // Apply any requested shader injections\n    assembledSource = injectShader(assembledSource, stage, mainInjections);\n    if (language === 'glsl' && sourceVersion !== targetVersion) {\n        assembledSource = transpileGLSLShader(assembledSource, stage);\n    }\n    return assembledSource.trim();\n}\n/**\n * Returns a combined `getUniforms` covering the options for all the modules,\n * the created function will pass on options to the inidividual `getUniforms`\n * function of each shader module and combine the results into one object that\n * can be passed to setUniforms.\n * @param modules\n * @returns\n */\nexport function assembleGetUniforms(modules) {\n    return function getUniforms(opts) {\n        const uniforms = {};\n        for (const module of modules) {\n            // `modules` is already sorted by dependency level. This guarantees that\n            // modules have access to the uniforms that are generated by their dependencies.\n            const moduleUniforms = module.getUniforms?.(opts, uniforms);\n            Object.assign(uniforms, moduleUniforms);\n        }\n        return uniforms;\n    };\n}\n/**\n * NOTE: Removed as id injection defeated caching of shaders\n *\n * Generate \"glslify-compatible\" SHADER_NAME defines\n * These are understood by the GLSL error parsing function\n * If id is provided and no SHADER_NAME constant is present in source, create one\n unction getShaderNameDefine(options: {\n  id?: string;\n  source: string;\n  stage: 'vertex' | 'fragment';\n}): string {\n  const {id, source, stage} = options;\n  const injectShaderName = id && source.indexOf('SHADER_NAME') === -1;\n  return injectShaderName\n    ? `\n#define SHADER_NAME ${id}_${stage}`\n    : '';\n}\n*/\n/** Generates application defines from an object of key value pairs */\nfunction getApplicationDefines(defines = {}) {\n    let sourceText = '';\n    for (const define in defines) {\n        const value = defines[define];\n        if (value || Number.isFinite(value)) {\n            sourceText += `#define ${define.toUpperCase()} ${defines[define]}\\n`;\n        }\n    }\n    return sourceText;\n}\n/** Extracts the source code chunk for the specified shader type from the named shader module */\nexport function getShaderModuleSource(module, stage) {\n    let moduleSource;\n    switch (stage) {\n        case 'vertex':\n            moduleSource = module.vs || '';\n            break;\n        case 'fragment':\n            moduleSource = module.fs || '';\n            break;\n        case 'wgsl':\n            moduleSource = module.source || '';\n            break;\n        default:\n            assert(false);\n    }\n    if (!module.name) {\n        throw new Error('Shader module must have a name');\n    }\n    const moduleName = module.name.toUpperCase().replace(/[^0-9a-z]/gi, '_');\n    let source = `\\\n// ----- MODULE ${module.name} ---------------\n\n`;\n    if (stage !== 'wgsl') {\n        source += `#define MODULE_${moduleName}\\n`;\n    }\n    source += `${moduleSource}\\n`;\n    return source;\n}\n/*\nfunction getHookFunctions(\n  hookFunctions: Record<string, HookFunction>,\n  hookInjections: Record<string, Injection[]>\n): string {\n  let result = '';\n  for (const hookName in hookFunctions) {\n    const hookFunction = hookFunctions[hookName];\n    result += `void ${hookFunction.signature} {\\n`;\n    if (hookFunction.header) {\n      result += `  ${hookFunction.header}`;\n    }\n    if (hookInjections[hookName]) {\n      const injections = hookInjections[hookName];\n      injections.sort((a: {order: number}, b: {order: number}): number => a.order - b.order);\n      for (const injection of injections) {\n        result += `  ${injection.injection}\\n`;\n      }\n    }\n    if (hookFunction.footer) {\n      result += `  ${hookFunction.footer}`;\n    }\n    result += '}\\n';\n  }\n\n  return result;\n}\n\nfunction normalizeHookFunctions(hookFunctions: (string | HookFunction)[]): {\n  vs: Record<string, HookFunction>;\n  fs: Record<string, HookFunction>;\n} {\n  const result: {vs: Record<string, any>; fs: Record<string, any>} = {\n    vs: {},\n    fs: {}\n  };\n\n  hookFunctions.forEach((hookFunction: string | HookFunction) => {\n    let opts: HookFunction;\n    let hook: string;\n    if (typeof hookFunction !== 'string') {\n      opts = hookFunction;\n      hook = opts.hook;\n    } else {\n      opts = {} as HookFunction;\n      hook = hookFunction;\n    }\n    hook = hook.trim();\n    const [stage, signature] = hook.split(':');\n    const name = hook.replace(/\\(.+/, '');\n    if (stage !== 'vs' && stage !== 'fs') {\n      throw new Error(stage);\n    }\n    result[stage][name] = Object.assign(opts, {signature});\n  });\n\n  return result;\n}\n*/\n//# sourceMappingURL=assemble-shaders.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst IFDEF_REGEXP = /^\\s*\\#\\s*ifdef\\s*([a-zA-Z_]+)\\s*$/;\nconst ENDIF_REGEXP = /^\\s*\\#\\s*endif\\s*$/;\nexport function preprocess(source, options) {\n    const lines = source.split('\\n');\n    const output = [];\n    let conditional = true;\n    let currentDefine = null;\n    for (const line of lines) {\n        const matchIf = line.match(IFDEF_REGEXP);\n        const matchEnd = line.match(ENDIF_REGEXP);\n        if (matchIf) {\n            currentDefine = matchIf[1];\n            conditional = Boolean(options?.defines?.[currentDefine]);\n        }\n        else if (matchEnd) {\n            conditional = true;\n        }\n        else if (conditional) {\n            output.push(line);\n        }\n    }\n    return output.join('\\n');\n}\n//# sourceMappingURL=preprocessor.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { initializeShaderModules } from \"./shader-module/shader-module.js\";\nimport { assembleWGSLShader, assembleGLSLShaderPair } from \"./shader-assembly/assemble-shaders.js\";\nimport { preprocess } from \"./preprocessor/preprocessor.js\";\n/**\n * A stateful version of `assembleShaders` that can be used to assemble shaders.\n * Supports setting of default modules and hooks.\n */\nexport class ShaderAssembler {\n    /** Default ShaderAssembler instance */\n    static defaultShaderAssembler;\n    /** Hook functions */\n    _hookFunctions = [];\n    /** Shader modules */\n    _defaultModules = [];\n    /**\n     * A default shader assembler instance - the natural place to register default modules and hooks\n     * @returns\n     */\n    static getDefaultShaderAssembler() {\n        ShaderAssembler.defaultShaderAssembler =\n            ShaderAssembler.defaultShaderAssembler || new ShaderAssembler();\n        return ShaderAssembler.defaultShaderAssembler;\n    }\n    /**\n     * Add a default module that does not have to be provided with every call to assembleShaders()\n     */\n    addDefaultModule(module) {\n        if (!this._defaultModules.find(m => m.name === (typeof module === 'string' ? module : module.name))) {\n            this._defaultModules.push(module);\n        }\n    }\n    /**\n     * Remove a default module\n     */\n    removeDefaultModule(module) {\n        const moduleName = typeof module === 'string' ? module : module.name;\n        this._defaultModules = this._defaultModules.filter(m => m.name !== moduleName);\n    }\n    /**\n     * Register a shader hook\n     * @param hook\n     * @param opts\n     */\n    addShaderHook(hook, opts) {\n        if (opts) {\n            hook = Object.assign(opts, { hook });\n        }\n        this._hookFunctions.push(hook);\n    }\n    /**\n     * Assemble a WGSL unified shader\n     * @param platformInfo\n     * @param props\n     * @returns\n     */\n    assembleWGSLShader(props) {\n        const modules = this._getModuleList(props.modules); // Combine with default modules\n        const hookFunctions = this._hookFunctions; // TODO - combine with default hook functions\n        const { source, getUniforms } = assembleWGSLShader({\n            ...props,\n            // @ts-expect-error\n            source: props.source,\n            modules,\n            hookFunctions\n        });\n        // WGSL does not have built-in preprocessing support (just compile time constants)\n        const preprocessedSource = props.platformInfo.shaderLanguage === 'wgsl' ? preprocess(source) : source;\n        return { source: preprocessedSource, getUniforms, modules };\n    }\n    /**\n     * Assemble a pair of shaders into a single shader program\n     * @param platformInfo\n     * @param props\n     * @returns\n     */\n    assembleGLSLShaderPair(props) {\n        const modules = this._getModuleList(props.modules); // Combine with default modules\n        const hookFunctions = this._hookFunctions; // TODO - combine with default hook functions\n        const assembled = assembleGLSLShaderPair({\n            ...props,\n            // @ts-expect-error\n            vs: props.vs,\n            // @ts-expect-error\n            fs: props.fs,\n            modules,\n            hookFunctions\n        });\n        return { ...assembled, modules };\n    }\n    /**\n     * Dedupe and combine with default modules\n     */\n    _getModuleList(appModules = []) {\n        const modules = new Array(this._defaultModules.length + appModules.length);\n        const seen = {};\n        let count = 0;\n        for (let i = 0, len = this._defaultModules.length; i < len; ++i) {\n            const module = this._defaultModules[i];\n            const name = module.name;\n            modules[count++] = module;\n            seen[name] = true;\n        }\n        for (let i = 0, len = appModules.length; i < len; ++i) {\n            const module = appModules[i];\n            const name = module.name;\n            if (!seen[name]) {\n                modules[count++] = module;\n                seen[name] = true;\n            }\n        }\n        modules.length = count;\n        initializeShaderModules(modules);\n        return modules;\n    }\n}\n//# sourceMappingURL=shader-assembler.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst RADIANS_TO_DEGREES = (1 / Math.PI) * 180;\nconst DEGREES_TO_RADIANS = (1 / 180) * Math.PI;\nconst DEFAULT_CONFIG = {\n    EPSILON: 1e-12,\n    debug: false,\n    precision: 4,\n    printTypes: false,\n    printDegrees: false,\n    printRowMajor: true,\n    _cartographicRadians: false\n};\n// Configuration is truly global as of v3.6 to ensure single config even if multiple copies of math.gl\n// Multiple copies of config can be quite tricky to debug...\nglobalThis.mathgl = globalThis.mathgl || { config: { ...DEFAULT_CONFIG } };\nexport const config = globalThis.mathgl.config;\nexport function configure(options) {\n    // Only copy existing keys\n    Object.assign(config, options);\n    return config;\n}\n/**\n * Formats a value into a string\n * @param value\n * @param param1\n * @returns\n */\nexport function formatValue(value, { precision = config.precision } = {}) {\n    value = round(value);\n    // get rid of trailing zeros\n    return `${parseFloat(value.toPrecision(precision))}`;\n}\n/**\n * Check if value is an \"array\"\n * Returns `true` if value is either an array or a typed array\n * Note: returns `false` for `ArrayBuffer` and `DataView` instances\n * @note isTypedArray and isNumericArray are often more useful in TypeScript\n */\nexport function isArray(value) {\n    return Array.isArray(value) || (ArrayBuffer.isView(value) && !(value instanceof DataView));\n}\nexport function clone(array) {\n    return 'clone' in array ? array.clone() : array.slice();\n}\nexport function toRadians(degrees) {\n    return radians(degrees);\n}\nexport function toDegrees(radians) {\n    return degrees(radians);\n}\nexport function radians(degrees, result) {\n    return map(degrees, (degrees) => degrees * DEGREES_TO_RADIANS, result);\n}\nexport function degrees(radians, result) {\n    return map(radians, (radians) => radians * RADIANS_TO_DEGREES, result);\n}\n/**\n * \"GLSL equivalent\" of `Math.sin`: Works on single values and vectors\n * @deprecated\n */\nexport function sin(radians, result) {\n    return map(radians, (angle) => Math.sin(angle), result);\n}\n/**\n * \"GLSL equivalent\" of `Math.cos`: Works on single values and vectors\n * @deprecated\n */\nexport function cos(radians, result) {\n    return map(radians, (angle) => Math.cos(angle), result);\n}\n/**\n * \"GLSL equivalent\" of `Math.tan`: Works on single values and vectors\n * @deprecated\n */\nexport function tan(radians, result) {\n    return map(radians, (angle) => Math.tan(angle), result);\n}\n/**\n * \"GLSL equivalent\" of `Math.asin`: Works on single values and vectors\n * @deprecated\n */\nexport function asin(radians, result) {\n    return map(radians, (angle) => Math.asin(angle), result);\n}\n/**\n * \"GLSL equivalent\" of `Math.acos`: Works on single values and vectors\n * @deprecated\n */\nexport function acos(radians, result) {\n    return map(radians, (angle) => Math.acos(angle), result);\n}\n/**\n * \"GLSL equivalent\" of `Math.atan`: Works on single values and vectors\n * @deprecated\n */\nexport function atan(radians, result) {\n    return map(radians, (angle) => Math.atan(angle), result);\n}\nexport function clamp(value, min, max) {\n    return map(value, (value) => Math.max(min, Math.min(max, value)));\n}\nexport function lerp(a, b, t) {\n    if (isArray(a)) {\n        return a.map((ai, i) => lerp(ai, b[i], t));\n    }\n    return t * b + (1 - t) * a;\n}\n/* eslint-disable */\n/**\n * Compares any two math objects, using `equals` method if available.\n * @param a\n * @param b\n * @param epsilon\n * @returns\n */\nexport function equals(a, b, epsilon) {\n    const oldEpsilon = config.EPSILON;\n    if (epsilon) {\n        config.EPSILON = epsilon;\n    }\n    try {\n        if (a === b) {\n            return true;\n        }\n        if (isArray(a) && isArray(b)) {\n            if (a.length !== b.length) {\n                return false;\n            }\n            for (let i = 0; i < a.length; ++i) {\n                // eslint-disable-next-line max-depth\n                if (!equals(a[i], b[i])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        if (a && a.equals) {\n            return a.equals(b);\n        }\n        if (b && b.equals) {\n            return b.equals(a);\n        }\n        if (typeof a === 'number' && typeof b === 'number') {\n            return Math.abs(a - b) <= config.EPSILON * Math.max(1, Math.abs(a), Math.abs(b));\n        }\n        return false;\n    }\n    finally {\n        config.EPSILON = oldEpsilon;\n    }\n}\nexport function exactEquals(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (a && typeof a === 'object' && b && typeof b === 'object') {\n        if (a.constructor !== b.constructor) {\n            return false;\n        }\n        if (a.exactEquals) {\n            return a.exactEquals(b);\n        }\n    }\n    if (isArray(a) && isArray(b)) {\n        if (a.length !== b.length) {\n            return false;\n        }\n        for (let i = 0; i < a.length; ++i) {\n            if (!exactEquals(a[i], b[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n}\n/* eslint-enable */\nexport function withEpsilon(epsilon, func) {\n    const oldPrecision = config.EPSILON;\n    config.EPSILON = epsilon;\n    let value;\n    try {\n        value = func();\n    }\n    finally {\n        config.EPSILON = oldPrecision;\n    }\n    return value;\n}\n// HELPERS\nfunction round(value) {\n    return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n// If the array has a clone function, calls it, otherwise returns a copy\nfunction duplicateArray(array) {\n    // @ts-expect-error We check for math.gl class methods\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n    return array.clone ? array.clone() : new Array(array.length);\n}\n// If the argument value is an array, applies the func element wise,\n// otherwise applies func to the argument value\nfunction map(value, func, result) {\n    if (isArray(value)) {\n        const array = value;\n        result = result || duplicateArray(array);\n        for (let i = 0; i < result.length && i < array.length; ++i) {\n            const val = typeof value === 'number' ? value : value[i];\n            result[i] = func(val, i, result);\n        }\n        return result;\n    }\n    return func(value);\n}\n//# sourceMappingURL=common.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { config, formatValue, equals, isArray } from \"../../lib/common.js\";\n/** Base class for vectors and matrices */\nexport class MathArray extends Array {\n    // Common methods\n    /**\n     * Clone the current object\n     * @returns a new copy of this object\n     */\n    clone() {\n        // @ts-expect-error TS2351: Cannot use 'new' with an expression whose type lacks a call or construct signature.\n        return new this.constructor().copy(this); // eslint-disable-line\n    }\n    fromArray(array, offset = 0) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] = array[i + offset];\n        }\n        return this.check();\n    }\n    toArray(targetArray = [], offset = 0) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            targetArray[offset + i] = this[i];\n        }\n        return targetArray;\n    }\n    toObject(targetObject) {\n        return targetObject;\n    }\n    from(arrayOrObject) {\n        return Array.isArray(arrayOrObject)\n            ? this.copy(arrayOrObject)\n            : // @ts-ignore\n                this.fromObject(arrayOrObject);\n    }\n    to(arrayOrObject) {\n        // @ts-ignore\n        if (arrayOrObject === this) {\n            return this;\n        }\n        // @ts-expect-error TS2339: Property 'toObject' does not exist on type 'MathArray'.\n        return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n    }\n    toTarget(target) {\n        return target ? this.to(target) : this;\n    }\n    /** @deprecated */\n    toFloat32Array() {\n        return new Float32Array(this);\n    }\n    toString() {\n        return this.formatString(config);\n    }\n    /** Formats string according to options */\n    formatString(opts) {\n        let string = '';\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n        }\n        return `${opts.printTypes ? this.constructor.name : ''}[${string}]`;\n    }\n    equals(array) {\n        if (!array || this.length !== array.length) {\n            return false;\n        }\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            if (!equals(this[i], array[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    exactEquals(array) {\n        if (!array || this.length !== array.length) {\n            return false;\n        }\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            if (this[i] !== array[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    // Modifiers\n    /** Negates all values in this object */\n    negate() {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] = -this[i];\n        }\n        return this.check();\n    }\n    lerp(a, b, t) {\n        if (t === undefined) {\n            return this.lerp(this, a, b);\n        }\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            const ai = a[i];\n            const endValue = typeof b === 'number' ? b : b[i];\n            this[i] = ai + t * (endValue - ai);\n        }\n        return this.check();\n    }\n    /** Minimal */\n    min(vector) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] = Math.min(vector[i], this[i]);\n        }\n        return this.check();\n    }\n    /** Maximal */\n    max(vector) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] = Math.max(vector[i], this[i]);\n        }\n        return this.check();\n    }\n    clamp(minVector, maxVector) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n        }\n        return this.check();\n    }\n    add(...vectors) {\n        for (const vector of vectors) {\n            for (let i = 0; i < this.ELEMENTS; ++i) {\n                this[i] += vector[i];\n            }\n        }\n        return this.check();\n    }\n    subtract(...vectors) {\n        for (const vector of vectors) {\n            for (let i = 0; i < this.ELEMENTS; ++i) {\n                this[i] -= vector[i];\n            }\n        }\n        return this.check();\n    }\n    scale(scale) {\n        if (typeof scale === 'number') {\n            for (let i = 0; i < this.ELEMENTS; ++i) {\n                this[i] *= scale;\n            }\n        }\n        else {\n            for (let i = 0; i < this.ELEMENTS && i < scale.length; ++i) {\n                this[i] *= scale[i];\n            }\n        }\n        return this.check();\n    }\n    /**\n     * Multiplies all elements by `scale`\n     * Note: `Matrix4.multiplyByScalar` only scales its 3x3 \"minor\"\n     */\n    multiplyByScalar(scalar) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] *= scalar;\n        }\n        return this.check();\n    }\n    // Debug checks\n    /** Throws an error if array length is incorrect or contains illegal values */\n    check() {\n        if (config.debug && !this.validate()) {\n            throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);\n        }\n        return this;\n    }\n    /** Returns false if the array length is incorrect or contains illegal values */\n    validate() {\n        let valid = this.length === this.ELEMENTS;\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            valid = valid && Number.isFinite(this[i]);\n        }\n        return valid;\n    }\n    // three.js compatibility\n    /** @deprecated */\n    sub(a) {\n        return this.subtract(a);\n    }\n    /** @deprecated */\n    setScalar(a) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] = a;\n        }\n        return this.check();\n    }\n    /** @deprecated */\n    addScalar(a) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] += a;\n        }\n        return this.check();\n    }\n    /** @deprecated */\n    subScalar(a) {\n        return this.addScalar(-a);\n    }\n    /** @deprecated */\n    multiplyScalar(scalar) {\n        // Multiplies all elements\n        // `Matrix4.scale` only scales its 3x3 \"minor\"\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] *= scalar;\n        }\n        return this.check();\n    }\n    /** @deprecated */\n    divideScalar(a) {\n        return this.multiplyByScalar(1 / a);\n    }\n    /** @deprecated */\n    clampScalar(min, max) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] = Math.min(Math.max(this[i], min), max);\n        }\n        return this.check();\n    }\n    /** @deprecated */\n    get elements() {\n        return this;\n    }\n}\n//# sourceMappingURL=math-array.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { config } from \"./common.js\";\nexport function validateVector(v, length) {\n    if (v.length !== length) {\n        return false;\n    }\n    // Could be arguments \"array\" (v.every not availasble)\n    for (let i = 0; i < v.length; ++i) {\n        if (!Number.isFinite(v[i])) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function checkNumber(value) {\n    if (!Number.isFinite(value)) {\n        throw new Error(`Invalid number ${JSON.stringify(value)}`);\n    }\n    return value;\n}\nexport function checkVector(v, length, callerName = '') {\n    if (config.debug && !validateVector(v, length)) {\n        throw new Error(`math.gl: ${callerName} some fields set to invalid numbers'`);\n    }\n    return v;\n}\nconst map = {};\nexport function deprecated(method, version) {\n    if (!map[method]) {\n        map[method] = true;\n        // eslint-disable-next-line\n        console.warn(`${method} has been removed in version ${version}, see upgrade guide for more information`);\n    }\n}\n//# sourceMappingURL=validators.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new Error(`math.gl assertion ${message}`);\n    }\n}\n//# sourceMappingURL=assert.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Copyright (c) 2017 Uber Technologies, Inc.\nimport { MathArray } from \"./math-array.js\";\nimport { checkNumber } from \"../../lib/validators.js\";\nimport { assert } from \"../../lib/assert.js\";\n/** Base class for vectors with at least 2 elements */\nexport class Vector extends MathArray {\n    // ACCESSORS\n    get x() {\n        return this[0];\n    }\n    set x(value) {\n        this[0] = checkNumber(value);\n    }\n    get y() {\n        return this[1];\n    }\n    set y(value) {\n        this[1] = checkNumber(value);\n    }\n    /**\n     * Returns the length of the vector from the origin to the point described by this vector\n     *\n     * @note `length` is a reserved word for Arrays, so `v.length()` will return number of elements\n     * Instead we provide `len` and `magnitude`\n     */\n    len() {\n        return Math.sqrt(this.lengthSquared());\n    }\n    /**\n     * Returns the length of the vector from the origin to the point described by this vector\n     */\n    magnitude() {\n        return this.len();\n    }\n    /**\n     * Returns the squared length of the vector from the origin to the point described by this vector\n     */\n    lengthSquared() {\n        let length = 0;\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            length += this[i] * this[i];\n        }\n        return length;\n    }\n    /**\n     * Returns the squared length of the vector from the origin to the point described by this vector\n     */\n    magnitudeSquared() {\n        return this.lengthSquared();\n    }\n    distance(mathArray) {\n        return Math.sqrt(this.distanceSquared(mathArray));\n    }\n    distanceSquared(mathArray) {\n        let length = 0;\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            const dist = this[i] - mathArray[i];\n            length += dist * dist;\n        }\n        return checkNumber(length);\n    }\n    dot(mathArray) {\n        let product = 0;\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            product += this[i] * mathArray[i];\n        }\n        return checkNumber(product);\n    }\n    // MODIFIERS\n    normalize() {\n        const length = this.magnitude();\n        if (length !== 0) {\n            for (let i = 0; i < this.ELEMENTS; ++i) {\n                this[i] /= length;\n            }\n        }\n        return this.check();\n    }\n    multiply(...vectors) {\n        for (const vector of vectors) {\n            for (let i = 0; i < this.ELEMENTS; ++i) {\n                this[i] *= vector[i];\n            }\n        }\n        return this.check();\n    }\n    divide(...vectors) {\n        for (const vector of vectors) {\n            for (let i = 0; i < this.ELEMENTS; ++i) {\n                this[i] /= vector[i];\n            }\n        }\n        return this.check();\n    }\n    // THREE.js compatibility\n    lengthSq() {\n        return this.lengthSquared();\n    }\n    distanceTo(vector) {\n        return this.distance(vector);\n    }\n    distanceToSquared(vector) {\n        return this.distanceSquared(vector);\n    }\n    getComponent(i) {\n        assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n        return checkNumber(this[i]);\n    }\n    setComponent(i, value) {\n        assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n        this[i] = value;\n        return this.check();\n    }\n    addVectors(a, b) {\n        return this.copy(a).add(b);\n    }\n    subVectors(a, b) {\n        return this.copy(a).subtract(b);\n    }\n    multiplyVectors(a, b) {\n        return this.copy(a).multiply(b);\n    }\n    addScaledVector(a, b) {\n        // @ts-expect-error error TS2351: Cannot use 'new' with an expression whose type lacks a call or construct signature.\n        return this.add(new this.constructor(a).multiplyScalar(b));\n    }\n}\n//# sourceMappingURL=vector.js.map","// @eslint-disable\n// @ts-nocheck\n/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport const EPSILON = 0.000001;\nexport let ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport const RANDOM = Math.random;\nexport const ANGLE_ORDER = 'zyx';\n/**\n * Symmetric round\n * see https://www.npmjs.com/package/round-half-up-symmetric#user-content-detailed-background\n *\n * @param {Number} a value to round\n */\nexport function round(a) {\n    if (a >= 0)\n        return Math.round(a);\n    return a % 0.5 === 0 ? Math.floor(a) : Math.round(a);\n}\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\nexport function setMatrixArrayType(type) {\n    ARRAY_TYPE = type;\n}\nconst degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\nexport function toRadian(a) {\n    return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\nexport function equals(a, b) {\n    return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\n//# sourceMappingURL=common.js.map","// @eslint-disable\n// @ts-nocheck\nimport * as glMatrix from './common.js';\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n/**\n * Creates a new, empty vec2\n *\n * @returns a new 2D vector\n */\nexport function create() {\n    const out = new glMatrix.ARRAY_TYPE(2);\n    if (glMatrix.ARRAY_TYPE != Float32Array) {\n        out[0] = 0;\n        out[1] = 0;\n    }\n    return out;\n}\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param a vector to clone\n * @returns a new 2D vector\n */\nexport function clone(a) {\n    const out = new glMatrix.ARRAY_TYPE(2);\n    out[0] = a[0];\n    out[1] = a[1];\n    return out;\n}\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param x X component\n * @param y Y component\n * @returns a new 2D vector\n */\nexport function fromValues(x, y) {\n    const out = new glMatrix.ARRAY_TYPE(2);\n    out[0] = x;\n    out[1] = y;\n    return out;\n}\n/**\n * Copy the values from one vec2 to another\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the source vector\n * @returns {NumericArray} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    return out;\n}\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {NumericArray} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {NumericArray} out\n */\nexport function set(out, x, y) {\n    out[0] = x;\n    out[1] = y;\n    return out;\n}\n/**\n * Adds two vec2's\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {NumericArray} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {NumericArray} out\n */\nexport function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    return out;\n}\n/**\n * Multiplies two vec2's\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {NumericArray} out\n */\nexport function multiply(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    return out;\n}\n/**\n * Divides two vec2's\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {NumericArray} out\n */\nexport function divide(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    return out;\n}\n/**\n * Math.ceil the components of a vec2\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a vector to ceil\n * @returns {NumericArray} out\n */\nexport function ceil(out, a) {\n    out[0] = Math.ceil(a[0]);\n    out[1] = Math.ceil(a[1]);\n    return out;\n}\n/**\n * Math.floor the components of a vec2\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a vector to floor\n * @returns {NumericArray} out\n */\nexport function floor(out, a) {\n    out[0] = Math.floor(a[0]);\n    out[1] = Math.floor(a[1]);\n    return out;\n}\n/**\n * Returns the minimum of two vec2's\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {NumericArray} out\n */\nexport function min(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    return out;\n}\n/**\n * Returns the maximum of two vec2's\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {NumericArray} out\n */\nexport function max(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    return out;\n}\n/**\n * symmetric round the components of a vec2\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a vector to round\n * @returns {NumericArray} out\n */\nexport function round(out, a) {\n    out[0] = glMatrix.round(a[0]);\n    out[1] = glMatrix.round(a[1]);\n    return out;\n}\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {NumericArray} out\n */\nexport function scale(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    return out;\n}\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {NumericArray} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n    out[0] = a[0] + b[0] * scale;\n    out[1] = a[1] + b[1] * scale;\n    return out;\n}\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n    const x = b[0] - a[0];\n    const y = b[1] - a[1];\n    return Math.sqrt(x * x + y * y);\n}\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n    const x = b[0] - a[0];\n    const y = b[1] - a[1];\n    return x * x + y * y;\n}\n/**\n * Calculates the length of a vec2\n *\n * @param {Readonly<NumericArray>} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n    const x = a[0];\n    const y = a[1];\n    return Math.sqrt(x * x + y * y);\n}\n/**\n * Calculates the squared length of a vec2\n *\n * @param {Readonly<NumericArray>} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n    const x = a[0];\n    const y = a[1];\n    return x * x + y * y;\n}\n/**\n * Negates the components of a vec2\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a vector to negate\n * @returns {NumericArray} out\n */\nexport function negate(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    return out;\n}\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a vector to invert\n * @returns {NumericArray} out\n */\nexport function inverse(out, a) {\n    out[0] = 1.0 / a[0];\n    out[1] = 1.0 / a[1];\n    return out;\n}\n/**\n * Normalize a vec2\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a vector to normalize\n * @returns {NumericArray} out\n */\nexport function normalize(out, a) {\n    const x = a[0];\n    const y = a[1];\n    let len = x * x + y * y;\n    if (len > 0) {\n        // TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len);\n    }\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    return out;\n}\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n    return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {vec3} out\n */\nexport function cross(out, a, b) {\n    const z = a[0] * b[1] - a[1] * b[0];\n    out[0] = out[1] = 0;\n    out[2] = z;\n    return out;\n}\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {NumericArray} out\n */\nexport function lerp(out, a, b, t) {\n    const ax = a[0];\n    const ay = a[1];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {NumericArray} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If omitted, a unit vector will be returned\n * @returns {NumericArray} out\n */\nexport function random(out, scale) {\n    scale = scale === undefined ? 1.0 : scale;\n    const r = glMatrix.RANDOM() * 2.0 * Math.PI;\n    out[0] = Math.cos(r) * scale;\n    out[1] = Math.sin(r) * scale;\n    return out;\n}\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {NumericArray} out\n */\nexport function transformMat2(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    out[0] = m[0] * x + m[2] * y;\n    out[1] = m[1] * x + m[3] * y;\n    return out;\n}\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {NumericArray} out\n */\nexport function transformMat2d(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    out[0] = m[0] * x + m[2] * y + m[4];\n    out[1] = m[1] * x + m[3] * y + m[5];\n    return out;\n}\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {NumericArray} out\n */\nexport function transformMat3(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    out[0] = m[0] * x + m[3] * y + m[6];\n    out[1] = m[1] * x + m[4] * y + m[7];\n    return out;\n}\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {NumericArray} out\n */\nexport function transformMat4(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    out[0] = m[0] * x + m[4] * y + m[12];\n    out[1] = m[1] * x + m[5] * y + m[13];\n    return out;\n}\n/**\n * Rotate a 2D vector\n * @param {NumericArray} out The receiving vec2\n * @param {Readonly<NumericArray>} a The vec2 point to rotate\n * @param {Readonly<NumericArray>} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {NumericArray} out\n */\nexport function rotate(out, a, b, rad) {\n    // Translate point to the origin\n    const p0 = a[0] - b[0];\n    const p1 = a[1] - b[1];\n    const sinC = Math.sin(rad);\n    const cosC = Math.cos(rad);\n    // perform rotation and translate to correct position\n    out[0] = p0 * cosC - p1 * sinC + b[0];\n    out[1] = p0 * sinC + p1 * cosC + b[1];\n    return out;\n}\n/**\n * Get the angle between two 2D vectors\n * @param {Readonly<NumericArray>} a The first operand\n * @param {Readonly<NumericArray>} b The second operand\n * @returns {Number} The angle in radians\n */\nexport function angle(a, b) {\n    const x1 = a[0];\n    const y1 = a[1];\n    const x2 = b[0];\n    const y2 = b[1];\n    // mag is the product of the magnitudes of a and b\n    const mag = Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2));\n    // mag &&.. short circuits if mag == 0\n    const cosine = mag && (x1 * x2 + y1 * y2) / mag;\n    // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n    return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec2 to zero\n *\n * @param {NumericArray} out the receiving vector\n * @returns {NumericArray} out\n */\nexport function zero(out) {\n    out[0] = 0.0;\n    out[1] = 0.0;\n    return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {Readonly<NumericArray>} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n    return `vec2(${a[0]}, ${a[1]})`;\n}\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {Readonly<NumericArray>} a The first vector.\n * @param {Readonly<NumericArray>} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n    return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {Readonly<NumericArray>} a The first vector.\n * @param {Readonly<NumericArray>} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n    const a0 = a[0];\n    const a1 = a[1];\n    const b0 = b[0];\n    const b1 = b[1];\n    return (Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n        Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)));\n}\n/**\n * Alias for {@link vec2.length}\n * @function\n */\nexport const len = length;\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\nexport const sub = subtract;\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\nexport const mul = multiply;\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\nexport const div = divide;\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\nexport const dist = distance;\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\nexport const sqrDist = squaredDistance;\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport const forEach = (function () {\n    const vec = create();\n    return function (a, stride, offset, count, fn, arg) {\n        let i;\n        let l;\n        if (!stride) {\n            stride = 2;\n        }\n        if (!offset) {\n            offset = 0;\n        }\n        if (count) {\n            l = Math.min(count * stride + offset, a.length);\n        }\n        else {\n            l = a.length;\n        }\n        for (i = offset; i < l; i += stride) {\n            vec[0] = a[i];\n            vec[1] = a[i + 1];\n            fn(vec, vec, arg);\n            a[i] = vec[0];\n            a[i + 1] = vec[1];\n        }\n        return a;\n    };\n})();\n//# sourceMappingURL=vec2.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// vec2 additions\nexport function vec2_transformMat4AsVector(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    const w = m[3] * x + m[7] * y || 1.0;\n    out[0] = (m[0] * x + m[4] * y) / w;\n    out[1] = (m[1] * x + m[5] * y) / w;\n    return out;\n}\n// vec3 additions\n// Transform as vector, only uses 3x3 minor matrix\nexport function vec3_transformMat4AsVector(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    const w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n    out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n    out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n    out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n    return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    out[0] = m[0] * x + m[2] * y;\n    out[1] = m[1] * x + m[3] * y;\n    out[2] = a[2];\n    return out;\n}\n// vec4 additions\nexport function vec4_transformMat2(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    out[0] = m[0] * x + m[2] * y;\n    out[1] = m[1] * x + m[3] * y;\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    out[0] = m[0] * x + m[3] * y + m[6] * z;\n    out[1] = m[1] * x + m[4] * y + m[7] * z;\n    out[2] = m[2] * x + m[5] * y + m[8] * z;\n    out[3] = a[3];\n    return out;\n}\n//# sourceMappingURL=gl-matrix-extras.js.map","// @eslint-disable\n// @ts-nocheck\nimport * as glMatrix from './common.js';\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\nexport function create() {\n    const out = new glMatrix.ARRAY_TYPE(3);\n    if (glMatrix.ARRAY_TYPE != Float32Array) {\n        out[0] = 0;\n        out[1] = 0;\n        out[2] = 0;\n    }\n    return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\nexport function clone(a) {\n    const out = new glMatrix.ARRAY_TYPE(3);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    return Math.sqrt(x * x + y * y + z * z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\nexport function fromValues(x, y, z) {\n    const out = new glMatrix.ARRAY_TYPE(3);\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nexport function set(out, x, y, z) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function multiply(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    out[2] = a[2] * b[2];\n    return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function divide(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    out[2] = a[2] / b[2];\n    return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\nexport function ceil(out, a) {\n    out[0] = Math.ceil(a[0]);\n    out[1] = Math.ceil(a[1]);\n    out[2] = Math.ceil(a[2]);\n    return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\nexport function floor(out, a) {\n    out[0] = Math.floor(a[0]);\n    out[1] = Math.floor(a[1]);\n    out[2] = Math.floor(a[2]);\n    return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function min(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    out[2] = Math.min(a[2], b[2]);\n    return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function max(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    out[2] = Math.max(a[2], b[2]);\n    return out;\n}\n/**\n * symmetric round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\nexport function round(out, a) {\n    out[0] = glMatrix.round(a[0]);\n    out[1] = glMatrix.round(a[1]);\n    out[2] = glMatrix.round(a[2]);\n    return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nexport function scale(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n    out[0] = a[0] + b[0] * scale;\n    out[1] = a[1] + b[1] * scale;\n    out[2] = a[2] + b[2] * scale;\n    return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n    const x = b[0] - a[0];\n    const y = b[1] - a[1];\n    const z = b[2] - a[2];\n    return Math.sqrt(x * x + y * y + z * z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n    const x = b[0] - a[0];\n    const y = b[1] - a[1];\n    const z = b[2] - a[2];\n    return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\nexport function negate(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\nexport function inverse(out, a) {\n    out[0] = 1.0 / a[0];\n    out[1] = 1.0 / a[1];\n    out[2] = 1.0 / a[2];\n    return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\nexport function normalize(out, a) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    let len = x * x + y * y + z * z;\n    if (len > 0) {\n        // TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len);\n    }\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n    return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function cross(out, a, b) {\n    const ax = a[0];\n    const ay = a[1];\n    const az = a[2];\n    const bx = b[0];\n    const by = b[1];\n    const bz = b[2];\n    out[0] = ay * bz - az * by;\n    out[1] = az * bx - ax * bz;\n    out[2] = ax * by - ay * bx;\n    return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function lerp(out, a, b, t) {\n    const ax = a[0];\n    const ay = a[1];\n    const az = a[2];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    return out;\n}\n/**\n * Performs a spherical linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function slerp(out, a, b, t) {\n    const angle = Math.acos(Math.min(Math.max(dot(a, b), -1), 1));\n    const sinTotal = Math.sin(angle);\n    const ratioA = Math.sin((1 - t) * angle) / sinTotal;\n    const ratioB = Math.sin(t * angle) / sinTotal;\n    out[0] = ratioA * a[0] + ratioB * b[0];\n    out[1] = ratioA * a[1] + ratioB * b[1];\n    out[2] = ratioA * a[2] + ratioB * b[2];\n    return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function hermite(out, a, b, c, d, t) {\n    const factorTimes2 = t * t;\n    const factor1 = factorTimes2 * (2 * t - 3) + 1;\n    const factor2 = factorTimes2 * (t - 2) + t;\n    const factor3 = factorTimes2 * (t - 1);\n    const factor4 = factorTimes2 * (3 - 2 * t);\n    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n    return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function bezier(out, a, b, c, d, t) {\n    const inverseFactor = 1 - t;\n    const inverseFactorTimesTwo = inverseFactor * inverseFactor;\n    const factorTimes2 = t * t;\n    const factor1 = inverseFactorTimesTwo * inverseFactor;\n    const factor2 = 3 * t * inverseFactorTimesTwo;\n    const factor3 = 3 * factorTimes2 * inverseFactor;\n    const factor4 = factorTimes2 * t;\n    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n    return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If omitted, a unit vector will be returned\n * @returns {vec3} out\n */\nexport function random(out, scale) {\n    scale = scale === undefined ? 1.0 : scale;\n    const r = glMatrix.RANDOM() * 2.0 * Math.PI;\n    const z = glMatrix.RANDOM() * 2.0 - 1.0;\n    const zScale = Math.sqrt(1.0 - z * z) * scale;\n    out[0] = Math.cos(r) * zScale;\n    out[1] = Math.sin(r) * zScale;\n    out[2] = z * scale;\n    return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat4(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    let w = m[3] * x + m[7] * y + m[11] * z + m[15];\n    w = w || 1.0;\n    out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n    out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n    out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n    return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat3(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    out[0] = x * m[0] + y * m[3] + z * m[6];\n    out[1] = x * m[1] + y * m[4] + z * m[7];\n    out[2] = x * m[2] + y * m[5] + z * m[8];\n    return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\nexport function transformQuat(out, a, q) {\n    // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n    const qx = q[0];\n    const qy = q[1];\n    const qz = q[2];\n    const qw = q[3];\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    // var qvec = [qx, qy, qz];\n    // var uv = vec3.cross([], qvec, a);\n    let uvx = qy * z - qz * y;\n    let uvy = qz * x - qx * z;\n    let uvz = qx * y - qy * x;\n    // var uuv = vec3.cross([], qvec, uv);\n    let uuvx = qy * uvz - qz * uvy;\n    let uuvy = qz * uvx - qx * uvz;\n    let uuvz = qx * uvy - qy * uvx;\n    // vec3.scale(uv, uv, 2 * w);\n    const w2 = qw * 2;\n    uvx *= w2;\n    uvy *= w2;\n    uvz *= w2;\n    // vec3.scale(uuv, uuv, 2);\n    uuvx *= 2;\n    uuvy *= 2;\n    uuvz *= 2;\n    // return vec3.add(out, a, vec3.add(out, uv, uuv));\n    out[0] = x + uvx + uuvx;\n    out[1] = y + uvy + uuvy;\n    out[2] = z + uvz + uuvz;\n    return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\nexport function rotateX(out, a, b, rad) {\n    const p = [];\n    const r = [];\n    // Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n    // perform rotation\n    r[0] = p[0];\n    r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n    r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad);\n    // translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n    return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\nexport function rotateY(out, a, b, rad) {\n    const p = [];\n    const r = [];\n    // Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n    // perform rotation\n    r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n    r[1] = p[1];\n    r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad);\n    // translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n    return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\nexport function rotateZ(out, a, b, rad) {\n    const p = [];\n    const r = [];\n    // Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n    // perform rotation\n    r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n    r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n    r[2] = p[2];\n    // translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n    return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\nexport function angle(a, b) {\n    const ax = a[0];\n    const ay = a[1];\n    const az = a[2];\n    const bx = b[0];\n    const by = b[1];\n    const bz = b[2];\n    const mag = Math.sqrt((ax * ax + ay * ay + az * az) * (bx * bx + by * by + bz * bz));\n    const cosine = mag && dot(a, b) / mag;\n    return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\nexport function zero(out) {\n    out[0] = 0.0;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n    return `vec3(${a[0]}, ${a[1]}, ${a[2]})`;\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n    const a0 = a[0];\n    const a1 = a[1];\n    const a2 = a[2];\n    const b0 = b[0];\n    const b1 = b[1];\n    const b2 = b[2];\n    return (Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n        Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n        Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\nexport const sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\nexport const mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\nexport const div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\nexport const dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\nexport const sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\nexport const len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport const forEach = (function () {\n    const vec = create();\n    return function (a, stride, offset, count, fn, arg) {\n        let i;\n        let l;\n        if (!stride) {\n            stride = 3;\n        }\n        if (!offset) {\n            offset = 0;\n        }\n        if (count) {\n            l = Math.min(count * stride + offset, a.length);\n        }\n        else {\n            l = a.length;\n        }\n        for (i = offset; i < l; i += stride) {\n            vec[0] = a[i];\n            vec[1] = a[i + 1];\n            vec[2] = a[i + 2];\n            fn(vec, vec, arg);\n            a[i] = vec[0];\n            a[i + 1] = vec[1];\n            a[i + 2] = vec[2];\n        }\n        return a;\n    };\n})();\n//# sourceMappingURL=vec3.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Copyright (c) 2017 Uber Technologies, Inc.\nimport { Vector } from \"./base/vector.js\";\nimport { config, isArray } from \"../lib/common.js\";\nimport { checkNumber } from \"../lib/validators.js\";\n// @ts-ignore gl-matrix types\nimport { angle as vec3_angle, cross as vec3_cross, rotateX as vec3_rotateX, rotateY as vec3_rotateY, rotateZ as vec3_rotateZ, transformMat4 as vec3_transformMat4, transformMat3 as vec3_transformMat3, transformQuat as vec3_transformQuat } from \"../gl-matrix/vec3.js\";\n/* eslint-disable camelcase */\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from \"../lib/gl-matrix-extras.js\";\nconst ORIGIN = [0, 0, 0];\nlet ZERO;\n/**\n * Three-element vector class with common linear algebra operations.\n * Subclass of Array<number> meaning that it is highly compatible with other libraries\n */\nexport class Vector3 extends Vector {\n    static get ZERO() {\n        if (!ZERO) {\n            ZERO = new Vector3(0, 0, 0);\n            Object.freeze(ZERO);\n        }\n        return ZERO;\n    }\n    /**\n     * @class\n     * @param x\n     * @param y\n     * @param z\n     */\n    constructor(x = 0, y = 0, z = 0) {\n        // PERF NOTE: initialize elements as double precision numbers\n        super(-0, -0, -0);\n        if (arguments.length === 1 && isArray(x)) {\n            this.copy(x);\n        }\n        else {\n            // this.set(x, y, z);\n            if (config.debug) {\n                checkNumber(x);\n                checkNumber(y);\n                checkNumber(z);\n            }\n            // @ts-expect-error TS2412: Property '0' of type 'number | [number, number, number]' is not assignable to numeric index type 'number'\n            this[0] = x;\n            this[1] = y;\n            this[2] = z;\n        }\n    }\n    set(x, y, z) {\n        this[0] = x;\n        this[1] = y;\n        this[2] = z;\n        return this.check();\n    }\n    copy(array) {\n        this[0] = array[0];\n        this[1] = array[1];\n        this[2] = array[2];\n        return this.check();\n    }\n    fromObject(object) {\n        if (config.debug) {\n            checkNumber(object.x);\n            checkNumber(object.y);\n            checkNumber(object.z);\n        }\n        this[0] = object.x;\n        this[1] = object.y;\n        this[2] = object.z;\n        return this.check();\n    }\n    toObject(object) {\n        object.x = this[0];\n        object.y = this[1];\n        object.z = this[2];\n        return object;\n    }\n    // Getters/setters\n    get ELEMENTS() {\n        return 3;\n    }\n    get z() {\n        return this[2];\n    }\n    set z(value) {\n        this[2] = checkNumber(value);\n    }\n    // ACCESSORS\n    angle(vector) {\n        return vec3_angle(this, vector);\n    }\n    // MODIFIERS\n    cross(vector) {\n        vec3_cross(this, this, vector);\n        return this.check();\n    }\n    rotateX({ radians, origin = ORIGIN }) {\n        vec3_rotateX(this, this, origin, radians);\n        return this.check();\n    }\n    rotateY({ radians, origin = ORIGIN }) {\n        vec3_rotateY(this, this, origin, radians);\n        return this.check();\n    }\n    rotateZ({ radians, origin = ORIGIN }) {\n        vec3_rotateZ(this, this, origin, radians);\n        return this.check();\n    }\n    // Transforms\n    // transforms as point (4th component is implicitly 1)\n    transform(matrix4) {\n        return this.transformAsPoint(matrix4);\n    }\n    // transforms as point (4th component is implicitly 1)\n    transformAsPoint(matrix4) {\n        vec3_transformMat4(this, this, matrix4);\n        return this.check();\n    }\n    // transforms as vector  (4th component is implicitly 0, ignores translation. slightly faster)\n    transformAsVector(matrix4) {\n        vec3_transformMat4AsVector(this, this, matrix4);\n        return this.check();\n    }\n    transformByMatrix3(matrix3) {\n        vec3_transformMat3(this, this, matrix3);\n        return this.check();\n    }\n    transformByMatrix2(matrix2) {\n        vec3_transformMat2(this, this, matrix2);\n        return this.check();\n    }\n    transformByQuaternion(quaternion) {\n        vec3_transformQuat(this, this, quaternion);\n        return this.check();\n    }\n}\n//# sourceMappingURL=vector3.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Copyright (c) 2017 Uber Technologies, Inc.\nimport { MathArray } from \"./math-array.js\";\nimport { checkNumber } from \"../../lib/validators.js\";\nimport { config } from \"../../lib/common.js\";\n/** Base class for matrices */\nexport class Matrix extends MathArray {\n    // fromObject(object) {\n    //   const array = object.elements;\n    //   return this.fromRowMajor(array);\n    // }\n    // toObject(object) {\n    //   const array = object.elements;\n    //   this.toRowMajor(array);\n    //   return object;\n    // }\n    // TODO better override formatString?\n    toString() {\n        let string = '[';\n        if (config.printRowMajor) {\n            string += 'row-major:';\n            for (let row = 0; row < this.RANK; ++row) {\n                for (let col = 0; col < this.RANK; ++col) {\n                    string += ` ${this[col * this.RANK + row]}`;\n                }\n            }\n        }\n        else {\n            string += 'column-major:';\n            for (let i = 0; i < this.ELEMENTS; ++i) {\n                string += ` ${this[i]}`;\n            }\n        }\n        string += ']';\n        return string;\n    }\n    getElementIndex(row, col) {\n        return col * this.RANK + row;\n    }\n    // By default assumes row major indices\n    getElement(row, col) {\n        return this[col * this.RANK + row];\n    }\n    // By default assumes row major indices\n    setElement(row, col, value) {\n        this[col * this.RANK + row] = checkNumber(value);\n        return this;\n    }\n    getColumn(columnIndex, result = new Array(this.RANK).fill(-0)) {\n        const firstIndex = columnIndex * this.RANK;\n        for (let i = 0; i < this.RANK; ++i) {\n            result[i] = this[firstIndex + i];\n        }\n        return result;\n    }\n    setColumn(columnIndex, columnVector) {\n        const firstIndex = columnIndex * this.RANK;\n        for (let i = 0; i < this.RANK; ++i) {\n            this[firstIndex + i] = columnVector[i];\n        }\n        return this;\n    }\n}\n//# sourceMappingURL=matrix.js.map","// @eslint-disable\n// @ts-nocheck\nimport * as glMatrix from './common.js';\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n/**\n * Creates a new identity mat4\n *\n * @returns a new 4x4 matrix\n */\nexport function create() {\n    const out = new glMatrix.ARRAY_TYPE(16);\n    if (glMatrix.ARRAY_TYPE != Float32Array) {\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = 0;\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n    }\n    out[0] = 1;\n    out[5] = 1;\n    out[10] = 1;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\nexport function clone(a) {\n    const out = new glMatrix.ARRAY_TYPE(16);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    const out = new glMatrix.ARRAY_TYPE(16);\n    out[0] = m00;\n    out[1] = m01;\n    out[2] = m02;\n    out[3] = m03;\n    out[4] = m10;\n    out[5] = m11;\n    out[6] = m12;\n    out[7] = m13;\n    out[8] = m20;\n    out[9] = m21;\n    out[10] = m22;\n    out[11] = m23;\n    out[12] = m30;\n    out[13] = m31;\n    out[14] = m32;\n    out[15] = m33;\n    return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    out[0] = m00;\n    out[1] = m01;\n    out[2] = m02;\n    out[3] = m03;\n    out[4] = m10;\n    out[5] = m11;\n    out[6] = m12;\n    out[7] = m13;\n    out[8] = m20;\n    out[9] = m21;\n    out[10] = m22;\n    out[11] = m23;\n    out[12] = m30;\n    out[13] = m31;\n    out[14] = m32;\n    out[15] = m33;\n    return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nexport function identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function transpose(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        const a01 = a[1];\n        const a02 = a[2];\n        const a03 = a[3];\n        const a12 = a[6];\n        const a13 = a[7];\n        const a23 = a[11];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    }\n    else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n    return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function invert(out, a) {\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a03 = a[3];\n    const a10 = a[4];\n    const a11 = a[5];\n    const a12 = a[6];\n    const a13 = a[7];\n    const a20 = a[8];\n    const a21 = a[9];\n    const a22 = a[10];\n    const a23 = a[11];\n    const a30 = a[12];\n    const a31 = a[13];\n    const a32 = a[14];\n    const a33 = a[15];\n    const b00 = a00 * a11 - a01 * a10;\n    const b01 = a00 * a12 - a02 * a10;\n    const b02 = a00 * a13 - a03 * a10;\n    const b03 = a01 * a12 - a02 * a11;\n    const b04 = a01 * a13 - a03 * a11;\n    const b05 = a02 * a13 - a03 * a12;\n    const b06 = a20 * a31 - a21 * a30;\n    const b07 = a20 * a32 - a22 * a30;\n    const b08 = a20 * a33 - a23 * a30;\n    const b09 = a21 * a32 - a22 * a31;\n    const b10 = a21 * a33 - a23 * a31;\n    const b11 = a22 * a33 - a23 * a32;\n    // Calculate the determinant\n    let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n    return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function adjoint(out, a) {\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a03 = a[3];\n    const a10 = a[4];\n    const a11 = a[5];\n    const a12 = a[6];\n    const a13 = a[7];\n    const a20 = a[8];\n    const a21 = a[9];\n    const a22 = a[10];\n    const a23 = a[11];\n    const a30 = a[12];\n    const a31 = a[13];\n    const a32 = a[14];\n    const a33 = a[15];\n    const b00 = a00 * a11 - a01 * a10;\n    const b01 = a00 * a12 - a02 * a10;\n    const b02 = a00 * a13 - a03 * a10;\n    const b03 = a01 * a12 - a02 * a11;\n    const b04 = a01 * a13 - a03 * a11;\n    const b05 = a02 * a13 - a03 * a12;\n    const b06 = a20 * a31 - a21 * a30;\n    const b07 = a20 * a32 - a22 * a30;\n    const b08 = a20 * a33 - a23 * a30;\n    const b09 = a21 * a32 - a22 * a31;\n    const b10 = a21 * a33 - a23 * a31;\n    const b11 = a22 * a33 - a23 * a32;\n    out[0] = a11 * b11 - a12 * b10 + a13 * b09;\n    out[1] = a02 * b10 - a01 * b11 - a03 * b09;\n    out[2] = a31 * b05 - a32 * b04 + a33 * b03;\n    out[3] = a22 * b04 - a21 * b05 - a23 * b03;\n    out[4] = a12 * b08 - a10 * b11 - a13 * b07;\n    out[5] = a00 * b11 - a02 * b08 + a03 * b07;\n    out[6] = a32 * b02 - a30 * b05 - a33 * b01;\n    out[7] = a20 * b05 - a22 * b02 + a23 * b01;\n    out[8] = a10 * b10 - a11 * b08 + a13 * b06;\n    out[9] = a01 * b08 - a00 * b10 - a03 * b06;\n    out[10] = a30 * b04 - a31 * b02 + a33 * b00;\n    out[11] = a21 * b02 - a20 * b04 - a23 * b00;\n    out[12] = a11 * b07 - a10 * b09 - a12 * b06;\n    out[13] = a00 * b09 - a01 * b07 + a02 * b06;\n    out[14] = a31 * b01 - a30 * b03 - a32 * b00;\n    out[15] = a20 * b03 - a21 * b01 + a22 * b00;\n    return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a03 = a[3];\n    const a10 = a[4];\n    const a11 = a[5];\n    const a12 = a[6];\n    const a13 = a[7];\n    const a20 = a[8];\n    const a21 = a[9];\n    const a22 = a[10];\n    const a23 = a[11];\n    const a30 = a[12];\n    const a31 = a[13];\n    const a32 = a[14];\n    const a33 = a[15];\n    const b0 = a00 * a11 - a01 * a10;\n    const b1 = a00 * a12 - a02 * a10;\n    const b2 = a01 * a12 - a02 * a11;\n    const b3 = a20 * a31 - a21 * a30;\n    const b4 = a20 * a32 - a22 * a30;\n    const b5 = a21 * a32 - a22 * a31;\n    const b6 = a00 * b5 - a01 * b4 + a02 * b3;\n    const b7 = a10 * b5 - a11 * b4 + a12 * b3;\n    const b8 = a20 * b2 - a21 * b1 + a22 * b0;\n    const b9 = a30 * b2 - a31 * b1 + a32 * b0;\n    // Calculate the determinant\n    return a13 * b6 - a03 * b7 + a33 * b8 - a23 * b9;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\nexport function multiply(out, a, b) {\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a03 = a[3];\n    const a10 = a[4];\n    const a11 = a[5];\n    const a12 = a[6];\n    const a13 = a[7];\n    const a20 = a[8];\n    const a21 = a[9];\n    const a22 = a[10];\n    const a23 = a[11];\n    const a30 = a[12];\n    const a31 = a[13];\n    const a32 = a[14];\n    const a33 = a[15];\n    // Cache only the current line of the second matrix\n    let b0 = b[0];\n    let b1 = b[1];\n    let b2 = b[2];\n    let b3 = b[3];\n    out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    b0 = b[4];\n    b1 = b[5];\n    b2 = b[6];\n    b3 = b[7];\n    out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    b0 = b[8];\n    b1 = b[9];\n    b2 = b[10];\n    b3 = b[11];\n    out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    b0 = b[12];\n    b1 = b[13];\n    b2 = b[14];\n    b3 = b[15];\n    out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\nexport function translate(out, a, v) {\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n    let a00;\n    let a01;\n    let a02;\n    let a03;\n    let a10;\n    let a11;\n    let a12;\n    let a13;\n    let a20;\n    let a21;\n    let a22;\n    let a23;\n    if (a === out) {\n        out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n        out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n        out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n        out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    }\n    else {\n        a00 = a[0];\n        a01 = a[1];\n        a02 = a[2];\n        a03 = a[3];\n        a10 = a[4];\n        a11 = a[5];\n        a12 = a[6];\n        a13 = a[7];\n        a20 = a[8];\n        a21 = a[9];\n        a22 = a[10];\n        a23 = a[11];\n        out[0] = a00;\n        out[1] = a01;\n        out[2] = a02;\n        out[3] = a03;\n        out[4] = a10;\n        out[5] = a11;\n        out[6] = a12;\n        out[7] = a13;\n        out[8] = a20;\n        out[9] = a21;\n        out[10] = a22;\n        out[11] = a23;\n        out[12] = a00 * x + a10 * y + a20 * z + a[12];\n        out[13] = a01 * x + a11 * y + a21 * z + a[13];\n        out[14] = a02 * x + a12 * y + a22 * z + a[14];\n        out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n    return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nexport function scale(out, a, v) {\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n    out[0] = a[0] * x;\n    out[1] = a[1] * x;\n    out[2] = a[2] * x;\n    out[3] = a[3] * x;\n    out[4] = a[4] * y;\n    out[5] = a[5] * y;\n    out[6] = a[6] * y;\n    out[7] = a[7] * y;\n    out[8] = a[8] * z;\n    out[9] = a[9] * z;\n    out[10] = a[10] * z;\n    out[11] = a[11] * z;\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function rotate(out, a, rad, axis) {\n    let x = axis[0];\n    let y = axis[1];\n    let z = axis[2];\n    let len = Math.sqrt(x * x + y * y + z * z);\n    let c;\n    let s;\n    let t;\n    let a00;\n    let a01;\n    let a02;\n    let a03;\n    let a10;\n    let a11;\n    let a12;\n    let a13;\n    let a20;\n    let a21;\n    let a22;\n    let a23;\n    let b00;\n    let b01;\n    let b02;\n    let b10;\n    let b11;\n    let b12;\n    let b20;\n    let b21;\n    let b22;\n    if (len < glMatrix.EPSILON) {\n        return null;\n    }\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    // Construct the elements of the rotation matrix\n    b00 = x * x * t + c;\n    b01 = y * x * t + z * s;\n    b02 = z * x * t - y * s;\n    b10 = x * y * t - z * s;\n    b11 = y * y * t + c;\n    b12 = z * y * t + x * s;\n    b20 = x * z * t + y * s;\n    b21 = y * z * t - x * s;\n    b22 = z * z * t + c;\n    // Perform rotation-specific matrix multiplication\n    out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n    out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n    out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n    out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n    out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n    out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n    out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n    out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n    out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n    out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n    out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n    out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged last row\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateX(out, a, rad) {\n    const s = Math.sin(rad);\n    const c = Math.cos(rad);\n    const a10 = a[4];\n    const a11 = a[5];\n    const a12 = a[6];\n    const a13 = a[7];\n    const a20 = a[8];\n    const a21 = a[9];\n    const a22 = a[10];\n    const a23 = a[11];\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged rows\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    // Perform axis-specific matrix multiplication\n    out[4] = a10 * c + a20 * s;\n    out[5] = a11 * c + a21 * s;\n    out[6] = a12 * c + a22 * s;\n    out[7] = a13 * c + a23 * s;\n    out[8] = a20 * c - a10 * s;\n    out[9] = a21 * c - a11 * s;\n    out[10] = a22 * c - a12 * s;\n    out[11] = a23 * c - a13 * s;\n    return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateY(out, a, rad) {\n    const s = Math.sin(rad);\n    const c = Math.cos(rad);\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a03 = a[3];\n    const a20 = a[8];\n    const a21 = a[9];\n    const a22 = a[10];\n    const a23 = a[11];\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged rows\n        out[4] = a[4];\n        out[5] = a[5];\n        out[6] = a[6];\n        out[7] = a[7];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c - a20 * s;\n    out[1] = a01 * c - a21 * s;\n    out[2] = a02 * c - a22 * s;\n    out[3] = a03 * c - a23 * s;\n    out[8] = a00 * s + a20 * c;\n    out[9] = a01 * s + a21 * c;\n    out[10] = a02 * s + a22 * c;\n    out[11] = a03 * s + a23 * c;\n    return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateZ(out, a, rad) {\n    const s = Math.sin(rad);\n    const c = Math.cos(rad);\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a03 = a[3];\n    const a10 = a[4];\n    const a11 = a[5];\n    const a12 = a[6];\n    const a13 = a[7];\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged last row\n        out[8] = a[8];\n        out[9] = a[9];\n        out[10] = a[10];\n        out[11] = a[11];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c + a10 * s;\n    out[1] = a01 * c + a11 * s;\n    out[2] = a02 * c + a12 * s;\n    out[3] = a03 * c + a13 * s;\n    out[4] = a10 * c - a00 * s;\n    out[5] = a11 * c - a01 * s;\n    out[6] = a12 * c - a02 * s;\n    out[7] = a13 * c - a03 * s;\n    return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\nexport function fromTranslation(out, v) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\nexport function fromScaling(out, v) {\n    out[0] = v[0];\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = v[1];\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = v[2];\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function fromRotation(out, rad, axis) {\n    let x = axis[0];\n    let y = axis[1];\n    let z = axis[2];\n    let len = Math.sqrt(x * x + y * y + z * z);\n    let c;\n    let s;\n    let t;\n    if (len < glMatrix.EPSILON) {\n        return null;\n    }\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n    // Perform rotation-specific matrix multiplication\n    out[0] = x * x * t + c;\n    out[1] = y * x * t + z * s;\n    out[2] = z * x * t - y * s;\n    out[3] = 0;\n    out[4] = x * y * t - z * s;\n    out[5] = y * y * t + c;\n    out[6] = z * y * t + x * s;\n    out[7] = 0;\n    out[8] = x * z * t + y * s;\n    out[9] = y * z * t - x * s;\n    out[10] = z * z * t + c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromXRotation(out, rad) {\n    const s = Math.sin(rad);\n    const c = Math.cos(rad);\n    // Perform axis-specific matrix multiplication\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = c;\n    out[6] = s;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = -s;\n    out[10] = c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromYRotation(out, rad) {\n    const s = Math.sin(rad);\n    const c = Math.cos(rad);\n    // Perform axis-specific matrix multiplication\n    out[0] = c;\n    out[1] = 0;\n    out[2] = -s;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = s;\n    out[9] = 0;\n    out[10] = c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromZRotation(out, rad) {\n    const s = Math.sin(rad);\n    const c = Math.cos(rad);\n    // Perform axis-specific matrix multiplication\n    out[0] = c;\n    out[1] = s;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = -s;\n    out[5] = c;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslation(out, q, v) {\n    // Quaternion math\n    const x = q[0];\n    const y = q[1];\n    const z = q[2];\n    const w = q[3];\n    const x2 = x + x;\n    const y2 = y + y;\n    const z2 = z + z;\n    const xx = x * x2;\n    const xy = x * y2;\n    const xz = x * z2;\n    const yy = y * y2;\n    const yz = y * z2;\n    const zz = z * z2;\n    const wx = w * x2;\n    const wy = w * y2;\n    const wz = w * z2;\n    out[0] = 1 - (yy + zz);\n    out[1] = xy + wz;\n    out[2] = xz - wy;\n    out[3] = 0;\n    out[4] = xy - wz;\n    out[5] = 1 - (xx + zz);\n    out[6] = yz + wx;\n    out[7] = 0;\n    out[8] = xz + wy;\n    out[9] = yz - wx;\n    out[10] = 1 - (xx + yy);\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\nexport function fromQuat2(out, a) {\n    const translation = new glMatrix.ARRAY_TYPE(3);\n    const bx = -a[0];\n    const by = -a[1];\n    const bz = -a[2];\n    const bw = a[3];\n    const ax = a[4];\n    const ay = a[5];\n    const az = a[6];\n    const aw = a[7];\n    const magnitude = bx * bx + by * by + bz * bz + bw * bw;\n    // Only scale if it makes sense\n    if (magnitude > 0) {\n        translation[0] = ((ax * bw + aw * bx + ay * bz - az * by) * 2) / magnitude;\n        translation[1] = ((ay * bw + aw * by + az * bx - ax * bz) * 2) / magnitude;\n        translation[2] = ((az * bw + aw * bz + ax * by - ay * bx) * 2) / magnitude;\n    }\n    else {\n        translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n        translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n        translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n    }\n    fromRotationTranslation(out, a, translation);\n    return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getTranslation(out, mat) {\n    out[0] = mat[12];\n    out[1] = mat[13];\n    out[2] = mat[14];\n    return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getScaling(out, mat) {\n    const m11 = mat[0];\n    const m12 = mat[1];\n    const m13 = mat[2];\n    const m21 = mat[4];\n    const m22 = mat[5];\n    const m23 = mat[6];\n    const m31 = mat[8];\n    const m32 = mat[9];\n    const m33 = mat[10];\n    out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n    out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n    out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n    return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\nexport function getRotation(out, mat) {\n    const scaling = new glMatrix.ARRAY_TYPE(3);\n    getScaling(scaling, mat);\n    const is1 = 1 / scaling[0];\n    const is2 = 1 / scaling[1];\n    const is3 = 1 / scaling[2];\n    const sm11 = mat[0] * is1;\n    const sm12 = mat[1] * is2;\n    const sm13 = mat[2] * is3;\n    const sm21 = mat[4] * is1;\n    const sm22 = mat[5] * is2;\n    const sm23 = mat[6] * is3;\n    const sm31 = mat[8] * is1;\n    const sm32 = mat[9] * is2;\n    const sm33 = mat[10] * is3;\n    const trace = sm11 + sm22 + sm33;\n    let S = 0;\n    if (trace > 0) {\n        S = Math.sqrt(trace + 1.0) * 2;\n        out[3] = 0.25 * S;\n        out[0] = (sm23 - sm32) / S;\n        out[1] = (sm31 - sm13) / S;\n        out[2] = (sm12 - sm21) / S;\n    }\n    else if (sm11 > sm22 && sm11 > sm33) {\n        S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n        out[3] = (sm23 - sm32) / S;\n        out[0] = 0.25 * S;\n        out[1] = (sm12 + sm21) / S;\n        out[2] = (sm31 + sm13) / S;\n    }\n    else if (sm22 > sm33) {\n        S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n        out[3] = (sm31 - sm13) / S;\n        out[0] = (sm12 + sm21) / S;\n        out[1] = 0.25 * S;\n        out[2] = (sm23 + sm32) / S;\n    }\n    else {\n        S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n        out[3] = (sm12 - sm21) / S;\n        out[0] = (sm31 + sm13) / S;\n        out[1] = (sm23 + sm32) / S;\n        out[2] = 0.25 * S;\n    }\n    return out;\n}\n/**\n * Decomposes a transformation matrix into its rotation, translation\n * and scale components. Returns only the rotation component\n * @param  {quat} out_r Quaternion to receive the rotation component\n * @param  {vec3} out_t Vector to receive the translation vector\n * @param  {vec3} out_s Vector to receive the scaling factor\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @returns {quat} out_r\n */\nexport function decompose(out_r, out_t, out_s, mat) {\n    out_t[0] = mat[12];\n    out_t[1] = mat[13];\n    out_t[2] = mat[14];\n    const m11 = mat[0];\n    const m12 = mat[1];\n    const m13 = mat[2];\n    const m21 = mat[4];\n    const m22 = mat[5];\n    const m23 = mat[6];\n    const m31 = mat[8];\n    const m32 = mat[9];\n    const m33 = mat[10];\n    out_s[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n    out_s[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n    out_s[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n    const is1 = 1 / out_s[0];\n    const is2 = 1 / out_s[1];\n    const is3 = 1 / out_s[2];\n    const sm11 = m11 * is1;\n    const sm12 = m12 * is2;\n    const sm13 = m13 * is3;\n    const sm21 = m21 * is1;\n    const sm22 = m22 * is2;\n    const sm23 = m23 * is3;\n    const sm31 = m31 * is1;\n    const sm32 = m32 * is2;\n    const sm33 = m33 * is3;\n    const trace = sm11 + sm22 + sm33;\n    let S = 0;\n    if (trace > 0) {\n        S = Math.sqrt(trace + 1.0) * 2;\n        out_r[3] = 0.25 * S;\n        out_r[0] = (sm23 - sm32) / S;\n        out_r[1] = (sm31 - sm13) / S;\n        out_r[2] = (sm12 - sm21) / S;\n    }\n    else if (sm11 > sm22 && sm11 > sm33) {\n        S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n        out_r[3] = (sm23 - sm32) / S;\n        out_r[0] = 0.25 * S;\n        out_r[1] = (sm12 + sm21) / S;\n        out_r[2] = (sm31 + sm13) / S;\n    }\n    else if (sm22 > sm33) {\n        S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n        out_r[3] = (sm31 - sm13) / S;\n        out_r[0] = (sm12 + sm21) / S;\n        out_r[1] = 0.25 * S;\n        out_r[2] = (sm23 + sm32) / S;\n    }\n    else {\n        S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n        out_r[3] = (sm12 - sm21) / S;\n        out_r[0] = (sm31 + sm13) / S;\n        out_r[1] = (sm23 + sm32) / S;\n        out_r[2] = 0.25 * S;\n    }\n    return out_r;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScale(out, q, v, s) {\n    // Quaternion math\n    const x = q[0];\n    const y = q[1];\n    const z = q[2];\n    const w = q[3];\n    const x2 = x + x;\n    const y2 = y + y;\n    const z2 = z + z;\n    const xx = x * x2;\n    const xy = x * y2;\n    const xz = x * z2;\n    const yy = y * y2;\n    const yz = y * z2;\n    const zz = z * z2;\n    const wx = w * x2;\n    const wy = w * y2;\n    const wz = w * z2;\n    const sx = s[0];\n    const sy = s[1];\n    const sz = s[2];\n    out[0] = (1 - (yy + zz)) * sx;\n    out[1] = (xy + wz) * sx;\n    out[2] = (xz - wy) * sx;\n    out[3] = 0;\n    out[4] = (xy - wz) * sy;\n    out[5] = (1 - (xx + zz)) * sy;\n    out[6] = (yz + wx) * sy;\n    out[7] = 0;\n    out[8] = (xz + wy) * sz;\n    out[9] = (yz - wx) * sz;\n    out[10] = (1 - (xx + yy)) * sz;\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n    // Quaternion math\n    const x = q[0];\n    const y = q[1];\n    const z = q[2];\n    const w = q[3];\n    const x2 = x + x;\n    const y2 = y + y;\n    const z2 = z + z;\n    const xx = x * x2;\n    const xy = x * y2;\n    const xz = x * z2;\n    const yy = y * y2;\n    const yz = y * z2;\n    const zz = z * z2;\n    const wx = w * x2;\n    const wy = w * y2;\n    const wz = w * z2;\n    const sx = s[0];\n    const sy = s[1];\n    const sz = s[2];\n    const ox = o[0];\n    const oy = o[1];\n    const oz = o[2];\n    const out0 = (1 - (yy + zz)) * sx;\n    const out1 = (xy + wz) * sx;\n    const out2 = (xz - wy) * sx;\n    const out4 = (xy - wz) * sy;\n    const out5 = (1 - (xx + zz)) * sy;\n    const out6 = (yz + wx) * sy;\n    const out8 = (xz + wy) * sz;\n    const out9 = (yz - wx) * sz;\n    const out10 = (1 - (xx + yy)) * sz;\n    out[0] = out0;\n    out[1] = out1;\n    out[2] = out2;\n    out[3] = 0;\n    out[4] = out4;\n    out[5] = out5;\n    out[6] = out6;\n    out[7] = 0;\n    out[8] = out8;\n    out[9] = out9;\n    out[10] = out10;\n    out[11] = 0;\n    out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n    out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n    out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n    out[15] = 1;\n    return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\nexport function fromQuat(out, q) {\n    const x = q[0];\n    const y = q[1];\n    const z = q[2];\n    const w = q[3];\n    const x2 = x + x;\n    const y2 = y + y;\n    const z2 = z + z;\n    const xx = x * x2;\n    const yx = y * x2;\n    const yy = y * y2;\n    const zx = z * x2;\n    const zy = z * y2;\n    const zz = z * z2;\n    const wx = w * x2;\n    const wy = w * y2;\n    const wz = w * z2;\n    out[0] = 1 - yy - zz;\n    out[1] = yx + wz;\n    out[2] = zx - wy;\n    out[3] = 0;\n    out[4] = yx - wz;\n    out[5] = 1 - xx - zz;\n    out[6] = zy + wx;\n    out[7] = 0;\n    out[8] = zx + wy;\n    out[9] = zy - wx;\n    out[10] = 1 - xx - yy;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function frustum(out, left, right, bottom, top, near, far) {\n    const rl = 1 / (right - left);\n    const tb = 1 / (top - bottom);\n    const nf = 1 / (near - far);\n    out[0] = near * 2 * rl;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = near * 2 * tb;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = (right + left) * rl;\n    out[9] = (top + bottom) * tb;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = far * near * 2 * nf;\n    out[15] = 0;\n    return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n    const f = 1.0 / Math.tan(fovy / 2);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[15] = 0;\n    if (far != null && far !== Infinity) {\n        const nf = 1 / (near - far);\n        out[10] = (far + near) * nf;\n        out[14] = 2 * far * near * nf;\n    }\n    else {\n        out[10] = -1;\n        out[14] = -2 * near;\n    }\n    return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\nexport const perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n    const f = 1.0 / Math.tan(fovy / 2);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[15] = 0;\n    if (far != null && far !== Infinity) {\n        const nf = 1 / (near - far);\n        out[10] = far * nf;\n        out[14] = far * near * nf;\n    }\n    else {\n        out[10] = -1;\n        out[14] = -near;\n    }\n    return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n    const upTan = Math.tan((fov.upDegrees * Math.PI) / 180.0);\n    const downTan = Math.tan((fov.downDegrees * Math.PI) / 180.0);\n    const leftTan = Math.tan((fov.leftDegrees * Math.PI) / 180.0);\n    const rightTan = Math.tan((fov.rightDegrees * Math.PI) / 180.0);\n    const xScale = 2.0 / (leftTan + rightTan);\n    const yScale = 2.0 / (upTan + downTan);\n    out[0] = xScale;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    out[3] = 0.0;\n    out[4] = 0.0;\n    out[5] = yScale;\n    out[6] = 0.0;\n    out[7] = 0.0;\n    out[8] = -((leftTan - rightTan) * xScale * 0.5);\n    out[9] = (upTan - downTan) * yScale * 0.5;\n    out[10] = far / (near - far);\n    out[11] = -1.0;\n    out[12] = 0.0;\n    out[13] = 0.0;\n    out[14] = (far * near) / (near - far);\n    out[15] = 0.0;\n    return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n    const lr = 1 / (left - right);\n    const bt = 1 / (bottom - top);\n    const nf = 1 / (near - far);\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 2 * nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = (far + near) * nf;\n    out[15] = 1;\n    return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\nexport const ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n    const lr = 1 / (left - right);\n    const bt = 1 / (bottom - top);\n    const nf = 1 / (near - far);\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = near * nf;\n    out[15] = 1;\n    return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\nexport function lookAt(out, eye, center, up) {\n    let len;\n    let x0;\n    let x1;\n    let x2;\n    let y0;\n    let y1;\n    let y2;\n    let z0;\n    let z1;\n    let z2;\n    const eyex = eye[0];\n    const eyey = eye[1];\n    const eyez = eye[2];\n    const upx = up[0];\n    const upy = up[1];\n    const upz = up[2];\n    const centerx = center[0];\n    const centery = center[1];\n    const centerz = center[2];\n    if (Math.abs(eyex - centerx) < glMatrix.EPSILON &&\n        Math.abs(eyey - centery) < glMatrix.EPSILON &&\n        Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n        return identity(out);\n    }\n    z0 = eyex - centerx;\n    z1 = eyey - centery;\n    z2 = eyez - centerz;\n    len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n    x0 = upy * z2 - upz * z1;\n    x1 = upz * z0 - upx * z2;\n    x2 = upx * z1 - upy * z0;\n    len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n    if (!len) {\n        x0 = 0;\n        x1 = 0;\n        x2 = 0;\n    }\n    else {\n        len = 1 / len;\n        x0 *= len;\n        x1 *= len;\n        x2 *= len;\n    }\n    y0 = z1 * x2 - z2 * x1;\n    y1 = z2 * x0 - z0 * x2;\n    y2 = z0 * x1 - z1 * x0;\n    len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n    if (!len) {\n        y0 = 0;\n        y1 = 0;\n        y2 = 0;\n    }\n    else {\n        len = 1 / len;\n        y0 *= len;\n        y1 *= len;\n        y2 *= len;\n    }\n    out[0] = x0;\n    out[1] = y0;\n    out[2] = z0;\n    out[3] = 0;\n    out[4] = x1;\n    out[5] = y1;\n    out[6] = z1;\n    out[7] = 0;\n    out[8] = x2;\n    out[9] = y2;\n    out[10] = z2;\n    out[11] = 0;\n    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n    out[15] = 1;\n    return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\nexport function targetTo(out, eye, target, up) {\n    const eyex = eye[0];\n    const eyey = eye[1];\n    const eyez = eye[2];\n    const upx = up[0];\n    const upy = up[1];\n    const upz = up[2];\n    let z0 = eyex - target[0];\n    let z1 = eyey - target[1];\n    let z2 = eyez - target[2];\n    let len = z0 * z0 + z1 * z1 + z2 * z2;\n    if (len > 0) {\n        len = 1 / Math.sqrt(len);\n        z0 *= len;\n        z1 *= len;\n        z2 *= len;\n    }\n    let x0 = upy * z2 - upz * z1;\n    let x1 = upz * z0 - upx * z2;\n    let x2 = upx * z1 - upy * z0;\n    len = x0 * x0 + x1 * x1 + x2 * x2;\n    if (len > 0) {\n        len = 1 / Math.sqrt(len);\n        x0 *= len;\n        x1 *= len;\n        x2 *= len;\n    }\n    out[0] = x0;\n    out[1] = x1;\n    out[2] = x2;\n    out[3] = 0;\n    out[4] = z1 * x2 - z2 * x1;\n    out[5] = z2 * x0 - z0 * x2;\n    out[6] = z0 * x1 - z1 * x0;\n    out[7] = 0;\n    out[8] = z0;\n    out[9] = z1;\n    out[10] = z2;\n    out[11] = 0;\n    out[12] = eyex;\n    out[13] = eyey;\n    out[14] = eyez;\n    out[15] = 1;\n    return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nexport function str(a) {\n    return `mat4(${a[0]}, ${a[1]}, ${a[2]}, ${a[3]}, ${a[4]}, ${a[5]}, ${a[6]}, ${a[7]}, ${a[8]}, ${a[9]}, ${a[10]}, ${a[11]}, ${a[12]}, ${a[13]}, ${a[14]}, ${a[15]})`;\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nexport function frob(a) {\n    return Math.sqrt(a[0] * a[0] +\n        a[1] * a[1] +\n        a[2] * a[2] +\n        a[3] * a[3] +\n        a[4] * a[4] +\n        a[5] * a[5] +\n        a[6] * a[6] +\n        a[7] * a[7] +\n        a[8] * a[8] +\n        a[9] * a[9] +\n        a[10] * a[10] +\n        a[11] * a[11] +\n        a[12] * a[12] +\n        a[13] * a[13] +\n        a[14] * a[14] +\n        a[15] * a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    out[3] = a[3] + b[3];\n    out[4] = a[4] + b[4];\n    out[5] = a[5] + b[5];\n    out[6] = a[6] + b[6];\n    out[7] = a[7] + b[7];\n    out[8] = a[8] + b[8];\n    out[9] = a[9] + b[9];\n    out[10] = a[10] + b[10];\n    out[11] = a[11] + b[11];\n    out[12] = a[12] + b[12];\n    out[13] = a[13] + b[13];\n    out[14] = a[14] + b[14];\n    out[15] = a[15] + b[15];\n    return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\nexport function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    out[3] = a[3] - b[3];\n    out[4] = a[4] - b[4];\n    out[5] = a[5] - b[5];\n    out[6] = a[6] - b[6];\n    out[7] = a[7] - b[7];\n    out[8] = a[8] - b[8];\n    out[9] = a[9] - b[9];\n    out[10] = a[10] - b[10];\n    out[11] = a[11] - b[11];\n    out[12] = a[12] - b[12];\n    out[13] = a[13] - b[13];\n    out[14] = a[14] - b[14];\n    out[15] = a[15] - b[15];\n    return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\nexport function multiplyScalar(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    out[4] = a[4] * b;\n    out[5] = a[5] * b;\n    out[6] = a[6] * b;\n    out[7] = a[7] * b;\n    out[8] = a[8] * b;\n    out[9] = a[9] * b;\n    out[10] = a[10] * b;\n    out[11] = a[11] * b;\n    out[12] = a[12] * b;\n    out[13] = a[13] * b;\n    out[14] = a[14] * b;\n    out[15] = a[15] * b;\n    return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n    out[0] = a[0] + b[0] * scale;\n    out[1] = a[1] + b[1] * scale;\n    out[2] = a[2] + b[2] * scale;\n    out[3] = a[3] + b[3] * scale;\n    out[4] = a[4] + b[4] * scale;\n    out[5] = a[5] + b[5] * scale;\n    out[6] = a[6] + b[6] * scale;\n    out[7] = a[7] + b[7] * scale;\n    out[8] = a[8] + b[8] * scale;\n    out[9] = a[9] + b[9] * scale;\n    out[10] = a[10] + b[10] * scale;\n    out[11] = a[11] + b[11] * scale;\n    out[12] = a[12] + b[12] * scale;\n    out[13] = a[13] + b[13] * scale;\n    out[14] = a[14] + b[14] * scale;\n    out[15] = a[15] + b[15] * scale;\n    return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n    return (a[0] === b[0] &&\n        a[1] === b[1] &&\n        a[2] === b[2] &&\n        a[3] === b[3] &&\n        a[4] === b[4] &&\n        a[5] === b[5] &&\n        a[6] === b[6] &&\n        a[7] === b[7] &&\n        a[8] === b[8] &&\n        a[9] === b[9] &&\n        a[10] === b[10] &&\n        a[11] === b[11] &&\n        a[12] === b[12] &&\n        a[13] === b[13] &&\n        a[14] === b[14] &&\n        a[15] === b[15]);\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function equals(a, b) {\n    const a0 = a[0];\n    const a1 = a[1];\n    const a2 = a[2];\n    const a3 = a[3];\n    const a4 = a[4];\n    const a5 = a[5];\n    const a6 = a[6];\n    const a7 = a[7];\n    const a8 = a[8];\n    const a9 = a[9];\n    const a10 = a[10];\n    const a11 = a[11];\n    const a12 = a[12];\n    const a13 = a[13];\n    const a14 = a[14];\n    const a15 = a[15];\n    const b0 = b[0];\n    const b1 = b[1];\n    const b2 = b[2];\n    const b3 = b[3];\n    const b4 = b[4];\n    const b5 = b[5];\n    const b6 = b[6];\n    const b7 = b[7];\n    const b8 = b[8];\n    const b9 = b[9];\n    const b10 = b[10];\n    const b11 = b[11];\n    const b12 = b[12];\n    const b13 = b[13];\n    const b14 = b[14];\n    const b15 = b[15];\n    return (Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n        Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n        Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n        Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) &&\n        Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) &&\n        Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) &&\n        Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) &&\n        Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) &&\n        Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) &&\n        Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) &&\n        Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) &&\n        Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) &&\n        Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) &&\n        Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) &&\n        Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) &&\n        Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15)));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\nexport const mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\nexport const sub = subtract;\n//# sourceMappingURL=mat4.js.map","// @eslint-disable\n// @ts-nocheck\nimport * as glMatrix from './common.js';\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\nexport function create() {\n    const out = new glMatrix.ARRAY_TYPE(4);\n    if (glMatrix.ARRAY_TYPE != Float32Array) {\n        out[0] = 0;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n    }\n    return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\nexport function clone(a) {\n    const out = new glMatrix.ARRAY_TYPE(4);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\nexport function fromValues(x, y, z, w) {\n    const out = new glMatrix.ARRAY_TYPE(4);\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = w;\n    return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\nexport function set(out, x, y, z, w) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = w;\n    return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    out[3] = a[3] + b[3];\n    return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    out[3] = a[3] - b[3];\n    return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function multiply(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    out[2] = a[2] * b[2];\n    out[3] = a[3] * b[3];\n    return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function divide(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    out[2] = a[2] / b[2];\n    out[3] = a[3] / b[3];\n    return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\nexport function ceil(out, a) {\n    out[0] = Math.ceil(a[0]);\n    out[1] = Math.ceil(a[1]);\n    out[2] = Math.ceil(a[2]);\n    out[3] = Math.ceil(a[3]);\n    return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\nexport function floor(out, a) {\n    out[0] = Math.floor(a[0]);\n    out[1] = Math.floor(a[1]);\n    out[2] = Math.floor(a[2]);\n    out[3] = Math.floor(a[3]);\n    return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function min(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    out[2] = Math.min(a[2], b[2]);\n    out[3] = Math.min(a[3], b[3]);\n    return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function max(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    out[2] = Math.max(a[2], b[2]);\n    out[3] = Math.max(a[3], b[3]);\n    return out;\n}\n/**\n * symmetric round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\nexport function round(out, a) {\n    out[0] = glMatrix.round(a[0]);\n    out[1] = glMatrix.round(a[1]);\n    out[2] = glMatrix.round(a[2]);\n    out[3] = glMatrix.round(a[3]);\n    return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\nexport function scale(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n    out[0] = a[0] + b[0] * scale;\n    out[1] = a[1] + b[1] * scale;\n    out[2] = a[2] + b[2] * scale;\n    out[3] = a[3] + b[3] * scale;\n    return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n    const x = b[0] - a[0];\n    const y = b[1] - a[1];\n    const z = b[2] - a[2];\n    const w = b[3] - a[3];\n    return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n    const x = b[0] - a[0];\n    const y = b[1] - a[1];\n    const z = b[2] - a[2];\n    const w = b[3] - a[3];\n    return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    const w = a[3];\n    return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    const w = a[3];\n    return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\nexport function negate(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    out[3] = -a[3];\n    return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\nexport function inverse(out, a) {\n    out[0] = 1.0 / a[0];\n    out[1] = 1.0 / a[1];\n    out[2] = 1.0 / a[2];\n    out[3] = 1.0 / a[3];\n    return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\nexport function normalize(out, a) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    const w = a[3];\n    let len = x * x + y * y + z * z + w * w;\n    if (len > 0) {\n        len = 1 / Math.sqrt(len);\n    }\n    out[0] = x * len;\n    out[1] = y * len;\n    out[2] = z * len;\n    out[3] = w * len;\n    return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\nexport function cross(out, u, v, w) {\n    const A = v[0] * w[1] - v[1] * w[0];\n    const B = v[0] * w[2] - v[2] * w[0];\n    const C = v[0] * w[3] - v[3] * w[0];\n    const D = v[1] * w[2] - v[2] * w[1];\n    const E = v[1] * w[3] - v[3] * w[1];\n    const F = v[2] * w[3] - v[3] * w[2];\n    const G = u[0];\n    const H = u[1];\n    const I = u[2];\n    const J = u[3];\n    out[0] = H * F - I * E + J * D;\n    out[1] = -(G * F) + I * C - J * B;\n    out[2] = G * E - H * C + J * A;\n    out[3] = -(G * D) + H * B - I * A;\n    return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\nexport function lerp(out, a, b, t) {\n    const ax = a[0];\n    const ay = a[1];\n    const az = a[2];\n    const aw = a[3];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    out[3] = aw + t * (b[3] - aw);\n    return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If omitted, a unit vector will be returned\n * @returns {vec4} out\n */\nexport function random(out, scale) {\n    scale = scale === undefined ? 1.0 : scale;\n    // Marsaglia, George. Choosing a Point from the Surface of a\n    // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n    // http://projecteuclid.org/euclid.aoms/1177692644;\n    let v1;\n    let v2;\n    let v3;\n    let v4;\n    let s1;\n    let s2;\n    do {\n        v1 = glMatrix.RANDOM() * 2 - 1;\n        v2 = glMatrix.RANDOM() * 2 - 1;\n        s1 = v1 * v1 + v2 * v2;\n    } while (s1 >= 1);\n    do {\n        v3 = glMatrix.RANDOM() * 2 - 1;\n        v4 = glMatrix.RANDOM() * 2 - 1;\n        s2 = v3 * v3 + v4 * v4;\n    } while (s2 >= 1);\n    const d = Math.sqrt((1 - s1) / s2);\n    out[0] = scale * v1;\n    out[1] = scale * v2;\n    out[2] = scale * v3 * d;\n    out[3] = scale * v4 * d;\n    return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\nexport function transformMat4(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    const w = a[3];\n    out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n    out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n    out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n    out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n    return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\nexport function transformQuat(out, a, q) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    const qx = q[0];\n    const qy = q[1];\n    const qz = q[2];\n    const qw = q[3];\n    // calculate quat * vec\n    const ix = qw * x + qy * z - qz * y;\n    const iy = qw * y + qz * x - qx * z;\n    const iz = qw * z + qx * y - qy * x;\n    const iw = -qx * x - qy * y - qz * z;\n    // calculate result * inverse quat\n    out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    out[3] = a[3];\n    return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\nexport function zero(out) {\n    out[0] = 0.0;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    out[3] = 0.0;\n    return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n    return `vec4(${a[0]}, ${a[1]}, ${a[2]}, ${a[3]})`;\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n    const a0 = a[0];\n    const a1 = a[1];\n    const a2 = a[2];\n    const a3 = a[3];\n    const b0 = b[0];\n    const b1 = b[1];\n    const b2 = b[2];\n    const b3 = b[3];\n    return (Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n        Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n        Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n        Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\nexport const sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\nexport const mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\nexport const div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\nexport const dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\nexport const sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\nexport const len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport const forEach = (function () {\n    const vec = create();\n    return function (a, stride, offset, count, fn, arg) {\n        let i;\n        let l;\n        if (!stride) {\n            stride = 4;\n        }\n        if (!offset) {\n            offset = 0;\n        }\n        if (count) {\n            l = Math.min(count * stride + offset, a.length);\n        }\n        else {\n            l = a.length;\n        }\n        for (i = offset; i < l; i += stride) {\n            vec[0] = a[i];\n            vec[1] = a[i + 1];\n            vec[2] = a[i + 2];\n            vec[3] = a[i + 3];\n            fn(vec, vec, arg);\n            a[i] = vec[0];\n            a[i + 1] = vec[1];\n            a[i + 2] = vec[2];\n            a[i + 3] = vec[3];\n        }\n        return a;\n    };\n})();\n//# sourceMappingURL=vec4.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Copyright (c) 2017 Uber Technologies, Inc.\nimport { Matrix } from \"./base/matrix.js\";\nimport { checkVector } from \"../lib/validators.js\";\n/* eslint-disable camelcase */\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from \"../lib/gl-matrix-extras.js\";\n// @ts-ignore gl-matrix types...\nimport { fromQuat as mat4_fromQuat, frustum as mat4_frustum, lookAt as mat4_lookAt, ortho as mat4_ortho, perspective as mat4_perspective, determinant as mat4_determinant, transpose as mat4_transpose, invert as mat4_invert, multiply as mat4_multiply, rotateX as mat4_rotateX, rotateY as mat4_rotateY, rotateZ as mat4_rotateZ, rotate as mat4_rotate, scale as mat4_scale, translate as mat4_translate } from \"../gl-matrix/mat4.js\";\nimport { transformMat4 as vec2_transformMat4 } from \"../gl-matrix/vec2.js\";\nimport { transformMat4 as vec3_transformMat4 } from \"../gl-matrix/vec3.js\";\nimport { transformMat4 as vec4_transformMat4 } from \"../gl-matrix/vec4.js\";\n// eslint-disable-next-line no-shadow\nvar INDICES;\n(function (INDICES) {\n    INDICES[INDICES[\"COL0ROW0\"] = 0] = \"COL0ROW0\";\n    INDICES[INDICES[\"COL0ROW1\"] = 1] = \"COL0ROW1\";\n    INDICES[INDICES[\"COL0ROW2\"] = 2] = \"COL0ROW2\";\n    INDICES[INDICES[\"COL0ROW3\"] = 3] = \"COL0ROW3\";\n    INDICES[INDICES[\"COL1ROW0\"] = 4] = \"COL1ROW0\";\n    INDICES[INDICES[\"COL1ROW1\"] = 5] = \"COL1ROW1\";\n    INDICES[INDICES[\"COL1ROW2\"] = 6] = \"COL1ROW2\";\n    INDICES[INDICES[\"COL1ROW3\"] = 7] = \"COL1ROW3\";\n    INDICES[INDICES[\"COL2ROW0\"] = 8] = \"COL2ROW0\";\n    INDICES[INDICES[\"COL2ROW1\"] = 9] = \"COL2ROW1\";\n    INDICES[INDICES[\"COL2ROW2\"] = 10] = \"COL2ROW2\";\n    INDICES[INDICES[\"COL2ROW3\"] = 11] = \"COL2ROW3\";\n    INDICES[INDICES[\"COL3ROW0\"] = 12] = \"COL3ROW0\";\n    INDICES[INDICES[\"COL3ROW1\"] = 13] = \"COL3ROW1\";\n    INDICES[INDICES[\"COL3ROW2\"] = 14] = \"COL3ROW2\";\n    INDICES[INDICES[\"COL3ROW3\"] = 15] = \"COL3ROW3\";\n})(INDICES || (INDICES = {}));\nconst DEFAULT_FOVY = (45 * Math.PI) / 180;\nconst DEFAULT_ASPECT = 1;\nconst DEFAULT_NEAR = 0.1;\nconst DEFAULT_FAR = 500;\nconst IDENTITY_MATRIX = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n/**\n * A 4x4 matrix with common linear algebra operations\n * Subclass of Array<number> meaning that it is highly compatible with other libraries\n */\nexport class Matrix4 extends Matrix {\n    static get IDENTITY() {\n        return getIdentityMatrix();\n    }\n    static get ZERO() {\n        return getZeroMatrix();\n    }\n    get ELEMENTS() {\n        return 16;\n    }\n    get RANK() {\n        return 4;\n    }\n    get INDICES() {\n        return INDICES;\n    }\n    constructor(array) {\n        // PERF NOTE: initialize elements as double precision numbers\n        super(-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0);\n        if (arguments.length === 1 && Array.isArray(array)) {\n            this.copy(array);\n        }\n        else {\n            this.identity();\n        }\n    }\n    copy(array) {\n        this[0] = array[0];\n        this[1] = array[1];\n        this[2] = array[2];\n        this[3] = array[3];\n        this[4] = array[4];\n        this[5] = array[5];\n        this[6] = array[6];\n        this[7] = array[7];\n        this[8] = array[8];\n        this[9] = array[9];\n        this[10] = array[10];\n        this[11] = array[11];\n        this[12] = array[12];\n        this[13] = array[13];\n        this[14] = array[14];\n        this[15] = array[15];\n        return this.check();\n    }\n    // eslint-disable-next-line max-params\n    set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n        this[0] = m00;\n        this[1] = m10;\n        this[2] = m20;\n        this[3] = m30;\n        this[4] = m01;\n        this[5] = m11;\n        this[6] = m21;\n        this[7] = m31;\n        this[8] = m02;\n        this[9] = m12;\n        this[10] = m22;\n        this[11] = m32;\n        this[12] = m03;\n        this[13] = m13;\n        this[14] = m23;\n        this[15] = m33;\n        return this.check();\n    }\n    // accepts row major order, stores as column major\n    // eslint-disable-next-line max-params\n    setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n        this[0] = m00;\n        this[1] = m10;\n        this[2] = m20;\n        this[3] = m30;\n        this[4] = m01;\n        this[5] = m11;\n        this[6] = m21;\n        this[7] = m31;\n        this[8] = m02;\n        this[9] = m12;\n        this[10] = m22;\n        this[11] = m32;\n        this[12] = m03;\n        this[13] = m13;\n        this[14] = m23;\n        this[15] = m33;\n        return this.check();\n    }\n    toRowMajor(result) {\n        result[0] = this[0];\n        result[1] = this[4];\n        result[2] = this[8];\n        result[3] = this[12];\n        result[4] = this[1];\n        result[5] = this[5];\n        result[6] = this[9];\n        result[7] = this[13];\n        result[8] = this[2];\n        result[9] = this[6];\n        result[10] = this[10];\n        result[11] = this[14];\n        result[12] = this[3];\n        result[13] = this[7];\n        result[14] = this[11];\n        result[15] = this[15];\n        return result;\n    }\n    // Constructors\n    /** Set to identity matrix */\n    identity() {\n        return this.copy(IDENTITY_MATRIX);\n    }\n    /**\n     *\n     * @param object\n     * @returns self\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    fromObject(object) {\n        return this.check();\n    }\n    /**\n     * Calculates a 4x4 matrix from the given quaternion\n     * @param quaternion Quaternion to create matrix from\n     * @returns self\n     */\n    fromQuaternion(quaternion) {\n        mat4_fromQuat(this, quaternion);\n        return this.check();\n    }\n    /**\n     * Generates a frustum matrix with the given bounds\n     * @param view.left - Left bound of the frustum\n     * @param view.right - Right bound of the frustum\n     * @param view.bottom - Bottom bound of the frustum\n     * @param view.top - Top bound of the frustum\n     * @param view.near - Near bound of the frustum\n     * @param view.far - Far bound of the frustum. Can be set to Infinity.\n     * @returns self\n     */\n    frustum(view) {\n        const { left, right, bottom, top, near = DEFAULT_NEAR, far = DEFAULT_FAR } = view;\n        if (far === Infinity) {\n            computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n        }\n        else {\n            mat4_frustum(this, left, right, bottom, top, near, far);\n        }\n        return this.check();\n    }\n    /**\n     * Generates a look-at matrix with the given eye position, focal point,\n     * and up axis\n     * @param view.eye - (vector) Position of the viewer\n     * @param view.center - (vector) Point the viewer is looking at\n     * @param view.up - (vector) Up axis\n     * @returns self\n     */\n    lookAt(view) {\n        const { eye, center = [0, 0, 0], up = [0, 1, 0] } = view;\n        mat4_lookAt(this, eye, center, up);\n        return this.check();\n    }\n    /**\n     * Generates a orthogonal projection matrix with the given bounds\n     * from \"traditional\" view space parameters\n     * @param view.left - Left bound of the frustum\n     * @param view.right number  Right bound of the frustum\n     * @param view.bottom - Bottom bound of the frustum\n     * @param view.top number  Top bound of the frustum\n     * @param view.near - Near bound of the frustum\n     * @param view.far number  Far bound of the frustum\n     * @returns self\n     */\n    ortho(view) {\n        const { left, right, bottom, top, near = DEFAULT_NEAR, far = DEFAULT_FAR } = view;\n        mat4_ortho(this, left, right, bottom, top, near, far);\n        return this.check();\n    }\n    /**\n     * Generates an orthogonal projection matrix with the same parameters\n     * as a perspective matrix (plus focalDistance)\n     * @param view.fovy Vertical field of view in radians\n     * @param view.aspect Aspect ratio. Typically viewport width / viewport height\n     * @param view.focalDistance Distance in the view frustum used for extent calculations\n     * @param view.near Near bound of the frustum\n     * @param view.far Far bound of the frustum\n     * @returns self\n     */\n    orthographic(view) {\n        const { fovy = DEFAULT_FOVY, aspect = DEFAULT_ASPECT, focalDistance = 1, near = DEFAULT_NEAR, far = DEFAULT_FAR } = view;\n        checkRadians(fovy);\n        const halfY = fovy / 2;\n        const top = focalDistance * Math.tan(halfY); // focus_plane is the distance from the camera\n        const right = top * aspect;\n        return this.ortho({\n            left: -right,\n            right,\n            bottom: -top,\n            top,\n            near,\n            far\n        });\n    }\n    /**\n     * Generates a perspective projection matrix with the given bounds\n     * @param view.fovy Vertical field of view in radians\n     * @param view.aspect Aspect ratio. typically viewport width/height\n     * @param view.near Near bound of the frustum\n     * @param view.far Far bound of the frustum\n     * @returns self\n     */\n    perspective(view) {\n        const { fovy = (45 * Math.PI) / 180, aspect = 1, near = 0.1, far = 500 } = view;\n        checkRadians(fovy);\n        mat4_perspective(this, fovy, aspect, near, far);\n        return this.check();\n    }\n    // Accessors\n    determinant() {\n        return mat4_determinant(this);\n    }\n    /**\n     * Extracts the non-uniform scale assuming the matrix is an affine transformation.\n     * The scales are the \"lengths\" of the column vectors in the upper-left 3x3 matrix.\n     * @param result\n     * @returns self\n     */\n    getScale(result = [-0, -0, -0]) {\n        // explicit is faster than hypot...\n        result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n        result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n        result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n        // result[0] = Math.hypot(this[0], this[1], this[2]);\n        // result[1] = Math.hypot(this[4], this[5], this[6]);\n        // result[2] = Math.hypot(this[8], this[9], this[10]);\n        return result;\n    }\n    /**\n     * Gets the translation portion, assuming the matrix is a affine transformation matrix.\n     * @param result\n     * @returns self\n     */\n    getTranslation(result = [-0, -0, -0]) {\n        result[0] = this[12];\n        result[1] = this[13];\n        result[2] = this[14];\n        return result;\n    }\n    /**\n     * Gets upper left 3x3 pure rotation matrix (non-scaling), assume affine transformation matrix\n     * @param result\n     * @param scaleResult\n     * @returns self\n     */\n    getRotation(result, scaleResult) {\n        result = result || [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0];\n        scaleResult = scaleResult || [-0, -0, -0];\n        const scale = this.getScale(scaleResult);\n        const inverseScale0 = 1 / scale[0];\n        const inverseScale1 = 1 / scale[1];\n        const inverseScale2 = 1 / scale[2];\n        result[0] = this[0] * inverseScale0;\n        result[1] = this[1] * inverseScale1;\n        result[2] = this[2] * inverseScale2;\n        result[3] = 0;\n        result[4] = this[4] * inverseScale0;\n        result[5] = this[5] * inverseScale1;\n        result[6] = this[6] * inverseScale2;\n        result[7] = 0;\n        result[8] = this[8] * inverseScale0;\n        result[9] = this[9] * inverseScale1;\n        result[10] = this[10] * inverseScale2;\n        result[11] = 0;\n        result[12] = 0;\n        result[13] = 0;\n        result[14] = 0;\n        result[15] = 1;\n        return result;\n    }\n    /**\n     *\n     * @param result\n     * @param scaleResult\n     * @returns self\n     */\n    getRotationMatrix3(result, scaleResult) {\n        result = result || [-0, -0, -0, -0, -0, -0, -0, -0, -0];\n        scaleResult = scaleResult || [-0, -0, -0];\n        const scale = this.getScale(scaleResult);\n        const inverseScale0 = 1 / scale[0];\n        const inverseScale1 = 1 / scale[1];\n        const inverseScale2 = 1 / scale[2];\n        result[0] = this[0] * inverseScale0;\n        result[1] = this[1] * inverseScale1;\n        result[2] = this[2] * inverseScale2;\n        result[3] = this[4] * inverseScale0;\n        result[4] = this[5] * inverseScale1;\n        result[5] = this[6] * inverseScale2;\n        result[6] = this[8] * inverseScale0;\n        result[7] = this[9] * inverseScale1;\n        result[8] = this[10] * inverseScale2;\n        return result;\n    }\n    // Modifiers\n    transpose() {\n        mat4_transpose(this, this);\n        return this.check();\n    }\n    invert() {\n        mat4_invert(this, this);\n        return this.check();\n    }\n    // Operations\n    multiplyLeft(a) {\n        mat4_multiply(this, a, this);\n        return this.check();\n    }\n    multiplyRight(a) {\n        mat4_multiply(this, this, a);\n        return this.check();\n    }\n    // Rotates a matrix by the given angle around the X axis\n    rotateX(radians) {\n        mat4_rotateX(this, this, radians);\n        // mat4_rotate(this, this, radians, [1, 0, 0]);\n        return this.check();\n    }\n    // Rotates a matrix by the given angle around the Y axis.\n    rotateY(radians) {\n        mat4_rotateY(this, this, radians);\n        // mat4_rotate(this, this, radians, [0, 1, 0]);\n        return this.check();\n    }\n    /**\n     * Rotates a matrix by the given angle around the Z axis.\n     * @param radians\n     * @returns self\n     */\n    rotateZ(radians) {\n        mat4_rotateZ(this, this, radians);\n        // mat4_rotate(this, this, radians, [0, 0, 1]);\n        return this.check();\n    }\n    /**\n     *\n     * @param param0\n     * @returns self\n     */\n    rotateXYZ(angleXYZ) {\n        return this.rotateX(angleXYZ[0]).rotateY(angleXYZ[1]).rotateZ(angleXYZ[2]);\n    }\n    /**\n     *\n     * @param radians\n     * @param axis\n     * @returns self\n     */\n    rotateAxis(radians, axis) {\n        mat4_rotate(this, this, radians, axis);\n        return this.check();\n    }\n    /**\n     *\n     * @param factor\n     * @returns self\n     */\n    scale(factor) {\n        mat4_scale(this, this, Array.isArray(factor) ? factor : [factor, factor, factor]);\n        return this.check();\n    }\n    /**\n     *\n     * @param vec\n     * @returns self\n     */\n    translate(vector) {\n        mat4_translate(this, this, vector);\n        return this.check();\n    }\n    // Transforms\n    /**\n     * Transforms any 2, 3 or 4 element vector. 2 and 3 elements are treated as points\n     * @param vector\n     * @param result\n     * @returns self\n     */\n    transform(vector, result) {\n        if (vector.length === 4) {\n            result = vec4_transformMat4(result || [-0, -0, -0, -0], vector, this);\n            checkVector(result, 4);\n            return result;\n        }\n        return this.transformAsPoint(vector, result);\n    }\n    /**\n     * Transforms any 2 or 3 element array as point (w implicitly 1)\n     * @param vector\n     * @param result\n     * @returns self\n     */\n    transformAsPoint(vector, result) {\n        const { length } = vector;\n        let out;\n        switch (length) {\n            case 2:\n                out = vec2_transformMat4(result || [-0, -0], vector, this);\n                break;\n            case 3:\n                out = vec3_transformMat4(result || [-0, -0, -0], vector, this);\n                break;\n            default:\n                throw new Error('Illegal vector');\n        }\n        checkVector(out, vector.length);\n        return out;\n    }\n    /**\n     * Transforms any 2 or 3 element array as vector (w implicitly 0)\n     * @param vector\n     * @param result\n     * @returns self\n     */\n    transformAsVector(vector, result) {\n        let out;\n        switch (vector.length) {\n            case 2:\n                out = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n                break;\n            case 3:\n                out = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n                break;\n            default:\n                throw new Error('Illegal vector');\n        }\n        checkVector(out, vector.length);\n        return out;\n    }\n    /** @deprecated */\n    transformPoint(vector, result) {\n        return this.transformAsPoint(vector, result);\n    }\n    /** @deprecated */\n    transformVector(vector, result) {\n        return this.transformAsPoint(vector, result);\n    }\n    /** @deprecated */\n    transformDirection(vector, result) {\n        return this.transformAsVector(vector, result);\n    }\n    // three.js math API compatibility\n    makeRotationX(radians) {\n        return this.identity().rotateX(radians);\n    }\n    makeTranslation(x, y, z) {\n        return this.identity().translate([x, y, z]);\n    }\n}\n// TODO initializing static members directly is an option, but make sure no tree-shaking issues\nlet ZERO;\nlet IDENTITY;\nfunction getZeroMatrix() {\n    if (!ZERO) {\n        ZERO = new Matrix4([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n        Object.freeze(ZERO);\n    }\n    return ZERO;\n}\nfunction getIdentityMatrix() {\n    if (!IDENTITY) {\n        IDENTITY = new Matrix4();\n        Object.freeze(IDENTITY);\n    }\n    return IDENTITY;\n}\n// HELPER FUNCTIONS\nfunction checkRadians(possiblyDegrees) {\n    if (possiblyDegrees > Math.PI * 2) {\n        throw Error('expected radians');\n    }\n}\n// eslint-disable-next-line max-params\nfunction computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n    const column0Row0 = (2 * near) / (right - left);\n    const column1Row1 = (2 * near) / (top - bottom);\n    const column2Row0 = (right + left) / (right - left);\n    const column2Row1 = (top + bottom) / (top - bottom);\n    const column2Row2 = -1;\n    const column2Row3 = -1;\n    const column3Row2 = -2 * near;\n    result[0] = column0Row0;\n    result[1] = 0;\n    result[2] = 0;\n    result[3] = 0;\n    result[4] = 0;\n    result[5] = column1Row1;\n    result[6] = 0;\n    result[7] = 0;\n    result[8] = column2Row0;\n    result[9] = column2Row1;\n    result[10] = column2Row2;\n    result[11] = column2Row3;\n    result[12] = 0;\n    result[13] = 0;\n    result[14] = column3Row2;\n    result[15] = 0;\n    return result;\n}\n//# sourceMappingURL=matrix4.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// import {ShaderModule} from '../../types';\nconst fp32shader = /* glsl */ `\\\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n\n// All these functions are for substituting tan() function from Intel GPU only\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n\n    // 2pi range reduction\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n`;\n/**\n * 32 bit math library (fixups for GPUs)\n */\nexport const fp32 = {\n    name: 'fp32',\n    vs: fp32shader\n};\n//# sourceMappingURL=fp32.js.map","// luma.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// cyan color\nconst DEFAULT_HIGHLIGHT_COLOR = [0, 1, 1, 1];\nconst vs = /* glsl */ `\\\nuniform pickingUniforms {\n  float isActive;\n  float isAttribute;\n  float isHighlightActive;\n  float useFloatColors;\n  vec3 highlightedObjectColor;\n  vec4 highlightColor;\n} picking;\n\nout vec4 picking_vRGBcolor_Avalid;\n\n// Normalize unsigned byte color to 0-1 range\nvec3 picking_normalizeColor(vec3 color) {\n  return picking.useFloatColors > 0.5 ? color : color / 255.0;\n}\n\n// Normalize unsigned byte color to 0-1 range\nvec4 picking_normalizeColor(vec4 color) {\n  return picking.useFloatColors > 0.5 ? color : color / 255.0;\n}\n\nbool picking_isColorZero(vec3 color) {\n  return dot(color, vec3(1.0)) < 0.00001;\n}\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.00001;\n}\n\n// Check if this vertex is highlighted \nbool isVertexHighlighted(vec3 vertexColor) {\n  vec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);\n  return\n    bool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));\n}\n\n// Set the current picking color\nvoid picking_setPickingColor(vec3 pickingColor) {\n  pickingColor = picking_normalizeColor(pickingColor);\n\n  if (bool(picking.isActive)) {\n    // Use alpha as the validity flag. If pickingColor is [0, 0, 0] fragment is non-pickable\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!bool(picking.isAttribute)) {\n      // Stores the picking color so that the fragment shader can render it during picking\n      picking_vRGBcolor_Avalid.rgb = pickingColor;\n    }\n  } else {\n    // Do the comparison with selected item color in vertex shader as it should mean fewer compares\n    picking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (bool(picking.isAttribute)) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\n\nvoid picking_setPickingAttribute(vec2 value) {\n  if (bool(picking.isAttribute)) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\n\nvoid picking_setPickingAttribute(vec3 value) {\n  if (bool(picking.isAttribute)) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n`;\nconst fs = /* glsl */ `\\\nuniform pickingUniforms {\n  float isActive;\n  float isAttribute;\n  float isHighlightActive;\n  float useFloatColors;\n  vec3 highlightedObjectColor;\n  vec4 highlightColor;\n} picking;\n\nin vec4 picking_vRGBcolor_Avalid;\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 picking_filterHighlightColor(vec4 color) {\n  // If we are still picking, we don't highlight\n  if (picking.isActive > 0.5) {\n    return color;\n  }\n\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    // Blend in highlight color based on its alpha value\n    float highLightAlpha = picking.highlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 picking_filterPickingColor(vec4 color) {\n  if (bool(picking.isActive)) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 picking_filterColor(vec4 color) {\n  vec4 highlightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highlightColor);\n}\n`;\n/**\n * Provides support for color-coding-based picking and highlighting.\n * In particular, supports picking a specific instance in an instanced\n * draw call and highlighting an instance based on its picking color,\n * and correspondingly, supports picking and highlighting groups of\n * primitives with the same picking color in non-instanced draw-calls\n */\nexport const picking = {\n    props: {},\n    uniforms: {},\n    name: 'picking',\n    uniformTypes: {\n        isActive: 'f32',\n        isAttribute: 'f32',\n        isHighlightActive: 'f32',\n        useFloatColors: 'f32',\n        highlightedObjectColor: 'vec3<f32>',\n        highlightColor: 'vec4<f32>'\n    },\n    defaultUniforms: {\n        isActive: false,\n        isAttribute: false,\n        isHighlightActive: false,\n        useFloatColors: true,\n        highlightedObjectColor: [0, 0, 0],\n        highlightColor: DEFAULT_HIGHLIGHT_COLOR\n    },\n    vs,\n    fs,\n    getUniforms\n};\nfunction getUniforms(opts = {}, prevUniforms) {\n    const uniforms = {};\n    if (opts.highlightedObjectColor === undefined) {\n        // Unless highlightedObjectColor explicitly null or set, do not update state\n    }\n    else if (opts.highlightedObjectColor === null) {\n        uniforms.isHighlightActive = false;\n    }\n    else {\n        uniforms.isHighlightActive = true;\n        const highlightedObjectColor = opts.highlightedObjectColor.slice(0, 3);\n        uniforms.highlightedObjectColor = highlightedObjectColor;\n    }\n    if (opts.highlightColor) {\n        const color = Array.from(opts.highlightColor, x => x / 255);\n        if (!Number.isFinite(color[3])) {\n            color[3] = 1;\n        }\n        uniforms.highlightColor = color;\n    }\n    if (opts.isActive !== undefined) {\n        uniforms.isActive = Boolean(opts.isActive);\n        uniforms.isAttribute = Boolean(opts.isAttribute);\n    }\n    if (opts.useFloatColors !== undefined) {\n        uniforms.useFloatColors = Boolean(opts.useFloatColors);\n    }\n    return uniforms;\n}\n//# sourceMappingURL=picking.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst colorWGSL = /* WGSL */ `\n\nstruct ColorUniforms {\n  opacity: f32,\n};\n\nvar<private> color: ColorUniforms = ColorUniforms(1.0);\n// TODO (kaapp) avoiding binding index collisions to handle layer opacity \n// requires some thought.\n// @group(0) @binding(0) var<uniform> color: ColorUniforms;\n\n@must_use\nfn deckgl_premultiplied_alpha(fragColor: vec4<f32>) -> vec4<f32> {\n    return vec4(fragColor.rgb * fragColor.a, fragColor.a); \n};\n`;\nexport default {\n    name: 'color',\n    dependencies: [],\n    source: colorWGSL,\n    getUniforms: (_props) => {\n        // TODO (kaapp) Handle layer opacity\n        // apply gamma to opacity to make it visually \"linear\"\n        // TODO - v10: use raw opacity?\n        // opacity: Math.pow(props.opacity!, 1 / 2.2)\n        return {};\n    },\n    uniformTypes: {\n        opacity: 'f32'\n    }\n    // @ts-ignore TODO v9.1\n};\n//# sourceMappingURL=color.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst source = /* wgsl */ `\\\nconst SMOOTH_EDGE_RADIUS: f32 = 0.5;\n\nstruct VertexGeometry {\n  position: vec4<f32>,\n  worldPosition: vec3<f32>,\n  worldPositionAlt: vec3<f32>,\n  normal: vec3<f32>,\n  uv: vec2<f32>,\n  pickingColor: vec3<f32>,\n};\n\nvar<private> geometry_: VertexGeometry = VertexGeometry(\n  vec4<f32>(0.0, 0.0, 1.0, 0.0),\n  vec3<f32>(0.0, 0.0, 0.0),\n  vec3<f32>(0.0, 0.0, 0.0),\n  vec3<f32>(0.0, 0.0, 0.0),\n  vec2<f32>(0.0, 0.0),\n  vec3<f32>(0.0, 0.0, 0.0)\n);\n\nstruct FragmentGeometry {\n  uv: vec2<f32>,\n};\n\nvar<private> fragmentGeometry: FragmentGeometry;\n\nfn smoothedge(edge: f32, x: f32) -> f32 {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n`;\nconst defines = '#define SMOOTH_EDGE_RADIUS 0.5';\nconst vs = /* glsl */ `\\\n${defines}\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n`;\nconst fs = /* glsl */ `\\\n${defines}\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n`;\nexport default {\n    name: 'geometry',\n    source,\n    vs,\n    fs\n};\n//# sourceMappingURL=geometry.js.map","export const MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\nexport const COMPUTE_INTERVAL = 25;\nexport var InputEvent;\n(function (InputEvent) {\n    InputEvent[InputEvent[\"Start\"] = 1] = \"Start\";\n    InputEvent[InputEvent[\"Move\"] = 2] = \"Move\";\n    InputEvent[InputEvent[\"End\"] = 4] = \"End\";\n    InputEvent[InputEvent[\"Cancel\"] = 8] = \"Cancel\";\n})(InputEvent || (InputEvent = {}));\nexport var InputDirection;\n(function (InputDirection) {\n    InputDirection[InputDirection[\"None\"] = 0] = \"None\";\n    InputDirection[InputDirection[\"Left\"] = 1] = \"Left\";\n    InputDirection[InputDirection[\"Right\"] = 2] = \"Right\";\n    InputDirection[InputDirection[\"Up\"] = 4] = \"Up\";\n    InputDirection[InputDirection[\"Down\"] = 8] = \"Down\";\n    InputDirection[InputDirection[\"Horizontal\"] = 3] = \"Horizontal\";\n    InputDirection[InputDirection[\"Vertical\"] = 12] = \"Vertical\";\n    InputDirection[InputDirection[\"All\"] = 15] = \"All\";\n})(InputDirection || (InputDirection = {}));\n//# sourceMappingURL=input-consts.js.map","export var RecognizerState;\n(function (RecognizerState) {\n    RecognizerState[RecognizerState[\"Possible\"] = 1] = \"Possible\";\n    RecognizerState[RecognizerState[\"Began\"] = 2] = \"Began\";\n    RecognizerState[RecognizerState[\"Changed\"] = 4] = \"Changed\";\n    RecognizerState[RecognizerState[\"Ended\"] = 8] = \"Ended\";\n    RecognizerState[RecognizerState[\"Recognized\"] = 8] = \"Recognized\";\n    RecognizerState[RecognizerState[\"Cancelled\"] = 16] = \"Cancelled\";\n    RecognizerState[RecognizerState[\"Failed\"] = 32] = \"Failed\";\n})(RecognizerState || (RecognizerState = {}));\n//# sourceMappingURL=recognizer-state.js.map","// magical touchAction value\nexport const TOUCH_ACTION_COMPUTE = 'compute';\nexport const TOUCH_ACTION_AUTO = 'auto';\nexport const TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nexport const TOUCH_ACTION_NONE = 'none';\nexport const TOUCH_ACTION_PAN_X = 'pan-x';\nexport const TOUCH_ACTION_PAN_Y = 'pan-y';\n//# sourceMappingURL=touchaction-Consts.js.map","import { TOUCH_ACTION_NONE, TOUCH_ACTION_PAN_X, TOUCH_ACTION_PAN_Y, TOUCH_ACTION_MANIPULATION, TOUCH_ACTION_AUTO } from \"./touchaction-Consts.js\";\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @returns valid touchAction\n */\nexport default function cleanTouchActions(actions) {\n    // none\n    if (actions.includes(TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n    const hasPanX = actions.includes(TOUCH_ACTION_PAN_X);\n    const hasPanY = actions.includes(TOUCH_ACTION_PAN_Y);\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n    // manipulation\n    if (actions.includes(TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n    return TOUCH_ACTION_AUTO;\n}\n//# sourceMappingURL=clean-touch-actions.js.map","import { TOUCH_ACTION_COMPUTE } from \"./touchaction-Consts.js\";\nimport cleanTouchActions from \"./clean-touch-actions.js\";\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n */\nexport class TouchAction {\n    constructor(manager, value) {\n        this.actions = '';\n        this.manager = manager;\n        this.set(value);\n    }\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     */\n    set(value) {\n        // find out the touch-action by the event handlers\n        if (value === TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n        if (this.manager.element) {\n            this.manager.element.style.touchAction = value;\n            this.actions = value;\n        }\n    }\n    /**\n     * just re-set the touchAction value\n     */\n    update() {\n        this.set(this.manager.options.touchAction);\n    }\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     */\n    compute() {\n        let actions = [];\n        for (const recognizer of this.manager.recognizers) {\n            if (recognizer.options.enable) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        }\n        return cleanTouchActions(actions.join(' '));\n    }\n}\n//# sourceMappingURL=touchaction.js.map","/**\n * split string on whitespace\n * @returns {Array} words\n */\nexport function splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n//# sourceMappingURL=split-str.js.map","import { splitStr } from \"./split-str.js\";\n/**\n * addEventListener with multiple events at once\n */\nexport function addEventListeners(target, types, handler) {\n    if (!target) {\n        return;\n    }\n    for (const type of splitStr(types)) {\n        target.addEventListener(type, handler, false);\n    }\n}\n/**\n * removeEventListener with multiple events at once\n */\nexport function removeEventListeners(target, types, handler) {\n    if (!target) {\n        return;\n    }\n    for (const type of splitStr(types)) {\n        target.removeEventListener(type, handler, false);\n    }\n}\n//# sourceMappingURL=event-listeners.js.map","/**\n * get the window object of an element\n */\nexport function getWindowForElement(element) {\n    const doc = element.ownerDocument || element;\n    return doc.defaultView;\n}\n//# sourceMappingURL=get-window-for-element.js.map","/**\n * find if a node is in the given parent\n */\nexport default function hasParent(node, parent) {\n    let ancestor = node;\n    while (ancestor) {\n        if (ancestor === parent) {\n            return true;\n        }\n        ancestor = ancestor.parentNode;\n    }\n    return false;\n}\n//# sourceMappingURL=has-parent.js.map","/**\n * get the center of all the pointers\n */\nexport function getCenter(pointers) {\n    const pointersLength = pointers.length;\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: Math.round(pointers[0].clientX),\n            y: Math.round(pointers[0].clientY)\n        };\n    }\n    let x = 0;\n    let y = 0;\n    let i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n    return {\n        x: Math.round(x / pointersLength),\n        y: Math.round(y / pointersLength)\n    };\n}\n//# sourceMappingURL=get-center.js.map","import { getCenter } from \"./get-center.js\";\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n */\nexport function simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    const pointers = [];\n    let i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: Math.round(input.pointers[i].clientX),\n            clientY: Math.round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n    return {\n        timeStamp: Date.now(),\n        pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n//# sourceMappingURL=simple-clone-input-data.js.map","/**\n * calculate the absolute distance between two points\n * @returns distance\n */\nexport function getPointDistance(p1, p2) {\n    const x = p2.x - p1.x;\n    const y = p2.y - p1.y;\n    return Math.sqrt(x * x + y * y);\n}\n/**\n * calculate the absolute distance between two pointer events\n * @returns distance\n */\nexport function getEventDistance(p1, p2) {\n    const x = p2.clientX - p1.clientX;\n    const y = p2.clientY - p1.clientY;\n    return Math.sqrt(x * x + y * y);\n}\n//# sourceMappingURL=get-distance.js.map","/**\n * calculate the angle between two coordinates\n * @returns angle in degrees\n */\nexport function getPointAngle(p1, p2) {\n    const x = p2.x - p1.x;\n    const y = p2.y - p1.y;\n    return (Math.atan2(y, x) * 180) / Math.PI;\n}\n/**\n * calculate the angle between two pointer events\n * @returns angle in degrees\n */\nexport function getEventAngle(p1, p2) {\n    const x = p2.clientX - p1.clientX;\n    const y = p2.clientY - p1.clientY;\n    return (Math.atan2(y, x) * 180) / Math.PI;\n}\n//# sourceMappingURL=get-angle.js.map","import { InputDirection } from \"./input-consts.js\";\n/**\n * get the direction between two points\n * @returns direction\n */\nexport function getDirection(dx, dy) {\n    if (dx === dy) {\n        return InputDirection.None;\n    }\n    if (Math.abs(dx) >= Math.abs(dy)) {\n        return dx < 0 ? InputDirection.Left : InputDirection.Right;\n    }\n    return dy < 0 ? InputDirection.Up : InputDirection.Down;\n}\n//# sourceMappingURL=get-direction.js.map","import { InputEvent } from \"./input-consts.js\";\n/** Populates input.deltaX, input.deltaY */\nexport function computeDeltaXY(session, input) {\n    // getCenter is called before computeDeltaXY\n    const center = input.center;\n    let offset = session.offsetDelta;\n    let prevDelta = session.prevDelta;\n    const prevInput = session.prevInput;\n    if (input.eventType === InputEvent.Start || prevInput?.eventType === InputEvent.End) {\n        prevDelta = session.prevDelta = {\n            x: prevInput?.deltaX || 0,\n            y: prevInput?.deltaY || 0\n        };\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n    return {\n        deltaX: prevDelta.x + (center.x - offset.x),\n        deltaY: prevDelta.y + (center.y - offset.y)\n    };\n}\n//# sourceMappingURL=get-delta-xy.js.map","/**\n * calculate the velocity between two points. unit is in px per ms.\n */\nexport function getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n//# sourceMappingURL=get-velocity.js.map","import { getEventDistance } from \"./get-distance.js\";\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n */\nexport function getScale(start, end) {\n    return getEventDistance(end[0], end[1]) / getEventDistance(start[0], start[1]);\n}\n//# sourceMappingURL=get-scale.js.map","import { getEventAngle } from \"./get-angle.js\";\n/**\n * calculate the rotation degrees between two pointer sets\n * @returns rotation in degrees\n */\nexport function getRotation(start, end) {\n    return getEventAngle(end[1], end[0]) - getEventAngle(start[1], start[0]);\n}\n//# sourceMappingURL=get-rotation.js.map","import { InputEvent, COMPUTE_INTERVAL } from \"./input-consts.js\";\nimport { getVelocity } from \"./get-velocity.js\";\nimport { getDirection } from \"./get-direction.js\";\n/**\n * velocity is calculated every x ms\n */\nexport function computeIntervalInputData(session, input) {\n    const last = session.lastInterval || input;\n    const deltaTime = input.timeStamp - last.timeStamp;\n    let velocity;\n    let velocityX;\n    let velocityY;\n    let direction;\n    if (input.eventType !== InputEvent.Cancel &&\n        (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        const deltaX = input.deltaX - last.deltaX;\n        const deltaY = input.deltaY - last.deltaY;\n        const v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = Math.abs(v.x) > Math.abs(v.y) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n        session.lastInterval = input;\n    }\n    else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n//# sourceMappingURL=compute-interval-input-data.js.map","import hasParent from \"../utils/has-parent.js\";\nimport { simpleCloneInputData } from \"./simple-clone-input-data.js\";\nimport { getCenter } from \"./get-center.js\";\nimport { getPointDistance } from \"./get-distance.js\";\nimport { getPointAngle } from \"./get-angle.js\";\nimport { getDirection } from \"./get-direction.js\";\nimport { computeDeltaXY } from \"./get-delta-xy.js\";\nimport { getVelocity } from \"./get-velocity.js\";\nimport { getScale } from \"./get-scale.js\";\nimport { getRotation } from \"./get-rotation.js\";\nimport { computeIntervalInputData } from \"./compute-interval-input-data.js\";\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n */\nexport function computeInputData(manager, input) {\n    const { session } = manager;\n    const { pointers } = input;\n    const { length: pointersLength } = pointers;\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    }\n    else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n    const { firstInput, firstMultiple } = session;\n    const offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n    const center = (input.center = getCenter(pointers));\n    input.timeStamp = Date.now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n    input.angle = getPointAngle(offsetCenter, center);\n    input.distance = getPointDistance(offsetCenter, center);\n    const { deltaX, deltaY } = computeDeltaXY(session, input);\n    input.deltaX = deltaX;\n    input.deltaY = deltaY;\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n    const overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity =\n        Math.abs(overallVelocity.x) > Math.abs(overallVelocity.y)\n            ? overallVelocity.x\n            : overallVelocity.y;\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n    input.maxPointers = !session.prevInput\n        ? input.pointers.length\n        : input.pointers.length > session.prevInput.maxPointers\n            ? input.pointers.length\n            : session.prevInput.maxPointers;\n    // find the correct target\n    let target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n    computeIntervalInputData(session, input);\n    // All the optional fields have been populated\n    return input;\n}\n//# sourceMappingURL=compute-input-data.js.map","import { InputEvent } from \"./input-consts.js\";\nimport { computeInputData } from \"./compute-input-data.js\";\n/**\n * handle input events\n */\nexport function inputHandler(manager, eventType, input) {\n    const pointersLen = input.pointers.length;\n    const changedPointersLen = input.changedPointers.length;\n    const isFirst = eventType & InputEvent.Start && pointersLen - changedPointersLen === 0;\n    const isFinal = eventType & (InputEvent.End | InputEvent.Cancel) && pointersLen - changedPointersLen === 0;\n    input.isFirst = Boolean(isFirst);\n    input.isFinal = Boolean(isFinal);\n    if (isFirst) {\n        manager.session = {};\n    }\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n    // compute scale, rotation etc\n    const processedInput = computeInputData(manager, input);\n    // emit secret event\n    manager.emit('hammer.input', processedInput);\n    manager.recognize(processedInput);\n    manager.session.prevInput = processedInput;\n}\n//# sourceMappingURL=input-handler.js.map","import { addEventListeners, removeEventListeners } from \"../utils/event-listeners.js\";\nimport { getWindowForElement } from \"../utils/get-window-for-element.js\";\nimport { inputHandler } from \"./input-handler.js\";\n/**\n * create new input type manager\n */\nexport class Input {\n    constructor(manager) {\n        this.evEl = '';\n        this.evWin = '';\n        this.evTarget = '';\n        /** smaller wrapper around the handler, for the scope and the enabled state of the manager,\n         * so when disabled the input events are completely bypassed.\n         */\n        this.domHandler = (ev) => {\n            if (this.manager.options.enable) {\n                this.handler(ev);\n            }\n        };\n        this.manager = manager;\n        this.element = manager.element;\n        this.target = manager.options.inputTarget || manager.element;\n    }\n    callback(eventType, input) {\n        inputHandler(this.manager, eventType, input);\n    }\n    // eslint-disable @typescript-eslint/unbound-method\n    /**\n     * bind the events\n     */\n    init() {\n        addEventListeners(this.element, this.evEl, this.domHandler);\n        addEventListeners(this.target, this.evTarget, this.domHandler);\n        addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n    /**\n     * unbind the events\n     */\n    destroy() {\n        removeEventListeners(this.element, this.evEl, this.domHandler);\n        removeEventListeners(this.target, this.evTarget, this.domHandler);\n        removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n}\n//# sourceMappingURL=input.js.map","import { InputEvent } from \"../input/input-consts.js\";\nimport { Input } from \"../input/input.js\";\nconst POINTER_INPUT_MAP = {\n    pointerdown: InputEvent.Start,\n    pointermove: InputEvent.Move,\n    pointerup: InputEvent.End,\n    pointercancel: InputEvent.Cancel,\n    pointerout: InputEvent.Cancel\n};\nconst POINTER_ELEMENT_EVENTS = 'pointerdown';\nconst POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n/**\n * Pointer events input\n */\nexport class PointerEventInput extends Input {\n    constructor(manager) {\n        super(manager);\n        this.evEl = POINTER_ELEMENT_EVENTS;\n        this.evWin = POINTER_WINDOW_EVENTS;\n        this.store = this.manager.session.pointerEvents = [];\n        this.init();\n    }\n    /**\n     * handle mouse events\n     */\n    handler(ev) {\n        const { store } = this;\n        let removePointer = false;\n        // @ts-ignore\n        const eventType = POINTER_INPUT_MAP[ev.type];\n        const pointerType = ev.pointerType;\n        const isTouch = pointerType === 'touch';\n        // get index of the event in the store\n        let storeIndex = store.findIndex((e) => e.pointerId === ev.pointerId);\n        // start and mouse must be down\n        if (eventType & InputEvent.Start && (ev.buttons || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        }\n        else if (eventType & (InputEvent.End | InputEvent.Cancel)) {\n            removePointer = true;\n        }\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n        // update the event in the store\n        store[storeIndex] = ev;\n        this.callback(eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            eventType,\n            pointerType,\n            srcEvent: ev\n        });\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n}\n//# sourceMappingURL=pointerevent.js.map","const VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\n/**\n * get the prefixed property\n * @returns prefixed property name\n */\nexport function prefixed(obj, property) {\n    const camelProp = property[0].toUpperCase() + property.slice(1);\n    for (const prefix of VENDOR_PREFIXES) {\n        const prop = prefix ? prefix + camelProp : property;\n        if (prop in obj) {\n            return prop;\n        }\n    }\n    return undefined;\n}\n//# sourceMappingURL=prefixed.js.map","import { TouchAction } from \"./touchaction/touchaction.js\";\nimport { PointerEventInput } from \"./inputs/pointerevent.js\";\nimport { splitStr } from \"./utils/split-str.js\";\nimport { prefixed } from \"./utils/prefixed.js\";\nimport { RecognizerState } from \"./recognizer/recognizer-state.js\";\nconst STOP = 1;\nconst FORCED_STOP = 2;\nconst defaultOptions = {\n    touchAction: 'compute',\n    enable: true,\n    inputTarget: null,\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         */\n        userSelect: 'none',\n        /**\n         * (Webkit) Disable default dragging behavior\n         */\n        // @ts-ignore\n        userDrag: 'none',\n        /**\n         * (iOS only) Disables the default callout shown when you touch and hold a touch target.\n         * When you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         */\n        // @ts-ignore\n        touchCallout: 'none',\n        /**\n         * (iOS only) Sets the color of the highlight that appears over a link while it's being tapped.\n         */\n        // @ts-ignore\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n/**\n * Manager\n */\nexport class Manager {\n    constructor(element, options) {\n        this.options = {\n            ...defaultOptions,\n            ...options,\n            cssProps: { ...defaultOptions.cssProps, ...options.cssProps },\n            inputTarget: options.inputTarget || element\n        };\n        this.handlers = {};\n        this.session = {};\n        this.recognizers = [];\n        this.oldCssProps = {};\n        this.element = element;\n        this.input = new PointerEventInput(this);\n        this.touchAction = new TouchAction(this, this.options.touchAction);\n        this.toggleCssProps(true);\n    }\n    /**\n     * set options\n     */\n    set(options) {\n        Object.assign(this.options, options);\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    }\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     */\n    stop(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    }\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     */\n    recognize(inputData) {\n        const { session } = this;\n        if (session.stopped) {\n            return;\n        }\n        // run the touch-action polyfill\n        if (this.session.prevented) {\n            inputData.srcEvent.preventDefault();\n        }\n        let recognizer;\n        const { recognizers } = this;\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        let { curRecognizer } = session;\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & RecognizerState.Recognized)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n        let i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && // 1\n                (!curRecognizer ||\n                    recognizer === curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) {\n                // 3\n                recognizer.recognize(inputData);\n            }\n            else {\n                recognizer.reset();\n            }\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer &&\n                recognizer.state & (RecognizerState.Began | RecognizerState.Changed | RecognizerState.Ended)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    }\n    /**\n     * get a recognizer by its event name.\n     */\n    get(recognizerName) {\n        const { recognizers } = this;\n        for (let i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event === recognizerName) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    }\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     */\n    add(recognizer) {\n        if (Array.isArray(recognizer)) {\n            for (const item of recognizer) {\n                this.add(item);\n            }\n            return this;\n        }\n        // remove existing\n        const existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n        this.touchAction.update();\n        return recognizer;\n    }\n    /**\n     * remove a recognizer by name or instance\n     */\n    remove(recognizerOrName) {\n        if (Array.isArray(recognizerOrName)) {\n            for (const item of recognizerOrName) {\n                this.remove(item);\n            }\n            return this;\n        }\n        const recognizer = typeof recognizerOrName === 'string' ? this.get(recognizerOrName) : recognizerOrName;\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            const { recognizers } = this;\n            const index = recognizers.indexOf(recognizer);\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n        return this;\n    }\n    /**\n     * bind event\n     */\n    on(events, handler) {\n        if (!events || !handler) {\n            return;\n        }\n        const { handlers } = this;\n        for (const event of splitStr(events)) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        }\n    }\n    /**\n     * unbind event, leave hander blank to remove all handlers\n     */\n    off(events, handler) {\n        if (!events) {\n            return;\n        }\n        const { handlers } = this;\n        for (const event of splitStr(events)) {\n            if (!handler) {\n                delete handlers[event];\n            }\n            else if (handlers[event]) {\n                handlers[event].splice(handlers[event].indexOf(handler), 1);\n            }\n        }\n    }\n    /**\n     * emit event to the listeners\n     */\n    emit(event, data) {\n        // no handlers, so skip it all\n        const handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n        const evt = data;\n        evt.type = event;\n        evt.preventDefault = function () {\n            data.srcEvent.preventDefault();\n        };\n        let i = 0;\n        while (i < handlers.length) {\n            handlers[i](evt);\n            i++;\n        }\n    }\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy() {\n        this.toggleCssProps(false);\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n    /**\n     * add/remove the css properties as defined in manager.options.cssProps\n     */\n    toggleCssProps(add) {\n        const { element } = this;\n        if (!element) {\n            return;\n        }\n        for (const [name, value] of Object.entries(this.options.cssProps)) {\n            const prop = prefixed(element.style, name);\n            if (add) {\n                this.oldCssProps[prop] = element.style[prop];\n                element.style[prop] = value;\n            }\n            else {\n                element.style[prop] = this.oldCssProps[prop] || '';\n            }\n        }\n        if (!add) {\n            this.oldCssProps = {};\n        }\n    }\n}\n//# sourceMappingURL=manager.js.map","/**\n * get a unique id\n */\nlet _uniqueId = 1;\nexport function uniqueId() {\n    return _uniqueId++;\n}\n//# sourceMappingURL=unique-id.js.map","import { RecognizerState } from \"./recognizer-state.js\";\n/**\n * get a usable string, used as event postfix\n */\nexport function stateStr(state) {\n    if (state & RecognizerState.Cancelled) {\n        return 'cancel';\n    }\n    else if (state & RecognizerState.Ended) {\n        return 'end';\n    }\n    else if (state & RecognizerState.Changed) {\n        return 'move';\n    }\n    else if (state & RecognizerState.Began) {\n        return 'start';\n    }\n    return '';\n}\n//# sourceMappingURL=state-str.js.map","import { RecognizerState } from \"./recognizer-state.js\";\nimport { uniqueId } from \"../utils/unique-id.js\";\nimport { stateStr } from \"./state-str.js\";\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n */\nexport class Recognizer {\n    constructor(options) {\n        this.options = options;\n        this.id = uniqueId();\n        this.state = RecognizerState.Possible;\n        this.simultaneous = {};\n        this.requireFail = [];\n    }\n    /**\n     * set options\n     */\n    set(options) {\n        Object.assign(this.options, options);\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager.touchAction.update();\n        return this;\n    }\n    /**\n     * recognize simultaneous with an other recognizer.\n     */\n    recognizeWith(recognizerOrName) {\n        if (Array.isArray(recognizerOrName)) {\n            for (const item of recognizerOrName) {\n                this.recognizeWith(item);\n            }\n            return this;\n        }\n        let otherRecognizer;\n        if (typeof recognizerOrName === 'string') {\n            otherRecognizer = this.manager.get(recognizerOrName);\n            if (!otherRecognizer) {\n                throw new Error(`Cannot find recognizer ${recognizerOrName}`);\n            }\n        }\n        else {\n            otherRecognizer = recognizerOrName;\n        }\n        const { simultaneous } = this;\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    }\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     */\n    dropRecognizeWith(recognizerOrName) {\n        if (Array.isArray(recognizerOrName)) {\n            for (const item of recognizerOrName) {\n                this.dropRecognizeWith(item);\n            }\n            return this;\n        }\n        let otherRecognizer;\n        if (typeof recognizerOrName === 'string') {\n            otherRecognizer = this.manager.get(recognizerOrName);\n        }\n        else {\n            otherRecognizer = recognizerOrName;\n        }\n        if (otherRecognizer) {\n            delete this.simultaneous[otherRecognizer.id];\n        }\n        return this;\n    }\n    /**\n     * recognizer can only run when an other is failing\n     */\n    requireFailure(recognizerOrName) {\n        if (Array.isArray(recognizerOrName)) {\n            for (const item of recognizerOrName) {\n                this.requireFailure(item);\n            }\n            return this;\n        }\n        let otherRecognizer;\n        if (typeof recognizerOrName === 'string') {\n            otherRecognizer = this.manager.get(recognizerOrName);\n            if (!otherRecognizer) {\n                throw new Error(`Cannot find recognizer ${recognizerOrName}`);\n            }\n        }\n        else {\n            otherRecognizer = recognizerOrName;\n        }\n        const { requireFail } = this;\n        if (requireFail.indexOf(otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    }\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     */\n    dropRequireFailure(recognizerOrName) {\n        if (Array.isArray(recognizerOrName)) {\n            for (const item of recognizerOrName) {\n                this.dropRequireFailure(item);\n            }\n            return this;\n        }\n        let otherRecognizer;\n        if (typeof recognizerOrName === 'string') {\n            otherRecognizer = this.manager.get(recognizerOrName);\n        }\n        else {\n            otherRecognizer = recognizerOrName;\n        }\n        if (otherRecognizer) {\n            const index = this.requireFail.indexOf(otherRecognizer);\n            if (index > -1) {\n                this.requireFail.splice(index, 1);\n            }\n        }\n        return this;\n    }\n    /**\n     * has require failures boolean\n     */\n    hasRequireFailures() {\n        return Boolean(this.requireFail.find((recognier) => recognier.options.enable));\n    }\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     */\n    canRecognizeWith(otherRecognizer) {\n        return Boolean(this.simultaneous[otherRecognizer.id]);\n    }\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     */\n    emit(input) {\n        // Some recognizers override emit() with their own logic\n        if (!input)\n            return;\n        const { state } = this;\n        // 'panstart' and 'panmove'\n        if (state < RecognizerState.Ended) {\n            this.manager.emit(this.options.event + stateStr(state), input);\n        }\n        // simple 'eventName' events\n        this.manager.emit(this.options.event, input);\n        // additional event(panleft, panright, pinchin, pinchout...)\n        if (input.additionalEvent) {\n            this.manager.emit(input.additionalEvent, input);\n        }\n        // panend and pancancel\n        if (state >= RecognizerState.Ended) {\n            this.manager.emit(this.options.event + stateStr(state), input);\n        }\n    }\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     */\n    tryEmit(input) {\n        if (this.canEmit()) {\n            this.emit(input);\n        }\n        else {\n            // it's failing anyway\n            this.state = RecognizerState.Failed;\n        }\n    }\n    /**\n     * can we emit?\n     */\n    canEmit() {\n        let i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (RecognizerState.Failed | RecognizerState.Possible))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    }\n    /**\n     * update the recognizer\n     */\n    recognize(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        const inputDataClone = { ...inputData };\n        // is is enabled and allow recognizing?\n        if (!this.options.enable) {\n            this.reset();\n            this.state = RecognizerState.Failed;\n            return;\n        }\n        // reset when we've reached the end\n        if (this.state &\n            (RecognizerState.Recognized | RecognizerState.Cancelled | RecognizerState.Failed)) {\n            this.state = RecognizerState.Possible;\n        }\n        this.state = this.process(inputDataClone);\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state &\n            (RecognizerState.Began |\n                RecognizerState.Changed |\n                RecognizerState.Ended |\n                RecognizerState.Cancelled)) {\n            this.tryEmit(inputDataClone);\n        }\n    }\n    /**\n     * return the event names that are emitted by this recognizer\n     */\n    getEventNames() {\n        return [this.options.event];\n    }\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     */\n    reset() { }\n}\n//# sourceMappingURL=recognizer.js.map","import { Recognizer } from \"../recognizer/recognizer.js\";\nimport { RecognizerState } from \"../recognizer/recognizer-state.js\";\nimport { InputEvent } from \"../input/input-consts.js\";\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n */\nexport class AttrRecognizer extends Recognizer {\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     */\n    attrTest(input) {\n        const optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    }\n    /**\n     * Process the input and return the state for the recognizer\n     */\n    process(input) {\n        const { state } = this;\n        const { eventType } = input;\n        const isRecognized = state & (RecognizerState.Began | RecognizerState.Changed);\n        const isValid = this.attrTest(input);\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & InputEvent.Cancel || !isValid)) {\n            return state | RecognizerState.Cancelled;\n        }\n        else if (isRecognized || isValid) {\n            if (eventType & InputEvent.End) {\n                return state | RecognizerState.Ended;\n            }\n            else if (!(state & RecognizerState.Began)) {\n                return RecognizerState.Began;\n            }\n            return state | RecognizerState.Changed;\n        }\n        return RecognizerState.Failed;\n    }\n}\n//# sourceMappingURL=attribute.js.map","/* global setTimeout, clearTimeout */\nimport { Recognizer } from \"../recognizer/recognizer.js\";\nimport { TOUCH_ACTION_MANIPULATION } from \"../touchaction/touchaction-Consts.js\";\nimport { InputEvent } from \"../input/input-consts.js\";\nimport { RecognizerState } from \"../recognizer/recognizer-state.js\";\nimport { getPointDistance } from \"../input/get-distance.js\";\n/**\n * A tap is recognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n */\nexport class TapRecognizer extends Recognizer {\n    constructor(options = {}) {\n        super({\n            enable: true,\n            event: 'tap',\n            pointers: 1,\n            taps: 1,\n            interval: 300,\n            time: 250,\n            threshold: 9,\n            posThreshold: 10,\n            ...options\n        });\n        /** previous time for tap counting */\n        this.pTime = null;\n        /** previous center for tap counting */\n        this.pCenter = null;\n        this._timer = null;\n        this._input = null;\n        this.count = 0;\n    }\n    getTouchAction() {\n        return [TOUCH_ACTION_MANIPULATION];\n    }\n    process(input) {\n        const { options } = this;\n        const validPointers = input.pointers.length === options.pointers;\n        const validMovement = input.distance < options.threshold;\n        const validTouchTime = input.deltaTime < options.time;\n        this.reset();\n        if (input.eventType & InputEvent.Start && this.count === 0) {\n            return this.failTimeout();\n        }\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType !== InputEvent.End) {\n                return this.failTimeout();\n            }\n            const validInterval = this.pTime ? input.timeStamp - this.pTime < options.interval : true;\n            const validMultiTap = !this.pCenter || getPointDistance(this.pCenter, input.center) < options.posThreshold;\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            }\n            else {\n                this.count += 1;\n            }\n            this._input = input;\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            const tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return RecognizerState.Recognized;\n                }\n                this._timer = setTimeout(() => {\n                    this.state = RecognizerState.Recognized;\n                    this.tryEmit(this._input);\n                }, options.interval);\n                return RecognizerState.Began;\n            }\n        }\n        return RecognizerState.Failed;\n    }\n    failTimeout() {\n        this._timer = setTimeout(() => {\n            this.state = RecognizerState.Failed;\n        }, this.options.interval);\n        return RecognizerState.Failed;\n    }\n    reset() {\n        clearTimeout(this._timer);\n    }\n    emit(input) {\n        if (this.state === RecognizerState.Recognized) {\n            input.tapCount = this.count;\n            this.manager.emit(this.options.event, input);\n        }\n    }\n}\n//# sourceMappingURL=tap.js.map","import { AttrRecognizer } from \"./attribute.js\";\nimport { InputDirection } from \"../input/input-consts.js\";\nimport { RecognizerState } from \"../recognizer/recognizer-state.js\";\nimport { TOUCH_ACTION_PAN_X, TOUCH_ACTION_PAN_Y } from \"../touchaction/touchaction-Consts.js\";\nconst EVENT_NAMES = ['', 'start', 'move', 'end', 'cancel', 'up', 'down', 'left', 'right'];\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n */\nexport class PanRecognizer extends AttrRecognizer {\n    constructor(options = {}) {\n        super({\n            enable: true,\n            pointers: 1,\n            event: 'pan',\n            threshold: 10,\n            direction: InputDirection.All,\n            ...options\n        });\n        this.pX = null;\n        this.pY = null;\n    }\n    getTouchAction() {\n        const { options: { direction } } = this;\n        const actions = [];\n        if (direction & InputDirection.Horizontal) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & InputDirection.Vertical) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    }\n    getEventNames() {\n        return EVENT_NAMES.map((suffix) => this.options.event + suffix);\n    }\n    directionTest(input) {\n        const { options } = this;\n        let hasMoved = true;\n        let { distance } = input;\n        let { direction } = input;\n        const x = input.deltaX;\n        const y = input.deltaY;\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & InputDirection.Horizontal) {\n                direction =\n                    x === 0 ? InputDirection.None : x < 0 ? InputDirection.Left : InputDirection.Right;\n                hasMoved = x !== this.pX;\n                distance = Math.abs(input.deltaX);\n            }\n            else {\n                direction = y === 0 ? InputDirection.None : y < 0 ? InputDirection.Up : InputDirection.Down;\n                hasMoved = y !== this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && Boolean(direction & options.direction);\n    }\n    attrTest(input) {\n        return (super.attrTest(input) &&\n            (Boolean(this.state & RecognizerState.Began) ||\n                (!(this.state & RecognizerState.Began) && this.directionTest(input))));\n    }\n    emit(input) {\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n        const direction = InputDirection[input.direction].toLowerCase();\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        super.emit(input);\n    }\n}\n//# sourceMappingURL=pan.js.map","import { AttrRecognizer } from \"./attribute.js\";\nimport { TOUCH_ACTION_NONE } from \"../touchaction/touchaction-Consts.js\";\nimport { RecognizerState } from \"../recognizer/recognizer-state.js\";\nconst EVENT_NAMES = ['', 'start', 'move', 'end', 'cancel', 'in', 'out'];\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n */\nexport class PinchRecognizer extends AttrRecognizer {\n    constructor(options = {}) {\n        super({\n            enable: true,\n            event: 'pinch',\n            threshold: 0,\n            pointers: 2,\n            ...options\n        });\n    }\n    getTouchAction() {\n        return [TOUCH_ACTION_NONE];\n    }\n    getEventNames() {\n        return EVENT_NAMES.map((suffix) => this.options.event + suffix);\n    }\n    attrTest(input) {\n        return (super.attrTest(input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold ||\n                Boolean(this.state & RecognizerState.Began)));\n    }\n    emit(input) {\n        if (input.scale !== 1) {\n            const inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        super.emit(input);\n    }\n}\n//# sourceMappingURL=pinch.js.map","// mjolnir.js\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport class Input {\n    constructor(element, callback, options) {\n        this.element = element;\n        this.callback = callback;\n        this.options = options;\n    }\n}\n//# sourceMappingURL=input.js.map","// mjolnir.js\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Purpose: include this in your module to avoids adding dependencies on\n// micro modules like 'global'\n/* global window, global, document, navigator */\nexport const userAgent = typeof navigator !== 'undefined' && navigator.userAgent ? navigator.userAgent.toLowerCase() : '';\nconst window_ = typeof window !== 'undefined' ? window : global;\nconst global_ = typeof global !== 'undefined' ? global : window;\nconst document_ = typeof document !== 'undefined' ? document : {};\nexport { window_ as window, global_ as global, document_ as document };\n//# sourceMappingURL=globals.js.map","// mjolnir.js\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Input } from \"./input.js\";\nimport { userAgent } from \"../utils/globals.js\";\nconst firefox = userAgent.indexOf('firefox') !== -1;\n// Constants for normalizing input delta\nconst WHEEL_DELTA_MAGIC_SCALER = 4.000244140625;\nconst WHEEL_DELTA_PER_LINE = 40;\n// Slow down zoom if shift key is held for more precise zooming\nconst SHIFT_MULTIPLIER = 0.25;\nexport class WheelInput extends Input {\n    constructor(element, callback, options) {\n        super(element, callback, { enable: true, ...options });\n        /* eslint-disable complexity, max-statements */\n        this.handleEvent = (event) => {\n            if (!this.options.enable) {\n                return;\n            }\n            let value = event.deltaY;\n            if (globalThis.WheelEvent) {\n                // Firefox doubles the values on retina screens...\n                if (firefox && event.deltaMode === globalThis.WheelEvent.DOM_DELTA_PIXEL) {\n                    value /= globalThis.devicePixelRatio;\n                }\n                if (event.deltaMode === globalThis.WheelEvent.DOM_DELTA_LINE) {\n                    value *= WHEEL_DELTA_PER_LINE;\n                }\n            }\n            if (value !== 0 && value % WHEEL_DELTA_MAGIC_SCALER === 0) {\n                // This one is definitely a mouse wheel event.\n                // Normalize this value to match trackpad.\n                value = Math.floor(value / WHEEL_DELTA_MAGIC_SCALER);\n            }\n            if (event.shiftKey && value) {\n                value = value * SHIFT_MULTIPLIER;\n            }\n            this.callback({\n                type: 'wheel',\n                center: {\n                    x: event.clientX,\n                    y: event.clientY\n                },\n                delta: -value,\n                srcEvent: event,\n                pointerType: 'mouse',\n                target: event.target\n            });\n        };\n        element.addEventListener('wheel', this.handleEvent, { passive: false });\n    }\n    destroy() {\n        this.element.removeEventListener('wheel', this.handleEvent);\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n    enableEventType(eventType, enabled) {\n        if (eventType === 'wheel') {\n            this.options.enable = enabled;\n        }\n    }\n}\n//# sourceMappingURL=wheel-input.js.map","// mjolnir.js\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Input } from \"./input.js\";\nconst MOUSE_EVENTS = [\n    'mousedown',\n    'mousemove',\n    'mouseup',\n    'mouseover',\n    'mouseout',\n    'mouseleave'\n];\n/**\n * Hammer.js swallows 'move' events (for pointer/touch/mouse)\n * when the pointer is not down. This class sets up a handler\n * specifically for these events to work around this limitation.\n * Note that this could be extended to more intelligently handle\n * move events across input types, e.g. storing multiple simultaneous\n * pointer/touch events, calculating speed/direction, etc.\n */\nexport class MoveInput extends Input {\n    constructor(element, callback, options) {\n        super(element, callback, { enable: true, ...options });\n        this.handleEvent = (event) => {\n            this.handleOverEvent(event);\n            this.handleOutEvent(event);\n            this.handleEnterEvent(event);\n            this.handleLeaveEvent(event);\n            this.handleMoveEvent(event);\n        };\n        this.pressed = false;\n        const { enable } = this.options;\n        this.enableMoveEvent = enable;\n        this.enableLeaveEvent = enable;\n        this.enableEnterEvent = enable;\n        this.enableOutEvent = enable;\n        this.enableOverEvent = enable;\n        MOUSE_EVENTS.forEach((event) => element.addEventListener(event, this.handleEvent));\n    }\n    destroy() {\n        MOUSE_EVENTS.forEach((event) => this.element.removeEventListener(event, this.handleEvent));\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n    enableEventType(eventType, enabled) {\n        switch (eventType) {\n            case 'pointermove':\n                this.enableMoveEvent = enabled;\n                break;\n            case 'pointerover':\n                this.enableOverEvent = enabled;\n                break;\n            case 'pointerout':\n                this.enableOutEvent = enabled;\n                break;\n            case 'pointerenter':\n                this.enableEnterEvent = enabled;\n                break;\n            case 'pointerleave':\n                this.enableLeaveEvent = enabled;\n                break;\n            default:\n            // ignore\n        }\n    }\n    handleOverEvent(event) {\n        if (this.enableOverEvent && event.type === 'mouseover') {\n            this._emit('pointerover', event);\n        }\n    }\n    handleOutEvent(event) {\n        if (this.enableOutEvent && event.type === 'mouseout') {\n            this._emit('pointerout', event);\n        }\n    }\n    handleEnterEvent(event) {\n        if (this.enableEnterEvent && event.type === 'mouseenter') {\n            this._emit('pointerenter', event);\n        }\n    }\n    handleLeaveEvent(event) {\n        if (this.enableLeaveEvent && event.type === 'mouseleave') {\n            this._emit('pointerleave', event);\n        }\n    }\n    handleMoveEvent(event) {\n        if (this.enableMoveEvent) {\n            switch (event.type) {\n                case 'mousedown':\n                    if (event.button >= 0) {\n                        // Button is down\n                        this.pressed = true;\n                    }\n                    break;\n                case 'mousemove':\n                    // Move events use `bottons` to track the button being pressed\n                    if (event.buttons === 0) {\n                        // Button is not down\n                        this.pressed = false;\n                    }\n                    if (!this.pressed) {\n                        // Drag events are emitted by hammer already\n                        // we just need to emit the move event on hover\n                        this._emit('pointermove', event);\n                    }\n                    break;\n                case 'mouseup':\n                    this.pressed = false;\n                    break;\n                default:\n            }\n        }\n    }\n    _emit(type, event) {\n        this.callback({\n            type,\n            center: {\n                x: event.clientX,\n                y: event.clientY\n            },\n            srcEvent: event,\n            pointerType: 'mouse',\n            target: event.target\n        });\n    }\n}\n//# sourceMappingURL=move-input.js.map","// mjolnir.js\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Input } from \"./input.js\";\nconst KEY_EVENTS = ['keydown', 'keyup'];\nexport class KeyInput extends Input {\n    constructor(element, callback, options) {\n        super(element, callback, { enable: true, tabIndex: 0, ...options });\n        this.handleEvent = (event) => {\n            // Ignore if focused on text input\n            const targetElement = (event.target || event.srcElement);\n            if ((targetElement.tagName === 'INPUT' && targetElement.type === 'text') ||\n                targetElement.tagName === 'TEXTAREA') {\n                return;\n            }\n            if (this.enableDownEvent && event.type === 'keydown') {\n                this.callback({\n                    type: 'keydown',\n                    srcEvent: event,\n                    key: event.key,\n                    target: event.target\n                });\n            }\n            if (this.enableUpEvent && event.type === 'keyup') {\n                this.callback({\n                    type: 'keyup',\n                    srcEvent: event,\n                    key: event.key,\n                    target: event.target\n                });\n            }\n        };\n        this.enableDownEvent = this.options.enable;\n        this.enableUpEvent = this.options.enable;\n        element.tabIndex = this.options.tabIndex;\n        element.style.outline = 'none';\n        KEY_EVENTS.forEach((event) => element.addEventListener(event, this.handleEvent));\n    }\n    destroy() {\n        KEY_EVENTS.forEach((event) => this.element.removeEventListener(event, this.handleEvent));\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n    enableEventType(eventType, enabled) {\n        if (eventType === 'keydown') {\n            this.enableDownEvent = enabled;\n        }\n        if (eventType === 'keyup') {\n            this.enableUpEvent = enabled;\n        }\n    }\n}\n//# sourceMappingURL=key-input.js.map","// mjolnir.js\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Input } from \"./input.js\";\nexport class ContextmenuInput extends Input {\n    constructor(element, callback, options) {\n        super(element, callback, options);\n        this.handleEvent = (event) => {\n            if (!this.options.enable) {\n                return;\n            }\n            this.callback({\n                type: 'contextmenu',\n                center: {\n                    x: event.clientX,\n                    y: event.clientY\n                },\n                srcEvent: event,\n                pointerType: 'mouse',\n                target: event.target\n            });\n        };\n        element.addEventListener('contextmenu', this.handleEvent);\n    }\n    destroy() {\n        this.element.removeEventListener('contextmenu', this.handleEvent);\n    }\n    /**\n     * Enable this input (begin processing events)\n     * if the specified event type is among those handled by this input.\n     */\n    enableEventType(eventType, enabled) {\n        if (eventType === 'contextmenu') {\n            this.options.enable = enabled;\n        }\n    }\n}\n//# sourceMappingURL=contextmenu-input.js.map","// mjolnir.js\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/* Constants */\nconst DOWN_EVENT = 1;\nconst MOVE_EVENT = 2;\nconst UP_EVENT = 4;\nconst MOUSE_EVENTS = {\n    pointerdown: DOWN_EVENT,\n    pointermove: MOVE_EVENT,\n    pointerup: UP_EVENT,\n    mousedown: DOWN_EVENT,\n    mousemove: MOVE_EVENT,\n    mouseup: UP_EVENT\n};\n// MouseEvent.button https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\nconst MOUSE_EVENT_BUTTON_LEFT = 0;\nconst MOUSE_EVENT_BUTTON_MIDDLE = 1;\nconst MOUSE_EVENT_BUTTON_RIGHT = 2;\n// MouseEvent.buttons https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons\nconst MOUSE_EVENT_BUTTONS_LEFT_MASK = 1;\nconst MOUSE_EVENT_BUTTONS_RIGHT_MASK = 2;\nconst MOUSE_EVENT_BUTTONS_MIDDLE_MASK = 4;\n/**\n * Extract the involved mouse button\n */\nexport function whichButtons(event) {\n    const eventType = MOUSE_EVENTS[event.srcEvent.type];\n    if (!eventType) {\n        // Not a mouse evet\n        return null;\n    }\n    const { buttons, button } = event.srcEvent;\n    let leftButton = false;\n    let middleButton = false;\n    let rightButton = false;\n    if (eventType === MOVE_EVENT) {\n        leftButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_LEFT_MASK);\n        middleButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_MIDDLE_MASK);\n        rightButton = Boolean(buttons & MOUSE_EVENT_BUTTONS_RIGHT_MASK);\n    }\n    else {\n        leftButton = button === MOUSE_EVENT_BUTTON_LEFT;\n        middleButton = button === MOUSE_EVENT_BUTTON_MIDDLE;\n        rightButton = button === MOUSE_EVENT_BUTTON_RIGHT;\n    }\n    return { leftButton, middleButton, rightButton };\n}\n/**\n * Calculate event position relative to the root element\n */\nexport function getOffsetPosition(event, rootElement) {\n    const center = event.center;\n    // `center` is a hammer.js event property\n    if (!center) {\n        // Not a gestural event\n        return null;\n    }\n    const rect = rootElement.getBoundingClientRect();\n    // Fix scale for map affected by a CSS transform.\n    // See https://stackoverflow.com/a/26893663/3528533\n    const scaleX = rect.width / rootElement.offsetWidth || 1;\n    const scaleY = rect.height / rootElement.offsetHeight || 1;\n    // Calculate center relative to the root element\n    const offsetCenter = {\n        x: (center.x - rect.left - rootElement.clientLeft) / scaleX,\n        y: (center.y - rect.top - rootElement.clientTop) / scaleY\n    };\n    return { center, offsetCenter };\n}\n//# sourceMappingURL=event-utils.js.map","// mjolnir.js\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { whichButtons, getOffsetPosition } from \"./event-utils.js\";\nconst DEFAULT_OPTIONS = {\n    srcElement: 'root',\n    priority: 0\n};\nexport class EventRegistrar {\n    constructor(eventManager, recognizerName) {\n        /**\n         * Handles hammerjs event\n         */\n        this.handleEvent = (event) => {\n            if (this.isEmpty()) {\n                return;\n            }\n            const mjolnirEvent = this._normalizeEvent(event);\n            let target = event.srcEvent.target;\n            while (target && target !== mjolnirEvent.rootElement) {\n                this._emit(mjolnirEvent, target);\n                if (mjolnirEvent.handled) {\n                    return;\n                }\n                target = target.parentNode;\n            }\n            this._emit(mjolnirEvent, 'root');\n        };\n        this.eventManager = eventManager;\n        this.recognizerName = recognizerName;\n        this.handlers = [];\n        // Element -> handler map\n        this.handlersByElement = new Map();\n        this._active = false;\n    }\n    // Returns true if there are no non-passive handlers\n    isEmpty() {\n        return !this._active;\n    }\n    add(type, handler, options, once = false, passive = false) {\n        const { handlers, handlersByElement } = this;\n        const opts = { ...DEFAULT_OPTIONS, ...options };\n        let entries = handlersByElement.get(opts.srcElement);\n        if (!entries) {\n            entries = [];\n            handlersByElement.set(opts.srcElement, entries);\n        }\n        const entry = {\n            type,\n            handler,\n            srcElement: opts.srcElement,\n            priority: opts.priority\n        };\n        if (once) {\n            entry.once = true;\n        }\n        if (passive) {\n            entry.passive = true;\n        }\n        handlers.push(entry);\n        this._active = this._active || !entry.passive;\n        // Sort handlers by descending priority\n        // Handlers with the same priority are excuted in the order of registration\n        let insertPosition = entries.length - 1;\n        while (insertPosition >= 0) {\n            if (entries[insertPosition].priority >= entry.priority) {\n                break;\n            }\n            insertPosition--;\n        }\n        entries.splice(insertPosition + 1, 0, entry);\n    }\n    remove(type, handler) {\n        const { handlers, handlersByElement } = this;\n        for (let i = handlers.length - 1; i >= 0; i--) {\n            const entry = handlers[i];\n            if (entry.type === type && entry.handler === handler) {\n                handlers.splice(i, 1);\n                const entries = handlersByElement.get(entry.srcElement);\n                entries.splice(entries.indexOf(entry), 1);\n                if (entries.length === 0) {\n                    handlersByElement.delete(entry.srcElement);\n                }\n            }\n        }\n        this._active = handlers.some((entry) => !entry.passive);\n    }\n    /**\n     * Invoke handlers on a particular element\n     */\n    _emit(event, srcElement) {\n        const entries = this.handlersByElement.get(srcElement);\n        if (entries) {\n            let immediatePropagationStopped = false;\n            // Prevents the current event from bubbling up\n            const stopPropagation = () => {\n                event.handled = true;\n            };\n            // Prevent any remaining listeners from being called\n            const stopImmediatePropagation = () => {\n                event.handled = true;\n                immediatePropagationStopped = true;\n            };\n            const entriesToRemove = [];\n            for (let i = 0; i < entries.length; i++) {\n                const { type, handler, once } = entries[i];\n                // @ts-ignore\n                handler({\n                    ...event,\n                    type,\n                    stopPropagation,\n                    stopImmediatePropagation\n                });\n                if (once) {\n                    entriesToRemove.push(entries[i]);\n                }\n                if (immediatePropagationStopped) {\n                    break;\n                }\n            }\n            for (let i = 0; i < entriesToRemove.length; i++) {\n                const { type, handler } = entriesToRemove[i];\n                this.remove(type, handler);\n            }\n        }\n    }\n    /**\n     * Normalizes hammerjs and custom events to have predictable fields.\n     */\n    _normalizeEvent(event) {\n        const rootElement = this.eventManager.getElement();\n        // @ts-ignore\n        return {\n            ...event,\n            ...whichButtons(event),\n            ...getOffsetPosition(event, rootElement),\n            preventDefault: () => {\n                event.srcEvent.preventDefault();\n            },\n            stopImmediatePropagation: null,\n            stopPropagation: null,\n            handled: false,\n            rootElement\n        };\n    }\n}\n//# sourceMappingURL=event-registrar.js.map","// mjolnir.js\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Manager as HammerManager } from \"./hammerjs/index.js\";\nimport { WheelInput } from \"./inputs/wheel-input.js\";\nimport { MoveInput } from \"./inputs/move-input.js\";\nimport { KeyInput } from \"./inputs/key-input.js\";\nimport { ContextmenuInput } from \"./inputs/contextmenu-input.js\";\nimport { EventRegistrar } from \"./utils/event-registrar.js\";\nfunction normalizeRecognizer(item) {\n    if ('recognizer' in item) {\n        return item;\n    }\n    let recognizer;\n    const itemArray = Array.isArray(item) ? [...item] : [item];\n    if (typeof itemArray[0] === 'function') {\n        // Backward compatibility: v2 / hammerjs style\n        const RecognizerType = itemArray.shift();\n        const options = itemArray.shift() || {};\n        recognizer = new RecognizerType(options);\n    }\n    else {\n        recognizer = itemArray.shift();\n    }\n    return {\n        recognizer,\n        recognizeWith: typeof itemArray[0] === 'string' ? [itemArray[0]] : itemArray[0],\n        requireFailure: typeof itemArray[1] === 'string' ? [itemArray[1]] : itemArray[1]\n    };\n}\n// Unified API for subscribing to events about both\n// basic input events (e.g. 'mousemove', 'touchstart', 'wheel')\n// and gestural input (e.g. 'click', 'tap', 'panstart').\n// Delegates gesture related event registration and handling to Hammer.js.\nexport class EventManager {\n    constructor(element = null, options = {}) {\n        /**\n         * Handle basic events using the 'hammer.input' Hammer.js API:\n         * Before running Recognizers, Hammer emits a 'hammer.input' event\n         * with the basic event info. This function emits all basic events\n         * aliased to the \"class\" of event received.\n         * See constants.BASIC_EVENT_CLASSES basic event class definitions.\n         */\n        this._onBasicInput = (event) => {\n            this.manager.emit(event.srcEvent.type, event);\n        };\n        /**\n         * Handle events not supported by Hammer.js,\n         * and pipe back out through same (Hammer) channel used by other events.\n         */\n        this._onOtherEvent = (event) => {\n            // console.log('onotherevent', event.type, event)\n            this.manager.emit(event.type, event);\n        };\n        this.options = {\n            recognizers: [],\n            events: {},\n            touchAction: 'compute',\n            tabIndex: 0,\n            cssProps: {},\n            ...options\n        };\n        this.events = new Map();\n        this.element = element;\n        if (!element)\n            return;\n        this.manager = new HammerManager(element, this.options);\n        for (const item of this.options.recognizers) {\n            const { recognizer, recognizeWith, requireFailure } = normalizeRecognizer(item);\n            this.manager.add(recognizer);\n            if (recognizeWith) {\n                recognizer.recognizeWith(recognizeWith);\n            }\n            if (requireFailure) {\n                recognizer.requireFailure(requireFailure);\n            }\n        }\n        this.manager.on('hammer.input', this._onBasicInput);\n        // Handle events not handled by Hammer.js:\n        // - mouse wheel\n        // - pointer/touch/mouse move\n        this.wheelInput = new WheelInput(element, this._onOtherEvent, {\n            enable: false\n        });\n        this.moveInput = new MoveInput(element, this._onOtherEvent, {\n            enable: false\n        });\n        this.keyInput = new KeyInput(element, this._onOtherEvent, {\n            enable: false,\n            tabIndex: options.tabIndex\n        });\n        this.contextmenuInput = new ContextmenuInput(element, this._onOtherEvent, {\n            enable: false\n        });\n        // Register all passed events.\n        this.on(this.options.events);\n    }\n    getElement() {\n        return this.element;\n    }\n    // Tear down internal event management implementations.\n    destroy() {\n        // manager etc. cannot exist if there is no element\n        if (!this.element)\n            return;\n        this.wheelInput.destroy();\n        this.moveInput.destroy();\n        this.keyInput.destroy();\n        this.contextmenuInput.destroy();\n        this.manager.destroy();\n    }\n    /** Register an event handler function to be called on `event` */\n    on(event, handler, opts) {\n        this._addEventHandler(event, handler, opts, false);\n    }\n    once(event, handler, opts) {\n        this._addEventHandler(event, handler, opts, true);\n    }\n    watch(event, handler, opts) {\n        this._addEventHandler(event, handler, opts, false, true);\n    }\n    off(event, handler) {\n        this._removeEventHandler(event, handler);\n    }\n    /*\n     * Enable/disable recognizer for the given event\n     */\n    _toggleRecognizer(name, enabled) {\n        const { manager } = this;\n        if (!manager) {\n            return;\n        }\n        const recognizer = manager.get(name);\n        if (recognizer) {\n            recognizer.set({ enable: enabled });\n            manager.touchAction.update();\n        }\n        this.wheelInput?.enableEventType(name, enabled);\n        this.moveInput?.enableEventType(name, enabled);\n        this.keyInput?.enableEventType(name, enabled);\n        this.contextmenuInput?.enableEventType(name, enabled);\n    }\n    /**\n     * Process the event registration for a single event + handler.\n     */\n    _addEventHandler(event, handler, opts, once, passive) {\n        if (typeof event !== 'string') {\n            // @ts-ignore\n            opts = handler;\n            // If `event` is a map, call `on()` for each entry.\n            for (const [eventName, eventHandler] of Object.entries(event)) {\n                this._addEventHandler(eventName, eventHandler, opts, once, passive);\n            }\n            return;\n        }\n        const { manager, events } = this;\n        if (!manager)\n            return;\n        let eventRegistrar = events.get(event);\n        if (!eventRegistrar) {\n            // Enable recognizer for this event.\n            const recognizerName = this._getRecognizerName(event) || event;\n            eventRegistrar = new EventRegistrar(this, recognizerName);\n            events.set(event, eventRegistrar);\n            // Listen to the event\n            if (manager) {\n                manager.on(event, eventRegistrar.handleEvent);\n            }\n        }\n        eventRegistrar.add(event, handler, opts, once, passive);\n        if (!eventRegistrar.isEmpty()) {\n            this._toggleRecognizer(eventRegistrar.recognizerName, true);\n        }\n    }\n    /**\n     * Process the event deregistration for a single event + handler.\n     */\n    _removeEventHandler(event, handler) {\n        if (typeof event !== 'string') {\n            // If `event` is a map, call `off()` for each entry.\n            for (const [eventName, eventHandler] of Object.entries(event)) {\n                this._removeEventHandler(eventName, eventHandler);\n            }\n            return;\n        }\n        const { events } = this;\n        const eventRegistrar = events.get(event);\n        if (!eventRegistrar) {\n            return;\n        }\n        eventRegistrar.remove(event, handler);\n        if (eventRegistrar.isEmpty()) {\n            const { recognizerName } = eventRegistrar;\n            // Disable recognizer if no more handlers are attached to its events\n            let isRecognizerUsed = false;\n            for (const eh of events.values()) {\n                if (eh.recognizerName === recognizerName && !eh.isEmpty()) {\n                    isRecognizerUsed = true;\n                    break;\n                }\n            }\n            if (!isRecognizerUsed) {\n                this._toggleRecognizer(recognizerName, false);\n            }\n        }\n    }\n    _getRecognizerName(event) {\n        return this.manager.recognizers.find((recognizer) => {\n            return recognizer.getEventNames().includes(event);\n        })?.options.event;\n    }\n}\n//# sourceMappingURL=event-manager.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Note: The numeric values here are matched by shader code in the\n// \"project\" and \"project64\" shader modules. Both places need to be\n// updated.\nimport log from \"../utils/log.js\";\nimport { Pan, InputDirection, Pinch, Tap } from 'mjolnir.js';\n/**\n * The coordinate system that positions/dimensions are defined in.\n */\nexport const COORDINATE_SYSTEM = {\n    /**\n     * `LNGLAT` if rendering into a geospatial viewport, `CARTESIAN` otherwise\n     */\n    DEFAULT: -1,\n    /**\n     * Positions are interpreted as [longitude, latitude, elevation]\n     * longitude/latitude are in degrees, elevation is in meters.\n     * Dimensions are in meters.\n     */\n    LNGLAT: 1,\n    /**\n     * Positions are interpreted as [x, y, z] in meter offsets from the coordinate origin.\n     * Dimensions are in meters.\n     */\n    METER_OFFSETS: 2,\n    /**\n     * Positions are interpreted as [deltaLng, deltaLat, elevation] from the coordinate origin.\n     * deltaLng/deltaLat are in degrees, elevation is in meters.\n     * Dimensions are in meters.\n     */\n    LNGLAT_OFFSETS: 3,\n    /**\n     * Positions and dimensions are in the common units of the viewport.\n     */\n    CARTESIAN: 0\n};\n// Deprecated\n/* eslint-disable accessor-pairs */\nObject.defineProperty(COORDINATE_SYSTEM, 'IDENTITY', {\n    get: () => {\n        log.deprecated('COORDINATE_SYSTEM.IDENTITY', 'COORDINATE_SYSTEM.CARTESIAN')();\n        return 0;\n    }\n});\n/* eslint-enable accessor-pairs */\n/**\n * How coordinates are transformed from the world space into the common space.\n */\nexport const PROJECTION_MODE = {\n    /**\n     * Render geospatial data in Web Mercator projection\n     */\n    WEB_MERCATOR: 1,\n    /**\n     * Render geospatial data as a 3D globe\n     */\n    GLOBE: 2,\n    /**\n     * (Internal use only) Web Mercator projection at high zoom\n     */\n    WEB_MERCATOR_AUTO_OFFSET: 4,\n    /**\n     * No transformation\n     */\n    IDENTITY: 0\n};\nexport const UNIT = {\n    common: 0,\n    meters: 1,\n    pixels: 2\n};\nexport const EVENT_HANDLERS = {\n    click: 'onClick',\n    dblclick: 'onClick',\n    panstart: 'onDragStart',\n    panmove: 'onDrag',\n    panend: 'onDragEnd'\n};\nexport const RECOGNIZERS = {\n    multipan: [Pan, { threshold: 10, direction: InputDirection.Vertical, pointers: 2 }],\n    pinch: [Pinch, {}, null, ['multipan']],\n    pan: [Pan, { threshold: 1 }, ['pinch'], ['multipan']],\n    dblclick: [Tap, { event: 'dblclick', taps: 2 }],\n    click: [Tap, { event: 'click' }, null, ['dblclick']]\n};\n/**\n * @deprecated Use string constants directly\n */\nexport const OPERATION = {\n    DRAW: 'draw',\n    MASK: 'mask',\n    TERRAIN: 'terrain'\n};\n//# sourceMappingURL=constants.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nfunction isEqual(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (Array.isArray(a)) {\n        // Special treatment for arrays: compare 1-level deep\n        // This is to support equality of matrix/coordinate props\n        const len = a.length;\n        if (!b || b.length !== len) {\n            return false;\n        }\n        for (let i = 0; i < len; i++) {\n            if (a[i] !== b[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n}\n/**\n * Speed up consecutive function calls by caching the result of calls with identical input\n * https://en.wikipedia.org/wiki/Memoization\n * @param {function} compute - the function to be memoized\n */\nexport default function memoize(compute) {\n    let cachedArgs = {};\n    let cachedResult;\n    return (args) => {\n        for (const key in args) {\n            if (!isEqual(args[key], cachedArgs[key])) {\n                cachedResult = compute(args);\n                cachedArgs = args;\n                break;\n            }\n        }\n        return cachedResult;\n    };\n}\n//# sourceMappingURL=memoize.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/* eslint-disable complexity, camelcase */\nimport { mat4, vec4 } from '@math.gl/core';\nimport { COORDINATE_SYSTEM, PROJECTION_MODE } from \"../../lib/constants.js\";\nimport memoize from \"../../utils/memoize.js\";\n// To quickly set a vector to zero\nconst ZERO_VECTOR = [0, 0, 0, 0];\n// 4x4 matrix that drops 4th component of vector\nconst VECTOR_TO_POINT_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0];\nconst IDENTITY_MATRIX = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\nconst DEFAULT_PIXELS_PER_UNIT2 = [0, 0, 0];\nconst DEFAULT_COORDINATE_ORIGIN = [0, 0, 0];\nconst getMemoizedViewportUniforms = memoize(calculateViewportUniforms);\nexport function getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin = DEFAULT_COORDINATE_ORIGIN) {\n    if (coordinateOrigin.length < 3) {\n        coordinateOrigin = [coordinateOrigin[0], coordinateOrigin[1], 0];\n    }\n    let shaderCoordinateOrigin = coordinateOrigin;\n    let geospatialOrigin;\n    let offsetMode = true;\n    if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT_OFFSETS ||\n        coordinateSystem === COORDINATE_SYSTEM.METER_OFFSETS) {\n        geospatialOrigin = coordinateOrigin;\n    }\n    else {\n        geospatialOrigin = viewport.isGeospatial\n            ? // @ts-expect-error longitude and latitude are not defined on the base Viewport, but is expected on geospatial viewports\n                [Math.fround(viewport.longitude), Math.fround(viewport.latitude), 0]\n            : null;\n    }\n    switch (viewport.projectionMode) {\n        case PROJECTION_MODE.WEB_MERCATOR:\n            if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT ||\n                coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n                geospatialOrigin = [0, 0, 0];\n                offsetMode = false;\n            }\n            break;\n        case PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET:\n            if (coordinateSystem === COORDINATE_SYSTEM.LNGLAT) {\n                // viewport center in world space\n                // @ts-expect-error when using LNGLAT coordinates, we expect the viewport to be geospatial, in which case geospatialOrigin is defined\n                shaderCoordinateOrigin = geospatialOrigin;\n            }\n            else if (coordinateSystem === COORDINATE_SYSTEM.CARTESIAN) {\n                // viewport center in common space\n                shaderCoordinateOrigin = [\n                    Math.fround(viewport.center[0]),\n                    Math.fround(viewport.center[1]),\n                    0\n                ];\n                // Geospatial origin (wgs84) must match shaderCoordinateOrigin (common)\n                geospatialOrigin = viewport.unprojectPosition(shaderCoordinateOrigin);\n                shaderCoordinateOrigin[0] -= coordinateOrigin[0];\n                shaderCoordinateOrigin[1] -= coordinateOrigin[1];\n                shaderCoordinateOrigin[2] -= coordinateOrigin[2];\n            }\n            break;\n        case PROJECTION_MODE.IDENTITY:\n            shaderCoordinateOrigin = viewport.position.map(Math.fround);\n            shaderCoordinateOrigin[2] = shaderCoordinateOrigin[2] || 0;\n            break;\n        case PROJECTION_MODE.GLOBE:\n            offsetMode = false;\n            geospatialOrigin = null;\n            break;\n        default:\n            // Unknown projection mode\n            offsetMode = false;\n    }\n    return { geospatialOrigin, shaderCoordinateOrigin, offsetMode };\n}\n// The code that utilizes Matrix4 does the same calculation as their mat4 counterparts,\n// has lower performance but provides error checking.\nfunction calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin) {\n    const { viewMatrixUncentered, projectionMatrix } = viewport;\n    let { viewMatrix, viewProjectionMatrix } = viewport;\n    let projectionCenter = ZERO_VECTOR;\n    let originCommon = ZERO_VECTOR;\n    let cameraPosCommon = viewport.cameraPosition;\n    const { geospatialOrigin, shaderCoordinateOrigin, offsetMode } = getOffsetOrigin(viewport, coordinateSystem, coordinateOrigin);\n    if (offsetMode) {\n        // Calculate transformed projectionCenter (using 64 bit precision JS)\n        // This is the key to offset mode precision\n        // (avoids doing this addition in 32 bit precision in GLSL)\n        // @ts-expect-error the 4th component is assigned below\n        originCommon = viewport.projectPosition(geospatialOrigin || shaderCoordinateOrigin);\n        cameraPosCommon = [\n            cameraPosCommon[0] - originCommon[0],\n            cameraPosCommon[1] - originCommon[1],\n            cameraPosCommon[2] - originCommon[2]\n        ];\n        originCommon[3] = 1;\n        // projectionCenter = new Matrix4(viewProjectionMatrix)\n        //   .transformVector([positionPixels[0], positionPixels[1], 0.0, 1.0]);\n        projectionCenter = vec4.transformMat4([], originCommon, viewProjectionMatrix);\n        // Always apply uncentered projection matrix if available (shader adds center)\n        viewMatrix = viewMatrixUncentered || viewMatrix;\n        // Zero out 4th coordinate (\"after\" model matrix) - avoids further translations\n        // viewMatrix = new Matrix4(viewMatrixUncentered || viewMatrix)\n        //   .multiplyRight(VECTOR_TO_POINT_MATRIX);\n        viewProjectionMatrix = mat4.multiply([], projectionMatrix, viewMatrix);\n        viewProjectionMatrix = mat4.multiply([], viewProjectionMatrix, VECTOR_TO_POINT_MATRIX);\n    }\n    return {\n        viewMatrix: viewMatrix,\n        viewProjectionMatrix: viewProjectionMatrix,\n        projectionCenter,\n        originCommon,\n        cameraPosCommon,\n        shaderCoordinateOrigin,\n        geospatialOrigin\n    };\n}\n/**\n * Returns uniforms for shaders based on current projection\n * includes: projection matrix suitable for shaders\n *\n * TODO - Ensure this works with any viewport, not just WebMercatorViewports\n *\n * @param {WebMercatorViewport} viewport -\n * @return {Float32Array} - 4x4 projection matrix that can be used in shaders\n */\nexport function getUniformsFromViewport({ viewport, devicePixelRatio = 1, modelMatrix = null, \n// Match Layer.defaultProps\ncoordinateSystem = COORDINATE_SYSTEM.DEFAULT, coordinateOrigin = DEFAULT_COORDINATE_ORIGIN, autoWrapLongitude = false }) {\n    if (coordinateSystem === COORDINATE_SYSTEM.DEFAULT) {\n        coordinateSystem = viewport.isGeospatial\n            ? COORDINATE_SYSTEM.LNGLAT\n            : COORDINATE_SYSTEM.CARTESIAN;\n    }\n    const uniforms = getMemoizedViewportUniforms({\n        viewport,\n        devicePixelRatio,\n        coordinateSystem,\n        coordinateOrigin\n    });\n    uniforms.wrapLongitude = autoWrapLongitude;\n    uniforms.modelMatrix = modelMatrix || IDENTITY_MATRIX;\n    return uniforms;\n}\nfunction calculateViewportUniforms({ viewport, devicePixelRatio, coordinateSystem, coordinateOrigin }) {\n    const { projectionCenter, viewProjectionMatrix, originCommon, cameraPosCommon, shaderCoordinateOrigin, geospatialOrigin } = calculateMatrixAndOffset(viewport, coordinateSystem, coordinateOrigin);\n    // Calculate projection pixels per unit\n    const distanceScales = viewport.getDistanceScales();\n    const viewportSize = [\n        viewport.width * devicePixelRatio,\n        viewport.height * devicePixelRatio\n    ];\n    // Distance at which screen pixels are projected.\n    // Used to scale sizes in clipspace to match screen pixels.\n    // When using Viewport class's default projection matrix, this yields 1 for orthographic\n    // and `viewport.focalDistance` for perspective views\n    const focalDistance = vec4.transformMat4([], [0, 0, -viewport.focalDistance, 1], viewport.projectionMatrix)[3] || 1;\n    const uniforms = {\n        // Projection mode values\n        coordinateSystem,\n        projectionMode: viewport.projectionMode,\n        coordinateOrigin: shaderCoordinateOrigin,\n        commonOrigin: originCommon.slice(0, 3),\n        center: projectionCenter,\n        // Backward compatibility\n        // TODO: remove in v9\n        // @ts-expect-error _pseudoMeters is only defined on WebMercator viewport\n        pseudoMeters: Boolean(viewport._pseudoMeters),\n        // Screen size\n        viewportSize,\n        devicePixelRatio,\n        focalDistance,\n        commonUnitsPerMeter: distanceScales.unitsPerMeter,\n        commonUnitsPerWorldUnit: distanceScales.unitsPerMeter,\n        commonUnitsPerWorldUnit2: DEFAULT_PIXELS_PER_UNIT2,\n        scale: viewport.scale, // This is the mercator scale (2 ** zoom)\n        wrapLongitude: false,\n        viewProjectionMatrix,\n        modelMatrix: IDENTITY_MATRIX,\n        // This is for lighting calculations\n        cameraPosition: cameraPosCommon\n    };\n    if (geospatialOrigin) {\n        // Get high-precision DistanceScales from geospatial viewport\n        // TODO: stricter types in Viewport classes\n        const distanceScalesAtOrigin = viewport.getDistanceScales(geospatialOrigin);\n        switch (coordinateSystem) {\n            case COORDINATE_SYSTEM.METER_OFFSETS:\n                uniforms.commonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerMeter;\n                uniforms.commonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerMeter2;\n                break;\n            case COORDINATE_SYSTEM.LNGLAT:\n            case COORDINATE_SYSTEM.LNGLAT_OFFSETS:\n                // @ts-expect-error _pseudoMeters only exists on WebMercatorView\n                if (!viewport._pseudoMeters) {\n                    uniforms.commonUnitsPerMeter = distanceScalesAtOrigin.unitsPerMeter;\n                }\n                uniforms.commonUnitsPerWorldUnit = distanceScalesAtOrigin.unitsPerDegree;\n                uniforms.commonUnitsPerWorldUnit2 = distanceScalesAtOrigin.unitsPerDegree2;\n                break;\n            // a.k.a \"preprojected\" positions\n            case COORDINATE_SYSTEM.CARTESIAN:\n                uniforms.commonUnitsPerWorldUnit = [1, 1, distanceScalesAtOrigin.unitsPerMeter[2]];\n                uniforms.commonUnitsPerWorldUnit2 = [0, 0, distanceScalesAtOrigin.unitsPerMeter2[2]];\n                break;\n            default:\n                break;\n        }\n    }\n    return uniforms;\n}\n//# sourceMappingURL=viewport-uniforms.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { COORDINATE_SYSTEM, PROJECTION_MODE, UNIT } from \"../../lib/constants.js\";\n// We are generating these from the js code in constants.js\nconst COORDINATE_SYSTEM_WGSL_CONSTANTS = Object.keys(COORDINATE_SYSTEM)\n    .map(key => `const COORDINATE_SYSTEM_${key}: i32 = ${COORDINATE_SYSTEM[key]};`)\n    .join('');\nconst PROJECTION_MODE_WGSL_CONSTANTS = Object.keys(PROJECTION_MODE)\n    .map(key => `const PROJECTION_MODE_${key}: i32 = ${PROJECTION_MODE[key]};`)\n    .join('');\nconst UNIT_WGSL_CONSTANTS = Object.keys(UNIT)\n    .map(key => `const UNIT_${key.toUpperCase()}: i32 = ${UNIT[key]};`)\n    .join('');\nexport const projectWGSLHeader = /* wgsl */ `\\\n${COORDINATE_SYSTEM_WGSL_CONSTANTS}\n${PROJECTION_MODE_WGSL_CONSTANTS}\n${UNIT_WGSL_CONSTANTS}\n\nconst TILE_SIZE: f32 = 512.0;\nconst PI: f32 = 3.1415926536;\nconst WORLD_SCALE: f32 = TILE_SIZE / (PI * 2.0);\nconst ZERO_64_LOW: vec3<f32> = vec3<f32>(0.0, 0.0, 0.0);\nconst EARTH_RADIUS: f32 = 6370972.0; // meters\nconst GLOBE_RADIUS: f32 = 256.0;\n\n// -----------------------------------------------------------------------------\n// Uniform block (converted from GLSL uniform block)\n// -----------------------------------------------------------------------------\nstruct ProjectUniforms {\n  wrapLongitude: i32,\n  coordinateSystem: i32,\n  commonUnitsPerMeter: vec3<f32>,\n  projectionMode: i32,\n  scale: f32,\n  commonUnitsPerWorldUnit: vec3<f32>,\n  commonUnitsPerWorldUnit2: vec3<f32>,\n  center: vec4<f32>,\n  modelMatrix: mat4x4<f32>,\n  viewProjectionMatrix: mat4x4<f32>,\n  viewportSize: vec2<f32>,\n  devicePixelRatio: f32,\n  focalDistance: f32,\n  cameraPosition: vec3<f32>,\n  coordinateOrigin: vec3<f32>,\n  commonOrigin: vec3<f32>,\n  pseudoMeters: i32,\n};\n\n@group(0) @binding(0)\nvar<uniform> project: ProjectUniforms;\n\n// -----------------------------------------------------------------------------\n// Geometry data\n// (In your GLSL code, \"geometry\" was assumed to be available globally. In WGSL,\n// you might supply this via vertex attributes or a uniform. Here we define a\n// uniform struct for demonstration.)\n// -----------------------------------------------------------------------------\n\n// Structure to carry additional geometry data used by deck.gl filters.\nstruct Geometry {\n  worldPosition: vec3<f32>,\n  worldPositionAlt: vec3<f32>,\n  position: vec4<f32>,\n  normal: vec3<f32>,\n  uv: vec2<f32>,\n  pickingColor: vec3<f32>,\n};\n\n// @group(0) @binding(1)\nvar<private> geometry: Geometry;\n`;\nexport const projectWGSL = /* wgsl */ `\\\n${projectWGSLHeader}\n\n// -----------------------------------------------------------------------------\n// Functions\n// -----------------------------------------------------------------------------\n\n// Returns an adjustment factor for commonUnitsPerMeter\nfn _project_size_at_latitude(lat: f32) -> f32 {\n  let y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\n// Overloaded version: scales a value in meters at a given latitude.\nfn _project_size_at_latitude_m(meters: f32, lat: f32) -> f32 {\n  return meters * project.commonUnitsPerMeter.z * _project_size_at_latitude(lat);\n}\n\n// Computes a non-linear scale factor based on geometry.\n// (Note: This function relies on \"geometry\" being provided.)\nfn project_size() -> f32 {\n  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n      project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n      project.pseudoMeters == 0) {\n    if (geometry.position.w == 0.0) {\n      return _project_size_at_latitude(geometry.worldPosition.y);\n    }\n    let y: f32 = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    let y2 = y * y;\n    let y4 = y2 * y2;\n    let y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\n// Overloads to scale offsets (meters to world units)\nfn project_size_float(meters: f32) -> f32 {\n  return meters * project.commonUnitsPerMeter.z * project_size();\n}\n\nfn project_size_vec2(meters: vec2<f32>) -> vec2<f32> {\n  return meters * project.commonUnitsPerMeter.xy * project_size();\n}\n\nfn project_size_vec3(meters: vec3<f32>) -> vec3<f32> {\n  return meters * project.commonUnitsPerMeter * project_size();\n}\n\nfn project_size_vec4(meters: vec4<f32>) -> vec4<f32> {\n  return vec4<f32>(meters.xyz * project.commonUnitsPerMeter, meters.w);\n}\n\n// Returns a rotation matrix aligning the zaxis with the given up vector.\nfn project_get_orientation_matrix(up: vec3<f32>) -> mat3x3<f32> {\n  let uz = normalize(up);\n  let ux = select(\n    vec3<f32>(1.0, 0.0, 0.0),\n    normalize(vec3<f32>(uz.y, -uz.x, 0.0)),\n    abs(uz.z) == 1.0\n  );\n  let uy = cross(uz, ux);\n  return mat3x3<f32>(ux, uy, uz);\n}\n\n// Since WGSL does not support \"out\" parameters, we return a struct.\nstruct RotationResult {\n  needsRotation: bool,\n  transform: mat3x3<f32>,\n};\n\nfn project_needs_rotation(commonPosition: vec3<f32>) -> RotationResult {\n  if (project.projectionMode == PROJECTION_MODE_GLOBE) {\n    return RotationResult(true, project_get_orientation_matrix(commonPosition));\n  } else {\n    return RotationResult(false, mat3x3<f32>());  // identity alternative if needed\n  };\n}\n\n// Projects a normal vector from the current coordinate system to world space.\nfn project_normal(vector: vec3<f32>) -> vec3<f32> {\n  let normal_modelspace = project.modelMatrix * vec4<f32>(vector, 0.0);\n  var n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);\n  let rotResult = project_needs_rotation(geometry.position.xyz);\n  if (rotResult.needsRotation) {\n    n = rotResult.transform * n;\n  }\n  return n;\n}\n\n// Applies a scale offset based on y-offset (dy)\nfn project_offset_(offset: vec4<f32>) -> vec4<f32> {\n  let dy: f32 = offset.y;\n  let commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;\n  return vec4<f32>(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\n\n// Projects lng/lat coordinates to a unit tile [0,1]\nfn project_mercator_(lnglat: vec2<f32>) -> vec2<f32> {\n  var x = lnglat.x;\n  if (project.wrapLongitude != 0) {\n    x = ((x + 180.0) % 360.0) - 180.0;\n  }\n  let y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2<f32>(\n    radians(x) + PI,\n    PI + log(tan(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\n// Projects lng/lat/z coordinates for a globe projection.\nfn project_globe_(lnglatz: vec3<f32>) -> vec3<f32> {\n  let lambda = radians(lnglatz.x);\n  let phi = radians(lnglatz.y);\n  let cosPhi = cos(phi);\n  let D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n  return vec3<f32>(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\n\n// Projects positions (with an optional 64-bit low part) from the input\n// coordinate system to the common space.\nfn project_position_vec4_f64(position: vec4<f32>, position64Low: vec3<f32>) -> vec4<f32> {\n  var position_world = project.modelMatrix * position;\n\n  // Work around for a Mac+NVIDIA bug:\n  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4<f32>(\n        project_mercator_(position_world.xy),\n        _project_size_at_latitude_m(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world = vec4f(position_world.xyz + project.coordinateOrigin, position_world.w);\n    }\n  }\n  if (project.projectionMode == PROJECTION_MODE_GLOBE) {\n    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4<f32>(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {\n        return vec4<f32>(\n          project_mercator_(position_world.xy) - project.commonOrigin.xy,\n          project_size_float(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project.projectionMode == PROJECTION_MODE_IDENTITY ||\n      (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n       (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n        project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    position_world = vec4f(position_world.xyz - project.coordinateOrigin, position_world.w);\n  }\n\n  return project_offset_(position_world) +\n         project_offset_(project.modelMatrix * vec4<f32>(position64Low, 0.0));\n}\n\n// Overloaded versions for different input types.\nfn project_position_vec4_f32(position: vec4<f32>) -> vec4<f32> {\n  return project_position_vec4_f64(position, ZERO_64_LOW);\n}\n\nfn project_position_vec3_f64(position: vec3<f32>, position64Low: vec3<f32>) -> vec3<f32> {\n  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nfn project_position_vec3_f32(position: vec3<f32>) -> vec3<f32> {\n  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nfn project_position_vec2_f32(position: vec2<f32>) -> vec2<f32> {\n  let projected_position = project_position_vec4_f64(vec4<f32>(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\n// Transforms a common space position to clip space.\nfn project_common_position_to_clipspace_with_projection(position: vec4<f32>, viewProjectionMatrix: mat4x4<f32>, center: vec4<f32>) -> vec4<f32> {\n  return viewProjectionMatrix * position + center;\n}\n\n// Uses the project viewProjectionMatrix and center.\nfn project_common_position_to_clipspace(position: vec4<f32>) -> vec4<f32> {\n  return project_common_position_to_clipspace_with_projection(position, project.viewProjectionMatrix, project.center);\n}\n\n// Returns a clip space offset corresponding to a given number of screen pixels.\nfn project_pixel_size_to_clipspace(pixels: vec2<f32>) -> vec2<f32> {\n  let offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;\n  return offset * project.focalDistance;\n}\n\nfn project_meter_size_to_pixel(meters: f32) -> f32 {\n  return project_size_float(meters) * project.scale;\n}\n\nfn project_unit_size_to_pixel(size: f32, unit: i32) -> f32 {\n  if (unit == UNIT_METERS) {\n    return project_meter_size_to_pixel(size);\n  } else if (unit == UNIT_COMMON) {\n    return size * project.scale;\n  }\n  // UNIT_PIXELS: no scaling applied.\n  return size;\n}\n\nfn project_pixel_size_float(pixels: f32) -> f32 {\n  return pixels / project.scale;\n}\n\nfn project_pixel_size_vec2(pixels: vec2<f32>) -> vec2<f32> {\n  return pixels / project.scale;\n}\n`;\n//# sourceMappingURL=project.wgsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { COORDINATE_SYSTEM, PROJECTION_MODE, UNIT } from \"../../lib/constants.js\";\n// We are generating these from the js code in constants.js\nconst COORDINATE_SYSTEM_GLSL_CONSTANTS = Object.keys(COORDINATE_SYSTEM)\n    .map(key => `const int COORDINATE_SYSTEM_${key} = ${COORDINATE_SYSTEM[key]};`)\n    .join('');\nconst PROJECTION_MODE_GLSL_CONSTANTS = Object.keys(PROJECTION_MODE)\n    .map(key => `const int PROJECTION_MODE_${key} = ${PROJECTION_MODE[key]};`)\n    .join('');\nconst UNIT_GLSL_CONSTANTS = Object.keys(UNIT)\n    .map(key => `const int UNIT_${key.toUpperCase()} = ${UNIT[key]};`)\n    .join('');\nexport const projectGLSL = /* glsl */ `\\\n${COORDINATE_SYSTEM_GLSL_CONSTANTS}\n${PROJECTION_MODE_GLSL_CONSTANTS}\n${UNIT_GLSL_CONSTANTS}\nuniform projectUniforms {\nbool wrapLongitude;\nint coordinateSystem;\nvec3 commonUnitsPerMeter;\nint projectionMode;\nfloat scale;\nvec3 commonUnitsPerWorldUnit;\nvec3 commonUnitsPerWorldUnit2;\nvec4 center;\nmat4 modelMatrix;\nmat4 viewProjectionMatrix;\nvec2 viewportSize;\nfloat devicePixelRatio;\nfloat focalDistance;\nvec3 cameraPosition;\nvec3 coordinateOrigin;\nvec3 commonOrigin;\nbool pseudoMeters;\n} project;\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0;\nconst float GLOBE_RADIUS = 256.0;\nfloat project_size_at_latitude(float lat) {\nfloat y = clamp(lat, -89.9, 89.9);\nreturn 1.0 / cos(radians(y));\n}\nfloat project_size() {\nif (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&\nproject.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\nproject.pseudoMeters == false) {\nif (geometry.position.w == 0.0) {\nreturn project_size_at_latitude(geometry.worldPosition.y);\n}\nfloat y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\nfloat y2 = y * y;\nfloat y4 = y2 * y2;\nfloat y6 = y4 * y2;\nreturn 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n}\nreturn 1.0;\n}\nfloat project_size_at_latitude(float meters, float lat) {\nreturn meters * project.commonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\nfloat project_size(float meters) {\nreturn meters * project.commonUnitsPerMeter.z * project_size();\n}\nvec2 project_size(vec2 meters) {\nreturn meters * project.commonUnitsPerMeter.xy * project_size();\n}\nvec3 project_size(vec3 meters) {\nreturn meters * project.commonUnitsPerMeter * project_size();\n}\nvec4 project_size(vec4 meters) {\nreturn vec4(meters.xyz * project.commonUnitsPerMeter, meters.w);\n}\nmat3 project_get_orientation_matrix(vec3 up) {\nvec3 uz = normalize(up);\nvec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\nvec3 uy = cross(uz, ux);\nreturn mat3(ux, uy, uz);\n}\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\nif (project.projectionMode == PROJECTION_MODE_GLOBE) {\ntransform = project_get_orientation_matrix(commonPosition);\nreturn true;\n}\nreturn false;\n}\nvec3 project_normal(vec3 vector) {\nvec4 normal_modelspace = project.modelMatrix * vec4(vector, 0.0);\nvec3 n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);\nmat3 rotation;\nif (project_needs_rotation(geometry.position.xyz, rotation)) {\nn = rotation * n;\n}\nreturn n;\n}\nvec4 project_offset_(vec4 offset) {\nfloat dy = offset.y;\nvec3 commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;\nreturn vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\nfloat x = lnglat.x;\nif (project.wrapLongitude) {\nx = mod(x + 180., 360.0) - 180.;\n}\nfloat y = clamp(lnglat.y, -89.9, 89.9);\nreturn vec2(\nradians(x) + PI,\nPI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n) * WORLD_SCALE;\n}\nvec3 project_globe_(vec3 lnglatz) {\nfloat lambda = radians(lnglatz.x);\nfloat phi = radians(lnglatz.y);\nfloat cosPhi = cos(phi);\nfloat D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\nreturn vec3(\nsin(lambda) * cosPhi,\n-cos(lambda) * cosPhi,\nsin(phi)\n) * D;\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\nvec4 position_world = project.modelMatrix * position;\nif (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {\nif (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nreturn vec4(\nproject_mercator_(position_world.xy),\nproject_size_at_latitude(position_world.z, position_world.y),\nposition_world.w\n);\n}\nif (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\nposition_world.xyz += project.coordinateOrigin;\n}\n}\nif (project.projectionMode == PROJECTION_MODE_GLOBE) {\nif (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nreturn vec4(\nproject_globe_(position_world.xyz),\nposition_world.w\n);\n}\n}\nif (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\nif (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\nif (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {\nreturn vec4(\nproject_mercator_(position_world.xy) - project.commonOrigin.xy,\nproject_size(position_world.z),\nposition_world.w\n);\n}\n}\n}\nif (project.projectionMode == PROJECTION_MODE_IDENTITY ||\n(project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n(project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\nproject.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\nposition_world.xyz -= project.coordinateOrigin;\n}\nreturn project_offset_(position_world) + project_offset_(project.modelMatrix * vec4(position64Low, 0.0));\n}\nvec4 project_position(vec4 position) {\nreturn project_position(position, ZERO_64_LOW);\n}\nvec3 project_position(vec3 position, vec3 position64Low) {\nvec4 projected_position = project_position(vec4(position, 1.0), position64Low);\nreturn projected_position.xyz;\n}\nvec3 project_position(vec3 position) {\nvec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\nreturn projected_position.xyz;\n}\nvec2 project_position(vec2 position) {\nvec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\nreturn projected_position.xy;\n}\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\nreturn viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\nreturn project_common_position_to_clipspace(position, project.viewProjectionMatrix, project.center);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\nvec2 offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;\nreturn offset * project.focalDistance;\n}\nfloat project_size_to_pixel(float meters) {\nreturn project_size(meters) * project.scale;\n}\nfloat project_size_to_pixel(float size, int unit) {\nif (unit == UNIT_METERS) return project_size_to_pixel(size);\nif (unit == UNIT_COMMON) return size * project.scale;\nreturn size;\n}\nfloat project_pixel_size(float pixels) {\nreturn pixels / project.scale;\n}\nvec2 project_pixel_size(vec2 pixels) {\nreturn pixels / project.scale;\n}\n`;\n//# sourceMappingURL=project.glsl.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { fp32 } from '@luma.gl/shadertools';\nimport geometry from \"../misc/geometry.js\";\nimport { getUniformsFromViewport } from \"./viewport-uniforms.js\";\nimport { projectWGSL } from \"./project.wgsl.js\";\nimport { projectGLSL } from \"./project.glsl.js\";\nconst INITIAL_MODULE_OPTIONS = {};\nfunction getUniforms(opts = INITIAL_MODULE_OPTIONS) {\n    if ('viewport' in opts) {\n        return getUniformsFromViewport(opts);\n    }\n    return {};\n}\nexport default {\n    name: 'project',\n    dependencies: [fp32, geometry],\n    source: projectWGSL,\n    vs: projectGLSL,\n    getUniforms,\n    uniformTypes: {\n        wrapLongitude: 'f32',\n        coordinateSystem: 'i32',\n        commonUnitsPerMeter: 'vec3<f32>',\n        projectionMode: 'i32',\n        scale: 'f32',\n        commonUnitsPerWorldUnit: 'vec3<f32>',\n        commonUnitsPerWorldUnit2: 'vec3<f32>',\n        center: 'vec4<f32>',\n        modelMatrix: 'mat4x4<f32>',\n        viewProjectionMatrix: 'mat4x4<f32>',\n        viewportSize: 'vec2<f32>',\n        devicePixelRatio: 'f32',\n        focalDistance: 'f32',\n        cameraPosition: 'vec3<f32>',\n        coordinateOrigin: 'vec3<f32>',\n        commonOrigin: 'vec3<f32>',\n        pseudoMeters: 'f32'\n    }\n    // @ts-ignore TODO v9.1\n};\n//# sourceMappingURL=project.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport project from \"../project/project.js\";\nconst source = /* wgsl */ `\\\n// Define a structure to hold both the clip-space position and the common position.\nstruct ProjectResult {\n  clipPosition: vec4<f32>,\n  commonPosition: vec4<f32>,\n};\n\n// This function mimics the GLSL version with the 'out' parameter by returning both values.\nfn project_position_to_clipspace_and_commonspace(\n    position: vec3<f32>,\n    position64Low: vec3<f32>,\n    offset: vec3<f32>\n) -> ProjectResult {\n  // Compute the projected position.\n  let projectedPosition: vec3<f32> = project_position_vec3_f64(position, position64Low);\n\n  // Start with the provided offset.\n  var finalOffset: vec3<f32> = offset;\n\n  // Get whether a rotation is needed and the rotation matrix.\n  let rotationResult = project_needs_rotation(projectedPosition);\n\n  // If rotation is needed, update the offset.\n  if (rotationResult.needsRotation) {\n    finalOffset = rotationResult.transform * offset;\n  }\n\n  // Compute the common position.\n  let commonPosition: vec4<f32> = vec4<f32>(projectedPosition + finalOffset, 1.0);\n\n  // Convert to clip-space.\n  let clipPosition: vec4<f32> = project_common_position_to_clipspace(commonPosition);\n\n  return ProjectResult(clipPosition, commonPosition);\n}\n\n// A convenience overload that returns only the clip-space position.\nfn project_position_to_clipspace(\n    position: vec3<f32>,\n    position64Low: vec3<f32>,\n    offset: vec3<f32>\n) -> vec4<f32> {\n  return project_position_to_clipspace_and_commonspace(position, position64Low, offset).clipPosition;\n}\n`;\nconst vs = /* glsl */ `\\\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n`;\nexport default {\n    name: 'project32',\n    dependencies: [project],\n    source,\n    vs\n};\n//# sourceMappingURL=project32.js.map","import { vec4 } from '@math.gl/core';\n// Helper, avoids low-precision 32 bit matrices from gl-matrix mat4.create()\nexport function createMat4() {\n    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\n// Transforms a vec4 with a projection matrix\nexport function transformVector(matrix, vector) {\n    const result = vec4.transformMat4([], vector, matrix);\n    vec4.scale(result, result, 1 / result[3]);\n    return result;\n}\nexport function mod(value, divisor) {\n    const modulus = value % divisor;\n    return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function lerp(start, end, step) {\n    return step * end + (1 - step) * start;\n}\nexport function clamp(x, min, max) {\n    return x < min ? min : x > max ? max : x;\n}\nfunction ieLog2(x) {\n    return Math.log(x) * Math.LOG2E;\n}\n// Handle missing log2 in IE 11\nexport const log2 = Math.log2 || ieLog2;\n//# sourceMappingURL=math-utils.js.map","// Replacement for the external assert method to reduce bundle size\n// Note: We don't use the second \"message\" argument in calling code,\n// so no need to support it here\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new Error(message || '@math.gl/web-mercator: assertion failed.');\n    }\n}\n//# sourceMappingURL=assert.js.map","// TODO - THE UTILITIES IN THIS FILE SHOULD BE IMPORTED FROM WEB-MERCATOR-VIEWPORT MODULE\nimport { createMat4, transformVector, clamp, log2 } from \"./math-utils.js\";\nimport { mat4, vec2, vec3 } from '@math.gl/core';\nimport { assert } from \"./assert.js\";\n// CONSTANTS\nconst PI = Math.PI;\nconst PI_4 = PI / 4;\nconst DEGREES_TO_RADIANS = PI / 180;\nconst RADIANS_TO_DEGREES = 180 / PI;\nconst TILE_SIZE = 512;\n// Average circumference (40075 km equatorial, 40007 km meridional)\nconst EARTH_CIRCUMFERENCE = 40.03e6;\n// Latitude that makes a square world, 2 * atan(E ** PI) - PI / 2\nexport const MAX_LATITUDE = 85.051129;\n// Mapbox default altitude\nexport const DEFAULT_ALTITUDE = 1.5;\n/** Logarithimic zoom to linear scale **/\nexport function zoomToScale(zoom) {\n    return Math.pow(2, zoom);\n}\n/** Linear scale to logarithimic zoom **/\nexport function scaleToZoom(scale) {\n    return log2(scale);\n}\n/**\n * Project [lng,lat] on sphere onto [x,y] on 512*512 Mercator Zoom 0 tile.\n * Performs the nonlinear part of the web mercator projection.\n * Remaining projection is done with 4x4 matrices which also handles\n * perspective.\n *\n * @param lngLat - [lng, lat] coordinates\n *   Specifies a point on the sphere to project onto the map.\n * @return [x,y] coordinates.\n */\nexport function lngLatToWorld(lngLat) {\n    const [lng, lat] = lngLat;\n    assert(Number.isFinite(lng));\n    assert(Number.isFinite(lat) && lat >= -90 && lat <= 90, 'invalid latitude');\n    const lambda2 = lng * DEGREES_TO_RADIANS;\n    const phi2 = lat * DEGREES_TO_RADIANS;\n    const x = (TILE_SIZE * (lambda2 + PI)) / (2 * PI);\n    const y = (TILE_SIZE * (PI + Math.log(Math.tan(PI_4 + phi2 * 0.5)))) / (2 * PI);\n    return [x, y];\n}\n/**\n * Unproject world point [x,y] on map onto {lat, lon} on sphere\n *\n * @param xy - array with [x,y] members\n *  representing point on projected map plane\n * @return - array with [x,y] of point on sphere.\n *   Has toArray method if you need a GeoJSON Array.\n *   Per cartographic tradition, lat and lon are specified as degrees.\n */\nexport function worldToLngLat(xy) {\n    const [x, y] = xy;\n    const lambda2 = (x / TILE_SIZE) * (2 * PI) - PI;\n    const phi2 = 2 * (Math.atan(Math.exp((y / TILE_SIZE) * (2 * PI) - PI)) - PI_4);\n    return [lambda2 * RADIANS_TO_DEGREES, phi2 * RADIANS_TO_DEGREES];\n}\n/**\n * Returns the zoom level that gives a 1 meter pixel at a certain latitude\n * 1 = C*cos(y)/2^z/TILE_SIZE = C*cos(y)/2^(z+9)\n */\nexport function getMeterZoom(options) {\n    const { latitude } = options;\n    assert(Number.isFinite(latitude));\n    const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n    return scaleToZoom(EARTH_CIRCUMFERENCE * latCosine) - 9;\n}\n/**\n * Calculate the conversion from meter to common units at a given latitude\n * This is a cheaper version of `getDistanceScales`\n * @param latitude center latitude in degrees\n * @returns common units per meter\n */\nexport function unitsPerMeter(latitude) {\n    const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n    return TILE_SIZE / EARTH_CIRCUMFERENCE / latCosine;\n}\n/**\n * Calculate distance scales in meters around current lat/lon, both for\n * degrees and pixels.\n * In mercator projection mode, the distance scales vary significantly\n * with latitude.\n */\nexport function getDistanceScales(options) {\n    const { latitude, longitude, highPrecision = false } = options;\n    assert(Number.isFinite(latitude) && Number.isFinite(longitude));\n    const worldSize = TILE_SIZE;\n    const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n    /**\n     * Number of pixels occupied by one degree longitude around current lat/lon:\n       unitsPerDegreeX = d(lngLatToWorld([lng, lat])[0])/d(lng)\n         = scale * TILE_SIZE * DEGREES_TO_RADIANS / (2 * PI)\n       unitsPerDegreeY = d(lngLatToWorld([lng, lat])[1])/d(lat)\n         = -scale * TILE_SIZE * DEGREES_TO_RADIANS / cos(lat * DEGREES_TO_RADIANS)  / (2 * PI)\n     */\n    const unitsPerDegreeX = worldSize / 360;\n    const unitsPerDegreeY = unitsPerDegreeX / latCosine;\n    /**\n     * Number of pixels occupied by one meter around current lat/lon:\n     */\n    const altUnitsPerMeter = worldSize / EARTH_CIRCUMFERENCE / latCosine;\n    /**\n     * LngLat: longitude -> east and latitude -> north (bottom left)\n     * UTM meter offset: x -> east and y -> north (bottom left)\n     * World space: x -> east and y -> south (top left)\n     *\n     * Y needs to be flipped when converting delta degree/meter to delta pixels\n     */\n    const result = {\n        unitsPerMeter: [altUnitsPerMeter, altUnitsPerMeter, altUnitsPerMeter],\n        metersPerUnit: [1 / altUnitsPerMeter, 1 / altUnitsPerMeter, 1 / altUnitsPerMeter],\n        unitsPerDegree: [unitsPerDegreeX, unitsPerDegreeY, altUnitsPerMeter],\n        degreesPerUnit: [1 / unitsPerDegreeX, 1 / unitsPerDegreeY, 1 / altUnitsPerMeter]\n    };\n    /**\n     * Taylor series 2nd order for 1/latCosine\n       f'(a) * (x - a)\n         = d(1/cos(lat * DEGREES_TO_RADIANS))/d(lat) * dLat\n         = DEGREES_TO_RADIANS * tan(lat * DEGREES_TO_RADIANS) / cos(lat * DEGREES_TO_RADIANS) * dLat\n     */\n    if (highPrecision) {\n        const latCosine2 = (DEGREES_TO_RADIANS * Math.tan(latitude * DEGREES_TO_RADIANS)) / latCosine;\n        const unitsPerDegreeY2 = (unitsPerDegreeX * latCosine2) / 2;\n        const altUnitsPerDegree2 = (worldSize / EARTH_CIRCUMFERENCE) * latCosine2;\n        const altUnitsPerMeter2 = (altUnitsPerDegree2 / unitsPerDegreeY) * altUnitsPerMeter;\n        result.unitsPerDegree2 = [0, unitsPerDegreeY2, altUnitsPerDegree2];\n        result.unitsPerMeter2 = [altUnitsPerMeter2, 0, altUnitsPerMeter2];\n    }\n    // Main results, used for converting meters to latlng deltas and scaling offsets\n    return result;\n}\n/**\n * Offset a lng/lat position by meterOffset (northing, easting)\n */\nexport function addMetersToLngLat(lngLatZ, xyz) {\n    const [longitude, latitude, z0] = lngLatZ;\n    const [x, y, z] = xyz;\n    // eslint-disable-next-line no-shadow\n    const { unitsPerMeter, unitsPerMeter2 } = getDistanceScales({\n        longitude,\n        latitude,\n        highPrecision: true\n    });\n    const worldspace = lngLatToWorld(lngLatZ);\n    worldspace[0] += x * (unitsPerMeter[0] + unitsPerMeter2[0] * y);\n    worldspace[1] += y * (unitsPerMeter[1] + unitsPerMeter2[1] * y);\n    const newLngLat = worldToLngLat(worldspace);\n    const newZ = (z0 || 0) + (z || 0);\n    return Number.isFinite(z0) || Number.isFinite(z) ? [newLngLat[0], newLngLat[1], newZ] : newLngLat;\n}\n/**\n *\n * view and projection matrix creation is intentionally kept compatible with\n * mapbox-gl's implementation to ensure that seamless interoperation\n * with mapbox and react-map-gl. See: https://github.com/mapbox/mapbox-gl-js\n */\nexport function getViewMatrix(options) {\n    const { \n    // Viewport props\n    height, pitch, bearing, altitude, \n    // Pre-calculated parameters\n    scale, center } = options;\n    // VIEW MATRIX: PROJECTS MERCATOR WORLD COORDINATES\n    // Note that mercator world coordinates typically need to be flipped\n    //\n    // Note: As usual, matrix operation orders should be read in reverse\n    // since vectors will be multiplied from the right during transformation\n    const vm = createMat4();\n    // Move camera to altitude (along the pitch & bearing direction)\n    mat4.translate(vm, vm, [0, 0, -altitude]);\n    // Rotate by bearing, and then by pitch (which tilts the view)\n    mat4.rotateX(vm, vm, -pitch * DEGREES_TO_RADIANS);\n    mat4.rotateZ(vm, vm, bearing * DEGREES_TO_RADIANS);\n    const relativeScale = scale / height;\n    mat4.scale(vm, vm, [relativeScale, relativeScale, relativeScale]);\n    if (center) {\n        mat4.translate(vm, vm, vec3.negate([], center));\n    }\n    return vm;\n}\n/**\n * Calculates mapbox compatible projection matrix from parameters\n *\n * @param options.width Width of \"viewport\" or window\n * @param options.height Height of \"viewport\" or window\n * @param options.scale Scale at the current zoom\n * @param options.center Offset of the target, vec3 in world space\n * @param options.offset Offset of the focal point, vec2 in screen space\n * @param options.pitch Camera angle in degrees (0 is straight down)\n * @param options.fovy field of view in degrees\n * @param options.altitude if provided, field of view is calculated using `altitudeToFovy()`\n * @param options.nearZMultiplier control z buffer\n * @param options.farZMultiplier control z buffer\n * @returns project parameters object\n */\nexport function getProjectionParameters(options) {\n    const { width, height, altitude, pitch = 0, offset, center, scale, nearZMultiplier = 1, farZMultiplier = 1 } = options;\n    let { fovy = altitudeToFovy(DEFAULT_ALTITUDE) } = options;\n    // For back-compatibility allow field of view to be\n    // derived from altitude\n    if (altitude !== undefined) {\n        fovy = altitudeToFovy(altitude);\n    }\n    const fovRadians = fovy * DEGREES_TO_RADIANS;\n    const pitchRadians = pitch * DEGREES_TO_RADIANS;\n    // Distance from camera to the target\n    const focalDistance = fovyToAltitude(fovy);\n    let cameraToSeaLevelDistance = focalDistance;\n    if (center) {\n        cameraToSeaLevelDistance += (center[2] * scale) / Math.cos(pitchRadians) / height;\n    }\n    const fovAboveCenter = fovRadians * (0.5 + (offset ? offset[1] : 0) / height);\n    // Find the distance from the center point to the center top\n    // in focal distance units using law of sines.\n    const topHalfSurfaceDistance = (Math.sin(fovAboveCenter) * cameraToSeaLevelDistance) /\n        Math.sin(clamp(Math.PI / 2 - pitchRadians - fovAboveCenter, 0.01, Math.PI - 0.01));\n    // Calculate z distance of the farthest fragment that should be rendered.\n    const furthestDistance = Math.sin(pitchRadians) * topHalfSurfaceDistance + cameraToSeaLevelDistance;\n    // Matches mapbox limit\n    const horizonDistance = cameraToSeaLevelDistance * 10;\n    // Calculate z value of the farthest fragment that should be rendered.\n    const farZ = Math.min(furthestDistance * farZMultiplier, horizonDistance);\n    return {\n        fov: fovRadians,\n        aspect: width / height,\n        focalDistance,\n        near: nearZMultiplier,\n        far: farZ\n    };\n}\n/**\n * CALCULATE PROJECTION MATRIX: PROJECTS FROM CAMERA (VIEW) SPACE TO CLIPSPACE\n *\n * To match mapbox's z buffer:\n *  - \\<= 0.28: nearZMultiplier: 0.1, farZmultiplier: 1\n *  - \\>= 0.29: nearZMultiplier: 1 / height, farZMultiplier: 1.01\n *\n * @param options Viewport options\n * @param options.width Width of \"viewport\" or window\n * @param options.height Height of \"viewport\" or window\n * @param options.scale Scale at the current zoom\n * @param options.center Offset of the target, vec3 in world space\n * @param options.offset Offset of the focal point, vec2 in screen space\n * @param options.pitch Camera angle in degrees (0 is straight down)\n * @param options.fovy field of view in degrees\n * @param options.altitude if provided, field of view is calculated using `altitudeToFovy()`\n * @param options.nearZMultiplier control z buffer\n * @param options.farZMultiplier control z buffer\n * @returns 4x4 projection matrix\n */\nexport function getProjectionMatrix(options) {\n    const { fov, aspect, near, far } = getProjectionParameters(options);\n    const projectionMatrix = mat4.perspective([], fov, // fov in radians\n    aspect, // aspect ratio\n    near, // near plane\n    far // far plane\n    );\n    return projectionMatrix;\n}\n/**\n *\n * Convert an altitude to field of view such that the\n * focal distance is equal to the altitude\n *\n * @param altitude - altitude of camera in screen units\n * @return fovy field of view in degrees\n */\nexport function altitudeToFovy(altitude) {\n    return 2 * Math.atan(0.5 / altitude) * RADIANS_TO_DEGREES;\n}\n/**\n *\n * Convert an field of view such that the\n * focal distance is equal to the altitude\n *\n * @param fovy - field of view in degrees\n * @return altitude altitude of camera in screen units\n */\nexport function fovyToAltitude(fovy) {\n    return 0.5 / Math.tan(0.5 * fovy * DEGREES_TO_RADIANS);\n}\n// Project flat coordinates to pixels on screen.\nexport function worldToPixels(xyz, pixelProjectionMatrix) {\n    const [x, y, z = 0] = xyz;\n    assert(Number.isFinite(x) && Number.isFinite(y) && Number.isFinite(z));\n    return transformVector(pixelProjectionMatrix, [x, y, z, 1]);\n}\n/**\n * Unproject pixels on screen to flat coordinates.\n *\n * @param xyz - pixel coordinate on screen.\n * @param pixelUnprojectionMatrix - unprojection matrix 4x4\n * @param targetZ - if pixel coordinate does not have a 3rd component (depth),\n *    targetZ is used as the elevation plane to unproject onto\n * @return [x, y, Z] flat coordinates on 512*512 Mercator Zoom 0 tile.\n */\nexport function pixelsToWorld(xyz, pixelUnprojectionMatrix, targetZ = 0) {\n    const [x, y, z] = xyz;\n    assert(Number.isFinite(x) && Number.isFinite(y), 'invalid pixel coordinate');\n    if (Number.isFinite(z)) {\n        // Has depth component\n        const coord = transformVector(pixelUnprojectionMatrix, [x, y, z, 1]);\n        return coord;\n    }\n    // since we don't know the correct projected z value for the point,\n    // unproject two points to get a line and then find the point on that line with z=0\n    const coord0 = transformVector(pixelUnprojectionMatrix, [x, y, 0, 1]);\n    const coord1 = transformVector(pixelUnprojectionMatrix, [x, y, 1, 1]);\n    const z0 = coord0[2];\n    const z1 = coord1[2];\n    const t = z0 === z1 ? 0 : ((targetZ || 0) - z0) / (z1 - z0);\n    return vec2.lerp([], coord0, coord1, t);\n}\n//# sourceMappingURL=web-mercator-utils.js.map","import { assert } from \"./assert.js\";\nimport { log2, clamp } from \"./math-utils.js\";\nimport { MAX_LATITUDE, lngLatToWorld, worldToLngLat } from \"./web-mercator-utils.js\";\n/**\n * Returns map settings {latitude, longitude, zoom}\n * that will contain the provided corners within the provided width.\n *\n * > _Note: Only supports non-perspective mode._\n *\n * @param options fit bounds parameters\n * @returns - latitude, longitude and zoom\n */\nexport function fitBounds(options) {\n    const { width, height, bounds, minExtent = 0, // 0.01 would be about 1000 meters (degree is ~110KM)\n    maxZoom = 24, // ~x4,000,000 => About 10 meter extents\n    offset = [0, 0] } = options;\n    const [[west, south], [east, north]] = bounds;\n    const padding = getPaddingObject(options.padding);\n    const nw = lngLatToWorld([west, clamp(north, -MAX_LATITUDE, MAX_LATITUDE)]);\n    const se = lngLatToWorld([east, clamp(south, -MAX_LATITUDE, MAX_LATITUDE)]);\n    // width/height on the Web Mercator plane\n    const size = [\n        Math.max(Math.abs(se[0] - nw[0]), minExtent),\n        Math.max(Math.abs(se[1] - nw[1]), minExtent)\n    ];\n    const targetSize = [\n        width - padding.left - padding.right - Math.abs(offset[0]) * 2,\n        height - padding.top - padding.bottom - Math.abs(offset[1]) * 2\n    ];\n    assert(targetSize[0] > 0 && targetSize[1] > 0);\n    // scale = screen pixels per unit on the Web Mercator plane\n    const scaleX = targetSize[0] / size[0];\n    const scaleY = targetSize[1] / size[1];\n    // Find how much we need to shift the center\n    const offsetX = (padding.right - padding.left) / 2 / scaleX;\n    const offsetY = (padding.top - padding.bottom) / 2 / scaleY;\n    const center = [(se[0] + nw[0]) / 2 + offsetX, (se[1] + nw[1]) / 2 + offsetY];\n    const centerLngLat = worldToLngLat(center);\n    const zoom = Math.min(maxZoom, log2(Math.abs(Math.min(scaleX, scaleY))));\n    assert(Number.isFinite(zoom));\n    return {\n        longitude: centerLngLat[0],\n        latitude: centerLngLat[1],\n        zoom\n    };\n}\n// Helpers\nfunction getPaddingObject(padding = 0) {\n    if (typeof padding === 'number') {\n        return {\n            top: padding,\n            bottom: padding,\n            left: padding,\n            right: padding\n        };\n    }\n    // Make sure all the required properties are set\n    assert(Number.isFinite(padding.top) &&\n        Number.isFinite(padding.bottom) &&\n        Number.isFinite(padding.left) &&\n        Number.isFinite(padding.right));\n    return padding;\n}\n//# sourceMappingURL=fit-bounds.js.map","/* eslint-disable camelcase */\nimport { vec2 } from '@math.gl/core';\nimport { worldToLngLat } from \"./web-mercator-utils.js\";\nimport { transformVector } from \"./math-utils.js\";\nconst DEGREES_TO_RADIANS = Math.PI / 180;\n/*\n * Returns the quad at the intersection of the frustum and the given z plane\n * @param {WebMercatorViewport} viewport\n * @param {Number} z - elevation in meters\n */\nexport function getBounds(viewport, z = 0) {\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    const { width, height, unproject } = viewport;\n    const unprojectOps = { targetZ: z };\n    const bottomLeft = unproject([0, height], unprojectOps);\n    const bottomRight = unproject([width, height], unprojectOps);\n    let topLeft;\n    let topRight;\n    const halfFov = viewport.fovy\n        ? 0.5 * viewport.fovy * DEGREES_TO_RADIANS\n        : Math.atan(0.5 / viewport.altitude);\n    const angleToGround = (90 - viewport.pitch) * DEGREES_TO_RADIANS;\n    // The top plane is parallel to the ground if halfFov == angleToGround\n    if (halfFov > angleToGround - 0.01) {\n        // intersect with the far plane\n        topLeft = unprojectOnFarPlane(viewport, 0, z);\n        topRight = unprojectOnFarPlane(viewport, width, z);\n    }\n    else {\n        // intersect with the top plane\n        topLeft = unproject([0, 0], unprojectOps);\n        topRight = unproject([width, 0], unprojectOps);\n    }\n    return [bottomLeft, bottomRight, topRight, topLeft];\n}\n/*\n * Find a point on the far clipping plane of the viewport\n * @param {WebMercatorViewport} viewport\n * @param {Number} x - projected x in screen space\n * @param {Number} targetZ - the elevation of the point in meters\n */\nfunction unprojectOnFarPlane(viewport, x, targetZ) {\n    const { pixelUnprojectionMatrix } = viewport;\n    const coord0 = transformVector(pixelUnprojectionMatrix, [x, 0, 1, 1]);\n    const coord1 = transformVector(pixelUnprojectionMatrix, [x, viewport.height, 1, 1]);\n    const z = targetZ * viewport.distanceScales.unitsPerMeter[2];\n    const t = (z - coord0[2]) / (coord1[2] - coord0[2]);\n    const coord = vec2.lerp([], coord0, coord1, t);\n    const result = worldToLngLat(coord);\n    result.push(targetZ);\n    return result;\n}\n//# sourceMappingURL=get-bounds.js.map","import { worldToLngLat } from \"./web-mercator-utils.js\";\nimport { mod, log2 } from \"./math-utils.js\";\n// defined by mapbox-gl\nconst TILE_SIZE = 512;\n/**\n * Apply mathematical constraints to viewport props\n * @param props\n */\n// eslint-disable-next-line complexity\nexport function normalizeViewportProps(props) {\n    const { width, height, pitch = 0 } = props;\n    let { longitude, latitude, zoom, bearing = 0 } = props;\n    // Normalize degrees\n    if (longitude < -180 || longitude > 180) {\n        longitude = mod(longitude + 180, 360) - 180;\n    }\n    if (bearing < -180 || bearing > 180) {\n        bearing = mod(bearing + 180, 360) - 180;\n    }\n    // Constrain zoom and shift center at low zoom levels\n    const minZoom = log2(height / TILE_SIZE);\n    if (zoom <= minZoom) {\n        zoom = minZoom;\n        latitude = 0;\n    }\n    else {\n        // Eliminate white space above and below the map\n        const halfHeightPixels = height / 2 / Math.pow(2, zoom);\n        const minLatitude = worldToLngLat([0, halfHeightPixels])[1];\n        if (latitude < minLatitude) {\n            latitude = minLatitude;\n        }\n        else {\n            const maxLatitude = worldToLngLat([0, TILE_SIZE - halfHeightPixels])[1];\n            if (latitude > maxLatitude) {\n                latitude = maxLatitude;\n            }\n        }\n    }\n    return { width, height, longitude, latitude, zoom, pitch, bearing };\n}\n//# sourceMappingURL=normalize-viewport-props.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { picking } from '@luma.gl/shadertools';\nexport default {\n    ...picking,\n    defaultUniforms: { ...picking.defaultUniforms, useFloatColors: false },\n    inject: {\n        'vs:DECKGL_FILTER_GL_POSITION': `\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  `,\n        'vs:DECKGL_FILTER_COLOR': `\n  picking_setPickingColor(geometry.pickingColor);\n  `,\n        'fs:DECKGL_FILTER_COLOR': {\n            order: 99,\n            injection: `\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    `\n        }\n    }\n};\n//# sourceMappingURL=picking.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport class TypedArrayManager {\n    constructor(options = {}) {\n        this._pool = [];\n        this.opts = { overAlloc: 2, poolSize: 100 };\n        this.setOptions(options);\n    }\n    setOptions(options) {\n        Object.assign(this.opts, options);\n    }\n    allocate(typedArray, count, { size = 1, type, padding = 0, copy = false, initialize = false, maxCount }) {\n        const Type = type || (typedArray && typedArray.constructor) || Float32Array;\n        const newSize = count * size + padding;\n        if (ArrayBuffer.isView(typedArray)) {\n            if (newSize <= typedArray.length) {\n                return typedArray;\n            }\n            if (newSize * typedArray.BYTES_PER_ELEMENT <= typedArray.buffer.byteLength) {\n                return new Type(typedArray.buffer, 0, newSize);\n            }\n        }\n        let maxSize = Infinity;\n        if (maxCount) {\n            maxSize = maxCount * size + padding;\n        }\n        const newArray = this._allocate(Type, newSize, initialize, maxSize);\n        if (typedArray && copy) {\n            newArray.set(typedArray);\n        }\n        else if (!initialize) {\n            // Hack - always initialize the first 4 elements. NaNs crash the Attribute validation\n            newArray.fill(0, 0, 4);\n        }\n        this._release(typedArray);\n        return newArray;\n    }\n    release(typedArray) {\n        this._release(typedArray);\n    }\n    _allocate(Type, size, initialize, maxSize) {\n        // Allocate at least one element to ensure a valid buffer\n        let sizeToAllocate = Math.max(Math.ceil(size * this.opts.overAlloc), 1);\n        // Don't over allocate after certain specified number of elements\n        if (sizeToAllocate > maxSize) {\n            sizeToAllocate = maxSize;\n        }\n        // Check if available in pool\n        const pool = this._pool;\n        const byteLength = Type.BYTES_PER_ELEMENT * sizeToAllocate;\n        const i = pool.findIndex(b => b.byteLength >= byteLength);\n        if (i >= 0) {\n            // Create a new array using an existing buffer\n            const array = new Type(pool.splice(i, 1)[0], 0, sizeToAllocate);\n            if (initialize) {\n                // Viewing a buffer with a different type may create NaNs\n                array.fill(0);\n            }\n            return array;\n        }\n        return new Type(sizeToAllocate);\n    }\n    _release(typedArray) {\n        if (!ArrayBuffer.isView(typedArray)) {\n            return;\n        }\n        const pool = this._pool;\n        const { buffer } = typedArray;\n        // Save the buffer of the released array into the pool\n        // Sort buffers by size\n        // TODO - implement binary search?\n        const { byteLength } = buffer;\n        const i = pool.findIndex(b => b.byteLength >= byteLength);\n        if (i < 0) {\n            pool.push(buffer);\n        }\n        else if (i > 0 || pool.length < this.opts.poolSize) {\n            pool.splice(i, 0, buffer);\n        }\n        if (pool.length > this.opts.poolSize) {\n            // Drop the smallest one\n            pool.shift();\n        }\n    }\n}\nexport default new TypedArrayManager();\n//# sourceMappingURL=typed-array-manager.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Extensions to math.gl library. Intended to be folded back.\nimport typedArrayManager from \"./typed-array-manager.js\";\nimport { Vector3 } from '@math.gl/core';\n// Helper, avoids low-precision 32 bit matrices from gl-matrix mat4.create()\nexport function createMat4() {\n    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\nexport function mod(value, divisor) {\n    const modulus = value % divisor;\n    return modulus < 0 ? divisor + modulus : modulus;\n}\n// Extract camera vectors (move to math library?)\nexport function getCameraPosition(viewMatrixInverse) {\n    // Read the translation from the inverse view matrix\n    return [viewMatrixInverse[12], viewMatrixInverse[13], viewMatrixInverse[14]];\n}\n// https://www.gamedevs.org/uploads/fast-extraction-viewing-frustum-planes-from-world-view-projection-matrix.pdf\nexport function getFrustumPlanes(viewProjectionMatrix) {\n    return {\n        left: getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[0], viewProjectionMatrix[7] + viewProjectionMatrix[4], viewProjectionMatrix[11] + viewProjectionMatrix[8], viewProjectionMatrix[15] + viewProjectionMatrix[12]),\n        right: getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[0], viewProjectionMatrix[7] - viewProjectionMatrix[4], viewProjectionMatrix[11] - viewProjectionMatrix[8], viewProjectionMatrix[15] - viewProjectionMatrix[12]),\n        bottom: getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[1], viewProjectionMatrix[7] + viewProjectionMatrix[5], viewProjectionMatrix[11] + viewProjectionMatrix[9], viewProjectionMatrix[15] + viewProjectionMatrix[13]),\n        top: getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[1], viewProjectionMatrix[7] - viewProjectionMatrix[5], viewProjectionMatrix[11] - viewProjectionMatrix[9], viewProjectionMatrix[15] - viewProjectionMatrix[13]),\n        near: getFrustumPlane(viewProjectionMatrix[3] + viewProjectionMatrix[2], viewProjectionMatrix[7] + viewProjectionMatrix[6], viewProjectionMatrix[11] + viewProjectionMatrix[10], viewProjectionMatrix[15] + viewProjectionMatrix[14]),\n        far: getFrustumPlane(viewProjectionMatrix[3] - viewProjectionMatrix[2], viewProjectionMatrix[7] - viewProjectionMatrix[6], viewProjectionMatrix[11] - viewProjectionMatrix[10], viewProjectionMatrix[15] - viewProjectionMatrix[14])\n    };\n}\nconst scratchVector = new Vector3();\nfunction getFrustumPlane(a, b, c, d) {\n    scratchVector.set(a, b, c);\n    const L = scratchVector.len();\n    return { distance: d / L, normal: new Vector3(-a / L, -b / L, -c / L) };\n}\n/**\n * Calculate the low part of a WebGL 64 bit float\n * @param x {number} - the input float number\n * @returns {number} - the lower 32 bit of the number\n */\nexport function fp64LowPart(x) {\n    return x - Math.fround(x);\n}\nlet scratchArray;\n/**\n * Split a Float64Array into a double-length Float32Array\n * @param typedArray\n * @param options\n * @param options.size  - per attribute size\n * @param options.startIndex - start index in the source array\n * @param options.endIndex  - end index in the source array\n * @returns {} - high part, low part for each attribute:\n    [1xHi, 1yHi, 1zHi, 1xLow, 1yLow, 1zLow, 2xHi, ...]\n */\nexport function toDoublePrecisionArray(typedArray, options) {\n    const { size = 1, startIndex = 0 } = options;\n    const endIndex = options.endIndex !== undefined ? options.endIndex : typedArray.length;\n    const count = (endIndex - startIndex) / size;\n    scratchArray = typedArrayManager.allocate(scratchArray, count, {\n        type: Float32Array,\n        size: size * 2\n    });\n    let sourceIndex = startIndex;\n    let targetIndex = 0;\n    while (sourceIndex < endIndex) {\n        for (let j = 0; j < size; j++) {\n            const value = typedArray[sourceIndex++];\n            scratchArray[targetIndex + j] = value;\n            scratchArray[targetIndex + j + size] = fp64LowPart(value);\n        }\n        targetIndex += size * 2;\n    }\n    return scratchArray.subarray(0, count * size * 2);\n}\nexport function mergeBounds(boundsList) {\n    let mergedBounds = null;\n    let isMerged = false;\n    for (const bounds of boundsList) {\n        /* eslint-disable-next-line no-continue */\n        if (!bounds)\n            continue;\n        if (!mergedBounds) {\n            mergedBounds = bounds;\n        }\n        else {\n            if (!isMerged) {\n                // Copy to avoid mutating input bounds\n                mergedBounds = [\n                    [mergedBounds[0][0], mergedBounds[0][1]],\n                    [mergedBounds[1][0], mergedBounds[1][1]]\n                ];\n                isMerged = true;\n            }\n            mergedBounds[0][0] = Math.min(mergedBounds[0][0], bounds[0][0]);\n            mergedBounds[0][1] = Math.min(mergedBounds[0][1], bounds[0][1]);\n            mergedBounds[1][0] = Math.max(mergedBounds[1][0], bounds[1][0]);\n            mergedBounds[1][1] = Math.max(mergedBounds[1][1], bounds[1][1]);\n        }\n    }\n    return mergedBounds;\n}\n//# sourceMappingURL=math-utils.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport log from \"../utils/log.js\";\nimport { createMat4, getCameraPosition, getFrustumPlanes } from \"../utils/math-utils.js\";\nimport { Matrix4, Vector3, equals, clamp, mat4 } from '@math.gl/core';\nimport { getDistanceScales, getMeterZoom, lngLatToWorld, worldToLngLat, worldToPixels, pixelsToWorld } from '@math.gl/web-mercator';\nimport { PROJECTION_MODE } from \"../lib/constants.js\";\nconst DEGREES_TO_RADIANS = Math.PI / 180;\nconst IDENTITY = createMat4();\nconst ZERO_VECTOR = [0, 0, 0];\nconst DEFAULT_DISTANCE_SCALES = {\n    unitsPerMeter: [1, 1, 1],\n    metersPerUnit: [1, 1, 1]\n};\n// / Helpers\nfunction createProjectionMatrix({ width, height, orthographic, fovyRadians, focalDistance, padding, near, far }) {\n    const aspect = width / height;\n    const matrix = orthographic\n        ? new Matrix4().orthographic({ fovy: fovyRadians, aspect, focalDistance, near, far })\n        : new Matrix4().perspective({ fovy: fovyRadians, aspect, near, far });\n    if (padding) {\n        const { left = 0, right = 0, top = 0, bottom = 0 } = padding;\n        const offsetX = clamp((left + width - right) / 2, 0, width) - width / 2;\n        const offsetY = clamp((top + height - bottom) / 2, 0, height) - height / 2;\n        // pixels to clip space\n        matrix[8] -= (offsetX * 2) / width;\n        matrix[9] += (offsetY * 2) / height;\n    }\n    return matrix;\n}\n/**\n * Manages coordinate system transformations.\n *\n * Note: The Viewport is immutable in the sense that it only has accessors.\n * A new viewport instance should be created if any parameters have changed.\n */\nclass Viewport {\n    // eslint-disable-next-line complexity\n    constructor(opts = {}) {\n        this._frustumPlanes = {};\n        // @ts-ignore\n        this.id = opts.id || this.constructor.displayName || 'viewport';\n        this.x = opts.x || 0;\n        this.y = opts.y || 0;\n        // Silently allow apps to send in w,h = 0,0\n        this.width = opts.width || 1;\n        this.height = opts.height || 1;\n        this.zoom = opts.zoom || 0;\n        this.padding = opts.padding;\n        this.distanceScales = opts.distanceScales || DEFAULT_DISTANCE_SCALES;\n        this.focalDistance = opts.focalDistance || 1;\n        this.position = opts.position || ZERO_VECTOR;\n        this.modelMatrix = opts.modelMatrix || null;\n        const { longitude, latitude } = opts;\n        this.isGeospatial = Number.isFinite(latitude) && Number.isFinite(longitude);\n        this._initProps(opts);\n        this._initMatrices(opts);\n        // Bind methods for easy access\n        this.equals = this.equals.bind(this);\n        this.project = this.project.bind(this);\n        this.unproject = this.unproject.bind(this);\n        this.projectPosition = this.projectPosition.bind(this);\n        this.unprojectPosition = this.unprojectPosition.bind(this);\n        this.projectFlat = this.projectFlat.bind(this);\n        this.unprojectFlat = this.unprojectFlat.bind(this);\n    }\n    get subViewports() {\n        return null;\n    }\n    get metersPerPixel() {\n        return this.distanceScales.metersPerUnit[2] / this.scale;\n    }\n    get projectionMode() {\n        if (this.isGeospatial) {\n            return this.zoom < 12\n                ? PROJECTION_MODE.WEB_MERCATOR\n                : PROJECTION_MODE.WEB_MERCATOR_AUTO_OFFSET;\n        }\n        return PROJECTION_MODE.IDENTITY;\n    }\n    // Two viewports are equal if width and height are identical, and if\n    // their view and projection matrices are (approximately) equal.\n    equals(viewport) {\n        if (!(viewport instanceof Viewport)) {\n            return false;\n        }\n        if (this === viewport) {\n            return true;\n        }\n        return (viewport.width === this.width &&\n            viewport.height === this.height &&\n            viewport.scale === this.scale &&\n            equals(viewport.projectionMatrix, this.projectionMatrix) &&\n            equals(viewport.viewMatrix, this.viewMatrix));\n        // TODO - check distance scales?\n    }\n    /**\n     * Projects xyz (possibly latitude and longitude) to pixel coordinates in window\n     * using viewport projection parameters\n     * - [longitude, latitude] to [x, y]\n     * - [longitude, latitude, Z] => [x, y, z]\n     * Note: By default, returns top-left coordinates for canvas/SVG type render\n     *\n     * @param {Array} lngLatZ - [lng, lat] or [lng, lat, Z]\n     * @param {Object} opts - options\n     * @param {Object} opts.topLeft=true - Whether projected coords are top left\n     * @return {Array} - [x, y] or [x, y, z] in top left coords\n     */\n    project(xyz, { topLeft = true } = {}) {\n        const worldPosition = this.projectPosition(xyz);\n        const coord = worldToPixels(worldPosition, this.pixelProjectionMatrix);\n        const [x, y] = coord;\n        const y2 = topLeft ? y : this.height - y;\n        return xyz.length === 2 ? [x, y2] : [x, y2, coord[2]];\n    }\n    /**\n     * Unproject pixel coordinates on screen onto world coordinates,\n     * (possibly [lon, lat]) on map.\n     * - [x, y] => [lng, lat]\n     * - [x, y, z] => [lng, lat, Z]\n     * @param {Array} xyz -\n     * @param {Object} opts - options\n     * @param {Object} opts.topLeft=true - Whether origin is top left\n     * @return {Array|null} - [lng, lat, Z] or [X, Y, Z]\n     */\n    unproject(xyz, { topLeft = true, targetZ } = {}) {\n        const [x, y, z] = xyz;\n        const y2 = topLeft ? y : this.height - y;\n        const targetZWorld = targetZ && targetZ * this.distanceScales.unitsPerMeter[2];\n        const coord = pixelsToWorld([x, y2, z], this.pixelUnprojectionMatrix, targetZWorld);\n        const [X, Y, Z] = this.unprojectPosition(coord);\n        if (Number.isFinite(z)) {\n            return [X, Y, Z];\n        }\n        return Number.isFinite(targetZ) ? [X, Y, targetZ] : [X, Y];\n    }\n    // NON_LINEAR PROJECTION HOOKS\n    // Used for web meractor projection\n    projectPosition(xyz) {\n        const [X, Y] = this.projectFlat(xyz);\n        const Z = (xyz[2] || 0) * this.distanceScales.unitsPerMeter[2];\n        return [X, Y, Z];\n    }\n    unprojectPosition(xyz) {\n        const [X, Y] = this.unprojectFlat(xyz);\n        const Z = (xyz[2] || 0) * this.distanceScales.metersPerUnit[2];\n        return [X, Y, Z];\n    }\n    /**\n     * Project [lng,lat] on sphere onto [x,y] on 512*512 Mercator Zoom 0 tile.\n     * Performs the nonlinear part of the web mercator projection.\n     * Remaining projection is done with 4x4 matrices which also handles\n     * perspective.\n     * @param {Array} lngLat - [lng, lat] coordinates\n     *   Specifies a point on the sphere to project onto the map.\n     * @return {Array} [x,y] coordinates.\n     */\n    projectFlat(xyz) {\n        if (this.isGeospatial) {\n            // Shader clamps latitude to +-89.9, see /shaderlib/project/project.glsl.js\n            // lngLatToWorld([0, -89.9])[1] = -317.9934163758329\n            // lngLatToWorld([0, 89.9])[1] = 829.9934163758271\n            const result = lngLatToWorld(xyz);\n            result[1] = clamp(result[1], -318, 830);\n            return result;\n        }\n        return xyz;\n    }\n    /**\n     * Unproject world point [x,y] on map onto {lat, lon} on sphere\n     * @param {object|Vector} xy - object with {x,y} members\n     *  representing point on projected map plane\n     * @return {GeoCoordinates} - object with {lat,lon} of point on sphere.\n     *   Has toArray method if you need a GeoJSON Array.\n     *   Per cartographic tradition, lat and lon are specified as degrees.\n     */\n    unprojectFlat(xyz) {\n        if (this.isGeospatial) {\n            return worldToLngLat(xyz);\n        }\n        return xyz;\n    }\n    /**\n     * Get bounds of the current viewport\n     * @return {Array} - [minX, minY, maxX, maxY]\n     */\n    getBounds(options = {}) {\n        const unprojectOption = { targetZ: options.z || 0 };\n        const topLeft = this.unproject([0, 0], unprojectOption);\n        const topRight = this.unproject([this.width, 0], unprojectOption);\n        const bottomLeft = this.unproject([0, this.height], unprojectOption);\n        const bottomRight = this.unproject([this.width, this.height], unprojectOption);\n        return [\n            Math.min(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]),\n            Math.min(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]),\n            Math.max(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]),\n            Math.max(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1])\n        ];\n    }\n    getDistanceScales(coordinateOrigin) {\n        if (coordinateOrigin && this.isGeospatial) {\n            return getDistanceScales({\n                longitude: coordinateOrigin[0],\n                latitude: coordinateOrigin[1],\n                highPrecision: true\n            });\n        }\n        return this.distanceScales;\n    }\n    containsPixel({ x, y, width = 1, height = 1 }) {\n        return (x < this.x + this.width &&\n            this.x < x + width &&\n            y < this.y + this.height &&\n            this.y < y + height);\n    }\n    // Extract frustum planes in common space\n    getFrustumPlanes() {\n        if (this._frustumPlanes.near) {\n            // @ts-ignore\n            return this._frustumPlanes;\n        }\n        Object.assign(this._frustumPlanes, getFrustumPlanes(this.viewProjectionMatrix));\n        // @ts-ignore\n        return this._frustumPlanes;\n    }\n    // EXPERIMENTAL METHODS\n    /**\n     * Needed by panning and linear transition\n     * Pan the viewport to place a given world coordinate at screen point [x, y]\n     *\n     * @param {Array} coords - world coordinates\n     * @param {Array} pixel - [x,y] coordinates on screen\n     * @param {Array} startPixel - [x,y] screen position where pan started (optional, for delta-based panning)\n     * @return {Object} props of the new viewport\n     */\n    panByPosition(coords, pixel, startPixel) {\n        return null;\n    }\n    // INTERNAL METHODS\n    /* eslint-disable complexity, max-statements */\n    _initProps(opts) {\n        const longitude = opts.longitude;\n        const latitude = opts.latitude;\n        if (this.isGeospatial) {\n            if (!Number.isFinite(opts.zoom)) {\n                this.zoom = getMeterZoom({ latitude }) + Math.log2(this.focalDistance);\n            }\n            this.distanceScales = opts.distanceScales || getDistanceScales({ latitude, longitude });\n        }\n        const scale = Math.pow(2, this.zoom);\n        this.scale = scale;\n        const { position, modelMatrix } = opts;\n        let meterOffset = ZERO_VECTOR;\n        if (position) {\n            meterOffset = modelMatrix\n                ? new Matrix4(modelMatrix).transformAsVector(position, [])\n                : position;\n        }\n        if (this.isGeospatial) {\n            // Determine camera center in common space\n            const center = this.projectPosition([longitude, latitude, 0]);\n            this.center = new Vector3(meterOffset)\n                // Convert to pixels in current zoom\n                .scale(this.distanceScales.unitsPerMeter)\n                .add(center);\n        }\n        else {\n            this.center = this.projectPosition(meterOffset);\n        }\n    }\n    /* eslint-enable complexity, max-statements */\n    _initMatrices(opts) {\n        const { \n        // View matrix\n        viewMatrix = IDENTITY, \n        // Projection matrix\n        projectionMatrix = null, \n        // Projection matrix parameters, used if projectionMatrix not supplied\n        orthographic = false, fovyRadians, fovy = 75, near = 0.1, // Distance of near clipping plane\n        far = 1000, // Distance of far clipping plane\n        padding = null, // Center offset in pixels\n        focalDistance = 1 } = opts;\n        this.viewMatrixUncentered = viewMatrix;\n        // Make a centered version of the matrix for projection modes without an offset\n        this.viewMatrix = new Matrix4()\n            // Apply the uncentered view matrix\n            .multiplyRight(viewMatrix)\n            // And center it\n            .translate(new Vector3(this.center).negate());\n        this.projectionMatrix =\n            projectionMatrix ||\n                createProjectionMatrix({\n                    width: this.width,\n                    height: this.height,\n                    orthographic,\n                    fovyRadians: fovyRadians || fovy * DEGREES_TO_RADIANS,\n                    focalDistance,\n                    padding,\n                    near,\n                    far\n                });\n        // Note: As usual, matrix operations should be applied in \"reverse\" order\n        // since vectors will be multiplied in from the right during transformation\n        const vpm = createMat4();\n        mat4.multiply(vpm, vpm, this.projectionMatrix);\n        mat4.multiply(vpm, vpm, this.viewMatrix);\n        this.viewProjectionMatrix = vpm;\n        // console.log('VPM', this.viewMatrix, this.projectionMatrix, this.viewProjectionMatrix);\n        // Calculate inverse view matrix\n        this.viewMatrixInverse = mat4.invert([], this.viewMatrix) || this.viewMatrix;\n        // Decompose camera parameters\n        this.cameraPosition = getCameraPosition(this.viewMatrixInverse);\n        /*\n         * Builds matrices that converts preprojected lngLats to screen pixels\n         * and vice versa.\n         * Note: Currently returns bottom-left coordinates!\n         * Note: Starts with the GL projection matrix and adds steps to the\n         *       scale and translate that matrix onto the window.\n         * Note: WebGL controls clip space to screen projection with gl.viewport\n         *       and does not need this step.\n         */\n        // matrix for conversion from world location to screen (pixel) coordinates\n        const viewportMatrix = createMat4(); // matrix from NDC to viewport.\n        const pixelProjectionMatrix = createMat4(); // matrix from world space to viewport.\n        mat4.scale(viewportMatrix, viewportMatrix, [this.width / 2, -this.height / 2, 1]);\n        mat4.translate(viewportMatrix, viewportMatrix, [1, -1, 0]);\n        mat4.multiply(pixelProjectionMatrix, viewportMatrix, this.viewProjectionMatrix);\n        this.pixelProjectionMatrix = pixelProjectionMatrix;\n        this.pixelUnprojectionMatrix = mat4.invert(createMat4(), this.pixelProjectionMatrix);\n        if (!this.pixelUnprojectionMatrix) {\n            log.warn('Pixel project matrix not invertible')();\n            // throw new Error('Pixel project matrix not invertible');\n        }\n    }\n}\nViewport.displayName = 'Viewport';\nexport default Viewport;\n//# sourceMappingURL=viewport.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// View and Projection Matrix calculations for mapbox-js style\n// map view properties\nimport Viewport from \"./viewport.js\";\nimport { pixelsToWorld, getViewMatrix, addMetersToLngLat, unitsPerMeter, getProjectionParameters, altitudeToFovy, fovyToAltitude, fitBounds, getBounds } from '@math.gl/web-mercator';\nimport { Matrix4, clamp, vec2 } from '@math.gl/core';\n/**\n * Manages transformations to/from WGS84 coordinates using the Web Mercator Projection.\n */\nclass WebMercatorViewport extends Viewport {\n    /* eslint-disable complexity, max-statements */\n    constructor(opts = {}) {\n        const { latitude = 0, longitude = 0, zoom = 0, pitch = 0, bearing = 0, nearZMultiplier = 0.1, farZMultiplier = 1.01, nearZ, farZ, orthographic = false, projectionMatrix, repeat = false, worldOffset = 0, position, padding, \n        // backward compatibility\n        // TODO: remove in v9\n        legacyMeterSizes = false } = opts;\n        let { width, height, altitude = 1.5 } = opts;\n        const scale = Math.pow(2, zoom);\n        // Silently allow apps to send in 0,0 to facilitate isomorphic render etc\n        width = width || 1;\n        height = height || 1;\n        let fovy;\n        let projectionParameters = null;\n        if (projectionMatrix) {\n            altitude = projectionMatrix[5] / 2;\n            fovy = altitudeToFovy(altitude);\n        }\n        else {\n            if (opts.fovy) {\n                fovy = opts.fovy;\n                altitude = fovyToAltitude(fovy);\n            }\n            else {\n                fovy = altitudeToFovy(altitude);\n            }\n            let offset;\n            if (padding) {\n                const { top = 0, bottom = 0 } = padding;\n                offset = [0, clamp((top + height - bottom) / 2, 0, height) - height / 2];\n            }\n            projectionParameters = getProjectionParameters({\n                width,\n                height,\n                scale,\n                center: position && [0, 0, position[2] * unitsPerMeter(latitude)],\n                offset,\n                pitch,\n                fovy,\n                nearZMultiplier,\n                farZMultiplier\n            });\n            if (Number.isFinite(nearZ)) {\n                projectionParameters.near = nearZ;\n            }\n            if (Number.isFinite(farZ)) {\n                projectionParameters.far = farZ;\n            }\n        }\n        // The uncentered matrix allows us two move the center addition to the\n        // shader (cheap) which gives a coordinate system that has its center in\n        // the layer's center position. This makes rotations and other modelMatrx\n        // transforms much more useful.\n        let viewMatrixUncentered = getViewMatrix({\n            height,\n            pitch,\n            bearing,\n            scale,\n            altitude\n        });\n        if (worldOffset) {\n            const viewOffset = new Matrix4().translate([512 * worldOffset, 0, 0]);\n            viewMatrixUncentered = viewOffset.multiplyLeft(viewMatrixUncentered);\n        }\n        super({\n            ...opts,\n            // x, y,\n            width,\n            height,\n            // view matrix\n            viewMatrix: viewMatrixUncentered,\n            longitude,\n            latitude,\n            zoom,\n            // projection matrix parameters\n            ...projectionParameters,\n            fovy,\n            focalDistance: altitude\n        });\n        // Save parameters\n        this.latitude = latitude;\n        this.longitude = longitude;\n        this.zoom = zoom;\n        this.pitch = pitch;\n        this.bearing = bearing;\n        this.altitude = altitude;\n        this.fovy = fovy;\n        this.orthographic = orthographic;\n        this._subViewports = repeat ? [] : null;\n        this._pseudoMeters = legacyMeterSizes;\n        Object.freeze(this);\n    }\n    /* eslint-enable complexity, max-statements */\n    get subViewports() {\n        if (this._subViewports && !this._subViewports.length) {\n            // Cache sub viewports so that we only calculate them once\n            const bounds = this.getBounds();\n            const minOffset = Math.floor((bounds[0] + 180) / 360);\n            const maxOffset = Math.ceil((bounds[2] - 180) / 360);\n            for (let x = minOffset; x <= maxOffset; x++) {\n                const offsetViewport = x\n                    ? new WebMercatorViewport({\n                        ...this,\n                        worldOffset: x\n                    })\n                    : this;\n                this._subViewports.push(offsetViewport);\n            }\n        }\n        return this._subViewports;\n    }\n    projectPosition(xyz) {\n        if (this._pseudoMeters) {\n            // Backward compatibility\n            return super.projectPosition(xyz);\n        }\n        const [X, Y] = this.projectFlat(xyz);\n        const Z = (xyz[2] || 0) * unitsPerMeter(xyz[1]);\n        return [X, Y, Z];\n    }\n    unprojectPosition(xyz) {\n        if (this._pseudoMeters) {\n            // Backward compatibility\n            return super.unprojectPosition(xyz);\n        }\n        const [X, Y] = this.unprojectFlat(xyz);\n        const Z = (xyz[2] || 0) / unitsPerMeter(Y);\n        return [X, Y, Z];\n    }\n    /**\n     * Add a meter delta to a base lnglat coordinate, returning a new lnglat array\n     *\n     * Note: Uses simple linear approximation around the viewport center\n     * Error increases with size of offset (roughly 1% per 100km)\n     *\n     * @param {[Number,Number]|[Number,Number,Number]) lngLatZ - base coordinate\n     * @param {[Number,Number]|[Number,Number,Number]) xyz - array of meter deltas\n     * @return {[Number,Number]|[Number,Number,Number]) array of [lng,lat,z] deltas\n     */\n    addMetersToLngLat(lngLatZ, xyz) {\n        return addMetersToLngLat(lngLatZ, xyz);\n    }\n    panByPosition(coords, pixel, startPixel) {\n        const fromLocation = pixelsToWorld(pixel, this.pixelUnprojectionMatrix);\n        const toLocation = this.projectFlat(coords);\n        const translate = vec2.add([], toLocation, vec2.negate([], fromLocation));\n        const newCenter = vec2.add([], this.center, translate);\n        const [longitude, latitude] = this.unprojectFlat(newCenter);\n        return { longitude, latitude };\n    }\n    getBounds(options = {}) {\n        // @ts-ignore\n        const corners = getBounds(this, options.z || 0);\n        return [\n            Math.min(corners[0][0], corners[1][0], corners[2][0], corners[3][0]),\n            Math.min(corners[0][1], corners[1][1], corners[2][1], corners[3][1]),\n            Math.max(corners[0][0], corners[1][0], corners[2][0], corners[3][0]),\n            Math.max(corners[0][1], corners[1][1], corners[2][1], corners[3][1])\n        ];\n    }\n    /**\n     * Returns a new viewport that fit around the given rectangle.\n     * Only supports non-perspective mode.\n     */\n    fitBounds(\n    /** [[lon, lat], [lon, lat]] */\n    bounds, options = {}) {\n        const { width, height } = this;\n        const { longitude, latitude, zoom } = fitBounds({ width, height, bounds, ...options });\n        return new WebMercatorViewport({ width, height, longitude, latitude, zoom });\n    }\n}\nWebMercatorViewport.displayName = 'WebMercatorViewport';\nexport default WebMercatorViewport;\n//# sourceMappingURL=web-mercator-viewport.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport const LIFECYCLE = {\n    NO_STATE: 'Awaiting state',\n    MATCHED: 'Matched. State transferred from previous layer',\n    INITIALIZED: 'Initialized',\n    AWAITING_GC: 'Discarded. Awaiting garbage collection',\n    AWAITING_FINALIZATION: 'No longer matched. Awaiting garbage collection',\n    FINALIZED: 'Finalized! Awaiting garbage collection'\n};\n/* Secret props keys */\n// Symbols are non-enumerable by default, does not show in for...in or Object.keys\n// but are copied with Object.assign \\_()_/\n// Supported everywhere except IE11, can be polyfilled with core-js\nexport const COMPONENT_SYMBOL = Symbol.for('component');\nexport const PROP_TYPES_SYMBOL = Symbol.for('propTypes');\nexport const DEPRECATED_PROPS_SYMBOL = Symbol.for('deprecatedProps');\nexport const ASYNC_DEFAULTS_SYMBOL = Symbol.for('asyncPropDefaults');\nexport const ASYNC_ORIGINAL_SYMBOL = Symbol.for('asyncPropOriginal');\nexport const ASYNC_RESOLVED_SYMBOL = Symbol.for('asyncPropResolved');\n//# sourceMappingURL=constants.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/**\n * Flattens a nested array into a single level array,\n * or a single value into an array with one value\n * @example flatten([[1, [2]], [3], 4]) => [1, 2, 3, 4]\n * @example flatten(1) => [1]\n * @param array The array to flatten.\n * @param filter= - Optional predicate called on each `value` to\n *   determine if it should be included (pushed onto) the resulting array.\n * @return Returns the new flattened array (new array or `result` if provided)\n */\nexport function flatten(array, filter = () => true) {\n    // Wrap single object in array\n    if (!Array.isArray(array)) {\n        return filter(array) ? [array] : [];\n    }\n    // Deep flatten and filter the array\n    return flattenArray(array, filter, []);\n}\n/** Deep flattens an array. Helper to `flatten`, see its parameters */\nfunction flattenArray(array, filter, result) {\n    let index = -1;\n    while (++index < array.length) {\n        const value = array[index];\n        if (Array.isArray(value)) {\n            flattenArray(value, filter, result);\n        }\n        else if (filter(value)) {\n            result.push(value);\n        }\n    }\n    return result;\n}\n/** Uses copyWithin to significantly speed up typed array value filling */\nexport function fillArray({ target, source, start = 0, count = 1 }) {\n    const length = source.length;\n    const total = count * length;\n    let copied = 0;\n    for (let i = start; copied < length; copied++) {\n        target[i++] = source[copied];\n    }\n    while (copied < total) {\n        // If we have copied less than half, copy everything we got\n        // else copy remaining in one operation\n        if (copied < total - copied) {\n            target.copyWithin(start + copied, start, start + copied);\n            copied *= 2;\n        }\n        else {\n            target.copyWithin(start + copied, start, start + total - copied);\n            copied = total;\n        }\n    }\n    return target;\n}\n//# sourceMappingURL=flatten.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/**\n * Fast partial deep equal for prop.\n *\n * @param a Prop\n * @param b Prop to compare against `a`\n * @param depth Depth to which to recurse in nested Objects/Arrays. Use 0 (default) for shallow comparison, -1 for infinite depth\n */\n/* eslint-disable complexity */\nexport function deepEqual(a, b, depth) {\n    if (a === b) {\n        return true;\n    }\n    if (!depth || !a || !b) {\n        return false;\n    }\n    if (Array.isArray(a)) {\n        if (!Array.isArray(b) || a.length !== b.length) {\n            return false;\n        }\n        for (let i = 0; i < a.length; i++) {\n            if (!deepEqual(a[i], b[i], depth - 1)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    if (Array.isArray(b)) {\n        return false;\n    }\n    if (typeof a === 'object' && typeof b === 'object') {\n        const aKeys = Object.keys(a);\n        const bKeys = Object.keys(b);\n        if (aKeys.length !== bKeys.length) {\n            return false;\n        }\n        for (const key of aKeys) {\n            if (!b.hasOwnProperty(key)) {\n                return false;\n            }\n            if (!deepEqual(a[key], b[key], depth - 1)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n}\n//# sourceMappingURL=deep-equal.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport default class Transition {\n    /**\n     * @params timeline {Timeline}\n     */\n    constructor(timeline) {\n        this._inProgress = false;\n        this._handle = null;\n        this.time = 0;\n        // @ts-expect-error\n        this.settings = {\n            duration: 0\n        };\n        this._timeline = timeline;\n    }\n    /* Public API */\n    get inProgress() {\n        return this._inProgress;\n    }\n    /**\n     * (re)start this transition.\n     * @params props {object} - optional overriding props. see constructor\n     */\n    start(settings) {\n        this.cancel();\n        // @ts-expect-error\n        this.settings = settings;\n        this._inProgress = true;\n        this.settings.onStart?.(this);\n    }\n    /**\n     * end this transition if it is in progress.\n     */\n    end() {\n        if (this._inProgress) {\n            this._timeline.removeChannel(this._handle);\n            this._handle = null;\n            this._inProgress = false;\n            this.settings.onEnd?.(this);\n        }\n    }\n    /**\n     * cancel this transition if it is in progress.\n     */\n    cancel() {\n        if (this._inProgress) {\n            this.settings.onInterrupt?.(this);\n            this._timeline.removeChannel(this._handle);\n            this._handle = null;\n            this._inProgress = false;\n        }\n    }\n    /**\n     * update this transition. Returns `true` if updated.\n     */\n    update() {\n        if (!this._inProgress) {\n            return false;\n        }\n        // It is important to initialize the handle during `update` instead of `start`.\n        // The CPU time that the `start` frame takes should not be counted towards the duration.\n        // On the other hand, `update` always happens during a render cycle. The clock starts when the\n        // transition is rendered for the first time.\n        if (this._handle === null) {\n            const { _timeline: timeline, settings } = this;\n            this._handle = timeline.addChannel({\n                delay: timeline.getTime(),\n                duration: settings.duration\n            });\n        }\n        this.time = this._timeline.getTime(this._handle);\n        // Call subclass method\n        this._onUpdate();\n        // Call user callback\n        this.settings.onUpdate?.(this);\n        // This only works if `settings.duration` is set\n        // Spring transition must call `end` manually\n        if (this._timeline.isFinished(this._handle)) {\n            this.end();\n        }\n        return true;\n    }\n    /* Private API */\n    _onUpdate() {\n        // for subclass override\n    }\n}\n//# sourceMappingURL=transition.js.map","// deck.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Replacement for the external assert method to reduce bundle size\n// Note: We don't use the second \"message\" argument in calling code,\n// so no need to support it here\nexport default function assert(condition, message) {\n    if (!condition) {\n        throw new Error(message || 'deck.gl: assertion failed.');\n    }\n}\n//# sourceMappingURL=assert.js.map"],"mappings":"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"}